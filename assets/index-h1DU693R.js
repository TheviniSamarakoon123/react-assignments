(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function r1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Fb={exports:{}},Xg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function TU(){if(sT)return Xg;sT=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,i){var s=null;if(i!==void 0&&(s=""+i),r.key!==void 0&&(s=""+r.key),"key"in r){i={};for(var o in r)o!=="key"&&(i[o]=r[o])}else i=r;return r=i.ref,{$$typeof:a,type:n,key:s,ref:r!==void 0?r:null,props:i}}return Xg.Fragment=e,Xg.jsx=t,Xg.jsxs=t,Xg}var oT;function NU(){return oT||(oT=1,Fb.exports=TU()),Fb.exports}var x=NU(),kb={exports:{}},Tn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function CU(){if(lT)return Tn;lT=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=h&&z[h]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function b(z,J,le){this.props=z,this.context=J,this.refs=E,this.updater=le||v}b.prototype.isReactComponent={},b.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=b.prototype;function R(z,J,le){this.props=z,this.context=J,this.refs=E,this.updater=le||v}var T=R.prototype=new _;T.constructor=R,A(T,b.prototype),T.isPureReactComponent=!0;var M=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function B(z,J,le,ce,xe,fe){return le=fe.ref,{$$typeof:a,type:z,key:J,ref:le!==void 0?le:null,props:fe}}function F(z,J){return B(z.type,J,void 0,void 0,void 0,z.props)}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===a}function U(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(le){return J[le]})}var j=/\/+/g;function W(z,J){return typeof z=="object"&&z!==null&&z.key!=null?U(""+z.key):J.toString(36)}function Q(){}function $(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Q,Q):(z.status="pending",z.then(function(J){z.status==="pending"&&(z.status="fulfilled",z.value=J)},function(J){z.status==="pending"&&(z.status="rejected",z.reason=J)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function re(z,J,le,ce,xe){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var _e=!1;if(z===null)_e=!0;else switch(fe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(z.$$typeof){case a:case e:_e=!0;break;case d:return _e=z._init,re(_e(z._payload),J,le,ce,xe)}}if(_e)return xe=xe(z),_e=ce===""?"."+W(z,0):ce,M(xe)?(le="",_e!=null&&(le=_e.replace(j,"$&/")+"/"),re(xe,J,le,"",function(Ue){return Ue})):xe!=null&&(L(xe)&&(xe=F(xe,le+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(j,"$&/")+"/")+_e)),J.push(xe)),1;_e=0;var Ie=ce===""?".":ce+":";if(M(z))for(var Ge=0;Ge<z.length;Ge++)ce=z[Ge],fe=Ie+W(ce,Ge),_e+=re(ce,J,le,fe,xe);else if(Ge=m(z),typeof Ge=="function")for(z=Ge.call(z),Ge=0;!(ce=z.next()).done;)ce=ce.value,fe=Ie+W(ce,Ge++),_e+=re(ce,J,le,fe,xe);else if(fe==="object"){if(typeof z.then=="function")return re($(z),J,le,ce,xe);throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return _e}function G(z,J,le){if(z==null)return z;var ce=[],xe=0;return re(z,ce,"","",function(fe){return J.call(le,fe,xe++)}),ce}function Y(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(le){(z._status===0||z._status===-1)&&(z._status=1,z._result=le)},function(le){(z._status===0||z._status===-1)&&(z._status=2,z._result=le)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var K=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function X(){}return Tn.Children={map:G,forEach:function(z,J,le){G(z,function(){J.apply(this,arguments)},le)},count:function(z){var J=0;return G(z,function(){J++}),J},toArray:function(z){return G(z,function(J){return J})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Tn.Component=b,Tn.Fragment=t,Tn.Profiler=r,Tn.PureComponent=R,Tn.StrictMode=n,Tn.Suspense=l,Tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Tn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return I.H.useMemoCache(z)}},Tn.cache=function(z){return function(){return z.apply(null,arguments)}},Tn.cloneElement=function(z,J,le){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ce=A({},z.props),xe=z.key,fe=void 0;if(J!=null)for(_e in J.ref!==void 0&&(fe=void 0),J.key!==void 0&&(xe=""+J.key),J)!P.call(J,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&J.ref===void 0||(ce[_e]=J[_e]);var _e=arguments.length-2;if(_e===1)ce.children=le;else if(1<_e){for(var Ie=Array(_e),Ge=0;Ge<_e;Ge++)Ie[Ge]=arguments[Ge+2];ce.children=Ie}return B(z.type,xe,void 0,void 0,fe,ce)},Tn.createContext=function(z){return z={$$typeof:s,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:i,_context:z},z},Tn.createElement=function(z,J,le){var ce,xe={},fe=null;if(J!=null)for(ce in J.key!==void 0&&(fe=""+J.key),J)P.call(J,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(xe[ce]=J[ce]);var _e=arguments.length-2;if(_e===1)xe.children=le;else if(1<_e){for(var Ie=Array(_e),Ge=0;Ge<_e;Ge++)Ie[Ge]=arguments[Ge+2];xe.children=Ie}if(z&&z.defaultProps)for(ce in _e=z.defaultProps,_e)xe[ce]===void 0&&(xe[ce]=_e[ce]);return B(z,fe,void 0,void 0,null,xe)},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(z){return{$$typeof:o,render:z}},Tn.isValidElement=L,Tn.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:Y}},Tn.memo=function(z,J){return{$$typeof:c,type:z,compare:J===void 0?null:J}},Tn.startTransition=function(z){var J=I.T,le={};I.T=le;try{var ce=z(),xe=I.S;xe!==null&&xe(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(X,K)}catch(fe){K(fe)}finally{I.T=J}},Tn.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Tn.use=function(z){return I.H.use(z)},Tn.useActionState=function(z,J,le){return I.H.useActionState(z,J,le)},Tn.useCallback=function(z,J){return I.H.useCallback(z,J)},Tn.useContext=function(z){return I.H.useContext(z)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(z,J){return I.H.useDeferredValue(z,J)},Tn.useEffect=function(z,J,le){var ce=I.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(z,J)},Tn.useId=function(){return I.H.useId()},Tn.useImperativeHandle=function(z,J,le){return I.H.useImperativeHandle(z,J,le)},Tn.useInsertionEffect=function(z,J){return I.H.useInsertionEffect(z,J)},Tn.useLayoutEffect=function(z,J){return I.H.useLayoutEffect(z,J)},Tn.useMemo=function(z,J){return I.H.useMemo(z,J)},Tn.useOptimistic=function(z,J){return I.H.useOptimistic(z,J)},Tn.useReducer=function(z,J,le){return I.H.useReducer(z,J,le)},Tn.useRef=function(z){return I.H.useRef(z)},Tn.useState=function(z){return I.H.useState(z)},Tn.useSyncExternalStore=function(z,J,le){return I.H.useSyncExternalStore(z,J,le)},Tn.useTransition=function(){return I.H.useTransition()},Tn.version="19.1.1",Tn}var cT;function b0(){return cT||(cT=1,kb.exports=CU()),kb.exports}var H=b0();const IU=r1(H);var Hb={exports:{}},Jg={},jb={exports:{}},zb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function DU(){return uT||(uT=1,function(a){function e(G,Y){var K=G.length;G.push(Y);e:for(;0<K;){var X=K-1>>>1,z=G[X];if(0<r(z,Y))G[X]=Y,G[K]=z,K=X;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Y=G[0],K=G.pop();if(K!==Y){G[0]=K;e:for(var X=0,z=G.length,J=z>>>1;X<J;){var le=2*(X+1)-1,ce=G[le],xe=le+1,fe=G[xe];if(0>r(ce,K))xe<z&&0>r(fe,ce)?(G[X]=fe,G[xe]=K,X=xe):(G[X]=ce,G[le]=K,X=le);else if(xe<z&&0>r(fe,K))G[X]=fe,G[xe]=K,X=xe;else break e}}return Y}function r(G,Y){var K=G.sortIndex-Y.sortIndex;return K!==0?K:G.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();a.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,A=!1,E=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var Y=t(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=G)n(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function I(G){if(E=!1,M(G),!A)if(t(l)!==null)A=!0,P||(P=!0,W());else{var Y=t(c);Y!==null&&re(I,Y.startTime-G)}}var P=!1,B=-1,F=5,L=-1;function U(){return b?!0:!(a.unstable_now()-L<F)}function j(){if(b=!1,P){var G=a.unstable_now();L=G;var Y=!0;try{e:{A=!1,E&&(E=!1,R(B),B=-1),v=!0;var K=m;try{t:{for(M(G),h=t(l);h!==null&&!(h.expirationTime>G&&U());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var z=X(h.expirationTime<=G);if(G=a.unstable_now(),typeof z=="function"){h.callback=z,M(G),Y=!0;break t}h===t(l)&&n(l),M(G)}else n(l);h=t(l)}if(h!==null)Y=!0;else{var J=t(c);J!==null&&re(I,J.startTime-G),Y=!1}}break e}finally{h=null,m=K,v=!1}Y=void 0}}finally{Y?W():P=!1}}}var W;if(typeof T=="function")W=function(){T(j)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,$=Q.port2;Q.port1.onmessage=j,W=function(){$.postMessage(null)}}else W=function(){_(j,0)};function re(G,Y){B=_(function(){G(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return m},a.unstable_next=function(G){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var K=m;m=Y;try{return G()}finally{m=K}},a.unstable_requestPaint=function(){b=!0},a.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var K=m;m=G;try{return Y()}finally{m=K}},a.unstable_scheduleCallback=function(G,Y,K){var X=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,G){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,G={id:d++,callback:Y,priorityLevel:G,startTime:K,expirationTime:z,sortIndex:-1},K>X?(G.sortIndex=K,e(c,G),t(l)===null&&G===t(c)&&(E?(R(B),B=-1):E=!0,re(I,K-X))):(G.sortIndex=z,e(l,G),A||v||(A=!0,P||(P=!0,W()))),G},a.unstable_shouldYield=U,a.unstable_wrapCallback=function(G){var Y=m;return function(){var K=m;m=Y;try{return G.apply(this,arguments)}finally{m=K}}}}(zb)),zb}var dT;function LU(){return dT||(dT=1,jb.exports=DU()),jb.exports}var Gb={exports:{}},Si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function PU(){if(fT)return Si;fT=1;var a=b0();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var s=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Si.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return i(l,c,null,d)},Si.flushSync=function(l){var c=s.T,d=n.p;try{if(s.T=null,n.p=2,l)return l()}finally{s.T=c,n.p=d,n.d.f()}},Si.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Si.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Si.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:v}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Si.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Si.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Si.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Si.requestFormReset=function(l){n.d.r(l)},Si.unstable_batchedUpdates=function(l,c){return l(c)},Si.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},Si.useFormStatus=function(){return s.H.useHostTransitionStatus()},Si.version="19.1.1",Si}var hT;function OU(){if(hT)return Gb.exports;hT=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Gb.exports=PU(),Gb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT;function UU(){if(pT)return Jg;pT=1;var a=LU(),e=b0(),t=OU();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function s(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(i(u)!==u)throw Error(n(188))}function l(u){var f=u.alternate;if(!f){if(f=i(u),f===null)throw Error(n(188));return f!==u?null:u}for(var y=u,S=f;;){var N=y.return;if(N===null)break;var D=N.alternate;if(D===null){if(S=N.return,S!==null){y=S;continue}break}if(N.child===D.child){for(D=N.child;D;){if(D===y)return o(N),u;if(D===S)return o(N),f;D=D.sibling}throw Error(n(188))}if(y.return!==S.return)y=N,S=D;else{for(var V=!1,Z=N.child;Z;){if(Z===y){V=!0,y=N,S=D;break}if(Z===S){V=!0,S=N,y=D;break}Z=Z.sibling}if(!V){for(Z=D.child;Z;){if(Z===y){V=!0,y=D,S=N;break}if(Z===S){V=!0,S=D,y=N;break}Z=Z.sibling}if(!V)throw Error(n(189))}}if(y.alternate!==S)throw Error(n(190))}if(y.tag!==3)throw Error(n(188));return y.stateNode.current===y?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(u){return u===null||typeof u!="object"?null:(u=j&&u[j]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Symbol.for("react.client.reference");function $(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case A:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case L:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case v:return"Portal";case T:return(u.displayName||"Context")+".Provider";case R:return(u._context.displayName||"Context")+".Consumer";case M:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case B:return f=u.displayName||null,f!==null?f:$(u.type)||"Memo";case F:f=u._payload,u=u._init;try{return $(u(f))}catch{}}return null}var re=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],z=-1;function J(u){return{current:u}}function le(u){0>z||(u.current=X[z],X[z]=null,z--)}function ce(u,f){z++,X[z]=u.current,u.current=f}var xe=J(null),fe=J(null),_e=J(null),Ie=J(null);function Ge(u,f){switch(ce(_e,f),ce(fe,u),ce(xe,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?PM(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=PM(f),u=OM(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}le(xe),ce(xe,u)}function Ue(){le(xe),le(fe),le(_e)}function $e(u){u.memoizedState!==null&&ce(Ie,u);var f=xe.current,y=OM(f,u.type);f!==y&&(ce(fe,u),ce(xe,y))}function dt(u){fe.current===u&&(le(xe),le(fe)),Ie.current===u&&(le(Ie),Vg._currentValue=K)}var ct=Object.prototype.hasOwnProperty,se=a.unstable_scheduleCallback,Be=a.unstable_cancelCallback,Le=a.unstable_shouldYield,Ke=a.unstable_requestPaint,ze=a.unstable_now,ot=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,st=a.unstable_UserBlockingPriority,Ot=a.unstable_NormalPriority,zt=a.unstable_LowPriority,ie=a.unstable_IdlePriority,q=a.log,be=a.unstable_setDisableYieldValue,je=null,Ye=null;function Pe(u){if(typeof q=="function"&&be(u),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(je,u)}catch{}}var _t=Math.clz32?Math.clz32:Dt,mt=Math.log,Ct=Math.LN2;function Dt(u){return u>>>=0,u===0?32:31-(mt(u)/Ct|0)|0}var rt=256,gt=4194304;function Lt(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ue(u,f,y){var S=u.pendingLanes;if(S===0)return 0;var N=0,D=u.suspendedLanes,V=u.pingedLanes;u=u.warmLanes;var Z=S&134217727;return Z!==0?(S=Z&~D,S!==0?N=Lt(S):(V&=Z,V!==0?N=Lt(V):y||(y=Z&~u,y!==0&&(N=Lt(y))))):(Z=S&~D,Z!==0?N=Lt(Z):V!==0?N=Lt(V):y||(y=S&~u,y!==0&&(N=Lt(y)))),N===0?0:f!==0&&f!==N&&!(f&D)&&(D=N&-N,y=f&-f,D>=y||D===32&&(y&4194048)!==0)?f:N}function Me(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function ft(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pe(){var u=rt;return rt<<=1,!(rt&4194048)&&(rt=256),u}function nt(){var u=gt;return gt<<=1,!(gt&62914560)&&(gt=4194304),u}function ut(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function bt(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function lt(u,f,y,S,N,D){var V=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var Z=u.entanglements,de=u.expirationTimes,Ne=u.hiddenUpdates;for(y=V&~y;0<y;){var Je=31-_t(y),at=1<<Je;Z[Je]=0,de[Je]=-1;var De=Ne[Je];if(De!==null)for(Ne[Je]=null,Je=0;Je<De.length;Je++){var Fe=De[Je];Fe!==null&&(Fe.lane&=-536870913)}y&=~at}S!==0&&et(u,S,0),D!==0&&N===0&&u.tag!==0&&(u.suspendedLanes|=D&~(V&~f))}function et(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var S=31-_t(f);u.entangledLanes|=f,u.entanglements[S]=u.entanglements[S]|1073741824|y&4194090}function wt(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var S=31-_t(y),N=1<<S;N&f|u[S]&f&&(u[S]|=f),y&=~N}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function En(u){return u&=-u,2<u?8<u?u&134217727?32:268435456:8:2}function mn(){var u=Y.p;return u!==0?u:(u=window.event,u===void 0?32:eT(u.type))}function fr(u,f){var y=Y.p;try{return Y.p=u,f()}finally{Y.p=y}}var xa=Math.random().toString(36).slice(2),Ya="__reactFiber$"+xa,Ea="__reactProps$"+xa,ls="__reactContainer$"+xa,Bi="__reactEvents$"+xa,uf="__reactListeners$"+xa,Fi="__reactHandles$"+xa,ki="__reactResources$"+xa,Hi="__reactMarker$"+xa;function ha(u){delete u[Ya],delete u[Ea],delete u[Bi],delete u[uf],delete u[Fi]}function Os(u){var f=u[Ya];if(f)return f;for(var y=u.parentNode;y;){if(f=y[ls]||y[Ya]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=kM(u);u!==null;){if(y=u[Ya])return y;u=kM(u)}return f}u=y,y=u.parentNode}return null}function co(u){if(u=u[Ya]||u[ls]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Cl(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function jo(u){var f=u[ki];return f||(f=u[ki]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function qa(u){u[Hi]=!0}var Ou=new Set,Uu={};function ee(u,f){ye(u,f),ye(u+"Capture",f)}function ye(u,f){for(Uu[u]=f,u=0;u<f.length;u++)Ou.add(f[u])}var Re=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oe={},Se={};function ht(u){return ct.call(Se,u)?!0:ct.call(Oe,u)?!1:Re.test(u)?Se[u]=!0:(Oe[u]=!0,!1)}function yt(u,f,y){if(ht(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function It(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function St(u,f,y,S){if(S===null)u.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+S)}}var qt,Qt;function Ht(u){if(qt===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);qt=f&&f[1]||"",Qt=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qt+u+Qt}var An=!1;function zn(u,f){if(!u||An)return"";An=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Fe){var De=Fe}Reflect.construct(u,[],at)}else{try{at.call()}catch(Fe){De=Fe}u.call(at.prototype)}}else{try{throw Error()}catch(Fe){De=Fe}(at=u())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Fe){if(Fe&&De&&typeof Fe.stack=="string")return[Fe.stack,De.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=S.DetermineComponentFrameRoot(),V=D[0],Z=D[1];if(V&&Z){var de=V.split(`
`),Ne=Z.split(`
`);for(N=S=0;S<de.length&&!de[S].includes("DetermineComponentFrameRoot");)S++;for(;N<Ne.length&&!Ne[N].includes("DetermineComponentFrameRoot");)N++;if(S===de.length||N===Ne.length)for(S=de.length-1,N=Ne.length-1;1<=S&&0<=N&&de[S]!==Ne[N];)N--;for(;1<=S&&0<=N;S--,N--)if(de[S]!==Ne[N]){if(S!==1||N!==1)do if(S--,N--,0>N||de[S]!==Ne[N]){var Je=`
`+de[S].replace(" at new "," at ");return u.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",u.displayName)),Je}while(1<=S&&0<=N);break}}}finally{An=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?Ht(y):""}function Aa(u){switch(u.tag){case 26:case 27:case 5:return Ht(u.type);case 16:return Ht("Lazy");case 13:return Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return zn(u.type,!1);case 11:return zn(u.type.render,!1);case 1:return zn(u.type,!0);case 31:return Ht("Activity");default:return""}}function ta(u){try{var f="";do f+=Aa(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function gn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Xt(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function _a(u){var f=Xt(u)?"checked":"value",y=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),S=""+u[f];if(!u.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var N=y.get,D=y.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return N.call(this)},set:function(V){S=""+V,D.call(this,V)}}),Object.defineProperty(u,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(V){S=""+V},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function In(u){u._valueTracker||(u._valueTracker=_a(u))}function Ar(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return u&&(S=Xt(u)?u.checked?"true":"false":u.value),u=S,u!==y?(f.setValue(u),!0):!1}function cs(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var _r=/[\n"\\]/g;function nr(u){return u.replace(_r,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function ia(u,f,y,S,N,D,V,Z){u.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?u.type=V:u.removeAttribute("type"),f!=null?V==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+gn(f)):u.value!==""+gn(f)&&(u.value=""+gn(f)):V!=="submit"&&V!=="reset"||u.removeAttribute("value"),f!=null?br(u,V,gn(f)):y!=null?br(u,V,gn(y)):S!=null&&u.removeAttribute("value"),N==null&&D!=null&&(u.defaultChecked=!!D),N!=null&&(u.checked=N&&typeof N!="function"&&typeof N!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.name=""+gn(Z):u.removeAttribute("name")}function Gr(u,f,y,S,N,D,V,Z){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.type=D),f!=null||y!=null){if(!(D!=="submit"&&D!=="reset"||f!=null))return;y=y!=null?""+gn(y):"",f=f!=null?""+gn(f):y,Z||f===u.value||(u.value=f),u.defaultValue=f}S=S??N,S=typeof S!="function"&&typeof S!="symbol"&&!!S,u.checked=Z?u.checked:!!S,u.defaultChecked=!!S,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(u.name=V)}function br(u,f,y){f==="number"&&cs(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function Ma(u,f,y,S){if(u=u.options,f){f={};for(var N=0;N<y.length;N++)f["$"+y[N]]=!0;for(y=0;y<u.length;y++)N=f.hasOwnProperty("$"+u[y].value),u[y].selected!==N&&(u[y].selected=N),N&&S&&(u[y].defaultSelected=!0)}else{for(y=""+gn(y),f=null,N=0;N<u.length;N++){if(u[N].value===y){u[N].selected=!0,S&&(u[N].defaultSelected=!0);return}f!==null||u[N].disabled||(f=u[N])}f!==null&&(f.selected=!0)}}function Sr(u,f,y){if(f!=null&&(f=""+gn(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+gn(y):""}function Oc(u,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(n(92));if(re(S)){if(1<S.length)throw Error(n(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=gn(f),u.defaultValue=y,S=u.textContent,S===y&&S!==""&&S!==null&&(u.value=S)}function ar(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var I1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function df(u,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":S?u.setProperty(f,y):typeof y!="number"||y===0||I1.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function ff(u,f,y){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?u.setProperty(S,""):S==="float"?u.cssFloat="":u[S]="");for(var N in f)S=f[N],f.hasOwnProperty(N)&&y[N]!==S&&df(u,N,S)}else for(var D in f)f.hasOwnProperty(D)&&df(u,D,f[D])}function lp(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hf(u){return D1.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var cp=null;function up(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Il=null,Uc=null;function B0(u){var f=co(u);if(f&&(u=f.stateNode)){var y=u[Ea]||null;e:switch(u=f.stateNode,f.type){case"input":if(ia(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+nr(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==u&&S.form===u.form){var N=S[Ea]||null;if(!N)throw Error(n(90));ia(S,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===u.form&&Ar(S)}break e;case"textarea":Sr(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&Ma(u,!!y.multiple,f,!1)}}}var pf=!1;function F0(u,f,y){if(pf)return u(f,y);pf=!0;try{var S=u(f);return S}finally{if(pf=!1,(Il!==null||Uc!==null)&&(Ro(),Il&&(f=Il,u=Uc,Uc=Il=null,B0(f),u)))for(f=0;f<u.length;f++)B0(u[f])}}function Bu(u,f){var y=u.stateNode;if(y===null)return null;var S=y[Ea]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(n(231,f,typeof y));return y}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mf=!1;if(uo)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){mf=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{mf=!1}var zo=null,k0=null,dp=null;function H0(){if(dp)return dp;var u,f=k0,y=f.length,S,N="value"in zo?zo.value:zo.textContent,D=N.length;for(u=0;u<y&&f[u]===N[u];u++);var V=y-u;for(S=1;S<=V&&f[y-S]===N[D-S];S++);return dp=N.slice(u,1<S?1-S:void 0)}function Dl(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function ku(){return!0}function gf(){return!1}function ti(u){function f(y,S,N,D,V){this._reactName=y,this._targetInst=N,this.type=S,this.nativeEvent=D,this.target=V,this.currentTarget=null;for(var Z in u)u.hasOwnProperty(Z)&&(y=u[Z],this[Z]=y?y(D):D[Z]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?ku:gf,this.isPropagationStopped=gf,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=ku)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=ku)},persist:function(){},isPersistent:ku}),f}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=ti(Ll),ju=d({},Ll,{view:0,detail:0}),L1=ti(ju),Go,zu,Gu,Vu=d({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yf,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Gu&&(Gu&&u.type==="mousemove"?(Go=u.screenX-Gu.screenX,zu=u.screenY-Gu.screenY):zu=Go=0,Gu=u),Go)},movementY:function(u){return"movementY"in u?u.movementY:zu}}),j0=ti(Vu),P1=d({},Vu,{dataTransfer:0}),nb=ti(P1),Er=d({},ju,{relatedTarget:0}),fp=ti(Er),O1=d({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),U1=ti(O1),B1=d({},Ll,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),F1=ti(B1),vf=d({},Ll,{data:0}),hp=ti(vf),k1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=j1[u])?!!f[u]:!1}function yf(){return z0}var z1=d({},ju,{key:function(u){if(u.key){var f=k1[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Dl(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?H1[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yf,charCode:function(u){return u.type==="keypress"?Dl(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Dl(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),G0=ti(z1),V0=d({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=ti(V0),G1=d({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yf}),W0=ti(G1),V1=d({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vo=ti(V1),K0=d({},Vu,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ab=ti(K0),W1=d({},Ll,{newState:0,oldState:0}),Pl=ti(W1),Wo=[9,13,27,32],xf=uo&&"CompositionEvent"in window,Bc=null;uo&&"documentMode"in document&&(Bc=document.documentMode);var Af=uo&&"TextEvent"in window&&!Bc,_f=uo&&(!xf||Bc&&8<Bc&&11>=Bc),Ol=" ",wr=!1;function bf(u,f){switch(u){case"keyup":return Wo.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y0(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ul=!1;function Sf(u,f){switch(u){case"compositionend":return Y0(f);case"keypress":return f.which!==32?null:(wr=!0,Ol);case"textInput":return u=f.data,u===Ol&&wr?null:u;default:return null}}function q0(u,f){if(Ul)return u==="compositionend"||!xf&&bf(u,f)?(u=H0(),dp=k0=zo=null,Ul=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return _f&&f.locale!=="ko"?null:f.data;default:return null}}var mp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!mp[u.type]:f==="textarea"}function mi(u,f,y,S){Il?Uc?Uc.push(S):Uc=[S]:Il=S,f=Vy(f,"onChange"),0<f.length&&(y=new Hu("onChange","change",null,y,S),u.push({event:y,listeners:f}))}var Wu=null,Fc=null;function K1(u){NM(u,0)}function Ef(u){var f=Cl(u);if(Ar(f))return u}function gp(u,f){if(u==="change")return f}var vp=!1;if(uo){var yp;if(uo){var Ku="oninput"in document;if(!Ku){var Yu=document.createElement("div");Yu.setAttribute("oninput","return;"),Ku=typeof Yu.oninput=="function"}yp=Ku}else yp=!1;vp=yp&&(!document.documentMode||9<document.documentMode)}function wa(){Wu&&(Wu.detachEvent("onpropertychange",Y1),Fc=Wu=null)}function Y1(u){if(u.propertyName==="value"&&Ef(Fc)){var f=[];mi(f,Fc,u,up(u)),F0(K1,f)}}function rb(u,f,y){u==="focusin"?(wa(),Wu=f,Fc=y,Wu.attachEvent("onpropertychange",Y1)):u==="focusout"&&wa()}function q1(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ef(Fc)}function wf(u,f){if(u==="click")return Ef(f)}function Bl(u,f){if(u==="input"||u==="change")return Ef(f)}function X1(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var gi=typeof Object.is=="function"?Object.is:X1;function Us(u,f){if(gi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var N=y[S];if(!ct.call(f,N)||!gi(u[N],f[N]))return!1}return!0}function vi(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function J0(u,f){var y=vi(u);u=0;for(var S;y;){if(y.nodeType===3){if(S=u+y.textContent.length,u<=f&&S>=f)return{node:y,offset:f-u};u=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=vi(y)}}function Z0(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?Z0(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function Q0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=cs(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=cs(u.document)}return f}function Rf(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var $0=uo&&"documentMode"in document&&11>=document.documentMode,Ko=null,xp=null,Mf=null,Ap=!1;function eg(u,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Ap||Ko==null||Ko!==cs(S)||(S=Ko,"selectionStart"in S&&Rf(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Mf&&Us(Mf,S)||(Mf=S,S=Vy(xp,"onSelect"),0<S.length&&(f=new Hu("onSelect","select",null,f,y),u.push({event:f,listeners:S}),f.target=Ko)))}function Rr(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var Fl={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},_p={},J1={};uo&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Yo(u){if(_p[u])return _p[u];if(!Fl[u])return u;var f=Fl[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in J1)return _p[u]=f[y];return u}var ni=Yo("animationend"),tg=Yo("animationiteration"),yi=Yo("animationstart"),Z1=Yo("transitionrun"),qo=Yo("transitionstart"),qu=Yo("transitioncancel"),Xo=Yo("transitionend"),bp=new Map,Tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tf.push("scrollEnd");function hr(u,f){bp.set(u,f),ee(f,[u])}var ng=new WeakMap;function Mr(u,f){if(typeof u=="object"&&u!==null){var y=ng.get(u);return y!==void 0?y:(f={value:u,source:f,stack:ta(f)},ng.set(u,f),f)}return{value:u,source:f,stack:ta(f)}}var Vr=[],us=0,Sp=0;function Nf(){for(var u=us,f=Sp=us=0;f<u;){var y=Vr[f];Vr[f++]=null;var S=Vr[f];Vr[f++]=null;var N=Vr[f];Vr[f++]=null;var D=Vr[f];if(Vr[f++]=null,S!==null&&N!==null){var V=S.pending;V===null?N.next=N:(N.next=V.next,V.next=N),S.pending=N}D!==0&&ag(y,N,D)}}function kl(u,f,y,S){Vr[us++]=u,Vr[us++]=f,Vr[us++]=y,Vr[us++]=S,Sp|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function Ep(u,f,y,S){return kl(u,f,y,S),Xu(u)}function Jo(u,f){return kl(u,null,null,f),Xu(u)}function ag(u,f,y){u.lanes|=y;var S=u.alternate;S!==null&&(S.lanes|=y);for(var N=!1,D=u.return;D!==null;)D.childLanes|=y,S=D.alternate,S!==null&&(S.childLanes|=y),D.tag===22&&(u=D.stateNode,u===null||u._visibility&1||(N=!0)),u=D,D=D.return;return u.tag===3?(D=u.stateNode,N&&f!==null&&(N=31-_t(y),u=D.hiddenUpdates,S=u[N],S===null?u[N]=[f]:S.push(f),f.lane=y|536870912),D):null}function Xu(u){if(50<wo)throw wo=0,nu=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Hl={};function rg(u,f,y,S){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(u,f,y,S){return new rg(u,f,y,S)}function Cf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ba(u,f){var y=u.alternate;return y===null?(y=xi(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function ig(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function pr(u,f,y,S,N,D){var V=0;if(S=u,typeof u=="function")Cf(u)&&(V=1);else if(typeof u=="string")V=mU(u,y,xe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case L:return u=xi(31,y,f,N),u.elementType=L,u.lanes=D,u;case A:return jl(y.children,N,D,f);case E:V=8,N|=24;break;case b:return u=xi(12,y,f,N|2),u.elementType=b,u.lanes=D,u;case I:return u=xi(13,y,f,N),u.elementType=I,u.lanes=D,u;case P:return u=xi(19,y,f,N),u.elementType=P,u.lanes=D,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case T:V=10;break e;case R:V=9;break e;case M:V=11;break e;case B:V=14;break e;case F:V=16,S=null;break e}V=29,y=Error(n(130,u===null?"null":typeof u,"")),S=null}return f=xi(V,y,f,N),f.elementType=u,f.type=S,f.lanes=D,f}function jl(u,f,y,S){return u=xi(7,u,S,f),u.lanes=y,u}function If(u,f,y){return u=xi(6,u,null,f),u.lanes=y,u}function wp(u,f,y){return f=xi(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var Ju=[],Ai=0,Df=null,Zu=0,Tr=[],ji=0,zl=null,fo=1,ho="";function Zo(u,f){Ju[Ai++]=Zu,Ju[Ai++]=Df,Df=u,Zu=f}function Rp(u,f,y){Tr[ji++]=fo,Tr[ji++]=ho,Tr[ji++]=zl,zl=u;var S=fo;u=ho;var N=32-_t(S)-1;S&=~(1<<N),y+=1;var D=32-_t(f)+N;if(30<D){var V=N-N%5;D=(S&(1<<V)-1).toString(32),S>>=V,N-=V,fo=1<<32-_t(f)+N|y<<N|S,ho=D+u}else fo=1<<D|y<<N|S,ho=u}function sg(u){u.return!==null&&(Zo(u,1),Rp(u,1,0))}function og(u){for(;u===Df;)Df=Ju[--Ai],Ju[Ai]=null,Zu=Ju[--Ai],Ju[Ai]=null;for(;u===zl;)zl=Tr[--ji],Tr[ji]=null,ho=Tr[--ji],Tr[ji]=null,fo=Tr[--ji],Tr[ji]=null}var ai=null,Ta=null,Kn=!1,ds=null,zi=!1,Mp=Error(n(519));function Gl(u){var f=Error(n(418,""));throw kc(Mr(f,u)),Mp}function Q1(u){var f=u.stateNode,y=u.type,S=u.memoizedProps;switch(f[Ya]=u,f[Ea]=S,y){case"dialog":Bn("cancel",f),Bn("close",f);break;case"iframe":case"object":case"embed":Bn("load",f);break;case"video":case"audio":for(y=0;y<Fg.length;y++)Bn(Fg[y],f);break;case"source":Bn("error",f);break;case"img":case"image":case"link":Bn("error",f),Bn("load",f);break;case"details":Bn("toggle",f);break;case"input":Bn("invalid",f),Gr(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),In(f);break;case"select":Bn("invalid",f);break;case"textarea":Bn("invalid",f),Oc(f,S.value,S.defaultValue,S.children),In(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||LM(f.textContent,y)?(S.popover!=null&&(Bn("beforetoggle",f),Bn("toggle",f)),S.onScroll!=null&&Bn("scroll",f),S.onScrollEnd!=null&&Bn("scrollend",f),S.onClick!=null&&(f.onclick=Wy),f=!0):f=!1,f||Gl(u)}function lg(u){for(ai=u.return;ai;)switch(ai.tag){case 5:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:ai=ai.return}}function Bs(u){if(u!==ai)return!1;if(!Kn)return lg(u),Kn=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||Eb(u.type,u.memoizedProps)),y=!y),y&&Ta&&Gl(u),lg(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(y=u.data,y==="/$"){if(f===0){Ta=dl(u.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;u=u.nextSibling}Ta=null}}else f===27?(f=Ta,bd(u.type)?(u=Tb,Tb=null,Ta=u):Ta=f):Ta=ai?dl(u.stateNode.nextSibling):null;return!0}function Qu(){Ta=ai=null,Kn=!1}function Zn(){var u=ds;return u!==null&&(en===null?en=u:en.push.apply(en,u),ds=null),u}function kc(u){ds===null?ds=[u]:ds.push(u)}var cg=J(null),Vl=null,Qo=null;function Wl(u,f,y){ce(cg,f._currentValue),f._currentValue=y}function $o(u){u._currentValue=cg.current,le(cg)}function ug(u,f,y){for(;u!==null;){var S=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),u===y)break;u=u.return}}function Lf(u,f,y,S){var N=u.child;for(N!==null&&(N.return=u);N!==null;){var D=N.dependencies;if(D!==null){var V=N.child;D=D.firstContext;e:for(;D!==null;){var Z=D;D=N;for(var de=0;de<f.length;de++)if(Z.context===f[de]){D.lanes|=y,Z=D.alternate,Z!==null&&(Z.lanes|=y),ug(D.return,y,u),S||(V=null);break e}D=Z.next}}else if(N.tag===18){if(V=N.return,V===null)throw Error(n(341));V.lanes|=y,D=V.alternate,D!==null&&(D.lanes|=y),ug(V,y,u),V=null}else V=N.child;if(V!==null)V.return=N;else for(V=N;V!==null;){if(V===u){V=null;break}if(N=V.sibling,N!==null){N.return=V.return,V=N;break}V=V.return}N=V}}function fs(u,f,y,S){u=null;for(var N=f,D=!1;N!==null;){if(!D){if(N.flags&524288)D=!0;else if(N.flags&262144)break}if(N.tag===10){var V=N.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var Z=N.type;gi(N.pendingProps.value,V.value)||(u!==null?u.push(Z):u=[Z])}}else if(N===Ie.current){if(V=N.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(u!==null?u.push(Vg):u=[Vg])}N=N.return}u!==null&&Lf(f,u,y,S),f.flags|=262144}function Pf(u){for(u=u.firstContext;u!==null;){if(!gi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function po(u){Vl=u,Qo=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Ia(u){return Tp(Vl,u)}function Of(u,f){return Vl===null&&po(u),Tp(u,f)}function Tp(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},Qo===null){if(u===null)throw Error(n(308));Qo=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else Qo=Qo.next=f;return y}var dg=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,S){u.push(S)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},ib=a.unstable_scheduleCallback,$1=a.unstable_NormalPriority,Xa={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Np(){return{controller:new dg,data:new Map,refCount:0}}function $u(u){u.refCount--,u.refCount===0&&ib($1,function(){u.controller.abort()})}var ed=null,Uf=0,vn=0,td=null;function Gi(u,f){if(ed===null){var y=ed=[];Uf=0,vn=mb(),td={status:"pending",value:void 0,then:function(S){y.push(S)}}}return Uf++,f.then(Cp,Cp),f}function Cp(){if(--Uf===0&&ed!==null){td!==null&&(td.status="fulfilled");var u=ed;ed=null,vn=0,td=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function sb(u,f){var y=[],S={status:"pending",value:null,reason:null,then:function(N){y.push(N)}};return u.then(function(){S.status="fulfilled",S.value=f;for(var N=0;N<y.length;N++)(0,y[N])(f)},function(N){for(S.status="rejected",S.reason=N,N=0;N<y.length;N++)(0,y[N])(void 0)}),S}var Bf=G.S;G.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Gi(u,f),Bf!==null&&Bf(u,f)};var hs=J(null);function Kl(){var u=hs.current;return u!==null?u:fn.pooledCache}function Ff(u,f){f===null?ce(hs,hs.current):ce(hs,f.pool)}function Ip(){var u=Kl();return u===null?null:{parent:Xa._currentValue,pool:u}}var kf=Error(n(460)),fg=Error(n(474)),Fs=Error(n(542)),Hf={then:function(){}};function Dp(u){return u=u.status,u==="fulfilled"||u==="rejected"}function nd(){}function Lp(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(nd,nd),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ey(u),u;default:if(typeof f.status=="string")f.then(nd,nd);else{if(u=fn,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(S){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=S}},function(S){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ey(u),u}throw ps=f,kf}}var ps=null;function hg(){if(ps===null)throw Error(n(459));var u=ps;return ps=null,u}function ey(u){if(u===kf||u===Fs)throw Error(n(483))}var el=!1;function pg(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sn(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function mo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function tl(u,f,y){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,Qn&2){var N=S.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),S.pending=f,f=Xu(u),ag(u,null,y),f}return kl(u,S,f,y),Xu(u)}function Hc(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,wt(u,y)}}function ad(u,f){var y=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var N=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var V={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?N=D=V:D=D.next=V,y=y.next}while(y!==null);D===null?N=D=f:D=D.next=f}else N=D=f;y={baseState:S.baseState,firstBaseUpdate:N,lastBaseUpdate:D,shared:S.shared,callbacks:S.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var mg=!1;function jf(){if(mg){var u=td;if(u!==null)throw u}}function rd(u,f,y,S){mg=!1;var N=u.updateQueue;el=!1;var D=N.firstBaseUpdate,V=N.lastBaseUpdate,Z=N.shared.pending;if(Z!==null){N.shared.pending=null;var de=Z,Ne=de.next;de.next=null,V===null?D=Ne:V.next=Ne,V=de;var Je=u.alternate;Je!==null&&(Je=Je.updateQueue,Z=Je.lastBaseUpdate,Z!==V&&(Z===null?Je.firstBaseUpdate=Ne:Z.next=Ne,Je.lastBaseUpdate=de))}if(D!==null){var at=N.baseState;V=0,Je=Ne=de=null,Z=D;do{var De=Z.lane&-536870913,Fe=De!==Z.lane;if(Fe?(Zt&De)===De:(S&De)===De){De!==0&&De===vn&&(mg=!0),Je!==null&&(Je=Je.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var un=u,an=Z;De=f;var ya=y;switch(an.tag){case 1:if(un=an.payload,typeof un=="function"){at=un.call(ya,at,De);break e}at=un;break e;case 3:un.flags=un.flags&-65537|128;case 0:if(un=an.payload,De=typeof un=="function"?un.call(ya,at,De):un,De==null)break e;at=d({},at,De);break e;case 2:el=!0}}De=Z.callback,De!==null&&(u.flags|=64,Fe&&(u.flags|=8192),Fe=N.callbacks,Fe===null?N.callbacks=[De]:Fe.push(De))}else Fe={lane:De,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Je===null?(Ne=Je=Fe,de=at):Je=Je.next=Fe,V|=De;if(Z=Z.next,Z===null){if(Z=N.shared.pending,Z===null)break;Fe=Z,Z=Fe.next,Fe.next=null,N.lastBaseUpdate=Fe,N.shared.pending=null}}while(!0);Je===null&&(de=at),N.baseState=de,N.firstBaseUpdate=Ne,N.lastBaseUpdate=Je,D===null&&(N.shared.lanes=0),Ks|=V,u.lanes=V,u.memoizedState=at}}function id(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function ty(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)id(y[u],f)}var sd=J(null),Pp=J(0);function ny(u,f){u=As,ce(Pp,u),ce(sd,f),As=u|f.baseLanes}function gg(){ce(Pp,As),ce(sd,sd.current)}function zf(){As=Pp.current,le(sd),le(Pp)}var nl=0,yn=null,na=null,Ja=null,Op=!1,Yl=!1,ri=!1,rr=0,ms=0,Nr=null,ay=0;function Fa(){throw Error(n(321))}function Wr(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!gi(u[y],f[y]))return!1;return!0}function al(u,f,y,S,N,D){return nl=D,yn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,G.H=u===null||u.memoizedState===null?Vp:Dg,ri=!1,D=y(S,N),ri=!1,Yl&&(D=iy(f,y,S,N)),ry(u),D}function ry(u){G.H=Wf;var f=na!==null&&na.next!==null;if(nl=0,Ja=na=yn=null,Op=!1,ms=0,Nr=null,f)throw Error(n(300));u===null||mr||(u=u.dependencies,u!==null&&Pf(u)&&(mr=!0))}function iy(u,f,y,S){yn=u;var N=0;do{if(Yl&&(Nr=null),ms=0,Yl=!1,25<=N)throw Error(n(301));if(N+=1,Ja=na=null,u.updateQueue!=null){var D=u.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}G.H=Iy,D=f(y,S)}while(Yl);return D}function ob(){var u=G.H,f=u.useState()[0];return f=typeof f.then=="function"?ks(f):f,u=u.useState()[0],(na!==null?na.memoizedState:null)!==u&&(yn.flags|=1024),f}function vg(){var u=rr!==0;return rr=0,u}function Up(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function yg(u){if(Op){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Op=!1}nl=0,Ja=na=yn=null,Yl=!1,ms=rr=0,Nr=null}function ii(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ja===null?yn.memoizedState=Ja=u:Ja=Ja.next=u,Ja}function Za(){if(na===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=na.next;var f=Ja===null?yn.memoizedState:Ja.next;if(f!==null)Ja=f,na=u;else{if(u===null)throw yn.alternate===null?Error(n(467)):Error(n(310));na=u,u={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},Ja===null?yn.memoizedState=Ja=u:Ja=Ja.next=u}return Ja}function ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ks(u){var f=ms;return ms+=1,Nr===null&&(Nr=[]),u=Lp(Nr,u,f),f=yn,(Ja===null?f.memoizedState:Ja.next)===null&&(f=f.alternate,G.H=f===null||f.memoizedState===null?Vp:Dg),u}function Bp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ks(u);if(u.$$typeof===T)return Ia(u)}throw Error(n(438,String(u)))}function xg(u){var f=null,y=yn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=yn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=ql(),yn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),S=0;S<u;S++)y[S]=U;return f.index++,y}function rl(u,f){return typeof f=="function"?f(u):f}function Xl(u){var f=Za();return Ag(f,na,u)}function Ag(u,f,y){var S=u.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=y;var N=u.baseQueue,D=S.pending;if(D!==null){if(N!==null){var V=N.next;N.next=D.next,D.next=V}f.baseQueue=N=D,S.pending=null}if(D=u.baseState,N===null)u.memoizedState=D;else{f=N.next;var Z=V=null,de=null,Ne=f,Je=!1;do{var at=Ne.lane&-536870913;if(at!==Ne.lane?(Zt&at)===at:(nl&at)===at){var De=Ne.revertLane;if(De===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),at===vn&&(Je=!0);else if((nl&De)===De){Ne=Ne.next,De===vn&&(Je=!0);continue}else at={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(Z=de=at,V=D):de=de.next=at,yn.lanes|=De,Ks|=De;at=Ne.action,ri&&y(D,at),D=Ne.hasEagerState?Ne.eagerState:y(D,at)}else De={lane:at,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(Z=de=De,V=D):de=de.next=De,yn.lanes|=at,Ks|=at;Ne=Ne.next}while(Ne!==null&&Ne!==f);if(de===null?V=D:de.next=Z,!gi(D,u.memoizedState)&&(mr=!0,Je&&(y=td,y!==null)))throw y;u.memoizedState=D,u.baseState=V,u.baseQueue=de,S.lastRenderedState=D}return N===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function _g(u){var f=Za(),y=f.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=u;var S=y.dispatch,N=y.pending,D=f.memoizedState;if(N!==null){y.pending=null;var V=N=N.next;do D=u(D,V.action),V=V.next;while(V!==N);gi(D,f.memoizedState)||(mr=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),y.lastRenderedState=D}return[D,S]}function sy(u,f,y){var S=yn,N=Za(),D=Kn;if(D){if(y===void 0)throw Error(n(407));y=y()}else y=f();var V=!gi((na||N).memoizedState,y);V&&(N.memoizedState=y,mr=!0),N=N.queue;var Z=ly.bind(null,S,N,u);if(cd(2048,8,Z,[u]),N.getSnapshot!==f||V||Ja!==null&&Ja.memoizedState.tag&1){if(S.flags|=2048,ld(9,Gf(),oy.bind(null,S,N,y,f),null),fn===null)throw Error(n(349));D||nl&124||od(S,f,y)}return y}function od(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=yn.updateQueue,f===null?(f=ql(),yn.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function oy(u,f,y,S){f.value=y,f.getSnapshot=S,cy(f)&&uy(u)}function ly(u,f,y){return y(function(){cy(f)&&uy(u)})}function cy(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!gi(u,y)}catch{return!0}}function uy(u){var f=Jo(u,2);f!==null&&li(f,u,2)}function bg(u){var f=ii();if(typeof u=="function"){var y=u;if(u=y(),ri){Pe(!0);try{y()}finally{Pe(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:u},f}function dy(u,f,y,S){return u.baseState=y,Ag(u,na,typeof S=="function"?S:rl)}function lb(u,f,y,S,N){if(Gp(u))throw Error(n(485));if(u=f.action,u!==null){var D={payload:N,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){D.listeners.push(V)}};G.T!==null?y(!0):D.isTransition=!1,S(D),y=f.pending,y===null?(D.next=f.pending=D,fy(f,D)):(D.next=y.next,f.pending=y.next=D)}}function fy(u,f){var y=f.action,S=f.payload,N=u.state;if(f.isTransition){var D=G.T,V={};G.T=V;try{var Z=y(N,S),de=G.S;de!==null&&de(V,Z),hy(u,f,Z)}catch(Ne){Sg(u,f,Ne)}finally{G.T=D}}else try{D=y(N,S),hy(u,f,D)}catch(Ne){Sg(u,f,Ne)}}function hy(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){py(u,f,S)},function(S){return Sg(u,f,S)}):py(u,f,y)}function py(u,f,y){f.status="fulfilled",f.value=y,my(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,fy(u,y)))}function Sg(u,f,y){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,my(f),f=f.next;while(f!==S)}u.action=null}function my(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function Eg(u,f){return f}function gy(u,f){if(Kn){var y=fn.formState;if(y!==null){e:{var S=yn;if(Kn){if(Ta){t:{for(var N=Ta,D=zi;N.nodeType!==8;){if(!D){N=null;break t}if(N=dl(N.nextSibling),N===null){N=null;break t}}D=N.data,N=D==="F!"||D==="F"?N:null}if(N){Ta=dl(N.nextSibling),S=N.data==="F!";break e}}Gl(S)}S=!1}S&&(f=y[0])}}return y=ii(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:f},y.queue=S,y=Ny.bind(null,yn,S),S.dispatch=y,S=bg(!1),D=zp.bind(null,yn,!1,S.queue),S=ii(),N={state:f,dispatch:null,action:u,pending:null},S.queue=N,y=lb.bind(null,yn,N,D,y),N.dispatch=y,S.memoizedState=u,[f,y,!1]}function vy(u){var f=Za();return yy(f,na,u)}function yy(u,f,y){if(f=Ag(u,f,Eg)[0],u=Xl(rl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=ks(f)}catch(V){throw V===kf?Fs:V}else S=f;f=Za();var N=f.queue,D=N.dispatch;return y!==f.memoizedState&&(yn.flags|=2048,ld(9,Gf(),cb.bind(null,N,y),null)),[S,D,u]}function cb(u,f){u.action=f}function xy(u){var f=Za(),y=na;if(y!==null)return yy(f,y,u);Za(),f=f.memoizedState,y=Za();var S=y.queue.dispatch;return y.memoizedState=u,[f,S,!1]}function ld(u,f,y,S){return u={tag:u,create:y,deps:S,inst:f,next:null},f=yn.updateQueue,f===null&&(f=ql(),yn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(S=y.next,y.next=u,u.next=S,f.lastEffect=u),u}function Gf(){return{destroy:void 0,resource:void 0}}function wg(){return Za().memoizedState}function Fp(u,f,y,S){var N=ii();S=S===void 0?null:S,yn.flags|=u,N.memoizedState=ld(1|f,Gf(),y,S)}function cd(u,f,y,S){var N=Za();S=S===void 0?null:S;var D=N.memoizedState.inst;na!==null&&S!==null&&Wr(S,na.memoizedState.deps)?N.memoizedState=ld(f,D,y,S):(yn.flags|=u,N.memoizedState=ld(1|f,D,y,S))}function Rg(u,f){Fp(8390656,8,u,f)}function Mg(u,f){cd(2048,8,u,f)}function kp(u,f){return cd(4,2,u,f)}function Hp(u,f){return cd(4,4,u,f)}function Ay(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function _y(u,f,y){y=y!=null?y.concat([u]):null,cd(4,4,Ay.bind(null,f,u),y)}function Tg(){}function by(u,f){var y=Za();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&Wr(f,S[1])?S[0]:(y.memoizedState=[u,f],u)}function Ng(u,f){var y=Za();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&Wr(f,S[1]))return S[0];if(S=u(),ri){Pe(!0);try{u()}finally{Pe(!1)}}return y.memoizedState=[S,f],S}function jp(u,f,y){return y===void 0||nl&1073741824?u.memoizedState=f:(u.memoizedState=y,u=tm(),yn.lanes|=u,Ks|=u,y)}function Sy(u,f,y,S){return gi(y,f)?y:sd.current!==null?(u=jp(u,y,S),gi(u,f)||(mr=!0),u):nl&42?(u=tm(),yn.lanes|=u,Ks|=u,f):(mr=!0,u.memoizedState=y)}function Ey(u,f,y,S,N){var D=Y.p;Y.p=D!==0&&8>D?D:8;var V=G.T,Z={};G.T=Z,zp(u,!1,f,y);try{var de=N(),Ne=G.S;if(Ne!==null&&Ne(Z,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Je=sb(de,S);Vf(u,f,Je,Pa(u))}else Vf(u,f,S,Pa(u))}catch(at){Vf(u,f,{then:function(){},status:"rejected",reason:at},Pa())}finally{Y.p=D,G.T=V}}function ub(){}function Cg(u,f,y,S){if(u.tag!==5)throw Error(n(476));var N=wy(u).queue;Ey(u,N,f,K,y===null?ub:function(){return Ry(u),y(S)})}function wy(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:K},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function Ry(u){var f=wy(u).next.queue;Vf(u,f,{},Pa())}function Ig(){return Ia(Vg)}function My(){return Za().memoizedState}function Ty(){return Za().memoizedState}function db(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=Pa();u=mo(y);var S=tl(f,u,y);S!==null&&(li(S,f,y),Hc(S,f,y)),f={cache:Np()},u.payload=f;return}f=f.return}}function fb(u,f,y){var S=Pa();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},Gp(u)?Cy(f,y):(y=Ep(u,f,y,S),y!==null&&(li(y,u,S),Vi(y,f,S)))}function Ny(u,f,y){var S=Pa();Vf(u,f,y,S)}function Vf(u,f,y,S){var N={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(Gp(u))Cy(f,N);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var V=f.lastRenderedState,Z=D(V,y);if(N.hasEagerState=!0,N.eagerState=Z,gi(Z,V))return kl(u,f,N,0),fn===null&&Nf(),!1}catch{}finally{}if(y=Ep(u,f,N,S),y!==null)return li(y,u,S),Vi(y,f,S),!0}return!1}function zp(u,f,y,S){if(S={lane:2,revertLane:mb(),action:S,hasEagerState:!1,eagerState:null,next:null},Gp(u)){if(f)throw Error(n(479))}else f=Ep(u,y,S,2),f!==null&&li(f,u,2)}function Gp(u){var f=u.alternate;return u===yn||f!==null&&f===yn}function Cy(u,f){Yl=Op=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function Vi(u,f,y){if(y&4194048){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,wt(u,y)}}var Wf={readContext:Ia,use:Bp,useCallback:Fa,useContext:Fa,useEffect:Fa,useImperativeHandle:Fa,useLayoutEffect:Fa,useInsertionEffect:Fa,useMemo:Fa,useReducer:Fa,useRef:Fa,useState:Fa,useDebugValue:Fa,useDeferredValue:Fa,useTransition:Fa,useSyncExternalStore:Fa,useId:Fa,useHostTransitionStatus:Fa,useFormState:Fa,useActionState:Fa,useOptimistic:Fa,useMemoCache:Fa,useCacheRefresh:Fa},Vp={readContext:Ia,use:Bp,useCallback:function(u,f){return ii().memoizedState=[u,f===void 0?null:f],u},useContext:Ia,useEffect:Rg,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,Fp(4194308,4,Ay.bind(null,f,u),y)},useLayoutEffect:function(u,f){return Fp(4194308,4,u,f)},useInsertionEffect:function(u,f){Fp(4,2,u,f)},useMemo:function(u,f){var y=ii();f=f===void 0?null:f;var S=u();if(ri){Pe(!0);try{u()}finally{Pe(!1)}}return y.memoizedState=[S,f],S},useReducer:function(u,f,y){var S=ii();if(y!==void 0){var N=y(f);if(ri){Pe(!0);try{y(f)}finally{Pe(!1)}}}else N=f;return S.memoizedState=S.baseState=N,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:N},S.queue=u,u=u.dispatch=fb.bind(null,yn,u),[S.memoizedState,u]},useRef:function(u){var f=ii();return u={current:u},f.memoizedState=u},useState:function(u){u=bg(u);var f=u.queue,y=Ny.bind(null,yn,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:Tg,useDeferredValue:function(u,f){var y=ii();return jp(y,u,f)},useTransition:function(){var u=bg(!1);return u=Ey.bind(null,yn,u.queue,!0,!1),ii().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var S=yn,N=ii();if(Kn){if(y===void 0)throw Error(n(407));y=y()}else{if(y=f(),fn===null)throw Error(n(349));Zt&124||od(S,f,y)}N.memoizedState=y;var D={value:y,getSnapshot:f};return N.queue=D,Rg(ly.bind(null,S,D,u),[u]),S.flags|=2048,ld(9,Gf(),oy.bind(null,S,D,y,f),null),y},useId:function(){var u=ii(),f=fn.identifierPrefix;if(Kn){var y=ho,S=fo;y=(S&~(1<<32-_t(S)-1)).toString(32)+y,f="«"+f+"R"+y,y=rr++,0<y&&(f+="H"+y.toString(32)),f+="»"}else y=ay++,f="«"+f+"r"+y.toString(32)+"»";return u.memoizedState=f},useHostTransitionStatus:Ig,useFormState:gy,useActionState:gy,useOptimistic:function(u){var f=ii();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=zp.bind(null,yn,!0,y),y.dispatch=f,[u,f]},useMemoCache:xg,useCacheRefresh:function(){return ii().memoizedState=db.bind(null,yn)}},Dg={readContext:Ia,use:Bp,useCallback:by,useContext:Ia,useEffect:Mg,useImperativeHandle:_y,useInsertionEffect:kp,useLayoutEffect:Hp,useMemo:Ng,useReducer:Xl,useRef:wg,useState:function(){return Xl(rl)},useDebugValue:Tg,useDeferredValue:function(u,f){var y=Za();return Sy(y,na.memoizedState,u,f)},useTransition:function(){var u=Xl(rl)[0],f=Za().memoizedState;return[typeof u=="boolean"?u:ks(u),f]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:Ig,useFormState:vy,useActionState:vy,useOptimistic:function(u,f){var y=Za();return dy(y,na,u,f)},useMemoCache:xg,useCacheRefresh:Ty},Iy={readContext:Ia,use:Bp,useCallback:by,useContext:Ia,useEffect:Mg,useImperativeHandle:_y,useInsertionEffect:kp,useLayoutEffect:Hp,useMemo:Ng,useReducer:_g,useRef:wg,useState:function(){return _g(rl)},useDebugValue:Tg,useDeferredValue:function(u,f){var y=Za();return na===null?jp(y,u,f):Sy(y,na.memoizedState,u,f)},useTransition:function(){var u=_g(rl)[0],f=Za().memoizedState;return[typeof u=="boolean"?u:ks(u),f]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:Ig,useFormState:xy,useActionState:xy,useOptimistic:function(u,f){var y=Za();return na!==null?dy(y,na,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:xg,useCacheRefresh:Ty},jc=null,Kf=0;function Yf(u){var f=Kf;return Kf+=1,jc===null&&(jc=[]),Lp(jc,u,f)}function ud(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function Wp(u,f){throw f.$$typeof===h?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function Dy(u){var f=u._init;return f(u._payload)}function Ly(u){function f(Ee,ve){if(u){var Te=Ee.deletions;Te===null?(Ee.deletions=[ve],Ee.flags|=16):Te.push(ve)}}function y(Ee,ve){if(!u)return null;for(;ve!==null;)f(Ee,ve),ve=ve.sibling;return null}function S(Ee){for(var ve=new Map;Ee!==null;)Ee.key!==null?ve.set(Ee.key,Ee):ve.set(Ee.index,Ee),Ee=Ee.sibling;return ve}function N(Ee,ve){return Ee=Ba(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,ve,Te){return Ee.index=Te,u?(Te=Ee.alternate,Te!==null?(Te=Te.index,Te<ve?(Ee.flags|=67108866,ve):Te):(Ee.flags|=67108866,ve)):(Ee.flags|=1048576,ve)}function V(Ee){return u&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function Z(Ee,ve,Te,tt){return ve===null||ve.tag!==6?(ve=If(Te,Ee.mode,tt),ve.return=Ee,ve):(ve=N(ve,Te),ve.return=Ee,ve)}function de(Ee,ve,Te,tt){var Ut=Te.type;return Ut===A?Je(Ee,ve,Te.props.children,tt,Te.key):ve!==null&&(ve.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===F&&Dy(Ut)===ve.type)?(ve=N(ve,Te.props),ud(ve,Te),ve.return=Ee,ve):(ve=pr(Te.type,Te.key,Te.props,null,Ee.mode,tt),ud(ve,Te),ve.return=Ee,ve)}function Ne(Ee,ve,Te,tt){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Te.containerInfo||ve.stateNode.implementation!==Te.implementation?(ve=wp(Te,Ee.mode,tt),ve.return=Ee,ve):(ve=N(ve,Te.children||[]),ve.return=Ee,ve)}function Je(Ee,ve,Te,tt,Ut){return ve===null||ve.tag!==7?(ve=jl(Te,Ee.mode,tt,Ut),ve.return=Ee,ve):(ve=N(ve,Te),ve.return=Ee,ve)}function at(Ee,ve,Te){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=If(""+ve,Ee.mode,Te),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:return Te=pr(ve.type,ve.key,ve.props,null,Ee.mode,Te),ud(Te,ve),Te.return=Ee,Te;case v:return ve=wp(ve,Ee.mode,Te),ve.return=Ee,ve;case F:var tt=ve._init;return ve=tt(ve._payload),at(Ee,ve,Te)}if(re(ve)||W(ve))return ve=jl(ve,Ee.mode,Te,null),ve.return=Ee,ve;if(typeof ve.then=="function")return at(Ee,Yf(ve),Te);if(ve.$$typeof===T)return at(Ee,Of(Ee,ve),Te);Wp(Ee,ve)}return null}function De(Ee,ve,Te,tt){var Ut=ve!==null?ve.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Ut!==null?null:Z(Ee,ve,""+Te,tt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case m:return Te.key===Ut?de(Ee,ve,Te,tt):null;case v:return Te.key===Ut?Ne(Ee,ve,Te,tt):null;case F:return Ut=Te._init,Te=Ut(Te._payload),De(Ee,ve,Te,tt)}if(re(Te)||W(Te))return Ut!==null?null:Je(Ee,ve,Te,tt,null);if(typeof Te.then=="function")return De(Ee,ve,Yf(Te),tt);if(Te.$$typeof===T)return De(Ee,ve,Of(Ee,Te),tt);Wp(Ee,Te)}return null}function Fe(Ee,ve,Te,tt,Ut){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Ee=Ee.get(Te)||null,Z(ve,Ee,""+tt,Ut);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case m:return Ee=Ee.get(tt.key===null?Te:tt.key)||null,de(ve,Ee,tt,Ut);case v:return Ee=Ee.get(tt.key===null?Te:tt.key)||null,Ne(ve,Ee,tt,Ut);case F:var On=tt._init;return tt=On(tt._payload),Fe(Ee,ve,Te,tt,Ut)}if(re(tt)||W(tt))return Ee=Ee.get(Te)||null,Je(ve,Ee,tt,Ut,null);if(typeof tt.then=="function")return Fe(Ee,ve,Te,Yf(tt),Ut);if(tt.$$typeof===T)return Fe(Ee,ve,Te,Of(ve,tt),Ut);Wp(ve,tt)}return null}function un(Ee,ve,Te,tt){for(var Ut=null,On=null,Jt=ve,rn=ve=0,qr=null;Jt!==null&&rn<Te.length;rn++){Jt.index>rn?(qr=Jt,Jt=null):qr=Jt.sibling;var ea=De(Ee,Jt,Te[rn],tt);if(ea===null){Jt===null&&(Jt=qr);break}u&&Jt&&ea.alternate===null&&f(Ee,Jt),ve=D(ea,ve,rn),On===null?Ut=ea:On.sibling=ea,On=ea,Jt=qr}if(rn===Te.length)return y(Ee,Jt),Kn&&Zo(Ee,rn),Ut;if(Jt===null){for(;rn<Te.length;rn++)Jt=at(Ee,Te[rn],tt),Jt!==null&&(ve=D(Jt,ve,rn),On===null?Ut=Jt:On.sibling=Jt,On=Jt);return Kn&&Zo(Ee,rn),Ut}for(Jt=S(Jt);rn<Te.length;rn++)qr=Fe(Jt,Ee,rn,Te[rn],tt),qr!==null&&(u&&qr.alternate!==null&&Jt.delete(qr.key===null?rn:qr.key),ve=D(qr,ve,rn),On===null?Ut=qr:On.sibling=qr,On=qr);return u&&Jt.forEach(function(Md){return f(Ee,Md)}),Kn&&Zo(Ee,rn),Ut}function an(Ee,ve,Te,tt){if(Te==null)throw Error(n(151));for(var Ut=null,On=null,Jt=ve,rn=ve=0,qr=null,ea=Te.next();Jt!==null&&!ea.done;rn++,ea=Te.next()){Jt.index>rn?(qr=Jt,Jt=null):qr=Jt.sibling;var Md=De(Ee,Jt,ea.value,tt);if(Md===null){Jt===null&&(Jt=qr);break}u&&Jt&&Md.alternate===null&&f(Ee,Jt),ve=D(Md,ve,rn),On===null?Ut=Md:On.sibling=Md,On=Md,Jt=qr}if(ea.done)return y(Ee,Jt),Kn&&Zo(Ee,rn),Ut;if(Jt===null){for(;!ea.done;rn++,ea=Te.next())ea=at(Ee,ea.value,tt),ea!==null&&(ve=D(ea,ve,rn),On===null?Ut=ea:On.sibling=ea,On=ea);return Kn&&Zo(Ee,rn),Ut}for(Jt=S(Jt);!ea.done;rn++,ea=Te.next())ea=Fe(Jt,Ee,rn,ea.value,tt),ea!==null&&(u&&ea.alternate!==null&&Jt.delete(ea.key===null?rn:ea.key),ve=D(ea,ve,rn),On===null?Ut=ea:On.sibling=ea,On=ea);return u&&Jt.forEach(function(MU){return f(Ee,MU)}),Kn&&Zo(Ee,rn),Ut}function ya(Ee,ve,Te,tt){if(typeof Te=="object"&&Te!==null&&Te.type===A&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case m:e:{for(var Ut=Te.key;ve!==null;){if(ve.key===Ut){if(Ut=Te.type,Ut===A){if(ve.tag===7){y(Ee,ve.sibling),tt=N(ve,Te.props.children),tt.return=Ee,Ee=tt;break e}}else if(ve.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===F&&Dy(Ut)===ve.type){y(Ee,ve.sibling),tt=N(ve,Te.props),ud(tt,Te),tt.return=Ee,Ee=tt;break e}y(Ee,ve);break}else f(Ee,ve);ve=ve.sibling}Te.type===A?(tt=jl(Te.props.children,Ee.mode,tt,Te.key),tt.return=Ee,Ee=tt):(tt=pr(Te.type,Te.key,Te.props,null,Ee.mode,tt),ud(tt,Te),tt.return=Ee,Ee=tt)}return V(Ee);case v:e:{for(Ut=Te.key;ve!==null;){if(ve.key===Ut)if(ve.tag===4&&ve.stateNode.containerInfo===Te.containerInfo&&ve.stateNode.implementation===Te.implementation){y(Ee,ve.sibling),tt=N(ve,Te.children||[]),tt.return=Ee,Ee=tt;break e}else{y(Ee,ve);break}else f(Ee,ve);ve=ve.sibling}tt=wp(Te,Ee.mode,tt),tt.return=Ee,Ee=tt}return V(Ee);case F:return Ut=Te._init,Te=Ut(Te._payload),ya(Ee,ve,Te,tt)}if(re(Te))return un(Ee,ve,Te,tt);if(W(Te)){if(Ut=W(Te),typeof Ut!="function")throw Error(n(150));return Te=Ut.call(Te),an(Ee,ve,Te,tt)}if(typeof Te.then=="function")return ya(Ee,ve,Yf(Te),tt);if(Te.$$typeof===T)return ya(Ee,ve,Of(Ee,Te),tt);Wp(Ee,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,ve!==null&&ve.tag===6?(y(Ee,ve.sibling),tt=N(ve,Te),tt.return=Ee,Ee=tt):(y(Ee,ve),tt=If(Te,Ee.mode,tt),tt.return=Ee,Ee=tt),V(Ee)):y(Ee,ve)}return function(Ee,ve,Te,tt){try{Kf=0;var Ut=ya(Ee,ve,Te,tt);return jc=null,Ut}catch(Jt){if(Jt===kf||Jt===Fs)throw Jt;var On=xi(29,Jt,null,Ee.mode);return On.lanes=tt,On.return=Ee,On}finally{}}}var zc=Ly(!0),Py=Ly(!1),la=J(null),Hs=null;function Jl(u){var f=u.alternate;ce(ka,ka.current&1),ce(la,u),Hs===null&&(f===null||sd.current!==null||f.memoizedState!==null)&&(Hs=u)}function Oy(u){if(u.tag===22){if(ce(ka,ka.current),ce(la,u),Hs===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(Hs=u)}}else Zl()}function Zl(){ce(ka,ka.current),ce(la,la.current)}function go(u){le(la),Hs===u&&(Hs=null),le(ka)}var ka=J(0);function il(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||Mb(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Ql(u,f,y,S){f=u.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var si={enqueueSetState:function(u,f,y){u=u._reactInternals;var S=Pa(),N=mo(S);N.payload=f,y!=null&&(N.callback=y),f=tl(u,N,S),f!==null&&(li(f,u,S),Hc(f,u,S))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var S=Pa(),N=mo(S);N.tag=1,N.payload=f,y!=null&&(N.callback=y),f=tl(u,N,S),f!==null&&(li(f,u,S),Hc(f,u,S))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=Pa(),S=mo(y);S.tag=2,f!=null&&(S.callback=f),f=tl(u,S,y),f!==null&&(li(f,u,y),Hc(f,u,y))}};function Uy(u,f,y,S,N,D,V){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,D,V):f.prototype&&f.prototype.isPureReactComponent?!Us(y,S)||!Us(N,D):!0}function By(u,f,y,S){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==u&&si.enqueueReplaceState(f,f.state,null)}function vo(u,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(u=u.defaultProps){y===f&&(y=d({},y));for(var N in u)y[N]===void 0&&(y[N]=u[N])}return y}var Gc=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function qf(u){Gc(u)}function Kp(u){console.error(u)}function Fy(u){Gc(u)}function Yp(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function gs(u,f,y){try{var S=u.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function qp(u,f,y){return y=mo(y),y.tag=3,y.payload={element:null},y.callback=function(){Yp(u,f)},y}function ky(u){return u=mo(u),u.tag=3,u}function Xp(u,f,y,S){var N=y.type.getDerivedStateFromError;if(typeof N=="function"){var D=S.value;u.payload=function(){return N(D)},u.callback=function(){gs(f,y,S)}}var V=y.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(u.callback=function(){gs(f,y,S),typeof N!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var Z=S.stack;this.componentDidCatch(S.value,{componentStack:Z!==null?Z:""})})}function hb(u,f,y,S,N){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&fs(f,y,N,!0),y=la.current,y!==null){switch(y.tag){case 13:return Hs===null?p():y.alternate===null&&ba===0&&(ba=3),y.flags&=-257,y.flags|=65536,y.lanes=N,S===Hf?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),ke(u,S,N)),!1;case 22:return y.flags|=65536,S===Hf?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),ke(u,S,N)),!1}throw Error(n(435,y.tag))}return ke(u,S,N),p(),!1}if(Kn)return f=la.current,f!==null?(!(f.flags&65536)&&(f.flags|=256),f.flags|=65536,f.lanes=N,S!==Mp&&(u=Error(n(422),{cause:S}),kc(Mr(u,y)))):(S!==Mp&&(f=Error(n(423),{cause:S}),kc(Mr(f,y))),u=u.current.alternate,u.flags|=65536,N&=-N,u.lanes|=N,S=Mr(S,y),N=qp(u.stateNode,S,N),ad(u,N),ba!==4&&(ba=2)),!1;var D=Error(n(520),{cause:S});if(D=Mr(D,y),$n===null?$n=[D]:$n.push(D),ba!==4&&(ba=2),f===null)return!0;S=Mr(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=N&-N,y.lanes|=u,u=qp(y.stateNode,S,u),ad(y,u),!1;case 1:if(f=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Qi===null||!Qi.has(D))))return y.flags|=65536,N&=-N,y.lanes|=N,N=ky(N),Xp(N,u,y,S),ad(y,N),!1}y=y.return}while(y!==null);return!1}var Hy=Error(n(461)),mr=!1;function Ha(u,f,y,S){f.child=u===null?Py(f,null,y,S):zc(f,u.child,y,S)}function _i(u,f,y,S,N){y=y.render;var D=f.ref;if("ref"in S){var V={};for(var Z in S)Z!=="ref"&&(V[Z]=S[Z])}else V=S;return po(f),S=al(u,f,y,V,D,N),Z=vg(),u!==null&&!mr?(Up(u,f,N),gr(u,f,N)):(Kn&&Z&&sg(f),f.flags|=1,Ha(u,f,S,N),f.child)}function bi(u,f,y,S,N){if(u===null){var D=y.type;return typeof D=="function"&&!Cf(D)&&D.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=D,Lg(u,f,D,S,N)):(u=pr(y.type,null,S,f,f.mode,N),u.ref=f.ref,u.return=f,f.child=u)}if(D=u.child,!Xf(u,N)){var V=D.memoizedProps;if(y=y.compare,y=y!==null?y:Us,y(V,S)&&u.ref===f.ref)return gr(u,f,N)}return f.flags|=1,u=Ba(D,S),u.ref=f.ref,u.return=f,f.child=u}function Lg(u,f,y,S,N){if(u!==null){var D=u.memoizedProps;if(Us(D,S)&&u.ref===f.ref)if(mr=!1,f.pendingProps=S=D,Xf(u,N))u.flags&131072&&(mr=!0);else return f.lanes=u.lanes,gr(u,f,N)}return dd(u,f,y,S,N)}function Vc(u,f,y){var S=f.pendingProps,N=S.children,D=u!==null?u.memoizedState:null;if(S.mode==="hidden"){if(f.flags&128){if(S=D!==null?D.baseLanes|y:y,u!==null){for(N=f.child=u.child,D=0;N!==null;)D=D|N.lanes|N.childLanes,N=N.sibling;f.childLanes=D&~S}else f.childLanes=0,f.child=null;return Wc(u,f,S,y)}if(y&536870912)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Ff(f,D!==null?D.cachePool:null),D!==null?ny(f,D):gg(),Oy(f);else return f.lanes=f.childLanes=536870912,Wc(u,f,D!==null?D.baseLanes|y:y,y)}else D!==null?(Ff(f,D.cachePool),ny(f,D),Zl(),f.memoizedState=null):(u!==null&&Ff(f,null),gg(),Zl());return Ha(u,f,N,y),f.child}function Wc(u,f,y,S){var N=Kl();return N=N===null?null:{parent:Xa._currentValue,pool:N},f.memoizedState={baseLanes:y,cachePool:N},u!==null&&Ff(f,null),gg(),Oy(f),u!==null&&fs(u,f,S,!0),null}function Kc(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(n(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function dd(u,f,y,S,N){return po(f),y=al(u,f,y,S,void 0,N),S=vg(),u!==null&&!mr?(Up(u,f,N),gr(u,f,N)):(Kn&&S&&sg(f),f.flags|=1,Ha(u,f,y,N),f.child)}function Wi(u,f,y,S,N,D){return po(f),f.updateQueue=null,y=iy(f,S,y,N),ry(u),S=vg(),u!==null&&!mr?(Up(u,f,D),gr(u,f,D)):(Kn&&S&&sg(f),f.flags|=1,Ha(u,f,y,D),f.child)}function Ki(u,f,y,S,N){if(po(f),f.stateNode===null){var D=Hl,V=y.contextType;typeof V=="object"&&V!==null&&(D=Ia(V)),D=new y(S,D),f.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=si,f.stateNode=D,D._reactInternals=f,D=f.stateNode,D.props=S,D.state=f.memoizedState,D.refs={},pg(f),V=y.contextType,D.context=typeof V=="object"&&V!==null?Ia(V):Hl,D.state=f.memoizedState,V=y.getDerivedStateFromProps,typeof V=="function"&&(Ql(f,y,V,S),D.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(V=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),V!==D.state&&si.enqueueReplaceState(D,D.state,null),rd(f,S,D,N),jf(),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(u===null){D=f.stateNode;var Z=f.memoizedProps,de=vo(y,Z);D.props=de;var Ne=D.context,Je=y.contextType;V=Hl,typeof Je=="object"&&Je!==null&&(V=Ia(Je));var at=y.getDerivedStateFromProps;Je=typeof at=="function"||typeof D.getSnapshotBeforeUpdate=="function",Z=f.pendingProps!==Z,Je||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Z||Ne!==V)&&By(f,D,S,V),el=!1;var De=f.memoizedState;D.state=De,rd(f,S,D,N),jf(),Ne=f.memoizedState,Z||De!==Ne||el?(typeof at=="function"&&(Ql(f,y,at,S),Ne=f.memoizedState),(de=el||Uy(f,y,de,S,De,Ne,V))?(Je||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(f.flags|=4194308)):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=Ne),D.props=S,D.state=Ne,D.context=V,S=de):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{D=f.stateNode,sn(u,f),V=f.memoizedProps,Je=vo(y,V),D.props=Je,at=f.pendingProps,De=D.context,Ne=y.contextType,de=Hl,typeof Ne=="object"&&Ne!==null&&(de=Ia(Ne)),Z=y.getDerivedStateFromProps,(Ne=typeof Z=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(V!==at||De!==de)&&By(f,D,S,de),el=!1,De=f.memoizedState,D.state=De,rd(f,S,D,N),jf();var Fe=f.memoizedState;V!==at||De!==Fe||el||u!==null&&u.dependencies!==null&&Pf(u.dependencies)?(typeof Z=="function"&&(Ql(f,y,Z,S),Fe=f.memoizedState),(Je=el||Uy(f,y,Je,S,De,Fe,de)||u!==null&&u.dependencies!==null&&Pf(u.dependencies))?(Ne||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(S,Fe,de),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(S,Fe,de)),typeof D.componentDidUpdate=="function"&&(f.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof D.componentDidUpdate!="function"||V===u.memoizedProps&&De===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&De===u.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=Fe),D.props=S,D.state=Fe,D.context=de,S=Je):(typeof D.componentDidUpdate!="function"||V===u.memoizedProps&&De===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&De===u.memoizedState||(f.flags|=1024),S=!1)}return D=S,Kc(u,f),S=(f.flags&128)!==0,D||S?(D=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:D.render(),f.flags|=1,u!==null&&S?(f.child=zc(f,u.child,null,N),f.child=zc(f,null,y,N)):Ha(u,f,y,N),f.memoizedState=D.state,u=f.child):u=gr(u,f,N),u}function $l(u,f,y,S){return Qu(),f.flags|=256,Ha(u,f,y,S),f.child}var js={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zs(u){return{baseLanes:u,cachePool:Ip()}}function ir(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=_s),u}function fd(u,f,y){var S=f.pendingProps,N=!1,D=(f.flags&128)!==0,V;if((V=D)||(V=u!==null&&u.memoizedState===null?!1:(ka.current&2)!==0),V&&(N=!0,f.flags&=-129),V=(f.flags&32)!==0,f.flags&=-33,u===null){if(Kn){if(N?Jl(f):Zl(),Kn){var Z=Ta,de;if(de=Z){e:{for(de=Z,Z=zi;de.nodeType!==8;){if(!Z){Z=null;break e}if(de=dl(de.nextSibling),de===null){Z=null;break e}}Z=de}Z!==null?(f.memoizedState={dehydrated:Z,treeContext:zl!==null?{id:fo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},de=xi(18,null,null,0),de.stateNode=Z,de.return=f,f.child=de,ai=f,Ta=null,de=!0):de=!1}de||Gl(f)}if(Z=f.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Mb(Z)?f.lanes=32:f.lanes=536870912,null;go(f)}return Z=S.children,S=S.fallback,N?(Zl(),N=f.mode,Z=Yc({mode:"hidden",children:Z},N),S=jl(S,N,y,null),Z.return=f,S.return=f,Z.sibling=S,f.child=Z,N=f.child,N.memoizedState=zs(y),N.childLanes=ir(u,V,y),f.memoizedState=js,S):(Jl(f),yo(f,Z))}if(de=u.memoizedState,de!==null&&(Z=de.dehydrated,Z!==null)){if(D)f.flags&256?(Jl(f),f.flags&=-257,f=Cr(u,f,y)):f.memoizedState!==null?(Zl(),f.child=u.child,f.flags|=128,f=null):(Zl(),N=S.fallback,Z=f.mode,S=Yc({mode:"visible",children:S.children},Z),N=jl(N,Z,y,null),N.flags|=2,S.return=f,N.return=f,S.sibling=N,f.child=S,zc(f,u.child,null,y),S=f.child,S.memoizedState=zs(y),S.childLanes=ir(u,V,y),f.memoizedState=js,f=N);else if(Jl(f),Mb(Z)){if(V=Z.nextSibling&&Z.nextSibling.dataset,V)var Ne=V.dgst;V=Ne,S=Error(n(419)),S.stack="",S.digest=V,kc({value:S,source:null,stack:null}),f=Cr(u,f,y)}else if(mr||fs(u,f,y,!1),V=(y&u.childLanes)!==0,mr||V){if(V=fn,V!==null&&(S=y&-y,S=S&42?1:jt(S),S=S&(V.suspendedLanes|y)?0:S,S!==0&&S!==de.retryLane))throw de.retryLane=S,Jo(u,S),li(V,u,S),Hy;Z.data==="$?"||p(),f=Cr(u,f,y)}else Z.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=de.treeContext,Ta=dl(Z.nextSibling),ai=f,Kn=!0,ds=null,zi=!1,u!==null&&(Tr[ji++]=fo,Tr[ji++]=ho,Tr[ji++]=zl,fo=u.id,ho=u.overflow,zl=f),f=yo(f,S.children),f.flags|=4096);return f}return N?(Zl(),N=S.fallback,Z=f.mode,de=u.child,Ne=de.sibling,S=Ba(de,{mode:"hidden",children:S.children}),S.subtreeFlags=de.subtreeFlags&65011712,Ne!==null?N=Ba(Ne,N):(N=jl(N,Z,y,null),N.flags|=2),N.return=f,S.return=f,S.sibling=N,f.child=S,S=N,N=f.child,Z=u.child.memoizedState,Z===null?Z=zs(y):(de=Z.cachePool,de!==null?(Ne=Xa._currentValue,de=de.parent!==Ne?{parent:Ne,pool:Ne}:de):de=Ip(),Z={baseLanes:Z.baseLanes|y,cachePool:de}),N.memoizedState=Z,N.childLanes=ir(u,V,y),f.memoizedState=js,S):(Jl(f),y=u.child,u=y.sibling,y=Ba(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,u!==null&&(V=f.deletions,V===null?(f.deletions=[u],f.flags|=16):V.push(u)),f.child=y,f.memoizedState=null,y)}function yo(u,f){return f=Yc({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Yc(u,f){return u=xi(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Cr(u,f,y){return zc(f,u.child,null,y),u=yo(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function Ir(u,f,y){u.lanes|=f;var S=u.alternate;S!==null&&(S.lanes|=f),ug(u.return,f,y)}function jn(u,f,y,S,N){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:N}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=S,D.tail=y,D.tailMode=N)}function vs(u,f,y){var S=f.pendingProps,N=S.revealOrder,D=S.tail;if(Ha(u,f,S.children,y),S=ka.current,S&2)S=S&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Ir(u,y,f);else if(u.tag===19)Ir(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}switch(ce(ka,S),N){case"forwards":for(y=f.child,N=null;y!==null;)u=y.alternate,u!==null&&il(u)===null&&(N=y),y=y.sibling;y=N,y===null?(N=f.child,f.child=null):(N=y.sibling,y.sibling=null),jn(f,!1,N,y,D);break;case"backwards":for(y=null,N=f.child,f.child=null;N!==null;){if(u=N.alternate,u!==null&&il(u)===null){f.child=N;break}u=N.sibling,N.sibling=y,y=N,N=u}jn(f,!0,y,null,D);break;case"together":jn(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function gr(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Ks|=f.lanes,!(y&f.childLanes))if(u!==null){if(fs(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,y=Ba(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=Ba(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function Xf(u,f){return u.lanes&f?!0:(u=u.dependencies,!!(u!==null&&Pf(u)))}function ys(u,f,y){switch(f.tag){case 3:Ge(f,f.stateNode.containerInfo),Wl(f,Xa,u.memoizedState.cache),Qu();break;case 27:case 5:$e(f);break;case 4:Ge(f,f.stateNode.containerInfo);break;case 10:Wl(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(Jl(f),f.flags|=128,null):y&f.child.childLanes?fd(u,f,y):(Jl(f),u=gr(u,f,y),u!==null?u.sibling:null);Jl(f);break;case 19:var N=(u.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(fs(u,f,y,!1),S=(y&f.childLanes)!==0),N){if(S)return vs(u,f,y);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ce(ka,ka.current),S)break;return null;case 22:case 23:return f.lanes=0,Vc(u,f,y);case 24:Wl(f,Xa,u.memoizedState.cache)}return gr(u,f,y)}function qc(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)mr=!0;else{if(!Xf(u,y)&&!(f.flags&128))return mr=!1,ys(u,f,y);mr=!!(u.flags&131072)}else mr=!1,Kn&&f.flags&1048576&&Rp(f,Zu,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var S=f.elementType,N=S._init;if(S=N(S._payload),f.type=S,typeof S=="function")Cf(S)?(u=vo(S,u),f.tag=1,f=Ki(null,f,S,u,y)):(f.tag=0,f=dd(null,f,S,u,y));else{if(S!=null){if(N=S.$$typeof,N===M){f.tag=11,f=_i(null,f,S,u,y);break e}else if(N===B){f.tag=14,f=bi(null,f,S,u,y);break e}}throw f=$(S)||S,Error(n(306,f,""))}}return f;case 0:return dd(u,f,f.type,f.pendingProps,y);case 1:return S=f.type,N=vo(S,f.pendingProps),Ki(u,f,S,N,y);case 3:e:{if(Ge(f,f.stateNode.containerInfo),u===null)throw Error(n(387));S=f.pendingProps;var D=f.memoizedState;N=D.element,sn(u,f),rd(f,S,null,y);var V=f.memoizedState;if(S=V.cache,Wl(f,Xa,S),S!==D.cache&&Lf(f,[Xa],y,!0),jf(),S=V.element,D.isDehydrated)if(D={element:S,isDehydrated:!1,cache:V.cache},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){f=$l(u,f,S,y);break e}else if(S!==N){N=Mr(Error(n(424)),f),kc(N),f=$l(u,f,S,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ta=dl(u.firstChild),ai=f,Kn=!0,ds=null,zi=!0,y=Py(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Qu(),S===N){f=gr(u,f,y);break e}Ha(u,f,S,y)}f=f.child}return f;case 26:return Kc(u,f),u===null?(y=GM(f.type,null,f.pendingProps,null))?f.memoizedState=y:Kn||(y=f.type,u=f.pendingProps,S=Ky(_e.current).createElement(y),S[Ya]=f,S[Ea]=u,ci(S,y,u),qa(S),f.stateNode=S):f.memoizedState=GM(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return $e(f),u===null&&Kn&&(S=f.stateNode=HM(f.type,f.pendingProps,_e.current),ai=f,zi=!0,N=Ta,bd(f.type)?(Tb=N,Ta=dl(S.firstChild)):Ta=N),Ha(u,f,f.pendingProps.children,y),Kc(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Kn&&((N=S=Ta)&&(S=nU(S,f.type,f.pendingProps,zi),S!==null?(f.stateNode=S,ai=f,Ta=dl(S.firstChild),zi=!1,N=!0):N=!1),N||Gl(f)),$e(f),N=f.type,D=f.pendingProps,V=u!==null?u.memoizedProps:null,S=D.children,Eb(N,D)?S=null:V!==null&&Eb(N,V)&&(f.flags|=32),f.memoizedState!==null&&(N=al(u,f,ob,null,null,y),Vg._currentValue=N),Kc(u,f),Ha(u,f,S,y),f.child;case 6:return u===null&&Kn&&((u=y=Ta)&&(y=aU(y,f.pendingProps,zi),y!==null?(f.stateNode=y,ai=f,Ta=null,u=!0):u=!1),u||Gl(f)),null;case 13:return fd(u,f,y);case 4:return Ge(f,f.stateNode.containerInfo),S=f.pendingProps,u===null?f.child=zc(f,null,S,y):Ha(u,f,S,y),f.child;case 11:return _i(u,f,f.type,f.pendingProps,y);case 7:return Ha(u,f,f.pendingProps,y),f.child;case 8:return Ha(u,f,f.pendingProps.children,y),f.child;case 12:return Ha(u,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Wl(f,f.type,S.value),Ha(u,f,S.children,y),f.child;case 9:return N=f.type._context,S=f.pendingProps.children,po(f),N=Ia(N),S=S(N),f.flags|=1,Ha(u,f,S,y),f.child;case 14:return bi(u,f,f.type,f.pendingProps,y);case 15:return Lg(u,f,f.type,f.pendingProps,y);case 19:return vs(u,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},u===null?(y=Yc(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=Ba(u.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return Vc(u,f,y);case 24:return po(f),S=Ia(Xa),u===null?(N=Kl(),N===null&&(N=fn,D=Np(),N.pooledCache=D,D.refCount++,D!==null&&(N.pooledCacheLanes|=y),N=D),f.memoizedState={parent:S,cache:N},pg(f),Wl(f,Xa,N)):(u.lanes&y&&(sn(u,f),rd(f,null,null,y),jf()),N=u.memoizedState,D=f.memoizedState,N.parent!==S?(N={parent:S,cache:S},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),Wl(f,Xa,S)):(S=D.cache,Wl(f,Xa,S),S!==N.cache&&Lf(f,[Xa],y,!0))),Ha(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function Gs(u){u.flags|=4}function Jf(u,f){if(f.type!=="stylesheet"||f.state.loading&4)u.flags&=-16777217;else if(u.flags|=16777216,!qM(f)){if(f=la.current,f!==null&&((Zt&4194048)===Zt?Hs!==null:(Zt&62914560)!==Zt&&!(Zt&536870912)||f!==Hs))throw ps=Hf,fg;u.flags|=8192}}function sl(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?nt():536870912,u.lanes|=f,Vn|=f)}function Xc(u,f){if(!Kn)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function pa(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,S=0;if(f)for(var N=u.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags&65011712,S|=N.flags&65011712,N.return=u,N=N.sibling;else for(N=u.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags,S|=N.flags,N.return=u,N=N.sibling;return u.subtreeFlags|=S,u.childLanes=y,f}function Pg(u,f,y){var S=f.pendingProps;switch(og(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pa(f),null;case 1:return pa(f),null;case 3:return y=f.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),$o(Xa),Ue(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Bs(f)?Gs(f):u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Zn())),pa(f),null;case 26:return y=f.memoizedState,u===null?(Gs(f),y!==null?(pa(f),Jf(f,y)):(pa(f),f.flags&=-16777217)):y?y!==u.memoizedState?(Gs(f),pa(f),Jf(f,y)):(pa(f),f.flags&=-16777217):(u.memoizedProps!==S&&Gs(f),pa(f),f.flags&=-16777217),null;case 27:dt(f),y=_e.current;var N=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==S&&Gs(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return pa(f),null}u=xe.current,Bs(f)?Q1(f):(u=HM(N,S,y),f.stateNode=u,Gs(f))}return pa(f),null;case 5:if(dt(f),y=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==S&&Gs(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return pa(f),null}if(u=xe.current,Bs(f))Q1(f);else{switch(N=Ky(_e.current),u){case 1:u=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:u=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":u=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":u=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":u=N.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof S.is=="string"?N.createElement("select",{is:S.is}):N.createElement("select"),S.multiple?u.multiple=!0:S.size&&(u.size=S.size);break;default:u=typeof S.is=="string"?N.createElement(y,{is:S.is}):N.createElement(y)}}u[Ya]=f,u[Ea]=S;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)u.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=u;e:switch(ci(u,y,S),y){case"button":case"input":case"select":case"textarea":u=!!S.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Gs(f)}}return pa(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==S&&Gs(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(n(166));if(u=_e.current,Bs(f)){if(u=f.stateNode,y=f.memoizedProps,S=null,N=ai,N!==null)switch(N.tag){case 27:case 5:S=N.memoizedProps}u[Ya]=f,u=!!(u.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||LM(u.nodeValue,y)),u||Gl(f)}else u=Ky(u).createTextNode(S),u[Ya]=f,f.stateNode=u}return pa(f),null;case 13:if(S=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(N=Bs(f),S!==null&&S.dehydrated!==null){if(u===null){if(!N)throw Error(n(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[Ya]=f}else Qu(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;pa(f),N=!1}else N=Zn(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(go(f),f):(go(f),null)}if(go(f),f.flags&128)return f.lanes=y,f;if(y=S!==null,u=u!==null&&u.memoizedState!==null,y){S=f.child,N=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(N=S.alternate.memoizedState.cachePool.pool);var D=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(D=S.memoizedState.cachePool.pool),D!==N&&(S.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),sl(f,f.updateQueue),pa(f),null;case 4:return Ue(),u===null&&xb(f.stateNode.containerInfo),pa(f),null;case 10:return $o(f.type),pa(f),null;case 19:if(le(ka),N=f.memoizedState,N===null)return pa(f),null;if(S=(f.flags&128)!==0,D=N.rendering,D===null)if(S)Xc(N,!1);else{if(ba!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(D=il(u),D!==null){for(f.flags|=128,Xc(N,!1),u=D.updateQueue,f.updateQueue=u,sl(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)ig(y,u),y=y.sibling;return ce(ka,ka.current&1|2),f.child}u=u.sibling}N.tail!==null&&ze()>Kr&&(f.flags|=128,S=!0,Xc(N,!1),f.lanes=4194304)}else{if(!S)if(u=il(D),u!==null){if(f.flags|=128,S=!0,u=u.updateQueue,f.updateQueue=u,sl(f,u),Xc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!D.alternate&&!Kn)return pa(f),null}else 2*ze()-N.renderingStartTime>Kr&&y!==536870912&&(f.flags|=128,S=!0,Xc(N,!1),f.lanes=4194304);N.isBackwards?(D.sibling=f.child,f.child=D):(u=N.last,u!==null?u.sibling=D:f.child=D,N.last=D)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=ze(),f.sibling=null,u=ka.current,ce(ka,S?u&1|2:u&1),f):(pa(f),null);case 22:case 23:return go(f),zf(),S=f.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?y&536870912&&!(f.flags&128)&&(pa(f),f.subtreeFlags&6&&(f.flags|=8192)):pa(f),y=f.updateQueue,y!==null&&sl(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),u!==null&&le(hs),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),$o(Xa),pa(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function hd(u,f){switch(og(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return $o(Xa),Ue(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return dt(f),null;case 13:if(go(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Qu()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return le(ka),null;case 4:return Ue(),null;case 10:return $o(f.type),null;case 22:case 23:return go(f),zf(),u!==null&&le(hs),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return $o(Xa),null;case 25:return null;default:return null}}function pd(u,f){switch(og(f),f.tag){case 3:$o(Xa),Ue();break;case 26:case 27:case 5:dt(f);break;case 4:Ue();break;case 13:go(f);break;case 19:le(ka);break;case 10:$o(f.type);break;case 22:case 23:go(f),zf(),u!==null&&le(hs);break;case 24:$o(Xa)}}function Jc(u,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var N=S.next;y=N;do{if((y.tag&u)===u){S=void 0;var D=y.create,V=y.inst;S=D(),V.destroy=S}y=y.next}while(y!==N)}}catch(Z){ge(f,f.return,Z)}}function Yi(u,f,y){try{var S=f.updateQueue,N=S!==null?S.lastEffect:null;if(N!==null){var D=N.next;S=D;do{if((S.tag&u)===u){var V=S.inst,Z=V.destroy;if(Z!==void 0){V.destroy=void 0,N=f;var de=y,Ne=Z;try{Ne()}catch(Je){ge(N,de,Je)}}}S=S.next}while(S!==D)}}catch(Je){ge(f,f.return,Je)}}function Zc(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{ty(f,y)}catch(S){ge(u,u.return,S)}}}function ol(u,f,y){y.props=vo(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(S){ge(u,f,S)}}function Qc(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var S=u.stateNode;break;case 30:S=u.stateNode;break;default:S=u.stateNode}typeof y=="function"?u.refCleanup=y(S):y.current=S}}catch(N){ge(u,f,N)}}function xo(u,f){var y=u.ref,S=u.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(N){ge(u,f,N)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(N){ge(u,f,N)}else y.current=null}function md(u){var f=u.type,y=u.memoizedProps,S=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(N){ge(u,u.return,N)}}function Zf(u,f,y){try{var S=u.stateNode;Z6(S,u.type,y,f),S[Ea]=f}catch(N){ge(u,u.return,N)}}function Qf(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&bd(u.type)||u.tag===4}function ec(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Qf(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&bd(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function tc(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=Wy));else if(S!==4&&(S===27&&bd(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(tc(u,f,y),u=u.sibling;u!==null;)tc(u,f,y),u=u.sibling}function nc(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(S!==4&&(S===27&&bd(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(nc(u,f,y),u=u.sibling;u!==null;)nc(u,f,y),u=u.sibling}function ac(u){var f=u.stateNode,y=u.memoizedProps;try{for(var S=u.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);ci(f,S,y),f[Ya]=u,f[Ea]=y}catch(D){ge(u,u.return,D)}}var Ao=!1,ma=!1,gd=!1,qi=typeof WeakSet=="function"?WeakSet:Set,ca=null;function sr(u,f){if(u=u.containerInfo,bb=Qy,u=Q0(u),Rf(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var N=S.anchorOffset,D=S.focusNode;S=S.focusOffset;try{y.nodeType,D.nodeType}catch{y=null;break e}var V=0,Z=-1,de=-1,Ne=0,Je=0,at=u,De=null;t:for(;;){for(var Fe;at!==y||N!==0&&at.nodeType!==3||(Z=V+N),at!==D||S!==0&&at.nodeType!==3||(de=V+S),at.nodeType===3&&(V+=at.nodeValue.length),(Fe=at.firstChild)!==null;)De=at,at=Fe;for(;;){if(at===u)break t;if(De===y&&++Ne===N&&(Z=V),De===D&&++Je===S&&(de=V),(Fe=at.nextSibling)!==null)break;at=De,De=at.parentNode}at=Fe}y=Z===-1||de===-1?null:{start:Z,end:de}}else y=null}y=y||{start:0,end:0}}else y=null;for(Sb={focusedElem:u,selectionRange:y},Qy=!1,ca=f;ca!==null;)if(f=ca,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,ca=u;else for(;ca!==null;){switch(f=ca,D=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if(u&1024&&D!==null){u=void 0,y=f,N=D.memoizedProps,D=D.memoizedState,S=y.stateNode;try{var un=vo(y.type,N,y.elementType===y.type);u=S.getSnapshotBeforeUpdate(un,D),S.__reactInternalSnapshotBeforeUpdate=u}catch(an){ge(y,y.return,an)}}break;case 3:if(u&1024){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)Rb(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Rb(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(u&1024)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,ca=u;break}ca=f.return}}function ll(u,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:oi(u,y),S&4&&Jc(5,y);break;case 1:if(oi(u,y),S&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(V){ge(y,y.return,V)}else{var N=vo(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(N,f,u.__reactInternalSnapshotBeforeUpdate)}catch(V){ge(y,y.return,V)}}S&64&&Zc(y),S&512&&Qc(y,y.return);break;case 3:if(oi(u,y),S&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{ty(u,f)}catch(V){ge(y,y.return,V)}}break;case 27:f===null&&S&4&&ac(y);case 26:case 5:oi(u,y),f===null&&S&4&&md(y),S&512&&Qc(y,y.return);break;case 12:oi(u,y);break;case 13:oi(u,y),S&4&&rc(u,y),S&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=Sa.bind(null,y),rU(u,y))));break;case 22:if(S=y.memoizedState!==null||Ao,!S){f=f!==null&&f.memoizedState!==null||ma,N=Ao;var D=ma;Ao=S,(ma=f)&&!D?_o(u,y,(y.subtreeFlags&8772)!==0):oi(u,y),Ao=N,ma=D}break;case 30:break;default:oi(u,y)}}function wn(u){var f=u.alternate;f!==null&&(u.alternate=null,wn(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ha(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var $t=null,Gn=!1;function xs(u,f,y){for(y=y.child;y!==null;)$c(u,f,y),y=y.sibling}function $c(u,f,y){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(je,y)}catch{}switch(y.tag){case 26:ma||xo(y,f),xs(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ma||xo(y,f);var S=$t,N=Gn;bd(y.type)&&($t=y.stateNode,Gn=!1),xs(u,f,y),Hg(y.stateNode),$t=S,Gn=N;break;case 5:ma||xo(y,f);case 6:if(S=$t,N=Gn,$t=null,xs(u,f,y),$t=S,Gn=N,$t!==null)if(Gn)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(y.stateNode)}catch(D){ge(y,f,D)}else try{$t.removeChild(y.stateNode)}catch(D){ge(y,f,D)}break;case 18:$t!==null&&(Gn?(u=$t,FM(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),qg(u)):FM($t,y.stateNode));break;case 4:S=$t,N=Gn,$t=y.stateNode.containerInfo,Gn=!0,xs(u,f,y),$t=S,Gn=N;break;case 0:case 11:case 14:case 15:ma||Yi(2,y,f),ma||Yi(4,y,f),xs(u,f,y);break;case 1:ma||(xo(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&ol(y,f,S)),xs(u,f,y);break;case 21:xs(u,f,y);break;case 22:ma=(S=ma)||y.memoizedState!==null,xs(u,f,y),ma=S;break;default:xs(u,f,y)}}function rc(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{qg(u)}catch(y){ge(f,f.return,y)}}function Jp(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new qi),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new qi),f;default:throw Error(n(435,u.tag))}}function eu(u,f){var y=Jp(u);f.forEach(function(S){var N=on.bind(null,u,S);y.has(S)||(y.add(S),S.then(N,N))})}function vr(u,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var N=y[S],D=u,V=f,Z=V;e:for(;Z!==null;){switch(Z.tag){case 27:if(bd(Z.type)){$t=Z.stateNode,Gn=!1;break e}break;case 5:$t=Z.stateNode,Gn=!1;break e;case 3:case 4:$t=Z.stateNode.containerInfo,Gn=!0;break e}Z=Z.return}if($t===null)throw Error(n(160));$c(D,V,N),$t=null,Gn=!1,D=N.alternate,D!==null&&(D.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Zp(f,u),f=f.sibling}var Vs=null;function Zp(u,f){var y=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:vr(f,u),Da(u),S&4&&(Yi(3,u,u.return),Jc(3,u),Yi(5,u,u.return));break;case 1:vr(f,u),Da(u),S&512&&(ma||y===null||xo(y,y.return)),S&64&&Ao&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var N=Vs;if(vr(f,u),Da(u),S&512&&(ma||y===null||xo(y,y.return)),S&4){var D=y!==null?y.memoizedState:null;if(S=u.memoizedState,y===null)if(S===null)if(u.stateNode===null){e:{S=u.type,y=u.memoizedProps,N=N.ownerDocument||N;t:switch(S){case"title":D=N.getElementsByTagName("title")[0],(!D||D[Hi]||D[Ya]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=N.createElement(S),N.head.insertBefore(D,N.querySelector("head > title"))),ci(D,S,y),D[Ya]=u,qa(D),S=D;break e;case"link":var V=KM("link","href",N).get(S+(y.href||""));if(V){for(var Z=0;Z<V.length;Z++)if(D=V[Z],D.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&D.getAttribute("rel")===(y.rel==null?null:y.rel)&&D.getAttribute("title")===(y.title==null?null:y.title)&&D.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){V.splice(Z,1);break t}}D=N.createElement(S),ci(D,S,y),N.head.appendChild(D);break;case"meta":if(V=KM("meta","content",N).get(S+(y.content||""))){for(Z=0;Z<V.length;Z++)if(D=V[Z],D.getAttribute("content")===(y.content==null?null:""+y.content)&&D.getAttribute("name")===(y.name==null?null:y.name)&&D.getAttribute("property")===(y.property==null?null:y.property)&&D.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&D.getAttribute("charset")===(y.charSet==null?null:y.charSet)){V.splice(Z,1);break t}}D=N.createElement(S),ci(D,S,y),N.head.appendChild(D);break;default:throw Error(n(468,S))}D[Ya]=u,qa(D),S=D}u.stateNode=S}else YM(N,u.type,u.stateNode);else u.stateNode=WM(N,S,u.memoizedProps);else D!==S?(D===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):D.count--,S===null?YM(N,u.type,u.stateNode):WM(N,S,u.memoizedProps)):S===null&&u.stateNode!==null&&Zf(u,u.memoizedProps,y.memoizedProps)}break;case 27:vr(f,u),Da(u),S&512&&(ma||y===null||xo(y,y.return)),y!==null&&S&4&&Zf(u,u.memoizedProps,y.memoizedProps);break;case 5:if(vr(f,u),Da(u),S&512&&(ma||y===null||xo(y,y.return)),u.flags&32){N=u.stateNode;try{ar(N,"")}catch(Fe){ge(u,u.return,Fe)}}S&4&&u.stateNode!=null&&(N=u.memoizedProps,Zf(u,N,y!==null?y.memoizedProps:N)),S&1024&&(gd=!0);break;case 6:if(vr(f,u),Da(u),S&4){if(u.stateNode===null)throw Error(n(162));S=u.memoizedProps,y=u.stateNode;try{y.nodeValue=S}catch(Fe){ge(u,u.return,Fe)}}break;case 3:if(Xy=null,N=Vs,Vs=Yy(f.containerInfo),vr(f,u),Vs=N,Da(u),S&4&&y!==null&&y.memoizedState.isDehydrated)try{qg(f.containerInfo)}catch(Fe){ge(u,u.return,Fe)}gd&&(gd=!1,ic(u));break;case 4:S=Vs,Vs=Yy(u.stateNode.containerInfo),vr(f,u),Da(u),Vs=S;break;case 12:vr(f,u),Da(u);break;case 13:vr(f,u),Da(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(sa=ze()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,eu(u,S)));break;case 22:N=u.memoizedState!==null;var de=y!==null&&y.memoizedState!==null,Ne=Ao,Je=ma;if(Ao=Ne||N,ma=Je||de,vr(f,u),ma=Je,Ao=Ne,Da(u),S&8192)e:for(f=u.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(y===null||de||Ao||ma||Xi(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){de=y=f;try{if(D=de.stateNode,N)V=D.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{Z=de.stateNode;var at=de.memoizedProps.style,De=at!=null&&at.hasOwnProperty("display")?at.display:null;Z.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Fe){ge(de,de.return,Fe)}}}else if(f.tag===6){if(y===null){de=f;try{de.stateNode.nodeValue=N?"":de.memoizedProps}catch(Fe){ge(de,de.return,Fe)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=u.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,eu(u,y))));break;case 19:vr(f,u),Da(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,eu(u,S)));break;case 30:break;case 21:break;default:vr(f,u),Da(u)}}function Da(u){var f=u.flags;if(f&2){try{for(var y,S=u.return;S!==null;){if(Qf(S)){y=S;break}S=S.return}if(y==null)throw Error(n(160));switch(y.tag){case 27:var N=y.stateNode,D=ec(u);nc(u,D,N);break;case 5:var V=y.stateNode;y.flags&32&&(ar(V,""),y.flags&=-33);var Z=ec(u);nc(u,Z,V);break;case 3:case 4:var de=y.stateNode.containerInfo,Ne=ec(u);tc(u,Ne,de);break;default:throw Error(n(161))}}catch(Je){ge(u,u.return,Je)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function ic(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;ic(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function oi(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)ll(u,f.alternate,f),f=f.sibling}function Xi(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Yi(4,f,f.return),Xi(f);break;case 1:xo(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&ol(f,f.return,y),Xi(f);break;case 27:Hg(f.stateNode);case 26:case 5:xo(f,f.return),Xi(f);break;case 22:f.memoizedState===null&&Xi(f);break;case 30:Xi(f);break;default:Xi(f)}u=u.sibling}}function _o(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,N=u,D=f,V=D.flags;switch(D.tag){case 0:case 11:case 15:_o(N,D,y),Jc(4,D);break;case 1:if(_o(N,D,y),S=D,N=S.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Ne){ge(S,S.return,Ne)}if(S=D,N=S.updateQueue,N!==null){var Z=S.stateNode;try{var de=N.shared.hiddenCallbacks;if(de!==null)for(N.shared.hiddenCallbacks=null,N=0;N<de.length;N++)id(de[N],Z)}catch(Ne){ge(S,S.return,Ne)}}y&&V&64&&Zc(D),Qc(D,D.return);break;case 27:ac(D);case 26:case 5:_o(N,D,y),y&&S===null&&V&4&&md(D),Qc(D,D.return);break;case 12:_o(N,D,y);break;case 13:_o(N,D,y),y&&V&4&&rc(N,D);break;case 22:D.memoizedState===null&&_o(N,D,y),Qc(D,D.return);break;case 30:break;default:_o(N,D,y)}f=f.sibling}}function Qp(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&$u(y))}function $p(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&$u(u))}function ua(u,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)em(u,f,y,S),f=f.sibling}function em(u,f,y,S){var N=f.flags;switch(f.tag){case 0:case 11:case 15:ua(u,f,y,S),N&2048&&Jc(9,f);break;case 1:ua(u,f,y,S);break;case 3:ua(u,f,y,S),N&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&$u(u)));break;case 12:if(N&2048){ua(u,f,y,S),u=f.stateNode;try{var D=f.memoizedProps,V=D.id,Z=D.onPostCommit;typeof Z=="function"&&Z(V,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(de){ge(f,f.return,de)}}else ua(u,f,y,S);break;case 13:ua(u,f,y,S);break;case 23:break;case 22:D=f.stateNode,V=f.alternate,f.memoizedState!==null?D._visibility&2?ua(u,f,y,S):Ws(u,f):D._visibility&2?ua(u,f,y,S):(D._visibility|=2,cl(u,f,y,S,(f.subtreeFlags&10256)!==0)),N&2048&&Qp(V,f);break;case 24:ua(u,f,y,S),N&2048&&$p(f.alternate,f);break;default:ua(u,f,y,S)}}function cl(u,f,y,S,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var D=u,V=f,Z=y,de=S,Ne=V.flags;switch(V.tag){case 0:case 11:case 15:cl(D,V,Z,de,N),Jc(8,V);break;case 23:break;case 22:var Je=V.stateNode;V.memoizedState!==null?Je._visibility&2?cl(D,V,Z,de,N):Ws(D,V):(Je._visibility|=2,cl(D,V,Z,de,N)),N&&Ne&2048&&Qp(V.alternate,V);break;case 24:cl(D,V,Z,de,N),N&&Ne&2048&&$p(V.alternate,V);break;default:cl(D,V,Z,de,N)}f=f.sibling}}function Ws(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,S=f,N=S.flags;switch(S.tag){case 22:Ws(y,S),N&2048&&Qp(S.alternate,S);break;case 24:Ws(y,S),N&2048&&$p(S.alternate,S);break;default:Ws(y,S)}f=f.sibling}}var Ji=8192;function vd(u){if(u.subtreeFlags&Ji)for(u=u.child;u!==null;)jy(u),u=u.sibling}function jy(u){switch(u.tag){case 26:vd(u),u.flags&Ji&&u.memoizedState!==null&&vU(Vs,u.memoizedState,u.memoizedProps);break;case 5:vd(u);break;case 3:case 4:var f=Vs;Vs=Yy(u.stateNode.containerInfo),vd(u),Vs=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Ji,Ji=16777216,vd(u),Ji=f):vd(u));break;default:vd(u)}}function zy(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function ga(u){var f=u.deletions;if(u.flags&16){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];ca=S,So(S,u)}zy(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Og(u),u=u.sibling}function Og(u){switch(u.tag){case 0:case 11:case 15:ga(u),u.flags&2048&&Yi(9,u,u.return);break;case 3:ga(u);break;case 12:ga(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,bo(u)):ga(u);break;default:ga(u)}}function bo(u){var f=u.deletions;if(u.flags&16){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];ca=S,So(S,u)}zy(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Yi(8,f,f.return),bo(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,bo(f));break;default:bo(f)}u=u.sibling}}function So(u,f){for(;ca!==null;){var y=ca;switch(y.tag){case 0:case 11:case 15:Yi(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:$u(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,ca=S;else e:for(y=u;ca!==null;){S=ca;var N=S.sibling,D=S.return;if(wn(S),S===y){ca=null;break e}if(N!==null){N.return=D,ca=N;break e}ca=D}}}var La={getCacheForType:function(u){var f=Ia(Xa),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},Ug=typeof WeakMap=="function"?WeakMap:Map,Qn=0,fn=null,Dn=null,Zt=0,_n=0,Na=null,Zi=!1,yd=!1,xd=!1,As=0,ba=0,Ks=0,Eo=0,tu=0,_s=0,Vn=0,$n=null,en=null,Pn=!1,sa=0,Kr=1/0,bs=null,Qi=null,or=0,Yr=null,da=null,$i=0,ul=0,$f=null,es=null,wo=0,nu=null;function Pa(){if(Qn&2&&Zt!==0)return Zt&-Zt;if(G.T!==null){var u=vn;return u!==0?u:mb()}return mn()}function tm(){_s===0&&(_s=!(Zt&536870912)||Kn?pe():536870912);var u=la.current;return u!==null&&(u.flags|=32),_s}function li(u,f,y){(u===fn&&(_n===2||_n===9)||u.cancelPendingCommit!==null)&&(oc(u,0),Ys(u,Zt,_s,!1)),bt(u,y),(!(Qn&2)||u!==fn)&&(u===fn&&(!(Qn&2)&&(Eo|=y),ba===4&&Ys(u,Zt,_s,!1)),uc(u))}function Ad(u,f,y){if(Qn&6)throw Error(n(327));var S=!y&&(f&124)===0&&(f&u.expiredLanes)===0||Me(u,f),N=S?C(u,f):g(u,f,!0),D=S;do{if(N===0){yd&&!S&&Ys(u,f,0,!1);break}else{if(y=u.current.alternate,D&&!sc(y)){N=g(u,f,!1),D=!1;continue}if(N===2){if(D=f,u.errorRecoveryDisabledLanes&D)var V=0;else V=u.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){f=V;e:{var Z=u;N=$n;var de=Z.current.memoizedState.isDehydrated;if(de&&(oc(Z,V).flags|=256),V=g(Z,V,!1),V!==2){if(xd&&!de){Z.errorRecoveryDisabledLanes|=D,Eo|=D,N=4;break e}D=en,en=N,D!==null&&(en===null?en=D:en.push.apply(en,D))}N=V}if(D=!1,N!==2)continue}}if(N===1){oc(u,0),Ys(u,f,0,!0);break}e:{switch(S=u,D=N,D){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Ys(S,f,_s,!Zi);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(N=sa+300-ze(),10<N)){if(Ys(S,f,_s,!Zi),ue(S,0,!0)!==0)break e;S.timeoutHandle=UM(eh.bind(null,S,y,en,bs,Pn,f,_s,Eo,Vn,Zi,D,2,-0,0),N);break e}eh(S,y,en,bs,Pn,f,_s,Eo,Vn,Zi,D,0,-0,0)}}break}while(!0);uc(u)}function eh(u,f,y,S,N,D,V,Z,de,Ne,Je,at,De,Fe){if(u.timeoutHandle=-1,at=f.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(Gg={stylesheets:null,count:0,unsuspend:gU},jy(f),at=yU(),at!==null)){u.cancelPendingCommit=at(vt.bind(null,u,f,D,y,S,N,V,Z,de,Je,1,De,Fe)),Ys(u,D,V,!Ne);return}vt(u,f,D,y,S,N,V,Z,de)}function sc(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var N=y[S],D=N.getSnapshot;N=N.value;try{if(!gi(D(),N))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ys(u,f,y,S){f&=~tu,f&=~Eo,u.suspendedLanes|=f,u.pingedLanes&=~f,S&&(u.warmLanes|=f),S=u.expirationTimes;for(var N=f;0<N;){var D=31-_t(N),V=1<<D;S[D]=-1,N&=~V}y!==0&&et(u,y,f)}function Ro(){return Qn&6?!0:(Bg(0),!1)}function au(){if(Dn!==null){if(_n===0)var u=Dn.return;else u=Dn,Qo=Vl=null,yg(u),jc=null,Kf=0,u=Dn;for(;u!==null;)pd(u.alternate,u),u=u.return;Dn=null}}function oc(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,$6(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),au(),fn=u,Dn=y=Ba(u.current,null),Zt=f,_n=0,Na=null,Zi=!1,yd=Me(u,f),xd=!1,Vn=_s=tu=Eo=Ks=ba=0,en=$n=null,Pn=!1,f&8&&(f|=f&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=f;0<S;){var N=31-_t(S),D=1<<N;f|=u[N],S&=~D}return As=f,Nf(),y}function nm(u,f){yn=null,G.H=Wf,f===kf||f===Fs?(f=hg(),_n=3):f===fg?(f=hg(),_n=4):_n=f===Hy?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Na=f,Dn===null&&(ba=1,Yp(u,Mr(f,u.current)))}function _d(){var u=G.H;return G.H=Wf,u===null?Wf:u}function am(){var u=G.A;return G.A=La,u}function p(){ba=4,Zi||(Zt&4194048)!==Zt&&la.current!==null||(yd=!0),!(Ks&134217727)&&!(Eo&134217727)||fn===null||Ys(fn,Zt,_s,!1)}function g(u,f,y){var S=Qn;Qn|=2;var N=_d(),D=am();(fn!==u||Zt!==f)&&(bs=null,oc(u,f)),f=!1;var V=ba;e:do try{if(_n!==0&&Dn!==null){var Z=Dn,de=Na;switch(_n){case 8:au(),V=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(f=!0);var Ne=_n;if(_n=0,Na=null,he(u,Z,de,Ne),y&&yd){V=0;break e}break;default:Ne=_n,_n=0,Na=null,he(u,Z,de,Ne)}}w(),V=ba;break}catch(Je){nm(u,Je)}while(!0);return f&&u.shellSuspendCounter++,Qo=Vl=null,Qn=S,G.H=N,G.A=D,Dn===null&&(fn=null,Zt=0,Nf()),V}function w(){for(;Dn!==null;)k(Dn)}function C(u,f){var y=Qn;Qn|=2;var S=_d(),N=am();fn!==u||Zt!==f?(bs=null,Kr=ze()+500,oc(u,f)):yd=Me(u,f);e:do try{if(_n!==0&&Dn!==null){f=Dn;var D=Na;t:switch(_n){case 1:_n=0,Na=null,he(u,f,D,1);break;case 2:case 9:if(Dp(D)){_n=0,Na=null,te(f);break}f=function(){_n!==2&&_n!==9||fn!==u||(_n=7),uc(u)},D.then(f,f);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:Dp(D)?(_n=0,Na=null,te(f)):(_n=0,Na=null,he(u,f,D,7));break;case 5:var V=null;switch(Dn.tag){case 26:V=Dn.memoizedState;case 5:case 27:var Z=Dn;if(!V||qM(V)){_n=0,Na=null;var de=Z.sibling;if(de!==null)Dn=de;else{var Ne=Z.return;Ne!==null?(Dn=Ne,we(Ne)):Dn=null}break t}}_n=0,Na=null,he(u,f,D,5);break;case 6:_n=0,Na=null,he(u,f,D,6);break;case 8:au(),ba=6;break e;default:throw Error(n(462))}}O();break}catch(Je){nm(u,Je)}while(!0);return Qo=Vl=null,G.H=S,G.A=N,Qn=y,Dn!==null?0:(fn=null,Zt=0,Nf(),ba)}function O(){for(;Dn!==null&&!Le();)k(Dn)}function k(u){var f=qc(u.alternate,u,As);u.memoizedProps=u.pendingProps,f===null?we(u):Dn=f}function te(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=Wi(y,f,f.pendingProps,f.type,void 0,Zt);break;case 11:f=Wi(y,f,f.pendingProps,f.type.render,f.ref,Zt);break;case 5:yg(f);default:pd(y,f),f=Dn=ig(f,As),f=qc(y,f,As)}u.memoizedProps=u.pendingProps,f===null?we(u):Dn=f}function he(u,f,y,S){Qo=Vl=null,yg(f),jc=null,Kf=0;var N=f.return;try{if(hb(u,N,f,y,Zt)){ba=1,Yp(u,Mr(y,u.current)),Dn=null;return}}catch(D){if(N!==null)throw Dn=N,D;ba=1,Yp(u,Mr(y,u.current)),Dn=null;return}f.flags&32768?(Kn||S===1?u=!0:yd||Zt&536870912?u=!1:(Zi=u=!0,(S===2||S===9||S===3||S===6)&&(S=la.current,S!==null&&S.tag===13&&(S.flags|=16384))),Xe(f,u)):we(f)}function we(u){var f=u;do{if(f.flags&32768){Xe(f,Zi);return}u=f.return;var y=Pg(f.alternate,f,As);if(y!==null){Dn=y;return}if(f=f.sibling,f!==null){Dn=f;return}Dn=f=u}while(f!==null);ba===0&&(ba=5)}function Xe(u,f){do{var y=hd(u.alternate,u);if(y!==null){y.flags&=32767,Dn=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Dn=u;return}Dn=u=y}while(u!==null);ba=6,Dn=null}function vt(u,f,y,S,N,D,V,Z,de){u.cancelPendingCommit=null;do lc();while(or!==0);if(Qn&6)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(D=f.lanes|f.childLanes,D|=Sp,lt(u,y,D,V,Z,de),u===fn&&(Dn=fn=null,Zt=0),da=f,Yr=u,$i=y,ul=D,$f=N,es=S,f.subtreeFlags&10256||f.flags&10256?(u.callbackNode=null,u.callbackPriority=0,Yn(Ot,function(){return cc(),null})):(u.callbackNode=null,u.callbackPriority=0),S=(f.flags&13878)!==0,f.subtreeFlags&13878||S){S=G.T,G.T=null,N=Y.p,Y.p=2,V=Qn,Qn|=4;try{sr(u,f,y)}finally{Qn=V,Y.p=N,G.T=S}}or=1,Rt(),Nt(),hn()}}function Rt(){if(or===1){or=0;var u=Yr,f=da,y=(f.flags&13878)!==0;if(f.subtreeFlags&13878||y){y=G.T,G.T=null;var S=Y.p;Y.p=2;var N=Qn;Qn|=4;try{Zp(f,u);var D=Sb,V=Q0(u.containerInfo),Z=D.focusedElem,de=D.selectionRange;if(V!==Z&&Z&&Z.ownerDocument&&Z0(Z.ownerDocument.documentElement,Z)){if(de!==null&&Rf(Z)){var Ne=de.start,Je=de.end;if(Je===void 0&&(Je=Ne),"selectionStart"in Z)Z.selectionStart=Ne,Z.selectionEnd=Math.min(Je,Z.value.length);else{var at=Z.ownerDocument||document,De=at&&at.defaultView||window;if(De.getSelection){var Fe=De.getSelection(),un=Z.textContent.length,an=Math.min(de.start,un),ya=de.end===void 0?an:Math.min(de.end,un);!Fe.extend&&an>ya&&(V=ya,ya=an,an=V);var Ee=J0(Z,an),ve=J0(Z,ya);if(Ee&&ve&&(Fe.rangeCount!==1||Fe.anchorNode!==Ee.node||Fe.anchorOffset!==Ee.offset||Fe.focusNode!==ve.node||Fe.focusOffset!==ve.offset)){var Te=at.createRange();Te.setStart(Ee.node,Ee.offset),Fe.removeAllRanges(),an>ya?(Fe.addRange(Te),Fe.extend(ve.node,ve.offset)):(Te.setEnd(ve.node,ve.offset),Fe.addRange(Te))}}}}for(at=[],Fe=Z;Fe=Fe.parentNode;)Fe.nodeType===1&&at.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<at.length;Z++){var tt=at[Z];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Qy=!!bb,Sb=bb=null}finally{Qn=N,Y.p=S,G.T=y}}u.current=f,or=2}}function Nt(){if(or===2){or=0;var u=Yr,f=da,y=(f.flags&8772)!==0;if(f.subtreeFlags&8772||y){y=G.T,G.T=null;var S=Y.p;Y.p=2;var N=Qn;Qn|=4;try{ll(u,f.alternate,f)}finally{Qn=N,Y.p=S,G.T=y}}or=3}}function hn(){if(or===4||or===3){or=0,Ke();var u=Yr,f=da,y=$i,S=es;f.subtreeFlags&10256||f.flags&10256?or=5:(or=0,da=Yr=null,ts(u,u.pendingLanes));var N=u.pendingLanes;if(N===0&&(Qi=null),En(y),f=f.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(je,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=G.T,N=Y.p,Y.p=2,G.T=null;try{for(var D=u.onRecoverableError,V=0;V<S.length;V++){var Z=S[V];D(Z.value,{componentStack:Z.stack})}}finally{G.T=f,Y.p=N}}$i&3&&lc(),uc(u),N=u.pendingLanes,y&4194090&&N&42?u===nu?wo++:(wo=0,nu=u):wo=0,Bg(0)}}function ts(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,$u(f)))}function lc(u){return Rt(),Nt(),hn(),cc()}function cc(){if(or!==5)return!1;var u=Yr,f=ul;ul=0;var y=En($i),S=G.T,N=Y.p;try{Y.p=32>y?32:y,G.T=null,y=$f,$f=null;var D=Yr,V=$i;if(or=0,da=Yr=null,$i=0,Qn&6)throw Error(n(331));var Z=Qn;if(Qn|=4,Og(D.current),em(D,D.current,V,y),Qn=Z,Bg(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(je,D)}catch{}return!0}finally{Y.p=N,G.T=S,ts(u,f)}}function Ce(u,f,y){f=Mr(y,f),f=qp(u.stateNode,f,2),u=tl(u,f,2),u!==null&&(bt(u,2),uc(u))}function ge(u,f,y){if(u.tag===3)Ce(u,u,y);else for(;f!==null;){if(f.tag===3){Ce(f,u,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Qi===null||!Qi.has(S))){u=Mr(y,u),y=ky(2),S=tl(f,y,2),S!==null&&(Xp(y,S,f,u),bt(S,2),uc(S));break}}f=f.return}}function ke(u,f,y){var S=u.pingCache;if(S===null){S=u.pingCache=new Ug;var N=new Set;S.set(f,N)}else N=S.get(f),N===void 0&&(N=new Set,S.set(f,N));N.has(y)||(xd=!0,N.add(y),u=pt.bind(null,u,f,y),f.then(u,u))}function pt(u,f,y){var S=u.pingCache;S!==null&&S.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,fn===u&&(Zt&y)===y&&(ba===4||ba===3&&(Zt&62914560)===Zt&&300>ze()-sa?!(Qn&2)&&oc(u,0):tu|=y,Vn===Zt&&(Vn=0)),uc(u)}function Yt(u,f){f===0&&(f=nt()),u=Jo(u,f),u!==null&&(bt(u,f),uc(u))}function Sa(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),Yt(u,y)}function on(u,f){var y=0;switch(u.tag){case 13:var S=u.stateNode,N=u.memoizedState;N!==null&&(y=N.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(n(314))}S!==null&&S.delete(f),Yt(u,y)}function Yn(u,f){return se(u,f)}var ja=null,Ln=null,Mo=!1,rm=!1,pb=!1,th=0;function uc(u){u!==Ln&&u.next===null&&(Ln===null?ja=Ln=u:Ln=Ln.next=u),rm=!0,Mo||(Mo=!0,V6())}function Bg(u,f){if(!pb&&rm){pb=!0;do for(var y=!1,S=ja;S!==null;){if(u!==0){var N=S.pendingLanes;if(N===0)var D=0;else{var V=S.suspendedLanes,Z=S.pingedLanes;D=(1<<31-_t(42|u)+1)-1,D&=N&~(V&~Z),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,RM(S,D))}else D=Zt,D=ue(S,S===fn?D:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),!(D&3)||Me(S,D)||(y=!0,RM(S,D));S=S.next}while(y);pb=!1}}function G6(){SM()}function SM(){rm=Mo=!1;var u=0;th!==0&&(Q6()&&(u=th),th=0);for(var f=ze(),y=null,S=ja;S!==null;){var N=S.next,D=EM(S,f);D===0?(S.next=null,y===null?ja=N:y.next=N,N===null&&(Ln=y)):(y=S,(u!==0||D&3)&&(rm=!0)),S=N}Bg(u)}function EM(u,f){for(var y=u.suspendedLanes,S=u.pingedLanes,N=u.expirationTimes,D=u.pendingLanes&-62914561;0<D;){var V=31-_t(D),Z=1<<V,de=N[V];de===-1?(!(Z&y)||Z&S)&&(N[V]=ft(Z,f)):de<=f&&(u.expiredLanes|=Z),D&=~Z}if(f=fn,y=Zt,y=ue(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S=u.callbackNode,y===0||u===f&&(_n===2||_n===9)||u.cancelPendingCommit!==null)return S!==null&&S!==null&&Be(S),u.callbackNode=null,u.callbackPriority=0;if(!(y&3)||Me(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(S!==null&&Be(S),En(y)){case 2:case 8:y=st;break;case 32:y=Ot;break;case 268435456:y=ie;break;default:y=Ot}return S=wM.bind(null,u),y=se(y,S),u.callbackPriority=f,u.callbackNode=y,f}return S!==null&&S!==null&&Be(S),u.callbackPriority=2,u.callbackNode=null,2}function wM(u,f){if(or!==0&&or!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(lc()&&u.callbackNode!==y)return null;var S=Zt;return S=ue(u,u===fn?S:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S===0?null:(Ad(u,S,f),EM(u,ze()),u.callbackNode!=null&&u.callbackNode===y?wM.bind(null,u):null)}function RM(u,f){if(lc())return null;Ad(u,f,!0)}function V6(){eU(function(){Qn&6?se(Qe,G6):SM()})}function mb(){return th===0&&(th=pe()),th}function MM(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:hf(""+u)}function TM(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function W6(u,f,y,S,N){if(f==="submit"&&y&&y.stateNode===N){var D=MM((N[Ea]||null).action),V=S.submitter;V&&(f=(f=V[Ea]||null)?MM(f.formAction):V.getAttribute("formAction"),f!==null&&(D=f,V=null));var Z=new Hu("action","action",null,S,N);u.push({event:Z,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(th!==0){var de=V?TM(N,V):new FormData(N);Cg(y,{pending:!0,data:de,method:N.method,action:D},null,de)}}else typeof D=="function"&&(Z.preventDefault(),de=V?TM(N,V):new FormData(N),Cg(y,{pending:!0,data:de,method:N.method,action:D},D,de))},currentTarget:N}]})}}for(var gb=0;gb<Tf.length;gb++){var vb=Tf[gb],K6=vb.toLowerCase(),Y6=vb[0].toUpperCase()+vb.slice(1);hr(K6,"on"+Y6)}hr(ni,"onAnimationEnd"),hr(tg,"onAnimationIteration"),hr(yi,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Z1,"onTransitionRun"),hr(qo,"onTransitionStart"),hr(qu,"onTransitionCancel"),hr(Xo,"onTransitionEnd"),ye("onMouseEnter",["mouseout","mouseover"]),ye("onMouseLeave",["mouseout","mouseover"]),ye("onPointerEnter",["pointerout","pointerover"]),ye("onPointerLeave",["pointerout","pointerover"]),ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fg));function NM(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var S=u[y],N=S.event;S=S.listeners;e:{var D=void 0;if(f)for(var V=S.length-1;0<=V;V--){var Z=S[V],de=Z.instance,Ne=Z.currentTarget;if(Z=Z.listener,de!==D&&N.isPropagationStopped())break e;D=Z,N.currentTarget=Ne;try{D(N)}catch(Je){Gc(Je)}N.currentTarget=null,D=de}else for(V=0;V<S.length;V++){if(Z=S[V],de=Z.instance,Ne=Z.currentTarget,Z=Z.listener,de!==D&&N.isPropagationStopped())break e;D=Z,N.currentTarget=Ne;try{D(N)}catch(Je){Gc(Je)}N.currentTarget=null,D=de}}}}function Bn(u,f){var y=f[Bi];y===void 0&&(y=f[Bi]=new Set);var S=u+"__bubble";y.has(S)||(CM(f,u,2,!1),y.add(S))}function yb(u,f,y){var S=0;f&&(S|=4),CM(y,u,S,f)}var Gy="_reactListening"+Math.random().toString(36).slice(2);function xb(u){if(!u[Gy]){u[Gy]=!0,Ou.forEach(function(y){y!=="selectionchange"&&(q6.has(y)||yb(y,!1,u),yb(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Gy]||(f[Gy]=!0,yb("selectionchange",!1,f))}}function CM(u,f,y,S){switch(eT(f)){case 2:var N=_U;break;case 8:N=bU;break;default:N=Lb}y=N.bind(null,f,y,u),N=void 0,!mf||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),S?N!==void 0?u.addEventListener(f,y,{capture:!0,passive:N}):u.addEventListener(f,y,!0):N!==void 0?u.addEventListener(f,y,{passive:N}):u.addEventListener(f,y,!1)}function Ab(u,f,y,S,N){var D=S;if(!(f&1)&&!(f&2)&&S!==null)e:for(;;){if(S===null)return;var V=S.tag;if(V===3||V===4){var Z=S.stateNode.containerInfo;if(Z===N)break;if(V===4)for(V=S.return;V!==null;){var de=V.tag;if((de===3||de===4)&&V.stateNode.containerInfo===N)return;V=V.return}for(;Z!==null;){if(V=Os(Z),V===null)return;if(de=V.tag,de===5||de===6||de===26||de===27){S=D=V;continue e}Z=Z.parentNode}}S=S.return}F0(function(){var Ne=D,Je=up(y),at=[];e:{var De=bp.get(u);if(De!==void 0){var Fe=Hu,un=u;switch(u){case"keypress":if(Dl(y)===0)break e;case"keydown":case"keyup":Fe=G0;break;case"focusin":un="focus",Fe=fp;break;case"focusout":un="blur",Fe=fp;break;case"beforeblur":case"afterblur":Fe=fp;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=W0;break;case ni:case tg:case yi:Fe=U1;break;case Xo:Fe=Vo;break;case"scroll":case"scrollend":Fe=L1;break;case"wheel":Fe=ab;break;case"copy":case"cut":case"paste":Fe=F1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=pp;break;case"toggle":case"beforetoggle":Fe=Pl}var an=(f&4)!==0,ya=!an&&(u==="scroll"||u==="scrollend"),Ee=an?De!==null?De+"Capture":null:De;an=[];for(var ve=Ne,Te;ve!==null;){var tt=ve;if(Te=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||Te===null||Ee===null||(tt=Bu(ve,Ee),tt!=null&&an.push(kg(ve,tt,Te))),ya)break;ve=ve.return}0<an.length&&(De=new Fe(De,un,null,y,Je),at.push({event:De,listeners:an}))}}if(!(f&7)){e:{if(De=u==="mouseover"||u==="pointerover",Fe=u==="mouseout"||u==="pointerout",De&&y!==cp&&(un=y.relatedTarget||y.fromElement)&&(Os(un)||un[ls]))break e;if((Fe||De)&&(De=Je.window===Je?Je:(De=Je.ownerDocument)?De.defaultView||De.parentWindow:window,Fe?(un=y.relatedTarget||y.toElement,Fe=Ne,un=un?Os(un):null,un!==null&&(ya=i(un),an=un.tag,un!==ya||an!==5&&an!==27&&an!==6)&&(un=null)):(Fe=null,un=Ne),Fe!==un)){if(an=j0,tt="onMouseLeave",Ee="onMouseEnter",ve="mouse",(u==="pointerout"||u==="pointerover")&&(an=pp,tt="onPointerLeave",Ee="onPointerEnter",ve="pointer"),ya=Fe==null?De:Cl(Fe),Te=un==null?De:Cl(un),De=new an(tt,ve+"leave",Fe,y,Je),De.target=ya,De.relatedTarget=Te,tt=null,Os(Je)===Ne&&(an=new an(Ee,ve+"enter",un,y,Je),an.target=Te,an.relatedTarget=ya,tt=an),ya=tt,Fe&&un)t:{for(an=Fe,Ee=un,ve=0,Te=an;Te;Te=im(Te))ve++;for(Te=0,tt=Ee;tt;tt=im(tt))Te++;for(;0<ve-Te;)an=im(an),ve--;for(;0<Te-ve;)Ee=im(Ee),Te--;for(;ve--;){if(an===Ee||Ee!==null&&an===Ee.alternate)break t;an=im(an),Ee=im(Ee)}an=null}else an=null;Fe!==null&&IM(at,De,Fe,an,!1),un!==null&&ya!==null&&IM(at,ya,un,an,!0)}}e:{if(De=Ne?Cl(Ne):window,Fe=De.nodeName&&De.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&De.type==="file")var Ut=gp;else if(X0(De))if(vp)Ut=Bl;else{Ut=q1;var On=rb}else Fe=De.nodeName,!Fe||Fe.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Ne&&lp(Ne.elementType)&&(Ut=gp):Ut=wf;if(Ut&&(Ut=Ut(u,Ne))){mi(at,Ut,y,Je);break e}On&&On(u,De,Ne),u==="focusout"&&Ne&&De.type==="number"&&Ne.memoizedProps.value!=null&&br(De,"number",De.value)}switch(On=Ne?Cl(Ne):window,u){case"focusin":(X0(On)||On.contentEditable==="true")&&(Ko=On,xp=Ne,Mf=null);break;case"focusout":Mf=xp=Ko=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,eg(at,y,Je);break;case"selectionchange":if($0)break;case"keydown":case"keyup":eg(at,y,Je)}var Jt;if(xf)e:{switch(u){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else Ul?bf(u,y)&&(rn="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(rn="onCompositionStart");rn&&(_f&&y.locale!=="ko"&&(Ul||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&Ul&&(Jt=H0()):(zo=Je,k0="value"in zo?zo.value:zo.textContent,Ul=!0)),On=Vy(Ne,rn),0<On.length&&(rn=new hp(rn,u,null,y,Je),at.push({event:rn,listeners:On}),Jt?rn.data=Jt:(Jt=Y0(y),Jt!==null&&(rn.data=Jt)))),(Jt=Af?Sf(u,y):q0(u,y))&&(rn=Vy(Ne,"onBeforeInput"),0<rn.length&&(On=new hp("onBeforeInput","beforeinput",null,y,Je),at.push({event:On,listeners:rn}),On.data=Jt)),W6(at,u,Ne,y,Je)}NM(at,f)})}function kg(u,f,y){return{instance:u,listener:f,currentTarget:y}}function Vy(u,f){for(var y=f+"Capture",S=[];u!==null;){var N=u,D=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||D===null||(N=Bu(u,y),N!=null&&S.unshift(kg(u,N,D)),N=Bu(u,f),N!=null&&S.push(kg(u,N,D))),u.tag===3)return S;u=u.return}return[]}function im(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function IM(u,f,y,S,N){for(var D=f._reactName,V=[];y!==null&&y!==S;){var Z=y,de=Z.alternate,Ne=Z.stateNode;if(Z=Z.tag,de!==null&&de===S)break;Z!==5&&Z!==26&&Z!==27||Ne===null||(de=Ne,N?(Ne=Bu(y,D),Ne!=null&&V.unshift(kg(y,Ne,de))):N||(Ne=Bu(y,D),Ne!=null&&V.push(kg(y,Ne,de)))),y=y.return}V.length!==0&&u.push({event:f,listeners:V})}var X6=/\r\n?/g,J6=/\u0000|\uFFFD/g;function DM(u){return(typeof u=="string"?u:""+u).replace(X6,`
`).replace(J6,"")}function LM(u,f){return f=DM(f),DM(u)===f}function Wy(){}function va(u,f,y,S,N,D){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||ar(u,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&ar(u,""+S);break;case"className":It(u,"class",S);break;case"tabIndex":It(u,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":It(u,y,S);break;case"style":ff(u,S,D);break;case"data":if(f!=="object"){It(u,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=hf(""+S),u.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(y==="formAction"?(f!=="input"&&va(u,f,"name",N.name,N,null),va(u,f,"formEncType",N.formEncType,N,null),va(u,f,"formMethod",N.formMethod,N,null),va(u,f,"formTarget",N.formTarget,N,null)):(va(u,f,"encType",N.encType,N,null),va(u,f,"method",N.method,N,null),va(u,f,"target",N.target,N,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=hf(""+S),u.setAttribute(y,S);break;case"onClick":S!=null&&(u.onclick=Wy);break;case"onScroll":S!=null&&Bn("scroll",u);break;case"onScrollEnd":S!=null&&Bn("scrollend",u);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(n(60));u.innerHTML=y}}break;case"multiple":u.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":u.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){u.removeAttribute("xlink:href");break}y=hf(""+S),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""+S):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":S===!0?u.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,S):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?u.setAttribute(y,S):u.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?u.removeAttribute(y):u.setAttribute(y,S);break;case"popover":Bn("beforetoggle",u),Bn("toggle",u),yt(u,"popover",S);break;case"xlinkActuate":St(u,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":St(u,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":St(u,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":St(u,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":St(u,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":St(u,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":St(u,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":St(u,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":St(u,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":yt(u,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=U0.get(y)||y,yt(u,y,S))}}function _b(u,f,y,S,N,D){switch(y){case"style":ff(u,S,D);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(n(60));u.innerHTML=y}}break;case"children":typeof S=="string"?ar(u,S):(typeof S=="number"||typeof S=="bigint")&&ar(u,""+S);break;case"onScroll":S!=null&&Bn("scroll",u);break;case"onScrollEnd":S!=null&&Bn("scrollend",u);break;case"onClick":S!=null&&(u.onclick=Wy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uu.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(N=y.endsWith("Capture"),f=y.slice(2,N?y.length-7:void 0),D=u[Ea]||null,D=D!=null?D[y]:null,typeof D=="function"&&u.removeEventListener(f,D,N),typeof S=="function")){typeof D!="function"&&D!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,S,N);break e}y in u?u[y]=S:S===!0?u.setAttribute(y,""):yt(u,y,S)}}}function ci(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bn("error",u),Bn("load",u);var S=!1,N=!1,D;for(D in y)if(y.hasOwnProperty(D)){var V=y[D];if(V!=null)switch(D){case"src":S=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:va(u,f,D,V,y,null)}}N&&va(u,f,"srcSet",y.srcSet,y,null),S&&va(u,f,"src",y.src,y,null);return;case"input":Bn("invalid",u);var Z=D=V=N=null,de=null,Ne=null;for(S in y)if(y.hasOwnProperty(S)){var Je=y[S];if(Je!=null)switch(S){case"name":N=Je;break;case"type":V=Je;break;case"checked":de=Je;break;case"defaultChecked":Ne=Je;break;case"value":D=Je;break;case"defaultValue":Z=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,f));break;default:va(u,f,S,Je,y,null)}}Gr(u,D,Z,de,Ne,V,N,!1),In(u);return;case"select":Bn("invalid",u),S=V=D=null;for(N in y)if(y.hasOwnProperty(N)&&(Z=y[N],Z!=null))switch(N){case"value":D=Z;break;case"defaultValue":V=Z;break;case"multiple":S=Z;default:va(u,f,N,Z,y,null)}f=D,y=V,u.multiple=!!S,f!=null?Ma(u,!!S,f,!1):y!=null&&Ma(u,!!S,y,!0);return;case"textarea":Bn("invalid",u),D=N=S=null;for(V in y)if(y.hasOwnProperty(V)&&(Z=y[V],Z!=null))switch(V){case"value":S=Z;break;case"defaultValue":N=Z;break;case"children":D=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:va(u,f,V,Z,y,null)}Oc(u,S,N,D),In(u);return;case"option":for(de in y)if(y.hasOwnProperty(de)&&(S=y[de],S!=null))switch(de){case"selected":u.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:va(u,f,de,S,y,null)}return;case"dialog":Bn("beforetoggle",u),Bn("toggle",u),Bn("cancel",u),Bn("close",u);break;case"iframe":case"object":Bn("load",u);break;case"video":case"audio":for(S=0;S<Fg.length;S++)Bn(Fg[S],u);break;case"image":Bn("error",u),Bn("load",u);break;case"details":Bn("toggle",u);break;case"embed":case"source":case"link":Bn("error",u),Bn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in y)if(y.hasOwnProperty(Ne)&&(S=y[Ne],S!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:va(u,f,Ne,S,y,null)}return;default:if(lp(f)){for(Je in y)y.hasOwnProperty(Je)&&(S=y[Je],S!==void 0&&_b(u,f,Je,S,y,void 0));return}}for(Z in y)y.hasOwnProperty(Z)&&(S=y[Z],S!=null&&va(u,f,Z,S,y,null))}function Z6(u,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,D=null,V=null,Z=null,de=null,Ne=null,Je=null;for(Fe in y){var at=y[Fe];if(y.hasOwnProperty(Fe)&&at!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":de=at;default:S.hasOwnProperty(Fe)||va(u,f,Fe,null,S,at)}}for(var De in S){var Fe=S[De];if(at=y[De],S.hasOwnProperty(De)&&(Fe!=null||at!=null))switch(De){case"type":D=Fe;break;case"name":N=Fe;break;case"checked":Ne=Fe;break;case"defaultChecked":Je=Fe;break;case"value":V=Fe;break;case"defaultValue":Z=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,f));break;default:Fe!==at&&va(u,f,De,Fe,S,at)}}ia(u,V,Z,de,Ne,Je,D,N);return;case"select":Fe=V=Z=De=null;for(D in y)if(de=y[D],y.hasOwnProperty(D)&&de!=null)switch(D){case"value":break;case"multiple":Fe=de;default:S.hasOwnProperty(D)||va(u,f,D,null,S,de)}for(N in S)if(D=S[N],de=y[N],S.hasOwnProperty(N)&&(D!=null||de!=null))switch(N){case"value":De=D;break;case"defaultValue":Z=D;break;case"multiple":V=D;default:D!==de&&va(u,f,N,D,S,de)}f=Z,y=V,S=Fe,De!=null?Ma(u,!!y,De,!1):!!S!=!!y&&(f!=null?Ma(u,!!y,f,!0):Ma(u,!!y,y?[]:"",!1));return;case"textarea":Fe=De=null;for(Z in y)if(N=y[Z],y.hasOwnProperty(Z)&&N!=null&&!S.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:va(u,f,Z,null,S,N)}for(V in S)if(N=S[V],D=y[V],S.hasOwnProperty(V)&&(N!=null||D!=null))switch(V){case"value":De=N;break;case"defaultValue":Fe=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:N!==D&&va(u,f,V,N,S,D)}Sr(u,De,Fe);return;case"option":for(var un in y)if(De=y[un],y.hasOwnProperty(un)&&De!=null&&!S.hasOwnProperty(un))switch(un){case"selected":u.selected=!1;break;default:va(u,f,un,null,S,De)}for(de in S)if(De=S[de],Fe=y[de],S.hasOwnProperty(de)&&De!==Fe&&(De!=null||Fe!=null))switch(de){case"selected":u.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:va(u,f,de,De,S,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var an in y)De=y[an],y.hasOwnProperty(an)&&De!=null&&!S.hasOwnProperty(an)&&va(u,f,an,null,S,De);for(Ne in S)if(De=S[Ne],Fe=y[Ne],S.hasOwnProperty(Ne)&&De!==Fe&&(De!=null||Fe!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,f));break;default:va(u,f,Ne,De,S,Fe)}return;default:if(lp(f)){for(var ya in y)De=y[ya],y.hasOwnProperty(ya)&&De!==void 0&&!S.hasOwnProperty(ya)&&_b(u,f,ya,void 0,S,De);for(Je in S)De=S[Je],Fe=y[Je],!S.hasOwnProperty(Je)||De===Fe||De===void 0&&Fe===void 0||_b(u,f,Je,De,S,Fe);return}}for(var Ee in y)De=y[Ee],y.hasOwnProperty(Ee)&&De!=null&&!S.hasOwnProperty(Ee)&&va(u,f,Ee,null,S,De);for(at in S)De=S[at],Fe=y[at],!S.hasOwnProperty(at)||De===Fe||De==null&&Fe==null||va(u,f,at,De,S,Fe)}var bb=null,Sb=null;function Ky(u){return u.nodeType===9?u:u.ownerDocument}function PM(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OM(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function Eb(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var wb=null;function Q6(){var u=window.event;return u&&u.type==="popstate"?u===wb?!1:(wb=u,!0):(wb=null,!1)}var UM=typeof setTimeout=="function"?setTimeout:void 0,$6=typeof clearTimeout=="function"?clearTimeout:void 0,BM=typeof Promise=="function"?Promise:void 0,eU=typeof queueMicrotask=="function"?queueMicrotask:typeof BM<"u"?function(u){return BM.resolve(null).then(u).catch(tU)}:UM;function tU(u){setTimeout(function(){throw u})}function bd(u){return u==="head"}function FM(u,f){var y=f,S=0,N=0;do{var D=y.nextSibling;if(u.removeChild(y),D&&D.nodeType===8)if(y=D.data,y==="/$"){if(0<S&&8>S){y=S;var V=u.ownerDocument;if(y&1&&Hg(V.documentElement),y&2&&Hg(V.body),y&4)for(y=V.head,Hg(y),V=y.firstChild;V;){var Z=V.nextSibling,de=V.nodeName;V[Hi]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&V.rel.toLowerCase()==="stylesheet"||y.removeChild(V),V=Z}}if(N===0){u.removeChild(D),qg(f);return}N--}else y==="$"||y==="$?"||y==="$!"?N++:S=y.charCodeAt(0)-48;else S=0;y=D}while(y);qg(f)}function Rb(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Rb(y),ha(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function nU(u,f,y,S){for(;u.nodeType===1;){var N=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(S){if(!u[Hi])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(D=u.getAttribute("rel"),D==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(D!==N.rel||u.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||u.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||u.getAttribute("title")!==(N.title==null?null:N.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(D=u.getAttribute("src"),(D!==(N.src==null?null:N.src)||u.getAttribute("type")!==(N.type==null?null:N.type)||u.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&D&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var D=N.name==null?null:""+N.name;if(N.type==="hidden"&&u.getAttribute("name")===D)return u}else return u;if(u=dl(u.nextSibling),u===null)break}return null}function aU(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=dl(u.nextSibling),u===null))return null;return u}function Mb(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function rU(u,f){var y=u.ownerDocument;if(u.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),u._reactRetry=S}}function dl(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var Tb=null;function kM(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return u;f--}else y==="/$"&&f++}u=u.previousSibling}return null}function HM(u,f,y){switch(f=Ky(y),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Hg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);ha(u)}var To=new Map,jM=new Set;function Yy(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var ru=Y.d;Y.d={f:iU,r:sU,D:oU,C:lU,L:cU,m:uU,X:fU,S:dU,M:hU};function iU(){var u=ru.f(),f=Ro();return u||f}function sU(u){var f=co(u);f!==null&&f.tag===5&&f.type==="form"?Ry(f):ru.r(u)}var sm=typeof document>"u"?null:document;function zM(u,f,y){var S=sm;if(S&&typeof f=="string"&&f){var N=nr(f);N='link[rel="'+u+'"][href="'+N+'"]',typeof y=="string"&&(N+='[crossorigin="'+y+'"]'),jM.has(N)||(jM.add(N),u={rel:u,crossOrigin:y,href:f},S.querySelector(N)===null&&(f=S.createElement("link"),ci(f,"link",u),qa(f),S.head.appendChild(f)))}}function oU(u){ru.D(u),zM("dns-prefetch",u,null)}function lU(u,f){ru.C(u,f),zM("preconnect",u,f)}function cU(u,f,y){ru.L(u,f,y);var S=sm;if(S&&u&&f){var N='link[rel="preload"][as="'+nr(f)+'"]';f==="image"&&y&&y.imageSrcSet?(N+='[imagesrcset="'+nr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(N+='[imagesizes="'+nr(y.imageSizes)+'"]')):N+='[href="'+nr(u)+'"]';var D=N;switch(f){case"style":D=om(u);break;case"script":D=lm(u)}To.has(D)||(u=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),To.set(D,u),S.querySelector(N)!==null||f==="style"&&S.querySelector(jg(D))||f==="script"&&S.querySelector(zg(D))||(f=S.createElement("link"),ci(f,"link",u),qa(f),S.head.appendChild(f)))}}function uU(u,f){ru.m(u,f);var y=sm;if(y&&u){var S=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+nr(S)+'"][href="'+nr(u)+'"]',D=N;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=lm(u)}if(!To.has(D)&&(u=d({rel:"modulepreload",href:u},f),To.set(D,u),y.querySelector(N)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(zg(D)))return}S=y.createElement("link"),ci(S,"link",u),qa(S),y.head.appendChild(S)}}}function dU(u,f,y){ru.S(u,f,y);var S=sm;if(S&&u){var N=jo(S).hoistableStyles,D=om(u);f=f||"default";var V=N.get(D);if(!V){var Z={loading:0,preload:null};if(V=S.querySelector(jg(D)))Z.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},y),(y=To.get(D))&&Nb(u,y);var de=V=S.createElement("link");qa(de),ci(de,"link",u),de._p=new Promise(function(Ne,Je){de.onload=Ne,de.onerror=Je}),de.addEventListener("load",function(){Z.loading|=1}),de.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,qy(V,f,S)}V={type:"stylesheet",instance:V,count:1,state:Z},N.set(D,V)}}}function fU(u,f){ru.X(u,f);var y=sm;if(y&&u){var S=jo(y).hoistableScripts,N=lm(u),D=S.get(N);D||(D=y.querySelector(zg(N)),D||(u=d({src:u,async:!0},f),(f=To.get(N))&&Cb(u,f),D=y.createElement("script"),qa(D),ci(D,"link",u),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},S.set(N,D))}}function hU(u,f){ru.M(u,f);var y=sm;if(y&&u){var S=jo(y).hoistableScripts,N=lm(u),D=S.get(N);D||(D=y.querySelector(zg(N)),D||(u=d({src:u,async:!0,type:"module"},f),(f=To.get(N))&&Cb(u,f),D=y.createElement("script"),qa(D),ci(D,"link",u),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},S.set(N,D))}}function GM(u,f,y,S){var N=(N=_e.current)?Yy(N):null;if(!N)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=om(y.href),y=jo(N).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=om(y.href);var D=jo(N).hoistableStyles,V=D.get(u);if(V||(N=N.ownerDocument||N,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(u,V),(D=N.querySelector(jg(u)))&&!D._p&&(V.instance=D,V.state.loading=5),To.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},To.set(u,y),D||pU(N,u,y,V.state))),f&&S===null)throw Error(n(528,""));return V}if(f&&S!==null)throw Error(n(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=lm(y),y=jo(N).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function om(u){return'href="'+nr(u)+'"'}function jg(u){return'link[rel="stylesheet"]['+u+"]"}function VM(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function pU(u,f,y,S){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=u.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),ci(f,"link",y),qa(f),u.head.appendChild(f))}function lm(u){return'[src="'+nr(u)+'"]'}function zg(u){return"script[async]"+u}function WM(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=u.querySelector('style[data-href~="'+nr(y.href)+'"]');if(S)return f.instance=S,qa(S),S;var N=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(u.ownerDocument||u).createElement("style"),qa(S),ci(S,"style",N),qy(S,y.precedence,u),f.instance=S;case"stylesheet":N=om(y.href);var D=u.querySelector(jg(N));if(D)return f.state.loading|=4,f.instance=D,qa(D),D;S=VM(y),(N=To.get(N))&&Nb(S,N),D=(u.ownerDocument||u).createElement("link"),qa(D);var V=D;return V._p=new Promise(function(Z,de){V.onload=Z,V.onerror=de}),ci(D,"link",S),f.state.loading|=4,qy(D,y.precedence,u),f.instance=D;case"script":return D=lm(y.src),(N=u.querySelector(zg(D)))?(f.instance=N,qa(N),N):(S=y,(N=To.get(D))&&(S=d({},y),Cb(S,N)),u=u.ownerDocument||u,N=u.createElement("script"),qa(N),ci(N,"link",S),u.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&!(f.state.loading&4)&&(S=f.instance,f.state.loading|=4,qy(S,y.precedence,u));return f.instance}function qy(u,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=S.length?S[S.length-1]:null,D=N,V=0;V<S.length;V++){var Z=S[V];if(Z.dataset.precedence===f)D=Z;else if(D!==N)break}D?D.parentNode.insertBefore(u,D.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function Nb(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function Cb(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var Xy=null;function KM(u,f,y){if(Xy===null){var S=new Map,N=Xy=new Map;N.set(y,S)}else N=Xy,S=N.get(y),S||(S=new Map,N.set(y,S));if(S.has(u))return S;for(S.set(u,null),y=y.getElementsByTagName(u),N=0;N<y.length;N++){var D=y[N];if(!(D[Hi]||D[Ya]||u==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var V=D.getAttribute(f)||"";V=u+V;var Z=S.get(V);Z?Z.push(D):S.set(V,[D])}}return S}function YM(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function mU(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function qM(u){return!(u.type==="stylesheet"&&!(u.state.loading&3))}var Gg=null;function gU(){}function vU(u,f,y){if(Gg===null)throw Error(n(475));var S=Gg;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&!(f.state.loading&4)){if(f.instance===null){var N=om(y.href),D=u.querySelector(jg(N));if(D){u=D._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(S.count++,S=Jy.bind(S),u.then(S,S)),f.state.loading|=4,f.instance=D,qa(D);return}D=u.ownerDocument||u,y=VM(y),(N=To.get(N))&&Nb(y,N),D=D.createElement("link"),qa(D);var V=D;V._p=new Promise(function(Z,de){V.onload=Z,V.onerror=de}),ci(D,"link",y),f.instance=D}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,u),(u=f.state.preload)&&!(f.state.loading&3)&&(S.count++,f=Jy.bind(S),u.addEventListener("load",f),u.addEventListener("error",f))}}function yU(){if(Gg===null)throw Error(n(475));var u=Gg;return u.stylesheets&&u.count===0&&Ib(u,u.stylesheets),0<u.count?function(f){var y=setTimeout(function(){if(u.stylesheets&&Ib(u,u.stylesheets),u.unsuspend){var S=u.unsuspend;u.unsuspend=null,S()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(y)}}:null}function Jy(){if(this.count--,this.count===0){if(this.stylesheets)Ib(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Zy=null;function Ib(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Zy=new Map,f.forEach(xU,u),Zy=null,Jy.call(u))}function xU(u,f){if(!(f.state.loading&4)){var y=Zy.get(u);if(y)var S=y.get(null);else{y=new Map,Zy.set(u,y);for(var N=u.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<N.length;D++){var V=N[D];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(y.set(V.dataset.precedence,V),S=V)}S&&y.set(null,S)}N=f.instance,V=N.getAttribute("data-precedence"),D=y.get(V)||S,D===S&&y.set(null,N),y.set(V,N),this.count++,S=Jy.bind(this),N.addEventListener("load",S),N.addEventListener("error",S),D?D.parentNode.insertBefore(N,D.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(N,u.firstChild)),f.state.loading|=4}}var Vg={$$typeof:T,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function AU(u,f,y,S,N,D,V,Z){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=S,this.onUncaughtError=N,this.onCaughtError=D,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function XM(u,f,y,S,N,D,V,Z,de,Ne,Je,at){return u=new AU(u,f,y,V,Z,de,Ne,at),f=1,D===!0&&(f|=24),D=xi(3,null,null,f),u.current=D,D.stateNode=u,f=Np(),f.refCount++,u.pooledCache=f,f.refCount++,D.memoizedState={element:S,isDehydrated:y,cache:f},pg(D),u}function JM(u){return u?(u=Hl,u):Hl}function ZM(u,f,y,S,N,D){N=JM(N),S.context===null?S.context=N:S.pendingContext=N,S=mo(f),S.payload={element:y},D=D===void 0?null:D,D!==null&&(S.callback=D),y=tl(u,S,f),y!==null&&(li(y,u,f),Hc(y,u,f))}function QM(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function Db(u,f){QM(u,f),(u=u.alternate)&&QM(u,f)}function $M(u){if(u.tag===13){var f=Jo(u,67108864);f!==null&&li(f,u,67108864),Db(u,67108864)}}var Qy=!0;function _U(u,f,y,S){var N=G.T;G.T=null;var D=Y.p;try{Y.p=2,Lb(u,f,y,S)}finally{Y.p=D,G.T=N}}function bU(u,f,y,S){var N=G.T;G.T=null;var D=Y.p;try{Y.p=8,Lb(u,f,y,S)}finally{Y.p=D,G.T=N}}function Lb(u,f,y,S){if(Qy){var N=Pb(S);if(N===null)Ab(u,f,S,$y,y),tT(u,S);else if(EU(N,u,f,y,S))S.stopPropagation();else if(tT(u,S),f&4&&-1<SU.indexOf(u)){for(;N!==null;){var D=co(N);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var V=Lt(D.pendingLanes);if(V!==0){var Z=D;for(Z.pendingLanes|=2,Z.entangledLanes|=2;V;){var de=1<<31-_t(V);Z.entanglements[1]|=de,V&=~de}uc(D),!(Qn&6)&&(Kr=ze()+500,Bg(0))}}break;case 13:Z=Jo(D,2),Z!==null&&li(Z,D,2),Ro(),Db(D,2)}if(D=Pb(S),D===null&&Ab(u,f,S,$y,y),D===N)break;N=D}N!==null&&S.stopPropagation()}else Ab(u,f,S,null,y)}}function Pb(u){return u=up(u),Ob(u)}var $y=null;function Ob(u){if($y=null,u=Os(u),u!==null){var f=i(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=s(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return $y=u,null}function eT(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case Qe:return 2;case st:return 8;case Ot:case zt:return 32;case ie:return 268435456;default:return 32}default:return 32}}var Ub=!1,Sd=null,Ed=null,wd=null,Wg=new Map,Kg=new Map,Rd=[],SU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tT(u,f){switch(u){case"focusin":case"focusout":Sd=null;break;case"dragenter":case"dragleave":Ed=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":Wg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kg.delete(f.pointerId)}}function Yg(u,f,y,S,N,D){return u===null||u.nativeEvent!==D?(u={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:D,targetContainers:[N]},f!==null&&(f=co(f),f!==null&&$M(f)),u):(u.eventSystemFlags|=S,f=u.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),u)}function EU(u,f,y,S,N){switch(f){case"focusin":return Sd=Yg(Sd,u,f,y,S,N),!0;case"dragenter":return Ed=Yg(Ed,u,f,y,S,N),!0;case"mouseover":return wd=Yg(wd,u,f,y,S,N),!0;case"pointerover":var D=N.pointerId;return Wg.set(D,Yg(Wg.get(D)||null,u,f,y,S,N)),!0;case"gotpointercapture":return D=N.pointerId,Kg.set(D,Yg(Kg.get(D)||null,u,f,y,S,N)),!0}return!1}function nT(u){var f=Os(u.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){u.blockedOn=f,fr(u.priority,function(){if(y.tag===13){var S=Pa();S=jt(S);var N=Jo(y,S);N!==null&&li(N,y,S),Db(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function e2(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=Pb(u.nativeEvent);if(y===null){y=u.nativeEvent;var S=new y.constructor(y.type,y);cp=S,y.target.dispatchEvent(S),cp=null}else return f=co(y),f!==null&&$M(f),u.blockedOn=y,!1;f.shift()}return!0}function aT(u,f,y){e2(u)&&y.delete(f)}function wU(){Ub=!1,Sd!==null&&e2(Sd)&&(Sd=null),Ed!==null&&e2(Ed)&&(Ed=null),wd!==null&&e2(wd)&&(wd=null),Wg.forEach(aT),Kg.forEach(aT)}function t2(u,f){u.blockedOn===f&&(u.blockedOn=null,Ub||(Ub=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wU)))}var n2=null;function rT(u){n2!==u&&(n2=u,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){n2===u&&(n2=null);for(var f=0;f<u.length;f+=3){var y=u[f],S=u[f+1],N=u[f+2];if(typeof S!="function"){if(Ob(S||y)===null)continue;break}var D=co(y);D!==null&&(u.splice(f,3),f-=3,Cg(D,{pending:!0,data:N,method:y.method,action:S},S,N))}}))}function qg(u){function f(de){return t2(de,u)}Sd!==null&&t2(Sd,u),Ed!==null&&t2(Ed,u),wd!==null&&t2(wd,u),Wg.forEach(f),Kg.forEach(f);for(var y=0;y<Rd.length;y++){var S=Rd[y];S.blockedOn===u&&(S.blockedOn=null)}for(;0<Rd.length&&(y=Rd[0],y.blockedOn===null);)nT(y),y.blockedOn===null&&Rd.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var N=y[S],D=y[S+1],V=N[Ea]||null;if(typeof D=="function")V||rT(y);else if(V){var Z=null;if(D&&D.hasAttribute("formAction")){if(N=D,V=D[Ea]||null)Z=V.formAction;else if(Ob(N)!==null)continue}else Z=V.action;typeof Z=="function"?y[S+1]=Z:(y.splice(S,3),S-=3),rT(y)}}}function Bb(u){this._internalRoot=u}a2.prototype.render=Bb.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var y=f.current,S=Pa();ZM(y,S,u,f,null,null)},a2.prototype.unmount=Bb.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;ZM(u.current,2,null,u,null,null),Ro(),f[ls]=null}};function a2(u){this._internalRoot=u}a2.prototype.unstable_scheduleHydration=function(u){if(u){var f=mn();u={blockedOn:null,target:u,priority:f};for(var y=0;y<Rd.length&&f!==0&&f<Rd[y].priority;y++);Rd.splice(y,0,u),y===0&&nT(u)}};var iT=e.version;if(iT!=="19.1.1")throw Error(n(527,iT,"19.1.1"));Y.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var RU={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r2.isDisabled&&r2.supportsFiber)try{je=r2.inject(RU),Ye=r2}catch{}}return Jg.createRoot=function(u,f){if(!r(u))throw Error(n(299));var y=!1,S="",N=qf,D=Kp,V=Fy,Z=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Z=f.unstable_transitionCallbacks)),f=XM(u,1,!1,null,null,y,S,N,D,V,Z,null),u[ls]=f.current,xb(u),new Bb(f)},Jg.hydrateRoot=function(u,f,y){if(!r(u))throw Error(n(299));var S=!1,N="",D=qf,V=Kp,Z=Fy,de=null,Ne=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onUncaughtError!==void 0&&(D=y.onUncaughtError),y.onCaughtError!==void 0&&(V=y.onCaughtError),y.onRecoverableError!==void 0&&(Z=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(de=y.unstable_transitionCallbacks),y.formState!==void 0&&(Ne=y.formState)),f=XM(u,1,!0,f,y??null,S,N,D,V,Z,de,Ne),f.context=JM(null),y=f.current,S=Pa(),S=jt(S),N=mo(S),N.callback=null,tl(y,N,S),y=S,f.current.lanes=y,bt(f,y),uc(f),u[ls]=f.current,xb(u),new a2(f)},Jg.version="19.1.1",Jg}var mT;function BU(){if(mT)return Hb.exports;mT=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Hb.exports=UU(),Hb.exports}var FU=BU();const kU=r1(FU);var Zg={},gT;function HU(){if(gT)return Zg;gT=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.parse=s,Zg.serialize=c;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function s(m,v){const A=new i,E=m.length;if(E<2)return A;const b=(v==null?void 0:v.decode)||d;let _=0;do{const R=m.indexOf("=",_);if(R===-1)break;const T=m.indexOf(";",_),M=T===-1?E:T;if(R>M){_=m.lastIndexOf(";",R-1)+1;continue}const I=o(m,_,R),P=l(m,R,I),B=m.slice(I,P);if(A[B]===void 0){let F=o(m,R+1,M),L=l(m,M,F);const U=b(m.slice(F,L));A[B]=U}_=M+1}while(_<E);return A}function o(m,v,A){do{const E=m.charCodeAt(v);if(E!==32&&E!==9)return v}while(++v<A);return A}function l(m,v,A){for(;v>A;){const E=m.charCodeAt(--v);if(E!==32&&E!==9)return v+1}return A}function c(m,v,A){const E=(A==null?void 0:A.encode)||encodeURIComponent;if(!a.test(m))throw new TypeError(`argument name is invalid: ${m}`);const b=E(v);if(!e.test(b))throw new TypeError(`argument val is invalid: ${v}`);let _=m+"="+b;if(!A)return _;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);_+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);_+="; Domain="+A.domain}if(A.path){if(!n.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);_+="; Path="+A.path}if(A.expires){if(!h(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);_+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(_+="; HttpOnly"),A.secure&&(_+="; Secure"),A.partitioned&&(_+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return _}function d(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return r.call(m)==="[object Date]"}return Zg}HU();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vT="popstate";function jU(a={}){function e(r,i){let{pathname:s="/",search:o="",hash:l=""}=Zh(r.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),s3("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let s=r.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof i=="string"?i:Uv(i))}function n(r,i){bl(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return GU(e,t,n,a)}function Wa(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function bl(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zU(){return Math.random().toString(36).substring(2,10)}function yT(a,e){return{usr:a.state,key:a.key,idx:e}}function s3(a,e,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Zh(e):e,state:t,key:e&&e.key||n||zU()}}function Uv({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Zh(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(e.search=a.substring(n),a=a.substring(0,n)),a&&(e.pathname=a)}return e}function GU(a,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,s=r.history,o="POP",l=null,c=d();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let b=d(),_=b==null?null:b-c;c=b,l&&l({action:o,location:E.location,delta:_})}function m(b,_){o="PUSH";let R=s3(E.location,b,_);t(R,b),c=d()+1;let T=yT(R,c),M=E.createHref(R);try{s.pushState(T,"",M)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(M)}i&&l&&l({action:o,location:E.location,delta:1})}function v(b,_){o="REPLACE";let R=s3(E.location,b,_);t(R,b),c=d();let T=yT(R,c),M=E.createHref(R);s.replaceState(T,"",M),i&&l&&l({action:o,location:E.location,delta:0})}function A(b){let _=r.location.origin!=="null"?r.location.origin:r.location.href,R=typeof b=="string"?b:Uv(b);return R=R.replace(/ $/,"%20"),Wa(_,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,_)}let E={get action(){return o},get location(){return a(r,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(vT,h),l=b,()=>{r.removeEventListener(vT,h),l=null}},createHref(b){return e(r,b)},createURL:A,encodeLocation(b){let _=A(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:v,go(b){return s.go(b)}};return E}function CI(a,e,t="/"){return VU(a,e,t,!1)}function VU(a,e,t,n){let r=typeof e=="string"?Zh(e):e,i=Qd(r.pathname||"/",t);if(i==null)return null;let s=II(a);WU(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=nB(i);o=eB(s[l],c,n)}return o}function II(a,e=[],t=[],n=""){let r=(i,s,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(Wa(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let c=Au([n,l.relativePath]),d=t.concat(l);i.children&&i.children.length>0&&(Wa(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),II(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:QU(c,i.index),routesMeta:d})};return a.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))r(i,s);else for(let l of DI(i.path))r(i,s,l)}),e}function DI(a){let e=a.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let s=DI(n.join("/")),o=[];return o.push(...s.map(l=>l===""?i:[i,l].join("/"))),r&&o.push(...s),o.map(l=>a.startsWith("/")&&l===""?"/":l)}function WU(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:$U(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var KU=/^:[\w-]+$/,YU=3,qU=2,XU=1,JU=10,ZU=-2,xT=a=>a==="*";function QU(a,e){let t=a.split("/"),n=t.length;return t.some(xT)&&(n+=ZU),e&&(n+=qU),t.filter(r=>!xT(r)).reduce((r,i)=>r+(KU.test(i)?YU:i===""?XU:JU),n)}function $U(a,e){return a.length===e.length&&a.slice(0,-1).every((n,r)=>n===e[r])?a[a.length-1]-e[e.length-1]:0}function eB(a,e,t=!1){let{routesMeta:n}=a,r={},i="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Nx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h&&c&&t&&!n[n.length-1].route.index&&(h=Nx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),s.push({params:r,pathname:Au([i,h.pathname]),pathnameBase:sB(Au([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Au([i,h.pathnameBase]))}return s}function Nx(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=tB(a.path,a.caseSensitive,a.end),r=e.match(t);if(!r)return null;let i=r[0],s=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:h},m)=>{if(d==="*"){let A=o[m]||"";s=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const v=o[m];return h&&!v?c[d]=void 0:c[d]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:s,pattern:a}}function tB(a,e=!1,t=!0){bl(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function nB(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bl(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Qd(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function aB(a,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof a=="string"?Zh(a):a;return{pathname:t?t.startsWith("/")?t:rB(t,e):e,search:oB(n),hash:lB(r)}}function rB(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Vb(a,e,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iB(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LI(a){let e=iB(a);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function PI(a,e,t,n=!1){let r;typeof a=="string"?r=Zh(a):(r={...a},Wa(!r.pathname||!r.pathname.includes("?"),Vb("?","pathname","search",r)),Wa(!r.pathname||!r.pathname.includes("#"),Vb("#","pathname","hash",r)),Wa(!r.search||!r.search.includes("#"),Vb("#","search","hash",r)));let i=a===""||r.pathname==="",s=i?"/":r.pathname,o;if(s==null)o=t;else{let h=e.length-1;if(!n&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),h-=1;r.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=aB(r,o),c=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Au=a=>a.join("/").replace(/\/\/+/g,"/"),sB=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),oB=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,lB=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function cB(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var OI=["POST","PUT","PATCH","DELETE"];new Set(OI);var uB=["GET",...OI];new Set(uB);var S0=H.createContext(null);S0.displayName="DataRouter";var YA=H.createContext(null);YA.displayName="DataRouterState";var UI=H.createContext({isTransitioning:!1});UI.displayName="ViewTransition";var dB=H.createContext(new Map);dB.displayName="Fetchers";var fB=H.createContext(null);fB.displayName="Await";var Cc=H.createContext(null);Cc.displayName="Navigation";var i1=H.createContext(null);i1.displayName="Location";var Tu=H.createContext({outlet:null,matches:[],isDataRoute:!1});Tu.displayName="Route";var dw=H.createContext(null);dw.displayName="RouteError";function hB(a,{relative:e}={}){Wa(s1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=H.useContext(Cc),{hash:r,pathname:i,search:s}=o1(a,{relative:e}),o=i;return t!=="/"&&(o=i==="/"?t:Au([t,i])),n.createHref({pathname:o,search:s,hash:r})}function s1(){return H.useContext(i1)!=null}function Qh(){return Wa(s1(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(i1).location}var BI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FI(a){H.useContext(Cc).static||H.useLayoutEffect(a)}function pB(){let{isDataRoute:a}=H.useContext(Tu);return a?MB():mB()}function mB(){Wa(s1(),"useNavigate() may be used only in the context of a <Router> component.");let a=H.useContext(S0),{basename:e,navigator:t}=H.useContext(Cc),{matches:n}=H.useContext(Tu),{pathname:r}=Qh(),i=JSON.stringify(LI(n)),s=H.useRef(!1);return FI(()=>{s.current=!0}),H.useCallback((l,c={})=>{if(bl(s.current,BI),!s.current)return;if(typeof l=="number"){t.go(l);return}let d=PI(l,JSON.parse(i),r,c.relative==="path");a==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Au([e,d.pathname])),(c.replace?t.replace:t.push)(d,c.state,c)},[e,t,i,r,a])}H.createContext(null);function o1(a,{relative:e}={}){let{matches:t}=H.useContext(Tu),{pathname:n}=Qh(),r=JSON.stringify(LI(t));return H.useMemo(()=>PI(a,JSON.parse(r),n,e==="path"),[a,r,n,e])}function gB(a,e){return kI(a,e)}function kI(a,e,t,n){var _;Wa(s1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=H.useContext(Cc),{matches:i}=H.useContext(Tu),s=i[i.length-1],o=s?s.params:{},l=s?s.pathname:"/",c=s?s.pathnameBase:"/",d=s&&s.route;{let R=d&&d.path||"";HI(l,!d||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let h=Qh(),m;if(e){let R=typeof e=="string"?Zh(e):e;Wa(c==="/"||((_=R.pathname)==null?void 0:_.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${R.pathname}" was given in the \`location\` prop.`),m=R}else m=h;let v=m.pathname||"/",A=v;if(c!=="/"){let R=c.replace(/^\//,"").split("/");A="/"+v.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=CI(a,{pathname:A});bl(d||E!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),bl(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=_B(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},o,R.params),pathname:Au([c,r.encodeLocation?r.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?c:Au([c,r.encodeLocation?r.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,t,n);return e&&b?H.createElement(i1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function vB(){let a=RB(),e=cB(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",a),s=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:i},"ErrorBoundary")," or"," ",H.createElement("code",{style:i},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,s)}var yB=H.createElement(vB,null),xB=class extends H.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?H.createElement(Tu.Provider,{value:this.props.routeContext},H.createElement(dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AB({routeContext:a,match:e,children:t}){let n=H.useContext(S0);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Tu.Provider,{value:a},t)}function _B(a,e=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let r=a,i=t==null?void 0:t.errors;if(i!=null){let l=r.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Wa(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,l+1))}let s=!1,o=-1;if(t)for(let l=0;l<r.length;l++){let c=r[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:d,errors:h}=t,m=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||m){s=!0,o>=0?r=r.slice(0,o+1):r=[r[0]];break}}}return r.reduceRight((l,c,d)=>{let h,m=!1,v=null,A=null;t&&(h=i&&c.route.id?i[c.route.id]:void 0,v=c.route.errorElement||yB,s&&(o<0&&d===0?(HI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,A=null):o===d&&(m=!0,A=c.route.hydrateFallbackElement||null)));let E=e.concat(r.slice(0,d+1)),b=()=>{let _;return h?_=v:m?_=A:c.route.Component?_=H.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,H.createElement(AB,{match:c,routeContext:{outlet:l,matches:E,isDataRoute:t!=null},children:_})};return t&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?H.createElement(xB,{location:t.location,revalidation:t.revalidation,component:v,error:h,children:b(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):b()},null)}function fw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bB(a){let e=H.useContext(S0);return Wa(e,fw(a)),e}function SB(a){let e=H.useContext(YA);return Wa(e,fw(a)),e}function EB(a){let e=H.useContext(Tu);return Wa(e,fw(a)),e}function hw(a){let e=EB(a),t=e.matches[e.matches.length-1];return Wa(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function wB(){return hw("useRouteId")}function RB(){var n;let a=H.useContext(dw),e=SB("useRouteError"),t=hw("useRouteError");return a!==void 0?a:(n=e.errors)==null?void 0:n[t]}function MB(){let{router:a}=bB("useNavigate"),e=hw("useNavigate"),t=H.useRef(!1);return FI(()=>{t.current=!0}),H.useCallback(async(r,i={})=>{bl(t.current,BI),t.current&&(typeof r=="number"?a.navigate(r):await a.navigate(r,{fromRouteId:e,...i}))},[a,e])}var AT={};function HI(a,e,t){!e&&!AT[a]&&(AT[a]=!0,bl(!1,t))}H.memo(TB);function TB({routes:a,future:e,state:t}){return kI(a,void 0,t,e)}function xt(a){Wa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NB({basename:a="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1}){Wa(!s1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=a.replace(/^\/*/,"/"),o=H.useMemo(()=>({basename:s,navigator:r,static:i,future:{}}),[s,r,i]);typeof t=="string"&&(t=Zh(t));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:m="default"}=t,v=H.useMemo(()=>{let A=Qd(l,s);return A==null?null:{location:{pathname:A,search:c,hash:d,state:h,key:m},navigationType:n}},[s,l,c,d,h,m,n]);return bl(v!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:H.createElement(Cc.Provider,{value:o},H.createElement(i1.Provider,{children:e,value:v}))}function CB({children:a,location:e}){return gB(o3(a),e)}function o3(a,e=[]){let t=[];return H.Children.forEach(a,(n,r)=>{if(!H.isValidElement(n))return;let i=[...e,r];if(n.type===H.Fragment){t.push.apply(t,o3(n.props.children,i));return}Wa(n.type===xt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wa(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=o3(n.props.children,i)),t.push(s)}),t}var yx="get",xx="application/x-www-form-urlencoded";function qA(a){return a!=null&&typeof a.tagName=="string"}function IB(a){return qA(a)&&a.tagName.toLowerCase()==="button"}function DB(a){return qA(a)&&a.tagName.toLowerCase()==="form"}function LB(a){return qA(a)&&a.tagName.toLowerCase()==="input"}function PB(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function OB(a,e){return a.button===0&&(!e||e==="_self")&&!PB(a)}var i2=null;function UB(){if(i2===null)try{new FormData(document.createElement("form"),0),i2=!1}catch{i2=!0}return i2}var BB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wb(a){return a!=null&&!BB.has(a)?(bl(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xx}"`),null):a}function FB(a,e){let t,n,r,i,s;if(DB(a)){let o=a.getAttribute("action");n=o?Qd(o,e):null,t=a.getAttribute("method")||yx,r=Wb(a.getAttribute("enctype"))||xx,i=new FormData(a)}else if(IB(a)||LB(a)&&(a.type==="submit"||a.type==="image")){let o=a.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=a.getAttribute("formaction")||o.getAttribute("action");if(n=l?Qd(l,e):null,t=a.getAttribute("formmethod")||o.getAttribute("method")||yx,r=Wb(a.getAttribute("formenctype"))||Wb(o.getAttribute("enctype"))||xx,i=new FormData(o,a),!UB()){let{name:c,type:d,value:h}=a;if(d==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,h)}}else{if(qA(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yx,n=null,r=xx,s=a}return i&&r==="text/plain"&&(s=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:s}}function pw(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function kB(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HB(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function jB(a,e,t){let n=await Promise.all(a.map(async r=>{let i=e.routes[r.route.id];if(i){let s=await kB(i,t);return s.links?s.links():[]}return[]}));return WB(n.flat(1).filter(HB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function _T(a,e,t,n,r,i){let s=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var d;return t[c].pathname!==l.pathname||((d=t[c].route.path)==null?void 0:d.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>s(l,c)||o(l,c)):i==="data"?e.filter((l,c)=>{var h;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(a,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function zB(a,e){return GB(a.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let r=[n.module];return n.imports&&(r=r.concat(n.imports)),r}).flat(1))}function GB(a){return[...new Set(a)]}function VB(a){let e={},t=Object.keys(a).sort();for(let n of t)e[n]=a[n];return e}function WB(a,e){let t=new Set;return new Set(e),a.reduce((n,r)=>{let i=JSON.stringify(VB(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function KB(a){let e=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function YB(){let a=H.useContext(S0);return pw(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function qB(){let a=H.useContext(YA);return pw(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var mw=H.createContext(void 0);mw.displayName="FrameworkContext";function jI(){let a=H.useContext(mw);return pw(a,"You must render this element inside a <HydratedRouter> element"),a}function XB(a,e){let t=H.useContext(mw),[n,r]=H.useState(!1),[i,s]=H.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,m=H.useRef(null);H.useEffect(()=>{if(a==="render"&&s(!0),a==="viewport"){let E=_=>{_.forEach(R=>{s(R.isIntersecting)})},b=new IntersectionObserver(E,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[a]),H.useEffect(()=>{if(n){let E=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(E)}}},[n]);let v=()=>{r(!0)},A=()=>{r(!1),s(!1)};return t?a!=="intent"?[i,m,{}]:[i,m,{onFocus:Qg(o,v),onBlur:Qg(l,A),onMouseEnter:Qg(c,v),onMouseLeave:Qg(d,A),onTouchStart:Qg(h,v)}]:[!1,m,{}]}function Qg(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function JB({page:a,...e}){let{router:t}=YB(),n=H.useMemo(()=>CI(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?H.createElement(QB,{page:a,matches:n,...e}):null}function ZB(a){let{manifest:e,routeModules:t}=jI(),[n,r]=H.useState([]);return H.useEffect(()=>{let i=!1;return jB(a,e,t).then(s=>{i||r(s)}),()=>{i=!0}},[a,e,t]),n}function QB({page:a,matches:e,...t}){let n=Qh(),{manifest:r,routeModules:i}=jI(),{loaderData:s,matches:o}=qB(),l=H.useMemo(()=>_T(a,e,o,r,n,"data"),[a,e,o,r,n]),c=H.useMemo(()=>_T(a,e,o,r,n,"assets"),[a,e,o,r,n]),d=H.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let v=new Set,A=!1;if(e.forEach(b=>{var R;let _=r.routes[b.route.id];!_||!_.hasLoader||(!l.some(T=>T.route.id===b.route.id)&&b.route.id in s&&((R=i[b.route.id])!=null&&R.shouldRevalidate)||_.hasClientLoader?A=!0:v.add(b.route.id))}),v.size===0)return[];let E=KB(a);return A&&v.size>0&&E.searchParams.set("_routes",e.filter(b=>v.has(b.route.id)).map(b=>b.route.id).join(",")),[E.pathname+E.search]},[s,n,r,l,e,a,i]),h=H.useMemo(()=>zB(c,r),[c,r]),m=ZB(c);return H.createElement(H.Fragment,null,d.map(v=>H.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),h.map(v=>H.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),m.map(({key:v,link:A})=>H.createElement("link",{key:v,...A})))}function $B(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zI&&(window.__reactRouterVersion="7.1.3")}catch{}function e8({basename:a,children:e,window:t}){let n=H.useRef();n.current==null&&(n.current=jU({window:t,v5Compat:!0}));let r=n.current,[i,s]=H.useState({action:r.action,location:r.location}),o=H.useCallback(l=>{H.startTransition(()=>s(l))},[s]);return H.useLayoutEffect(()=>r.listen(o),[r,o]),H.createElement(NB,{basename:a,children:e,location:i.location,navigationType:i.action,navigator:r})}var GI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=H.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:o,target:l,to:c,preventScrollReset:d,viewTransition:h,...m},v){let{basename:A}=H.useContext(Cc),E=typeof c=="string"&&GI.test(c),b,_=!1;if(typeof c=="string"&&E&&(b=c,zI))try{let L=new URL(window.location.href),U=c.startsWith("//")?new URL(L.protocol+c):new URL(c),j=Qd(U.pathname,A);U.origin===L.origin&&j!=null?c=j+U.search+U.hash:_=!0}catch{bl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=hB(c,{relative:r}),[T,M,I]=XB(n,m),P=r8(c,{replace:s,state:o,target:l,preventScrollReset:d,relative:r,viewTransition:h});function B(L){e&&e(L),L.defaultPrevented||P(L)}let F=H.createElement("a",{...m,...I,href:b||R,onClick:_||i?e:B,ref:$B(v,M),target:l,"data-discover":!E&&t==="render"?"true":void 0});return T&&!E?H.createElement(H.Fragment,null,F,H.createElement(JB,{page:R})):F});At.displayName="Link";var t8=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:o,children:l,...c},d){let h=o1(s,{relative:c.relative}),m=Qh(),v=H.useContext(YA),{navigator:A,basename:E}=H.useContext(Cc),b=v!=null&&c8(h)&&o===!0,_=A.encodeLocation?A.encodeLocation(h).pathname:h.pathname,R=m.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(R=R.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&E&&(T=Qd(T,E)||T);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=R===_||!r&&R.startsWith(_)&&R.charAt(M)==="/",P=T!=null&&(T===_||!r&&T.startsWith(_)&&T.charAt(_.length)==="/"),B={isActive:I,isPending:P,isTransitioning:b},F=I?e:void 0,L;typeof n=="function"?L=n(B):L=[n,I?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(B):i;return H.createElement(At,{...c,"aria-current":F,className:L,ref:d,style:U,to:s,viewTransition:o},typeof l=="function"?l(B):l)});t8.displayName="NavLink";var n8=H.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:s=yx,action:o,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,...m},v)=>{let A=o8(),E=l8(o,{relative:c}),b=s.toLowerCase()==="get"?"get":"post",_=typeof o=="string"&&GI.test(o),R=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let M=T.nativeEvent.submitter,I=(M==null?void 0:M.getAttribute("formmethod"))||s;A(M||T.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:r,state:i,relative:c,preventScrollReset:d,viewTransition:h})};return H.createElement("form",{ref:v,method:b,action:E,onSubmit:n?l:R,...m,"data-discover":!_&&a==="render"?"true":void 0})});n8.displayName="Form";function a8(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VI(a){let e=H.useContext(S0);return Wa(e,a8(a)),e}function r8(a,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:s}={}){let o=pB(),l=Qh(),c=o1(a,{relative:i});return H.useCallback(d=>{if(OB(d,e)){d.preventDefault();let h=t!==void 0?t:Uv(l)===Uv(c);o(a,{replace:h,state:n,preventScrollReset:r,relative:i,viewTransition:s})}},[l,o,c,t,n,e,a,r,i,s])}var i8=0,s8=()=>`__${String(++i8)}__`;function o8(){let{router:a}=VI("useSubmit"),{basename:e}=H.useContext(Cc),t=wB();return H.useCallback(async(n,r={})=>{let{action:i,method:s,encType:o,formData:l,body:c}=FB(n,e);if(r.navigate===!1){let d=r.fetcherKey||s8();await a.fetch(d,t,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,flushSync:r.flushSync})}else await a.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[a,e,t])}function l8(a,{relative:e}={}){let{basename:t}=H.useContext(Cc),n=H.useContext(Tu);Wa(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...o1(a||".",{relative:e})},s=Qh();if(a==null){i.search=s.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();i.search=d?`?${d}`:""}}return(!a||a===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Au([t,i.pathname])),Uv(i)}function c8(a,e={}){let t=H.useContext(UI);Wa(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=VI("useViewTransitionState"),r=o1(a,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Qd(t.currentLocation.pathname,n)||t.currentLocation.pathname,s=Qd(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Nx(r.pathname,s)!=null||Nx(r.pathname,i)!=null}new TextEncoder;function u8(){const[a,e]=H.useState(0);return x.jsxs("div",{children:[x.jsxs("div",{style:{textAlign:"center"},children:[x.jsx("button",{onClick:()=>e(1),children:"Section #1"}),x.jsx("button",{onClick:()=>e(2),children:"Section #2"}),x.jsx("button",{onClick:()=>e(3),children:"Section #3"})]}),x.jsxs("div",{children:[a===1&&x.jsx("p",{children:"Scientific studies say there are 4 types of animals; mammals, fish, birds, reptiles, and amphibians. All these types of animals are important in maintaining the balance of our ecosystem. From the smallest insects to the largest mammals, each species has a unique role to play in the web of life. One of the fundamental roles of animals is in ecosystem services. Bees and butterflies, for example, are crucial pollinators for many plants, including crops that humans rely on for food. Birds and mammals contribute to seed dispersal, facilitating the growth of various plant species. Predators help control the population of prey animals, preventing overgrazing and maintaining the health of ecosystems."}),a===2&&x.jsx("p",{children:"Beyond their ecological contributions, animals also have immense cultural significance. Throughout history, animals have been revered and represented in art, mythology, and religious beliefs. They symbolize traits such as strength, agility, wisdom, and loyalty, becoming integral to human culture. Domesticated animals, such as dogs and cats, have been companions to humans for thousands of years, providing emotional support and companionship. However, the impact of human activities on animals is a growing concern. Habitat destruction, pollution, climate change, and poaching pose significant threats to many species. Conservation efforts are crucial to safeguarding biodiversity and ensuring the survival of endangered animals."}),a===3&&x.jsx("p",{children:"Moreover, the well-being of animals is closely linked to human welfare. Livestock and poultry contribute to the global food supply, and advancements in medical research often rely on animal models. Ethical considerations surrounding animal welfare are increasingly important, leading to discussions on responsible and humane treatment. Animals are essential components of our planet's ecosystems and contribute significantly to human culture and well-being. Balancing our interactions with animals through conservation, ethical treatment, and sustainable practices is imperative to ensure a harmonious coexistence and preserve the diversity of life on Earth."})]})]})}function d8(){return x.jsx("div",{children:x.jsxs("ol",{children:[x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-17-1",children:"ASG-2024-12-17-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-18-1",children:"ASG-2024-12-18-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-18-2",children:"ASG-2024-12-18-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-19-1",children:"ASG-2024-12-19-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-19-2",children:"ASG-2024-12-19-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-20-1",children:"ASG-2024-12-20-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-23-1",children:"ASG-2024-12-23-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-23-2",children:"ASG-2024-12-23-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-24-1",children:"ASG-2024-12-24-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-30-1",children:"ASG-2024-12-30-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2024-12-31-1",children:"ASG-2024-12-31-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-01-1",children:"ASG-2025-01-01-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-02-1",children:"ASG-2025-01-02-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-06-1",children:"ASG-2025-01-06-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-07-1",children:"ASG-2025-01-07-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-08-1",children:"ASG-2025-01-08-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-09-1",children:"ASG-2025-01-09-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-10-1",children:"ASG-2025-01-10-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-15-1",children:"ASG-2025-01-15-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-16-1",children:"ASG-2025-01-16-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-16-2",children:"ASG-2025-01-16-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-01-22-1",children:"ASG-2025-01-22-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-13-1",children:"ASG-2025-02-13-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-14-1",children:"ASG-2025-02-14-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-17-1",children:"ASG-2025-02-17-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-18-1",children:"ASG-2025-02-18-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-18-2",children:"ASG-2025-02-18-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-27-1",children:"ASG-2025-02-27-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-02-28-1",children:"ASG-2025-02-28-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-03-1",children:"ASG-2025-03-03-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-04-1",children:"ASG-2025-03-04-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-05-1",children:"ASG-2025-03-05-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-05-2",children:"ASG-2025-03-05-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-05-3",children:"ASG-2025-03-05-3"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-06-1",children:"ASG-2025-03-06-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-19-1",children:"ASG-2025-03-19-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-20-1",children:"ASG-2025-03-20-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-21-1",children:"ASG-2025-03-21-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-25-1",children:"ASG-2025-03-25-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-03-25-2",children:"ASG-2025-03-25-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-22-1",children:"ASG-2025-04-22-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-22-2",children:"ASG-2025-04-22-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-23-1",children:"ASG-2025-04-23-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-25-1",children:"ASG-2025-04-25-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-30-1",children:"ASG-2025-04-30-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-30-2",children:"ASG-2025-04-30-2"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-04-30-3",children:"ASG-2025-04-30-3"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-05-14-1",children:"ASG-2025-05-14-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-05-15-1",children:"ASG-2025-05-15-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-05-16-1",children:"ASG-2025-05-16-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-05-19-1",children:"ASG-2025-05-19-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-08-1",children:"ASG-2025-07-08-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-09-1",children:"ASG-2025-07-09-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-14-1",children:"ASG-2025-07-14-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-16-1",children:"ASG-2025-07-16-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-17-1",children:"ASG-2025-07-17-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-21-1",children:"ASG-2025-07-21-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-22-1",children:"ASG-2025-07-22-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-23-1",children:"ASG-2025-07-23-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-25-1",children:"ASG-2025-07-25-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-28-1",children:"ASG-2025-07-28-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-29-1",children:"ASG-2025-07-29-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-30-1",children:"ASG-2025-07-30-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-07-31-1",children:"ASG-2025-07-31-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-01-1",children:"ASG-2025-08-01-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-04-1",children:"ASG-2025-08-04-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-05-1",children:"ASG-2025-08-05-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-07-1",children:"ASG-2025-08-07-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-11-1",children:"ASG-2025-08-11-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-12-1",children:"ASG-2025-08-12-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-13-1",children:"ASG-2025-08-13-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-14-1",children:"ASG-2025-08-14-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-15-1",children:"ASG-2025-08-15-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-18-1",children:"ASG-2025-08-18-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-19-1",children:"ASG-2025-08-19-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-21-1",children:"ASG-2025-08-21-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-22-1",children:"ASG-2025-08-22-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-26-1",children:"ASG-2025-08-26-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-08-27-1",children:"ASG-2025-08-27-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-09-01-1",children:"ASG-2025-09-01-1"})}),x.jsx("li",{children:x.jsx(At,{to:"ASG-2025-09-02-1",children:"ASG-2025-09-02-1"})})]})})}function f8(){const[a,e]=H.useState("addition"),[t,n]=H.useState(""),[r,i]=H.useState(""),[s,o]=H.useState(null),l=()=>{const c=parseFloat(t),d=parseFloat(r);let h;a==="addition"?h=c+d:a==="subtraction"?h=c-d:a==="multiplication"?h=c*d:a==="division"&&(h=c/d),o(h)};return x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("h1",{children:"Calculator"})}),x.jsxs("div",{children:[x.jsx("label",{children:"Select Operation: "}),x.jsxs("select",{value:a,onChange:c=>e(c.target.value),children:[x.jsx("option",{value:"addition",children:"Addition"}),x.jsx("option",{value:"subtraction",children:"Subtraction"}),x.jsx("option",{value:"multiplication",children:"Multiplication"}),x.jsx("option",{value:"division",children:"Division"})]})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Enter First Number: "}),x.jsx("input",{type:"number",value:t,onChange:c=>n(c.target.value)}),x.jsx("label",{children:"Enter Second Number: "}),x.jsx("input",{type:"number",value:r,onChange:c=>i(c.target.value)})]}),x.jsx("div",{children:x.jsx("button",{onClick:l,disabled:!t||!r,children:"Calculate"})}),s!==null&&x.jsxs("div",{children:["Result: ",s]})]})}function h8(){const[a,e]=H.useState([]),[t,n]=H.useState(""),r=()=>{const o=parseFloat(t);isNaN(o)||e([...a,o]),n("")},i=a.reduce((o,l)=>o+l,0),s=a.length?i/a.length:0;return x.jsxs("div",{children:[x.jsx("h3",{children:"Numbers Array List"}),x.jsxs("div",{children:[x.jsxs("label",{children:["Total: ",i," "]}),x.jsx("br",{}),x.jsxs("label",{children:["Average: ",s]})]}),x.jsx("div",{children:x.jsx("ul",{children:a.map((o,l)=>x.jsx("li",{children:o},l))})}),x.jsxs("div",{children:[x.jsx("input",{type:"number",value:t,onChange:o=>n(o.target.value)}),x.jsx("button",{onClick:r,children:"Add"})]})]})}function p8(){const[a,e]=H.useState([]),[t,n]=H.useState(""),r=()=>{const s=[...a];s.push(t),e(s),n("")},i=s=>{const o=a.filter((l,c)=>c!==s);e(o)};return x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("ul",{children:a.map((s,o)=>x.jsxs("li",{children:[s,x.jsx("button",{onClick:()=>i(o),children:"Delete"})]},o))})}),x.jsxs("div",{children:[x.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value)}),x.jsx("button",{onClick:r,children:"Add"})]})]})}function m8(){const[a,e]=H.useState([]),[t,n]=H.useState(""),r=()=>{const l=[...a];l.push(t),e(l),n("")},i=l=>{const c=a.filter((d,h)=>h!==l);e(c)},s=l=>{const c=[...a];c.sort((d,h)=>(d-h)*l),e(c)},o=(l,c)=>{const d=[...a],h=d[l],m=d[l+c];d[l]=m,d[l+c]=h,e(d)};return x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("button",{onClick:()=>s(1),children:"Sort Ascending"}),x.jsx("button",{onClick:()=>s(-1),children:"Sort Descending"})]}),x.jsx("div",{children:x.jsx("ul",{children:a.map((l,c)=>x.jsxs("li",{children:[l,x.jsx("button",{onClick:()=>i(c),children:"Delete"}),x.jsx("button",{onClick:()=>o(c,-1),disabled:c===0,children:"Move Up"}),x.jsx("button",{onClick:()=>o(c,1),disabled:c===a.length-1,children:"Move Down"})]},c))})}),x.jsxs("div",{children:[x.jsx("input",{type:"text",value:t,onChange:l=>n(l.target.value)}),x.jsx("button",{onClick:r,children:"Add"})]})]})}function g8(){const[a,e]=H.useState([]),[t,n]=H.useState(""),[r,i]=H.useState(""),s=()=>{t&&r&&(e([...a,{name:t,value:r}]),n(""),i(""))},o=c=>{const d=a.filter((h,m)=>m!==c);e(d)},l=a.reduce((c,d)=>({...c,[d.name]:d.value}),{});return x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("input",{type:"text",placeholder:"New CSS Rule Name",value:t,onChange:c=>n(c.target.value)}),x.jsx("input",{type:"text",placeholder:"Rule Value",value:r,onChange:c=>i(c.target.value)}),x.jsx("button",{onClick:s,children:"Add"})]}),x.jsx("div",{children:x.jsx("ul",{children:a.map((c,d)=>x.jsxs("li",{children:[c.name,":",c.value,x.jsx("button",{onClick:()=>o(d),children:"Delete"})]},d))})}),x.jsx("div",{style:l,children:"Sample Text"})]})}function WI(a,e){return function(){return a.apply(e,arguments)}}const{toString:v8}=Object.prototype,{getPrototypeOf:gw}=Object,{iterator:XA,toStringTag:KI}=Symbol,JA=(a=>e=>{const t=v8.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wl=a=>(a=a.toLowerCase(),e=>JA(e)===a),ZA=a=>e=>typeof e===a,{isArray:E0}=Array,Bv=ZA("undefined");function y8(a){return a!==null&&!Bv(a)&&a.constructor!==null&&!Bv(a.constructor)&&Ns(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const YI=wl("ArrayBuffer");function x8(a){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(a):e=a&&a.buffer&&YI(a.buffer),e}const A8=ZA("string"),Ns=ZA("function"),qI=ZA("number"),QA=a=>a!==null&&typeof a=="object",_8=a=>a===!0||a===!1,Ax=a=>{if(JA(a)!=="object")return!1;const e=gw(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(KI in a)&&!(XA in a)},b8=wl("Date"),S8=wl("File"),E8=wl("Blob"),w8=wl("FileList"),R8=a=>QA(a)&&Ns(a.pipe),M8=a=>{let e;return a&&(typeof FormData=="function"&&a instanceof FormData||Ns(a.append)&&((e=JA(a))==="formdata"||e==="object"&&Ns(a.toString)&&a.toString()==="[object FormData]"))},T8=wl("URLSearchParams"),[N8,C8,I8,D8]=["ReadableStream","Request","Response","Headers"].map(wl),L8=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function l1(a,e,{allOwnKeys:t=!1}={}){if(a===null||typeof a>"u")return;let n,r;if(typeof a!="object"&&(a=[a]),E0(a))for(n=0,r=a.length;n<r;n++)e.call(null,a[n],n,a);else{const i=t?Object.getOwnPropertyNames(a):Object.keys(a),s=i.length;let o;for(n=0;n<s;n++)o=i[n],e.call(null,a[o],o,a)}}function XI(a,e){e=e.toLowerCase();const t=Object.keys(a);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const Th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,JI=a=>!Bv(a)&&a!==Th;function l3(){const{caseless:a}=JI(this)&&this||{},e={},t=(n,r)=>{const i=a&&XI(e,r)||r;Ax(e[i])&&Ax(n)?e[i]=l3(e[i],n):Ax(n)?e[i]=l3({},n):E0(n)?e[i]=n.slice():e[i]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&l1(arguments[n],t);return e}const P8=(a,e,t,{allOwnKeys:n}={})=>(l1(e,(r,i)=>{t&&Ns(r)?a[i]=WI(r,t):a[i]=r},{allOwnKeys:n}),a),O8=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),U8=(a,e,t,n)=>{a.prototype=Object.create(e.prototype,n),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:e.prototype}),t&&Object.assign(a.prototype,t)},B8=(a,e,t,n)=>{let r,i,s;const o={};if(e=e||{},a==null)return e;do{for(r=Object.getOwnPropertyNames(a),i=r.length;i-- >0;)s=r[i],(!n||n(s,a,e))&&!o[s]&&(e[s]=a[s],o[s]=!0);a=t!==!1&&gw(a)}while(a&&(!t||t(a,e))&&a!==Object.prototype);return e},F8=(a,e,t)=>{a=String(a),(t===void 0||t>a.length)&&(t=a.length),t-=e.length;const n=a.indexOf(e,t);return n!==-1&&n===t},k8=a=>{if(!a)return null;if(E0(a))return a;let e=a.length;if(!qI(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=a[e];return t},H8=(a=>e=>a&&e instanceof a)(typeof Uint8Array<"u"&&gw(Uint8Array)),j8=(a,e)=>{const n=(a&&a[XA]).call(a);let r;for(;(r=n.next())&&!r.done;){const i=r.value;e.call(a,i[0],i[1])}},z8=(a,e)=>{let t;const n=[];for(;(t=a.exec(e))!==null;)n.push(t);return n},G8=wl("HTMLFormElement"),V8=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),bT=(({hasOwnProperty:a})=>(e,t)=>a.call(e,t))(Object.prototype),W8=wl("RegExp"),ZI=(a,e)=>{const t=Object.getOwnPropertyDescriptors(a),n={};l1(t,(r,i)=>{let s;(s=e(r,i,a))!==!1&&(n[i]=s||r)}),Object.defineProperties(a,n)},K8=a=>{ZI(a,(e,t)=>{if(Ns(a)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=a[t];if(Ns(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Y8=(a,e)=>{const t={},n=r=>{r.forEach(i=>{t[i]=!0})};return E0(a)?n(a):n(String(a).split(e)),t},q8=()=>{},X8=(a,e)=>a!=null&&Number.isFinite(a=+a)?a:e;function J8(a){return!!(a&&Ns(a.append)&&a[KI]==="FormData"&&a[XA])}const Z8=a=>{const e=new Array(10),t=(n,r)=>{if(QA(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const i=E0(n)?[]:{};return l1(n,(s,o)=>{const l=t(s,r+1);!Bv(l)&&(i[o]=l)}),e[r]=void 0,i}}return n};return t(a,0)},Q8=wl("AsyncFunction"),$8=a=>a&&(QA(a)||Ns(a))&&Ns(a.then)&&Ns(a.catch),QI=((a,e)=>a?setImmediate:e?((t,n)=>(Th.addEventListener("message",({source:r,data:i})=>{r===Th&&i===t&&n.length&&n.shift()()},!1),r=>{n.push(r),Th.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ns(Th.postMessage)),eF=typeof queueMicrotask<"u"?queueMicrotask.bind(Th):typeof process<"u"&&process.nextTick||QI,tF=a=>a!=null&&Ns(a[XA]),We={isArray:E0,isArrayBuffer:YI,isBuffer:y8,isFormData:M8,isArrayBufferView:x8,isString:A8,isNumber:qI,isBoolean:_8,isObject:QA,isPlainObject:Ax,isReadableStream:N8,isRequest:C8,isResponse:I8,isHeaders:D8,isUndefined:Bv,isDate:b8,isFile:S8,isBlob:E8,isRegExp:W8,isFunction:Ns,isStream:R8,isURLSearchParams:T8,isTypedArray:H8,isFileList:w8,forEach:l1,merge:l3,extend:P8,trim:L8,stripBOM:O8,inherits:U8,toFlatObject:B8,kindOf:JA,kindOfTest:wl,endsWith:F8,toArray:k8,forEachEntry:j8,matchAll:z8,isHTMLForm:G8,hasOwnProperty:bT,hasOwnProp:bT,reduceDescriptors:ZI,freezeMethods:K8,toObjectSet:Y8,toCamelCase:V8,noop:q8,toFiniteNumber:X8,findKey:XI,global:Th,isContextDefined:JI,isSpecCompliantForm:J8,toJSONObject:Z8,isAsyncFn:Q8,isThenable:$8,setImmediate:QI,asap:eF,isIterable:tF};function Mn(a,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}We.inherits(Mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:We.toJSONObject(this.config),code:this.code,status:this.status}}});const $I=Mn.prototype,eD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{eD[a]={value:a}});Object.defineProperties(Mn,eD);Object.defineProperty($I,"isAxiosError",{value:!0});Mn.from=(a,e,t,n,r,i)=>{const s=Object.create($I);return We.toFlatObject(a,s,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Mn.call(s,a.message,e,t,n,r),s.cause=a,s.name=a.name,i&&Object.assign(s,i),s};const nF=null;function c3(a){return We.isPlainObject(a)||We.isArray(a)}function tD(a){return We.endsWith(a,"[]")?a.slice(0,-2):a}function ST(a,e,t){return a?a.concat(e).map(function(r,i){return r=tD(r),!t&&i?"["+r+"]":r}).join(t?".":""):e}function aF(a){return We.isArray(a)&&!a.some(c3)}const rF=We.toFlatObject(We,{},null,function(e){return/^is[A-Z]/.test(e)});function $A(a,e,t){if(!We.isObject(a))throw new TypeError("target must be an object");e=e||new FormData,t=We.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,b){return!We.isUndefined(b[E])});const n=t.metaTokens,r=t.visitor||d,i=t.dots,s=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&We.isSpecCompliantForm(e);if(!We.isFunction(r))throw new TypeError("visitor must be a function");function c(A){if(A===null)return"";if(We.isDate(A))return A.toISOString();if(!l&&We.isBlob(A))throw new Mn("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(A)||We.isTypedArray(A)?l&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function d(A,E,b){let _=A;if(A&&!b&&typeof A=="object"){if(We.endsWith(E,"{}"))E=n?E:E.slice(0,-2),A=JSON.stringify(A);else if(We.isArray(A)&&aF(A)||(We.isFileList(A)||We.endsWith(E,"[]"))&&(_=We.toArray(A)))return E=tD(E),_.forEach(function(T,M){!(We.isUndefined(T)||T===null)&&e.append(s===!0?ST([E],M,i):s===null?E:E+"[]",c(T))}),!1}return c3(A)?!0:(e.append(ST(b,E,i),c(A)),!1)}const h=[],m=Object.assign(rF,{defaultVisitor:d,convertValue:c,isVisitable:c3});function v(A,E){if(!We.isUndefined(A)){if(h.indexOf(A)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(A),We.forEach(A,function(_,R){(!(We.isUndefined(_)||_===null)&&r.call(e,_,We.isString(R)?R.trim():R,E,m))===!0&&v(_,E?E.concat(R):[R])}),h.pop()}}if(!We.isObject(a))throw new TypeError("data must be an object");return v(a),e}function ET(a){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function vw(a,e){this._pairs=[],a&&$A(a,this,e)}const nD=vw.prototype;nD.append=function(e,t){this._pairs.push([e,t])};nD.toString=function(e){const t=e?function(n){return e.call(this,n,ET)}:ET;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function iF(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aD(a,e,t){if(!e)return a;const n=t&&t.encode||iF;We.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let i;if(r?i=r(e,t):i=We.isURLSearchParams(e)?e.toString():new vw(e,t).toString(n),i){const s=a.indexOf("#");s!==-1&&(a=a.slice(0,s)),a+=(a.indexOf("?")===-1?"?":"&")+i}return a}class wT{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){We.forEach(this.handlers,function(n){n!==null&&e(n)})}}const rD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sF=typeof URLSearchParams<"u"?URLSearchParams:vw,oF=typeof FormData<"u"?FormData:null,lF=typeof Blob<"u"?Blob:null,cF={isBrowser:!0,classes:{URLSearchParams:sF,FormData:oF,Blob:lF},protocols:["http","https","file","blob","url","data"]},yw=typeof window<"u"&&typeof document<"u",u3=typeof navigator=="object"&&navigator||void 0,uF=yw&&(!u3||["ReactNative","NativeScript","NS"].indexOf(u3.product)<0),dF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fF=yw&&window.location.href||"http://localhost",hF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yw,hasStandardBrowserEnv:uF,hasStandardBrowserWebWorkerEnv:dF,navigator:u3,origin:fF},Symbol.toStringTag,{value:"Module"})),Ci={...hF,...cF};function pF(a,e){return $A(a,new Ci.classes.URLSearchParams,Object.assign({visitor:function(t,n,r,i){return Ci.isNode&&We.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function mF(a){return We.matchAll(/\w+|\[(\w*)]/g,a).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gF(a){const e={},t=Object.keys(a);let n;const r=t.length;let i;for(n=0;n<r;n++)i=t[n],e[i]=a[i];return e}function iD(a){function e(t,n,r,i){let s=t[i++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=i>=t.length;return s=!s&&We.isArray(r)?r.length:s,l?(We.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o):((!r[s]||!We.isObject(r[s]))&&(r[s]=[]),e(t,n,r[s],i)&&We.isArray(r[s])&&(r[s]=gF(r[s])),!o)}if(We.isFormData(a)&&We.isFunction(a.entries)){const t={};return We.forEachEntry(a,(n,r)=>{e(mF(n),r,t,0)}),t}return null}function vF(a,e,t){if(We.isString(a))try{return(e||JSON.parse)(a),We.trim(a)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(a)}const c1={transitional:rD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=We.isObject(e);if(i&&We.isHTMLForm(e)&&(e=new FormData(e)),We.isFormData(e))return r?JSON.stringify(iD(e)):e;if(We.isArrayBuffer(e)||We.isBuffer(e)||We.isStream(e)||We.isFile(e)||We.isBlob(e)||We.isReadableStream(e))return e;if(We.isArrayBufferView(e))return e.buffer;if(We.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return pF(e,this.formSerializer).toString();if((o=We.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return $A(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),vF(e)):e}],transformResponse:[function(e){const t=this.transitional||c1.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(We.isResponse(e)||We.isReadableStream(e))return e;if(e&&We.isString(e)&&(n&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Mn.from(o,Mn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ci.classes.FormData,Blob:Ci.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};We.forEach(["delete","get","head","post","put","patch"],a=>{c1.headers[a]={}});const yF=We.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xF=a=>{const e={};let t,n,r;return a&&a.split(`
`).forEach(function(s){r=s.indexOf(":"),t=s.substring(0,r).trim().toLowerCase(),n=s.substring(r+1).trim(),!(!t||e[t]&&yF[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},RT=Symbol("internals");function $g(a){return a&&String(a).trim().toLowerCase()}function _x(a){return a===!1||a==null?a:We.isArray(a)?a.map(_x):String(a)}function AF(a){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(a);)e[n[1]]=n[2];return e}const _F=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function Kb(a,e,t,n,r){if(We.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!We.isString(e)){if(We.isString(n))return e.indexOf(n)!==-1;if(We.isRegExp(n))return n.test(e)}}function bF(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function SF(a,e){const t=We.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(a,n+t,{value:function(r,i,s){return this[n].call(this,e,r,i,s)},configurable:!0})})}class Cs{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(o,l,c){const d=$g(l);if(!d)throw new Error("header name must be a non-empty string");const h=We.findKey(r,d);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||l]=_x(o))}const s=(o,l)=>We.forEach(o,(c,d)=>i(c,d,l));if(We.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(We.isString(e)&&(e=e.trim())&&!_F(e))s(xF(e),t);else if(We.isObject(e)&&We.isIterable(e)){let o={},l,c;for(const d of e){if(!We.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[c=d[0]]=(l=o[c])?We.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,t)}else e!=null&&i(t,e,n);return this}get(e,t){if(e=$g(e),e){const n=We.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return AF(r);if(We.isFunction(t))return t.call(this,r,n);if(We.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$g(e),e){const n=We.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Kb(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function i(s){if(s=$g(s),s){const o=We.findKey(n,s);o&&(!t||Kb(n,n[o],o,t))&&(delete n[o],r=!0)}}return We.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];(!e||Kb(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return We.forEach(this,(r,i)=>{const s=We.findKey(n,i);if(s){t[s]=_x(r),delete t[i];return}const o=e?bF(i):String(i).trim();o!==i&&delete t[i],t[o]=_x(r),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return We.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&We.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[RT]=this[RT]={accessors:{}}).accessors,r=this.prototype;function i(s){const o=$g(s);n[o]||(SF(r,s),n[o]=!0)}return We.isArray(e)?e.forEach(i):i(e),this}}Cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);We.reduceDescriptors(Cs.prototype,({value:a},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>a,set(n){this[t]=n}}});We.freezeMethods(Cs);function Yb(a,e){const t=this||c1,n=e||t,r=Cs.from(n.headers);let i=n.data;return We.forEach(a,function(o){i=o.call(t,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function sD(a){return!!(a&&a.__CANCEL__)}function w0(a,e,t){Mn.call(this,a??"canceled",Mn.ERR_CANCELED,e,t),this.name="CanceledError"}We.inherits(w0,Mn,{__CANCEL__:!0});function oD(a,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?a(t):e(new Mn("Request failed with status code "+t.status,[Mn.ERR_BAD_REQUEST,Mn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function EF(a){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return e&&e[1]||""}function wF(a,e){a=a||10;const t=new Array(a),n=new Array(a);let r=0,i=0,s;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[i];s||(s=c),t[r]=l,n[r]=c;let h=i,m=0;for(;h!==r;)m+=t[h++],h=h%a;if(r=(r+1)%a,r===i&&(i=(i+1)%a),c-s<e)return;const v=d&&c-d;return v?Math.round(m*1e3/v):void 0}}function RF(a,e){let t=0,n=1e3/e,r,i;const s=(c,d=Date.now())=>{t=d,r=null,i&&(clearTimeout(i),i=null),a.apply(null,c)};return[(...c)=>{const d=Date.now(),h=d-t;h>=n?s(c,d):(r=c,i||(i=setTimeout(()=>{i=null,s(r)},n-h)))},()=>r&&s(r)]}const Cx=(a,e,t=3)=>{let n=0;const r=wF(50,250);return RF(i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,l=s-n,c=r(l),d=s<=o;n=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&d?(o-s)/c:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};a(h)},t)},MT=(a,e)=>{const t=a!=null;return[n=>e[0]({lengthComputable:t,total:a,loaded:n}),e[1]]},TT=a=>(...e)=>We.asap(()=>a(...e)),MF=Ci.hasStandardBrowserEnv?((a,e)=>t=>(t=new URL(t,Ci.origin),a.protocol===t.protocol&&a.host===t.host&&(e||a.port===t.port)))(new URL(Ci.origin),Ci.navigator&&/(msie|trident)/i.test(Ci.navigator.userAgent)):()=>!0,TF=Ci.hasStandardBrowserEnv?{write(a,e,t,n,r,i){const s=[a+"="+encodeURIComponent(e)];We.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),We.isString(n)&&s.push("path="+n),We.isString(r)&&s.push("domain="+r),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(a){const e=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function NF(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function CF(a,e){return e?a.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):a}function lD(a,e,t){let n=!NF(e);return a&&(n||t==!1)?CF(a,e):e}const NT=a=>a instanceof Cs?{...a}:a;function zh(a,e){e=e||{};const t={};function n(c,d,h,m){return We.isPlainObject(c)&&We.isPlainObject(d)?We.merge.call({caseless:m},c,d):We.isPlainObject(d)?We.merge({},d):We.isArray(d)?d.slice():d}function r(c,d,h,m){if(We.isUndefined(d)){if(!We.isUndefined(c))return n(void 0,c,h,m)}else return n(c,d,h,m)}function i(c,d){if(!We.isUndefined(d))return n(void 0,d)}function s(c,d){if(We.isUndefined(d)){if(!We.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,h){if(h in e)return n(c,d);if(h in a)return n(void 0,c)}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d,h)=>r(NT(c),NT(d),h,!0)};return We.forEach(Object.keys(Object.assign({},a,e)),function(d){const h=l[d]||r,m=h(a[d],e[d],d);We.isUndefined(m)&&h!==o||(t[d]=m)}),t}const cD=a=>{const e=zh({},a);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:s,auth:o}=e;e.headers=s=Cs.from(s),e.url=aD(lD(e.baseURL,e.url,e.allowAbsoluteUrls),a.params,a.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(We.isFormData(t)){if(Ci.hasStandardBrowserEnv||Ci.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[c,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...d].join("; "))}}if(Ci.hasStandardBrowserEnv&&(n&&We.isFunction(n)&&(n=n(e)),n||n!==!1&&MF(e.url))){const c=r&&i&&TF.read(i);c&&s.set(r,c)}return e},IF=typeof XMLHttpRequest<"u",DF=IF&&function(a){return new Promise(function(t,n){const r=cD(a);let i=r.data;const s=Cs.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=r,d,h,m,v,A;function E(){v&&v(),A&&A(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function _(){if(!b)return;const T=Cs.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),I={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:T,config:a,request:b};oD(function(B){t(B),E()},function(B){n(B),E()},I),b=null}"onloadend"in b?b.onloadend=_:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(_)},b.onabort=function(){b&&(n(new Mn("Request aborted",Mn.ECONNABORTED,a,b)),b=null)},b.onerror=function(){n(new Mn("Network Error",Mn.ERR_NETWORK,a,b)),b=null},b.ontimeout=function(){let M=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const I=r.transitional||rD;r.timeoutErrorMessage&&(M=r.timeoutErrorMessage),n(new Mn(M,I.clarifyTimeoutError?Mn.ETIMEDOUT:Mn.ECONNABORTED,a,b)),b=null},i===void 0&&s.setContentType(null),"setRequestHeader"in b&&We.forEach(s.toJSON(),function(M,I){b.setRequestHeader(I,M)}),We.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),o&&o!=="json"&&(b.responseType=r.responseType),c&&([m,A]=Cx(c,!0),b.addEventListener("progress",m)),l&&b.upload&&([h,v]=Cx(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(d=T=>{b&&(n(!T||T.type?new w0(null,a,b):T),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const R=EF(r.url);if(R&&Ci.protocols.indexOf(R)===-1){n(new Mn("Unsupported protocol "+R+":",Mn.ERR_BAD_REQUEST,a));return}b.send(i||null)})},LF=(a,e)=>{const{length:t}=a=a?a.filter(Boolean):[];if(e||t){let n=new AbortController,r;const i=function(c){if(!r){r=!0,o();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Mn?d:new w0(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,i(new Mn(`timeout ${e} of ms exceeded`,Mn.ETIMEDOUT))},e);const o=()=>{a&&(s&&clearTimeout(s),s=null,a.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),a=null)};a.forEach(c=>c.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>We.asap(o),l}},PF=function*(a,e){let t=a.byteLength;if(t<e){yield a;return}let n=0,r;for(;n<t;)r=n+e,yield a.slice(n,r),n=r},OF=async function*(a,e){for await(const t of UF(a))yield*PF(t,e)},UF=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const e=a.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},CT=(a,e,t,n)=>{const r=OF(a,e);let i=0,s,o=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await r.next();if(c){o(),l.close();return}let h=d.byteLength;if(t){let m=i+=h;t(m)}l.enqueue(new Uint8Array(d))}catch(c){throw o(c),c}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},e_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",uD=e_&&typeof ReadableStream=="function",BF=e_&&(typeof TextEncoder=="function"?(a=>e=>a.encode(e))(new TextEncoder):async a=>new Uint8Array(await new Response(a).arrayBuffer())),dD=(a,...e)=>{try{return!!a(...e)}catch{return!1}},FF=uD&&dD(()=>{let a=!1;const e=new Request(Ci.origin,{body:new ReadableStream,method:"POST",get duplex(){return a=!0,"half"}}).headers.has("Content-Type");return a&&!e}),IT=64*1024,d3=uD&&dD(()=>We.isReadableStream(new Response("").body)),Ix={stream:d3&&(a=>a.body)};e_&&(a=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ix[e]&&(Ix[e]=We.isFunction(a[e])?t=>t[e]():(t,n)=>{throw new Mn(`Response type '${e}' is not supported`,Mn.ERR_NOT_SUPPORT,n)})})})(new Response);const kF=async a=>{if(a==null)return 0;if(We.isBlob(a))return a.size;if(We.isSpecCompliantForm(a))return(await new Request(Ci.origin,{method:"POST",body:a}).arrayBuffer()).byteLength;if(We.isArrayBufferView(a)||We.isArrayBuffer(a))return a.byteLength;if(We.isURLSearchParams(a)&&(a=a+""),We.isString(a))return(await BF(a)).byteLength},HF=async(a,e)=>{const t=We.toFiniteNumber(a.getContentLength());return t??kF(e)},jF=e_&&(async a=>{let{url:e,method:t,data:n,signal:r,cancelToken:i,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:m}=cD(a);c=c?(c+"").toLowerCase():"text";let v=LF([r,i&&i.toAbortSignal()],s),A;const E=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let b;try{if(l&&FF&&t!=="get"&&t!=="head"&&(b=await HF(d,n))!==0){let I=new Request(e,{method:"POST",body:n,duplex:"half"}),P;if(We.isFormData(n)&&(P=I.headers.get("content-type"))&&d.setContentType(P),I.body){const[B,F]=MT(b,Cx(TT(l)));n=CT(I.body,IT,B,F)}}We.isString(h)||(h=h?"include":"omit");const _="credentials"in Request.prototype;A=new Request(e,{...m,signal:v,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:_?h:void 0});let R=await fetch(A);const T=d3&&(c==="stream"||c==="response");if(d3&&(o||T&&E)){const I={};["status","statusText","headers"].forEach(L=>{I[L]=R[L]});const P=We.toFiniteNumber(R.headers.get("content-length")),[B,F]=o&&MT(P,Cx(TT(o),!0))||[];R=new Response(CT(R.body,IT,B,()=>{F&&F(),E&&E()}),I)}c=c||"text";let M=await Ix[We.findKey(Ix,c)||"text"](R,a);return!T&&E&&E(),await new Promise((I,P)=>{oD(I,P,{data:M,headers:Cs.from(R.headers),status:R.status,statusText:R.statusText,config:a,request:A})})}catch(_){throw E&&E(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Mn("Network Error",Mn.ERR_NETWORK,a,A),{cause:_.cause||_}):Mn.from(_,_&&_.code,a,A)}}),f3={http:nF,xhr:DF,fetch:jF};We.forEach(f3,(a,e)=>{if(a){try{Object.defineProperty(a,"name",{value:e})}catch{}Object.defineProperty(a,"adapterName",{value:e})}});const DT=a=>`- ${a}`,zF=a=>We.isFunction(a)||a===null||a===!1,fD={getAdapter:a=>{a=We.isArray(a)?a:[a];const{length:e}=a;let t,n;const r={};for(let i=0;i<e;i++){t=a[i];let s;if(n=t,!zF(t)&&(n=f3[(s=String(t)).toLowerCase()],n===void 0))throw new Mn(`Unknown adapter '${s}'`);if(n)break;r[s||"#"+i]=n}if(!n){const i=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=e?i.length>1?`since :
`+i.map(DT).join(`
`):" "+DT(i[0]):"as no adapter specified";throw new Mn("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:f3};function qb(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new w0(null,a)}function LT(a){return qb(a),a.headers=Cs.from(a.headers),a.data=Yb.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),fD.getAdapter(a.adapter||c1.adapter)(a).then(function(n){return qb(a),n.data=Yb.call(a,a.transformResponse,n),n.headers=Cs.from(n.headers),n},function(n){return sD(n)||(qb(a),n&&n.response&&(n.response.data=Yb.call(a,a.transformResponse,n.response),n.response.headers=Cs.from(n.response.headers))),Promise.reject(n)})}const hD="1.9.0",t_={};["object","boolean","number","function","string","symbol"].forEach((a,e)=>{t_[a]=function(n){return typeof n===a||"a"+(e<1?"n ":" ")+a}});const PT={};t_.transitional=function(e,t,n){function r(i,s){return"[Axios v"+hD+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return(i,s,o)=>{if(e===!1)throw new Mn(r(s," has been removed"+(t?" in "+t:"")),Mn.ERR_DEPRECATED);return t&&!PT[s]&&(PT[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,s,o):!0}};t_.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function GF(a,e,t){if(typeof a!="object")throw new Mn("options must be an object",Mn.ERR_BAD_OPTION_VALUE);const n=Object.keys(a);let r=n.length;for(;r-- >0;){const i=n[r],s=e[i];if(s){const o=a[i],l=o===void 0||s(o,i,a);if(l!==!0)throw new Mn("option "+i+" must be "+l,Mn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Mn("Unknown option "+i,Mn.ERR_BAD_OPTION)}}const bx={assertOptions:GF,validators:t_},dc=bx.validators;class Uh{constructor(e){this.defaults=e||{},this.interceptors={request:new wT,response:new wT}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=zh(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;n!==void 0&&bx.assertOptions(n,{silentJSONParsing:dc.transitional(dc.boolean),forcedJSONParsing:dc.transitional(dc.boolean),clarifyTimeoutError:dc.transitional(dc.boolean)},!1),r!=null&&(We.isFunction(r)?t.paramsSerializer={serialize:r}:bx.assertOptions(r,{encode:dc.function,serialize:dc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bx.assertOptions(t,{baseUrl:dc.spelling("baseURL"),withXsrfToken:dc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&We.merge(i.common,i[t.method]);i&&We.forEach(["delete","get","head","post","put","patch","common"],A=>{delete i[A]}),t.headers=Cs.concat(s,i);const o=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(l=l&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,h=0,m;if(!l){const A=[LT.bind(this),void 0];for(A.unshift.apply(A,o),A.push.apply(A,c),m=A.length,d=Promise.resolve(t);h<m;)d=d.then(A[h++],A[h++]);return d}m=o.length;let v=t;for(h=0;h<m;){const A=o[h++],E=o[h++];try{v=A(v)}catch(b){E.call(this,b);break}}try{d=LT.call(this,v)}catch(A){return Promise.reject(A)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=zh(this.defaults,e);const t=lD(e.baseURL,e.url,e.allowAbsoluteUrls);return aD(t,e.params,e.paramsSerializer)}}We.forEach(["delete","get","head","options"],function(e){Uh.prototype[e]=function(t,n){return this.request(zh(n||{},{method:e,url:t,data:(n||{}).data}))}});We.forEach(["post","put","patch"],function(e){function t(n){return function(i,s,o){return this.request(zh(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}Uh.prototype[e]=t(),Uh.prototype[e+"Form"]=t(!0)});class xw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const s=new Promise(o=>{n.subscribe(o),i=o}).then(r);return s.cancel=function(){n.unsubscribe(i)},s},e(function(i,s,o){n.reason||(n.reason=new w0(i,s,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new xw(function(r){e=r}),cancel:e}}}function VF(a){return function(t){return a.apply(null,t)}}function WF(a){return We.isObject(a)&&a.isAxiosError===!0}const h3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(h3).forEach(([a,e])=>{h3[e]=a});function pD(a){const e=new Uh(a),t=WI(Uh.prototype.request,e);return We.extend(t,Uh.prototype,e,{allOwnKeys:!0}),We.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return pD(zh(a,r))},t}const cn=pD(c1);cn.Axios=Uh;cn.CanceledError=w0;cn.CancelToken=xw;cn.isCancel=sD;cn.VERSION=hD;cn.toFormData=$A;cn.AxiosError=Mn;cn.Cancel=cn.CanceledError;cn.all=function(e){return Promise.all(e)};cn.spread=VF;cn.isAxiosError=WF;cn.mergeConfig=zh;cn.AxiosHeaders=Cs;cn.formToJSON=a=>iD(We.isHTMLForm(a)?new FormData(a):a);cn.getAdapter=fD.getAdapter;cn.HttpStatusCode=h3;cn.default=cn;function KF(){const[a,e]=H.useState([]);return H.useEffect(()=>{cn.get("https://apis.dnjs.lk/objects/colors.php").then(function(t){e(t.data)})},[]),x.jsx("div",{children:x.jsx("ul",{children:a.map((t,n)=>x.jsxs("li",{children:["Name: ",t.name," - Code: ",t.code]},n))})})}function YF(){const[a,e]=H.useState([]),[t,n]=H.useState("");H.useEffect(()=>{cn.get("https://apis.dnjs.lk/objects/colors.php").then(i=>{e(i.data)})},[]);const r=()=>{cn.get(`https://apis.dnjs.lk/objects/colors.php?search=${t}`).then(i=>{e(i.data)})};return x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("input",{type:"text",placeholder:"Search Colors",value:t,onChange:i=>n(i.target.value)}),x.jsx("button",{onClick:r,children:"Search"})]}),x.jsx("div",{children:x.jsx("ul",{children:a.map((i,s)=>x.jsxs("li",{children:["Name: ",i.name," - Code: ",i.code]},s))})})]})}function qF(){const[a,e]=H.useState([]),[t,n]=H.useState(""),[r,i]=H.useState(1),[s,o]=H.useState(10),[l,c]=H.useState(0),d=()=>{cn.get(`https://apis.dnjs.lk/objects/colors.php?search=${t}&page=${r}&limit=${s}`).then(m=>{const{data:v,page:A,limit:E,total:b}=m.data;e(v),i(A),o(E),c(Math.ceil(b/E))})};H.useEffect(()=>{d()},[r,s]);const h=()=>{i(1),d()};return x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("input",{type:"text",placeholder:"Search Colors",value:t,onChange:m=>n(m.target.value)}),x.jsx("button",{onClick:h,children:"Search"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Items per page: "}),x.jsxs("select",{value:s,onChange:m=>o(m.target.value),children:[x.jsx("option",{value:"10",children:"10"}),x.jsx("option",{value:"15",children:"15"}),x.jsx("option",{value:"20",children:"20"})]})]}),x.jsx("div",{children:x.jsx("ul",{children:a.map((m,v)=>x.jsxs("li",{children:["Name: ",m.name," - Code: ",m.code]},v))})}),x.jsx("div",{children:Array(l).fill().map((m,v)=>x.jsx("button",{onClick:()=>i(v+1),children:v+1},v))})]})}function XF(){const[a,e]=H.useState(""),[t,n]=H.useState(""),[r,i]=H.useState(""),[s,o]=H.useState(!1),[l,c]=H.useState(!1),d=a!==""&&t!=="",h=()=>{i(""),o(!0),cn.post("https://auth.dnjs.lk/api/login",{email:a,password:t}).then(function(m){console.log(m.data),o(!1),c(!0)}).catch(function(m){i(m.response.data.error.message),o(!1)})};return H.useEffect(()=>{i("")},[a,t]),l?x.jsx("div",{children:"You have successfully logged in!"}):x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:a,onChange:m=>e(m.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:t,onChange:m=>n(m.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:h,disabled:s||!d,children:"Login"}),r&&x.jsxs("p",{style:{color:"red"},children:["Error: ",r]})]})]})}function JF(){const[a,e]=H.useState(""),[t,n]=H.useState(""),[r,i]=H.useState(""),[s,o]=H.useState(!1),[l,c]=H.useState(!1),[d,h]=H.useState(""),[m,v]=H.useState(""),A=a!==""&&t!=="",E=()=>{i(""),o(!0),cn.post("https://auth.dnjs.lk/api/login",{email:a,password:t}).then(function(_){console.log(_.data),o(!1),c(!0),h(_.data.access_token)}).catch(function(_){i(_.response.data.error.message),o(!1)})},b=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${d}`}}).then(_=>{v(_.data)}).catch(_=>{console.log(_)})};return H.useEffect(()=>{i("")},[a,t]),H.useEffect(()=>{console.log("Token",d),d!==""&&b()},[d]),l&&m?x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("div",{children:x.jsx("h2",{children:m.name})}),x.jsx("p",{children:m.description}),x.jsx("img",{src:m.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",m.email]})]}):x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:a,onChange:_=>e(_.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:t,onChange:_=>n(_.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:E,disabled:s||!A,children:"Login"}),r&&x.jsxs("p",{style:{color:"red"},children:["Error: ",r]})]})]})}function ZF(){const[a,e]=H.useState(""),[t,n]=H.useState(""),[r,i]=H.useState(""),[s,o]=H.useState(!1),[l,c]=H.useState(!1),[d,h]=H.useState(""),[m,v]=H.useState(""),[A,E]=H.useState(!1),b=a!==""&&t!=="",_=()=>{i(""),o(!0),cn.post("https://auth.dnjs.lk/api/login",{email:a,password:t}).then(function(T){console.log(T.data),o(!1),c(!0),h(T.data.access_token),A?localStorage.setItem("accessToken",T.data.access_token):sessionStorage.setItem("accessToken",T.data.access_token)}).catch(function(T){i(T.responses.data.error.message),o(!1)})},R=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${d}`}}).then(T=>{v(T.data)}).catch(T=>{console.log(T)})};return H.useEffect(()=>{i("")},[a,t]),H.useEffect(()=>{d!==""&&R()},[d]),H.useEffect(()=>{const T=localStorage.accessToken||sessionStorage.accessToken;T&&(h(T),c(!0))},[]),l&&m?x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("div",{children:x.jsx("h2",{children:m.name})}),x.jsx("p",{children:m.description}),x.jsx("img",{src:m.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",m.email]})]}):x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:a,onChange:T=>e(T.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:t,onChange:T=>n(T.target.value),disabled:s})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("input",{type:"checkbox",value:A,onChange:T=>E(T.target.value)}),x.jsx("label",{children:" Keep me logged in"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:_,disabled:s||!b,children:"Login"}),r&&x.jsxs("p",{style:{color:"red"},children:["Error: ",r]})]})]})}const QF=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!1),h=e!==""&&n!=="",m=()=>{s(""),l(!0),cn.post("https://auth.dnjs.lk/api/login",{email:e,password:n}).then(function(v){console.log(v.data),l(!1),a.setLogged(!0),c?localStorage.setItem("accessToken",v.data.access_token):sessionStorage.setItem("accessToken",v.data.access_token)}).catch(function(v){s(v.response.data.error.message),l(!1)})};return H.useEffect(()=>{s("")},[e,n]),x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:e,onChange:v=>t(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:v=>r(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("input",{type:"checkbox",value:c,onChange:v=>d(v.target.value)}),x.jsx("label",{children:" Keep me logged in"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:m,disabled:o||!h,style:{color:"green"},children:"Login"}),i&&x.jsxs("p",{style:{color:"red"},children:["Error: ",i]})]})]})},$F=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),i=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${n}`}}).then(o=>{t(o.data)}).catch(o=>{console.log(o)})},s=()=>{cn.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${n}`}}).then(()=>{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),a.setLogged(!1)}).catch(o=>{console.log(o)})};return H.useEffect(()=>{n!==""&&i()},[n]),H.useEffect(()=>{const o=localStorage.accessToken||sessionStorage.accessToken;o&&(r(o),a.setLogged(!0))},[]),x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("div",{children:x.jsx("h2",{children:e.name})}),x.jsx("p",{children:e.description}),x.jsx("img",{src:e.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",e.email]}),x.jsx("button",{style:{color:"red"},onClick:s,children:"Logout"})]})};function ek(){const[a,e]=H.useState(!1);return a?x.jsx($F,{setLogged:e}):x.jsx(QF,{setLogged:e})}const tk=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!1),h=e!==""&&n!=="",m=()=>{s(""),l(!0),cn.post("https://auth.dnjs.lk/api/login",{email:e,password:n}).then(function(v){console.log(v.data),l(!1),a.setLogged(!0),c?localStorage.setItem("accessToken",v.data.access_token):sessionStorage.setItem("accessToken",v.data.access_token)}).catch(function(v){s(v.response.data.error.message),l(!1)})};return H.useEffect(()=>{s("")},[e,n]),x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:e,onChange:v=>t(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:v=>r(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("input",{type:"checkbox",value:c,onChange:v=>d(v.target.value)}),x.jsx("label",{children:" Keep me logged in"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:m,disabled:o||!h,style:{color:"green"},children:"Login"}),i&&x.jsxs("p",{style:{color:"red"},children:["Error: ",i]})]})]})},nk=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(""),c=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${n}`}}).then(m=>{t(m.data),s(m.data.name),l(m.data.description)}).catch(m=>{console.log(m)})},d=()=>{cn.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${n}`}}).then(()=>{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),a.setLogged(!1)}).catch(m=>{console.log(m)})},h=()=>{cn.put("https://auth.dnjs.lk/api/user",{name:i,description:o},{headers:{Authorization:`Bearer ${n}`}}).then(m=>{s(m.data.name),l(m.data.description)}).catch(m=>{console.log(m)})};return H.useEffect(()=>{n!==""&&c()},[n]),H.useEffect(()=>{const m=localStorage.accessToken||sessionStorage.accessToken;m&&(r(m),a.setLogged(!0))},[]),x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Name: "}),x.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Description: "}),x.jsx("input",{type:"text",value:o,onChange:m=>l(m.target.value)})]}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("button",{onClick:h,style:{color:"blue"},children:"Save"})}),x.jsx("br",{}),x.jsx("img",{src:e.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",e.email]}),x.jsx("button",{style:{color:"red"},onClick:d,children:"Logout"})]})};function ak(){const[a,e]=H.useState(!1);return a?x.jsx(nk,{setLogged:e}):x.jsx(tk,{setLogged:e})}const rk=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!1),h=e!==""&&n!=="",m=()=>{s(""),l(!0),cn.post("https://auth.dnjs.lk/api/login",{email:e,password:n}).then(function(v){console.log(v.data),l(!1),a.setLogged(!0),c?localStorage.setItem("accessToken",v.data.access_token):sessionStorage.setItem("accessToken",v.data.access_token)}).catch(function(v){s(v.response.data.error.message),l(!1)})};return H.useEffect(()=>{s("")},[e,n]),x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:e,onChange:v=>t(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:v=>r(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("input",{type:"checkbox",value:c,onChange:v=>d(v.target.value)}),x.jsx("label",{children:" Keep me logged in"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:m,disabled:o||!h,style:{color:"green"},children:"Login"}),i&&x.jsxs("p",{style:{color:"red"},children:["Error: ",i]})]})]})},ik=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(""),[c,d]=H.useState(""),h=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${n}`}}).then(E=>{t(E.data),s(E.data.name),l(E.data.description)}).catch(E=>{console.log(E)})},m=()=>{cn.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${n}`}}).then(()=>{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),a.setLogged(!1)}).catch(E=>{console.log(E)})},v=()=>{cn.put("https://auth.dnjs.lk/api/user",{name:i,description:o},{headers:{Authorization:`Bearer ${n}`}}).then(E=>{s(E.data.name),l(E.data.description)}).catch(E=>{console.log(E)})},A=()=>{const E=new FormData;E.append("avatar",c),cn.post("https://auth.dnjs.lk/api/avatar",E,{headers:{Authorization:`Bearer ${n}`}}).then(b=>{console.log(b.data),h()}).catch(b=>{console.log(b)})};return H.useEffect(()=>{n!==""&&h()},[n]),H.useEffect(()=>{const E=localStorage.accessToken||sessionStorage.accessToken;E&&(r(E),a.setLogged(!0))},[]),x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Name: "}),x.jsx("input",{type:"text",value:i,onChange:E=>s(E.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Description: "}),x.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value)})]}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("button",{onClick:v,style:{color:"blue"},children:"Save"})}),x.jsx("br",{}),x.jsx("img",{src:e.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",e.email]}),x.jsxs("div",{children:[x.jsx("label",{children:"Upload Avatar: "}),x.jsx("input",{type:"file",accept:"image/*",onChange:E=>d(E.target.files[0])}),x.jsx("button",{onClick:A,style:{color:"blue"},children:"Upload"})]}),x.jsx("br",{}),x.jsx("button",{style:{color:"red"},onClick:m,children:"Logout"})]})};function sk(){const[a,e]=H.useState(!1);return H.useEffect(()=>{(localStorage.accessToken||sessionStorage.accessToken)&&e(!0)},[]),a?x.jsx(ik,{setLogged:e}):x.jsx(rk,{setLogged:e})}const ok=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(!1),[c,d]=H.useState(!1),h=e!==""&&n!=="",m=()=>{s(""),l(!0),cn.post("https://auth.dnjs.lk/api/login",{email:e,password:n}).then(function(v){console.log(v.data),l(!1),a.setLogged(!0),c?localStorage.setItem("accessToken",v.data.access_token):sessionStorage.setItem("accessToken",v.data.access_token)}).catch(function(v){s(v.response.data.error.message),l(!1)})};return H.useEffect(()=>{s("")},[e,n]),x.jsxs("div",{children:[x.jsx("h3",{children:"Login"}),x.jsxs("div",{children:[x.jsx("label",{children:"Email: "}),x.jsx("input",{type:"text",placeholder:"Enter your email",value:e,onChange:v=>t(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Password: "}),x.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:v=>r(v.target.value),disabled:o})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("input",{type:"checkbox",value:c,onChange:v=>d(v.target.value)}),x.jsx("label",{children:" Keep me logged in"})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:m,disabled:o||!h,style:{color:"green"},children:"Login"}),i&&x.jsxs("p",{style:{color:"red"},children:["Error: ",i]})]})]})},lk=a=>{const[e,t]=H.useState(""),[n,r]=H.useState(""),[i,s]=H.useState(""),[o,l]=H.useState(""),[c,d]=H.useState(""),[h,m]=H.useState(""),[v,A]=H.useState(""),[E,b]=H.useState(""),[_,R]=H.useState(""),T=()=>{cn.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${n}`}}).then(L=>{t(L.data),s(L.data.name),l(L.data.description)}).catch(L=>{console.log(L)})},M=()=>{cn.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${n}`}}).then(()=>{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),a.setLogged(!1)}).catch(L=>{console.log(L)})},I=()=>{cn.put("https://auth.dnjs.lk/api/user",{name:i,description:o},{headers:{Authorization:`Bearer ${n}`}}).then(L=>{s(L.data.name),l(L.data.description)}).catch(L=>{console.log(L)})},P=()=>{const L=new FormData;L.append("avatar",c),cn.post("https://auth.dnjs.lk/api/avatar",L,{headers:{Authorization:`Bearer ${n}`}}).then(U=>{console.log(U.data),T()}).catch(U=>{console.log(U)})},B=()=>{if(!h||!v||!E)return R("Please fill in all fields."),!1;if(v!==E)return R("New password and confirmation do not match."),!1;if(v.length<8||v.length>40)return R("Password must be between 8-40 characters."),!1;const L=/[0-9]/.test(v),U=/[*/-@#$]/.test(v),j=/[a-z]/.test(v),W=/[A-Z]/.test(v);return L?U?j?W?(R(""),!0):(R("Password must contain at least one uppercase letter."),!1):(R("Password must contain at least one lowercase letter."),!1):(R("Password must contain at least one special character (*/-@#$)."),!1):(R("Password must contain at least one numeric character."),!1)},F=()=>{B()&&cn.put("https://auth.dnjs.lk/api/password",{old_password:h,new_password:v},{headers:{Authorization:`Bearer ${n}`}}).then(L=>{console.log(L.data),m(""),A(""),b(""),R("")}).catch(L=>{var U;R((U=L.response.data)==null?void 0:U.error.message)})};return H.useEffect(()=>{n!==""&&T()},[n]),H.useEffect(()=>{const L=localStorage.accessToken||sessionStorage.accessToken;L&&(r(L),a.setLogged(!0))},[]),H.useEffect(()=>{R("")},[v,E]),x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("label",{children:"You have logged!"})}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Name: "}),x.jsx("input",{type:"text",value:i,onChange:L=>s(L.target.value)})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Description: "}),x.jsx("input",{type:"text",value:o,onChange:L=>l(L.target.value)})]}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("button",{onClick:I,style:{color:"blue"},children:"Save"})}),x.jsx("br",{}),x.jsx("img",{src:e.avatar,alt:"Avatar",width:"100"}),x.jsxs("p",{children:["Email: ",e.email]}),x.jsxs("div",{children:[x.jsx("label",{children:"Upload Avatar: "}),x.jsx("input",{type:"file",accept:"image/*",onChange:L=>d(L.target.files[0])}),x.jsx("button",{onClick:P,style:{color:"blue"},children:"Upload"})]}),x.jsxs("div",{children:[x.jsx("h4",{children:"Change Password"}),x.jsxs("div",{children:[x.jsx("label",{children:"Current Password: "}),x.jsx("input",{type:"password",value:h,onChange:L=>m(L.target.value)})]}),x.jsxs("div",{children:[x.jsx("label",{children:"New Password: "}),x.jsx("input",{type:"Password",value:v,onChange:L=>A(L.target.value)})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Re-Enter New Password: "}),x.jsx("input",{type:"password",value:E,onChange:L=>b(L.target.value)}),x.jsx("div",{children:x.jsx("button",{onClick:F,style:{color:"blue"},children:"Change Password"})})]}),_&&x.jsxs("p",{style:{color:"red"},children:["Error: ",_]})]}),x.jsx("br",{}),x.jsx("button",{style:{color:"red"},onClick:M,children:"Logout"})]})};function ck(){const[a,e]=H.useState(!1);return H.useEffect(()=>{(localStorage.accessToken||sessionStorage.accessToken)&&e(!0)},[]),a?x.jsx(lk,{setLogged:e}):x.jsx(ok,{setLogged:e})}function uk(){const[a,e]=H.useState("#000000"),[t,n]=H.useState("#000000"),[r,i]=H.useState({r:0,g:0,b:0}),[s,o]=H.useState({r:0,g:0,b:0}),[l,c]=H.useState({r:0,g:0,b:0}),d=_=>{const R=parseInt(_.slice(1,3),16),T=parseInt(_.slice(3,5),16),M=parseInt(_.slice(5,7),16);return{r:R,g:T,b:M}},h=_=>{const R=_.target.value,T=d(R);e(R),i(T),A(T,s)},m=_=>{const R=_.target.value,T=d(R);n(R),o(T),A(r,T)},v=_=>Math.min(255,Math.max(0,_)),A=(_,R)=>{const T=v(_.r+R.r),M=v(_.g+R.g),I=v(_.b+R.b);c({r:T,g:M,b:I})},E=_=>parseInt(_).toString(16).padStart(2,"0"),b="#"+E(l.r)+E(l.g)+E(l.b);return x.jsxs("div",{children:[x.jsx("h2",{style:{color:"blue"},children:"Color Mixer"}),x.jsxs("div",{children:[x.jsx("label",{children:"Color 1: "}),x.jsx("input",{type:"color",value:a,onChange:h})]}),x.jsxs("p",{children:["HEX: ",a," = RGB: ",r.r,",",r.g,",",r.b]}),x.jsxs("div",{children:[x.jsx("label",{children:"Color 2: "}),x.jsx("input",{type:"color",value:t,onChange:m})]}),x.jsxs("p",{children:["HEX: ",t," = RGB: ",s.r,",",s.g,",",s.b]}),x.jsxs("div",{children:[x.jsx("h3",{style:{color:"green"},children:"Mixed Color"}),x.jsxs("p",{children:["Output = RGB: ",l.r,",",l.g,",",l.b," = HEX: ",b]})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{color:"green"},children:"Output Color"}),x.jsx("div",{style:{backgroundColor:b,width:"100px",height:"100px"}})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{color:"green"},children:"Gradient"}),x.jsx("div",{style:{background:`linear-gradient(to right, ${a}, ${b}, ${t})`,width:"300px",height:"50px"}})]})]})}function dk(){const[a,e]=H.useState(0),[t,n]=H.useState([]),[r,i]=H.useState(!1),[s,o]=H.useState(0),l=()=>{const h=Math.random()<.5?"blue":"red";n([h,...t])};H.useEffect(()=>{if(r)return;if(t.length>6){i(!0);return}const d=setTimeout(()=>{e(a+1),l()},1e3);return()=>clearTimeout(d)},[a,r,t]);const c=d=>{r||(t.length&&t[0]===d?(n(t.slice(1)),o(s+1)):i(!0))};return x.jsxs("div",{children:[x.jsx("h3",{children:"Color Clicking Puzzle Game"}),r?x.jsx("h4",{style:{color:"red"},children:"Game Over!"}):x.jsxs(x.Fragment,{children:[x.jsxs("h4",{style:{color:"green"},children:["Score: ",s]}),x.jsx("div",{style:{display:"flex",gap:"2px"},children:t.map((d,h)=>x.jsx("div",{style:{width:"100px",height:"100px",backgroundColor:d}},h))}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{style:{backgroundColor:"red",marginRight:"10px"},onClick:()=>c("red"),children:"RED"}),x.jsx("button",{style:{backgroundColor:"blue"},onClick:()=>c("blue"),children:"BLUE"})]})]})]})}function fk(){const[a,e]=H.useState([{question:"",answers:[],correct:-1}]),[t,n]=H.useState(0),[r,i]=H.useState(0),[s,o]=H.useState(!1);H.useEffect(()=>{cn.get("https://apis.dnjs.lk/objects/quiz.php").then(d=>{e(d.data)}).catch(d=>{console.log(d)})},[]);const l=d=>{d===a[t].correct&&i(r+1),t<a.length-1?n(t+1):o(!0)};if(s)return x.jsxs("div",{children:[x.jsx("h3",{children:"Quiz Finished!"}),x.jsxs("p",{style:{color:"blue"},children:["Your final score is ",r," out of ",a.length,"."]})]});const c=a[t];return x.jsxs("div",{children:[x.jsx("h2",{children:"Quiz Game"}),x.jsxs("h4",{children:["Q",t+1,": ",c.question]}),c.answers.map((d,h)=>x.jsx("div",{children:x.jsx("button",{onClick:()=>l(h),children:d})},h)),x.jsxs("p",{style:{color:"blue"},children:["Score: ",r]})]})}function hk(){const[a,e]=H.useState([{question:"",answers:[],correct:-1}]),[t,n]=H.useState(0),[r,i]=H.useState(0),[s,o]=H.useState(!1),[l,c]=H.useState([]),[d,h]=H.useState(0);H.useEffect(()=>{cn.get("https://apis.dnjs.lk/objects/quiz.php").then(b=>{e(b.data)}).catch(b=>{console.log(b)})},[]);const m=b=>{c([...l,b]),b===a[t].correct&&i(r+1),t<a.length-1?n(t+1):o(!0)},v=()=>{d<a.length-1&&h(d+1)},A=()=>{d>0&&h(d-1)};if(s)return x.jsxs("div",{children:[x.jsx("h3",{children:"Quiz Finished!"}),x.jsxs("p",{style:{color:"blue"},children:["Your final score is ",r," out of ",a.length,"."]}),x.jsx("h3",{children:"Review Question"}),x.jsxs("h4",{children:["Q",d+1,": ",a[d].question]}),a[d].answers.map((b,_)=>x.jsx("div",{children:x.jsx("button",{style:{color:_===a[d].correct?"green":_===l[d]?"red":"black"},children:b})},_)),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:A,style:{marginRight:"10px",backgroundColor:"blue",color:"white"},children:"Last"}),x.jsx("button",{onClick:v,style:{backgroundColor:"blue",color:"white"},children:"Next"})]})]});const E=a[t];return x.jsxs("div",{children:[x.jsx("h2",{children:"Quiz Game"}),x.jsxs("h4",{children:["Q",t+1,": ",E.question]}),E.answers.map((b,_)=>x.jsx("div",{children:x.jsx("button",{onClick:()=>m(_),children:b})},_)),x.jsxs("p",{style:{color:"blue"},children:["Score: ",r]})]})}function pk(){const[a,e]=H.useState([{question:"",answers:[],correct:-1}]),[t,n]=H.useState(0),[r,i]=H.useState(0),[s,o]=H.useState(!1),[l,c]=H.useState([]),[d,h]=H.useState(0),[m,v]=H.useState(10);H.useEffect(()=>{cn.get("https://apis.dnjs.lk/objects/quiz.php").then(R=>{e(R.data)}).catch(R=>{console.log(R)})},[]),H.useEffect(()=>{if(s)return;if(m===0){A(-1);return}const R=setTimeout(()=>{v(m-1)},1e3);return()=>clearTimeout(R)},[m,s]);const A=R=>{c([...l,R]),R===a[t].correct&&i(r+1),t<a.length-1?(n(t+1),v(10)):o(!0)},E=()=>{d<a.length-1&&h(d+1)},b=()=>{d>0&&h(d-1)};if(s)return x.jsxs("div",{children:[x.jsx("h3",{children:"Quiz Finished!"}),x.jsxs("p",{style:{color:"blue"},children:["Your final score is ",r," out of ",a.length,"."]}),x.jsx("h3",{children:"Review Question"}),x.jsxs("h4",{children:["Q",d+1,": ",a[d].question]}),a[d].answers.map((R,T)=>x.jsx("div",{children:x.jsx("button",{style:{color:T===a[d].correct?"green":T===l[d]?"red":"black"},children:R})},T)),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("button",{onClick:b,style:{marginRight:"10px",backgroundColor:"blue",color:"white"},children:"Last"}),x.jsx("button",{onClick:E,style:{backgroundColor:"blue",color:"white"},children:"Next"})]})]});const _=a[t];return x.jsxs("div",{children:[x.jsx("h2",{children:"Quiz Game"}),x.jsxs("p",{style:{color:"red"},children:["Time Left: ",m,"s"]}),x.jsxs("h4",{children:["Q",t+1,": ",_.question]}),_.answers.map((R,T)=>x.jsx("div",{children:x.jsx("button",{onClick:()=>A(T),children:R})},T)),x.jsxs("p",{style:{color:"blue"},children:["Score: ",r]})]})}function mk(){const[a,e]=H.useState([["","",""],["","",""],["","",""]]),[t,n]=H.useState("X"),r=(i,s)=>{if(a[i][s]===""){const o=[...a];o[i]=[...o[i]],o[i][s]=t,e(o),n(t==="X"?"O":"X")}};return x.jsxs("div",{children:[x.jsx("h3",{children:"Tic Tac Toe"}),x.jsx("table",{children:x.jsx("tbody",{children:a.map((i,s)=>x.jsx("tr",{children:i.map((o,l)=>x.jsx("td",{children:x.jsx("button",{onClick:()=>r(s,l),disabled:o!=="",style:{width:"50px",height:"50px",fontSize:"24px",color:"blue"},children:o})},l))},s))})})]})}function gk(){const[a,e]=H.useState(0),[t,n]=H.useState([]),[r,i]=H.useState(Array(10).fill().map(()=>Array(10).fill(!1))),[s,o]=H.useState(!1);H.useEffect(()=>{const c=Array(10).fill().map(()=>Array(10).fill().map(()=>Math.floor(Math.random()*4)));n(c)},[]);const l=(c,d)=>{if(s||r[c][d])return;const h=[...r];h[c][d]=!0,i(h);const m=t[c][d];e(m===0?a-5:a+m),h.every(A=>A.every(E=>E))&&o(!0)};return x.jsxs("div",{children:[x.jsx("h2",{children:"Minesweeper"}),x.jsxs("p",{style:{color:"blue",fontSize:"18px"},children:["Score: ",a]}),s&&x.jsx("p",{style:{color:"red",fontSize:"20px"},children:"Game Over!"}),x.jsx("table",{children:x.jsx("tbody",{children:t.map((c,d)=>x.jsx("tr",{children:c.map((h,m)=>x.jsx("td",{children:x.jsx("button",{onClick:()=>l(d,m),style:{width:"40px",height:"40px",color:"green",fontSize:"20px"},children:r[d][m]?h===0?"💣":h:""})},m))},d))})})]})}function vk(){return x.jsxs("div",{className:"parent",children:[x.jsxs("div",{className:"child-1",children:[x.jsx("div",{className:"child-1-1"}),x.jsx("div",{className:"child-1-2"})]}),x.jsxs("div",{className:"child-2",children:[x.jsxs("div",{className:"child-2-1",children:[x.jsx("div",{className:"child-2-1-1"}),x.jsx("div",{className:"child-2-1-2"})]}),x.jsxs("div",{className:"child-2-2",children:[x.jsxs("div",{className:"child-2-2-1",children:[x.jsxs("div",{className:"child-2-2-1-1",children:[x.jsx("div",{className:"child-2-2-1-1-1"}),x.jsx("div",{className:"child-2-2-1-1-2"})]}),x.jsxs("div",{className:"child-2-2-1-2",children:[x.jsx("div",{className:"child-2-2-1-2-1"}),x.jsx("div",{className:"child-2-2-1-2-2"})]})]}),x.jsx("div",{className:"child-2-2-2"})]})]})]})}function yk(){return x.jsxs("div",{className:"flex-container",children:[x.jsxs("div",{className:"box-1",children:[x.jsx("div",{className:"box-1-1"}),x.jsx("div",{className:"box-1-2"})]}),x.jsxs("div",{className:"box-2",children:[x.jsx("div",{className:"box-2-1"}),x.jsxs("div",{className:"box-2-2",children:[x.jsx("div",{className:"box-2-2-1"}),x.jsxs("div",{className:"box-2-2-2",children:[x.jsx("div",{className:"box-2-2-2-1"}),x.jsx("div",{className:"box-2-2-2-2"})]})]})]})]})}const xk=""+new URL("profile-CxVoET32.jpg",import.meta.url).href;function Ak(){return x.jsxs("div",{className:"container-box",children:[x.jsxs("div",{className:"box-A",children:[x.jsx("div",{className:"box-A-1",children:x.jsx("img",{src:xk,alt:"Profile",className:"profile-img"})}),x.jsxs("div",{className:"box-A-2",children:[x.jsx("div",{className:"name",children:"Lucia Alvarez"}),x.jsx("div",{className:"designation",children:"Photographer"})]}),x.jsxs("div",{className:"box-A-3",children:[x.jsxs("div",{className:"box-A-3-1",children:[x.jsx("div",{className:"information",children:"Age"}),x.jsx("div",{className:"information",children:"Education"}),x.jsx("div",{className:"information",children:"Location"})]}),x.jsxs("div",{className:"box-A-3-2",children:[x.jsx("div",{className:"item-placeholder-age"}),x.jsx("div",{className:"item-placeholder-education"}),x.jsx("div",{className:"item-placeholder-location"})]})]})]}),x.jsxs("div",{className:"box-B",children:[x.jsxs("div",{className:"box-B-1",children:[x.jsxs("div",{className:"item",children:[x.jsx("div",{className:"item-title",children:"Bio"}),x.jsx("div",{className:"item-placeholder-1"}),x.jsx("div",{className:"item-placeholder-2"}),x.jsx("div",{className:"item-placeholder-1"})]}),x.jsxs("div",{className:"item",children:[x.jsx("div",{className:"item-title",children:"Goals"}),x.jsx("div",{className:"item-placeholder-1"}),x.jsx("div",{className:"item-placeholder-2"}),x.jsx("div",{className:"item-placeholder-1"})]})]}),x.jsxs("div",{className:"box-B-2",children:[x.jsxs("div",{className:"item",children:[x.jsx("div",{className:"item-title",children:"Motivations"}),x.jsx("div",{className:"item-placeholder-1"}),x.jsx("div",{className:"item-placeholder-2"}),x.jsx("div",{className:"item-placeholder-1"})]}),x.jsxs("div",{className:"item",children:[x.jsx("div",{className:"item-title",children:"Concerns"}),x.jsx("div",{className:"item-placeholder-1"}),x.jsx("div",{className:"item-placeholder-2"}),x.jsx("div",{className:"item-placeholder-1"})]})]})]})]})}function _k(){return x.jsx("div",{className:"page-box",children:x.jsxs("div",{className:"box",children:[x.jsxs("div",{className:"box-a",children:[x.jsxs("div",{className:"box-a-1",children:[x.jsx("div",{className:"box-a-1-1"}),x.jsx("div",{className:"box-a-1-1"}),x.jsx("div",{className:"box-a-1-1"})]}),x.jsx("div",{className:"box-a-2"})]}),x.jsxs("div",{className:"box-b",children:[x.jsx("div",{className:"message",children:"Message"}),x.jsx("div",{className:"action",children:"Action"})]}),x.jsxs("div",{className:"box-c",children:[x.jsx("div",{className:"box-c-1"}),x.jsxs("div",{className:"box-c-2",children:[x.jsxs("div",{className:"box-c-2-1",children:[x.jsx("div",{className:"box-c-2-1-message",children:"Message"}),x.jsx("div",{className:"box-c-2-1-action",children:"Action"})]}),x.jsx("div",{className:"box-c-2-2"})]})]})]})})}function bk(){return x.jsx("div",{className:"screen",children:x.jsxs("div",{className:"main-page",children:[x.jsxs("div",{className:"signUp-box",children:[x.jsxs("div",{className:"signUp-box-1",children:[x.jsx("div",{className:"signUp-box-1-1",children:"Sign up"}),x.jsxs("div",{className:"signUp-box-1-2",children:[x.jsx("div",{className:"signUp-box-1-2-1",children:"Email or phone"}),x.jsx("div",{className:"signUp-box-1-2-2",children:"Password"})]})]}),x.jsxs("div",{className:"signUp-box-2",children:[x.jsxs("div",{className:"signUp-box-2-1",children:[x.jsx("div",{className:"signUp-box-2-1-1",children:"By clicking Sign up, you agree"}),x.jsxs("div",{className:"signUp-box-2-1-2",children:["to ",x.jsx("u",{children:"Terms of Use"})]})]}),x.jsx("div",{className:"signUp-box-2-2",children:"Sign up"})]})]}),x.jsxs("div",{className:"success-box",children:[x.jsxs("div",{className:"success-box-1",children:[x.jsx("div",{className:"success-box-1-1",children:"✦"}),x.jsx("div",{className:"success-box-1-2",children:"Success"}),x.jsxs("div",{className:"success-box-1-3",children:[x.jsx("div",{className:"success-box-1-3-1",children:"Welcome aboard, Ali!"}),x.jsx("div",{className:"success-box-1-3-2",children:"We're glad to see you."})]})]}),x.jsx("div",{className:"success-box-2",children:"Let's start"})]})]})})}function Sk(){const[a,e]=H.useState("#ffffff"),[t,n]=H.useState("rgb(255,255,255)"),r=i=>parseInt(i).toString(16).padStart(2,"0");return H.useEffect(()=>{const i=document.getElementById("canvas"),s=i.getContext("2d"),o=new Image;o.src="/images/image.png",o.addEventListener("load",()=>{s.drawImage(o,0,0)});const l=c=>{const d=c.clientX,h=c.clientY,m=s.getImageData(d,h,1,1).data,[v,A,E]=m,b=`#${r(v)}${r(A)}${r(E)}`,_=`rgb(${v}, ${A}, ${E})`;e(b),n(_)};i.addEventListener("click",l)},[]),x.jsxs("div",{children:[x.jsx("canvas",{id:"canvas",width:"550px",height:"400px"}),x.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[x.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:a}}),x.jsxs("div",{style:{padding:"10px",color:"black"},children:[x.jsx("strong",{children:"Hex:"})," ",a," | ",x.jsx("strong",{children:"RGB:"})," ",t]})]})]})}function Ek(){const[a,e]=H.useState("#ffffff"),[t,n]=H.useState("rgb(255,255,255)"),r=s=>parseInt(s).toString(16).padStart(2,"0"),i=()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.addEventListener("change",o=>{const l=o.target.files[0];if(l){const c=new Image;c.src=URL.createObjectURL(l),c.onload=()=>{const d=document.getElementById("canvas"),h=d.getContext("2d");d.width=c.width,d.height=c.height,h.drawImage(c,0,0)}}}),s.click()};return H.useEffect(()=>{const s=document.getElementById("canvas"),o=s.getContext("2d"),l=c=>{const d=c.clientX,h=c.clientY,m=o.getImageData(d,h,1,1).data,[v,A,E]=m,b=`#${r(v)}${r(A)}${r(E)}`,_=`rgb(${v}, ${A}, ${E})`;e(b),n(_)};s.addEventListener("click",l)},[]),x.jsxs("div",{children:[x.jsx("canvas",{id:"canvas",style:{border:"3px solid black",maxWidth:"100%"}}),x.jsx("br",{}),x.jsx("button",{style:{padding:"4px",backgroundColor:"green",color:"white"},onClick:i,children:"Upload Image"}),x.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[x.jsx("div",{style:{marginTop:"5px",width:"50px",height:"50px",backgroundColor:a}}),x.jsxs("div",{style:{padding:"10px",color:"black"},children:[x.jsx("strong",{children:"Hex:"})," ",a," | ",x.jsx("strong",{children:"RGB:"})," ",t]})]})]})}function wk(){const[a,e]=H.useState(0),[t,n]=H.useState(100),[r,i]=H.useState(100),[s,o]=H.useState(0),[l,c]=H.useState(0),[d,h]=H.useState(100),[m,v]=H.useState(100),[A,E]=H.useState(0),b=()=>{const R=document.createElement("input");R.type="file",R.accept="image/*",R.addEventListener("change",T=>{const M=T.target.files[0];if(M){const I=new Image;I.src=URL.createObjectURL(M),I.onload=()=>{const P=document.getElementById("canvas"),B=P.getContext("2d");P.width=I.width,P.height=I.height,B.drawImage(I,0,0)}}}),R.click()},_=()=>{e(0),n(100),i(100),o(0),c(0),h(100),v(100),E(0)};return x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",marginBottom:"10px"},children:[x.jsx("button",{style:{padding:"4px",backgroundColor:"green",color:"white",width:"150px"},onClick:b,children:"Upload Button"}),x.jsxs("div",{children:[x.jsx("button",{style:{padding:"10px",marginLeft:"285px",marginRight:"30px",backgroundColor:"blue",color:"white",width:"150px"},onClick:_,children:"Reset"}),x.jsx("button",{style:{padding:"10px",marginRight:"10px",backgroundColor:"purple",color:"white",width:"150px"},children:"Download"})]})]}),x.jsxs("div",{style:{display:"flex"},children:[x.jsx("canvas",{id:"canvas",style:{border:"3px solid black",width:"400px",height:"400px",filter:`blur(${a}px) brightness(${t}%) contrast(${r}%) grayscale(${s}%) invert(${l}%) opacity(${d}%) saturate(${m}%) sepia(${A}%)`}}),x.jsxs("div",{style:{padding:"10px",border:"3px solid black",width:"305px",height:"380px",marginLeft:"30px"},children:[x.jsxs("div",{children:[x.jsx("label",{children:"Blur"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"20",value:a,onChange:R=>e(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Brightness"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:t,onChange:R=>n(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Contrast"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:r,onChange:R=>i(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Grayscale"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:R=>o(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Invert"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:R=>c(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Opacity"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:R=>h(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Saturate"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:m,onChange:R=>v(R.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Sepia"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:A,onChange:R=>E(R.target.value),style:{width:"250px"}})]})]})]})]})}function Rk(a,e){if(a.match(/^[a-z]+:\/\//i))return a;if(a.match(/^\/\//))return window.location.protocol+a;if(a.match(/^[a-z]+:/i))return a;const t=document.implementation.createHTMLDocument(),n=t.createElement("base"),r=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(r),e&&(n.href=e),r.href=a,r.href}const Mk=(()=>{let a=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(a+=1,`u${e()}${a}`)})();function Yd(a){const e=[];for(let t=0,n=a.length;t<n;t++)e.push(a[t]);return e}let cm=null;function mD(a={}){return cm||(a.includeStyleProperties?(cm=a.includeStyleProperties,cm):(cm=Yd(window.getComputedStyle(document.documentElement)),cm))}function Dx(a,e){const n=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function Tk(a){const e=Dx(a,"border-left-width"),t=Dx(a,"border-right-width");return a.clientWidth+e+t}function Nk(a){const e=Dx(a,"border-top-width"),t=Dx(a,"border-bottom-width");return a.clientHeight+e+t}function gD(a,e={}){const t=e.width||Tk(a),n=e.height||Nk(a);return{width:t,height:n}}function Ck(){let a,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(a=parseInt(t,10),Number.isNaN(a)&&(a=1)),a||window.devicePixelRatio||1}const qs=16384;function Ik(a){(a.width>qs||a.height>qs)&&(a.width>qs&&a.height>qs?a.width>a.height?(a.height*=qs/a.width,a.width=qs):(a.width*=qs/a.height,a.height=qs):a.width>qs?(a.height*=qs/a.width,a.width=qs):(a.width*=qs/a.height,a.height=qs))}function Lx(a){return new Promise((e,t)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=t,n.crossOrigin="anonymous",n.decoding="async",n.src=a})}async function Dk(a){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(a)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Lk(a,e,t){const n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${t}`),r.setAttribute("viewBox",`0 0 ${e} ${t}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(a),Dk(r)}const Is=(a,e)=>{if(a instanceof e)return!0;const t=Object.getPrototypeOf(a);return t===null?!1:t.constructor.name===e.name||Is(t,e)};function Pk(a){const e=a.getPropertyValue("content");return`${a.cssText} content: '${e.replace(/'|"/g,"")}';`}function Ok(a,e){return mD(e).map(t=>{const n=a.getPropertyValue(t),r=a.getPropertyPriority(t);return`${t}: ${n}${r?" !important":""};`}).join(" ")}function Uk(a,e,t,n){const r=`.${a}:${e}`,i=t.cssText?Pk(t):Ok(t,n);return document.createTextNode(`${r}{${i}}`)}function OT(a,e,t,n){const r=window.getComputedStyle(a,t),i=r.getPropertyValue("content");if(i===""||i==="none")return;const s=Mk();try{e.className=`${e.className} ${s}`}catch{return}const o=document.createElement("style");o.appendChild(Uk(s,t,r,n)),e.appendChild(o)}function Bk(a,e,t){OT(a,e,":before",t),OT(a,e,":after",t)}const UT="application/font-woff",BT="image/jpeg",Fk={woff:UT,woff2:UT,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:BT,jpeg:BT,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function kk(a){const e=/\.([^./]*?)$/g.exec(a);return e?e[1]:""}function Aw(a){const e=kk(a).toLowerCase();return Fk[e]||""}function Hk(a){return a.split(/,/)[1]}function p3(a){return a.search(/^(data:)/)!==-1}function jk(a,e){return`data:${e};base64,${a}`}async function vD(a,e,t){const n=await fetch(a,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const r=await n.blob();return new Promise((i,s)=>{const o=new FileReader;o.onerror=s,o.onloadend=()=>{try{i(t({res:n,result:o.result}))}catch(l){s(l)}},o.readAsDataURL(r)})}const Xb={};function zk(a,e,t){let n=a.replace(/\?.*/,"");return t&&(n=a),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function _w(a,e,t){const n=zk(a,e,t.includeQueryParams);if(Xb[n]!=null)return Xb[n];t.cacheBust&&(a+=(/\?/.test(a)?"&":"?")+new Date().getTime());let r;try{const i=await vD(a,t.fetchRequestInit,({res:s,result:o})=>(e||(e=s.headers.get("Content-Type")||""),Hk(o)));r=jk(i,e)}catch(i){r=t.imagePlaceholder||"";let s=`Failed to fetch resource: ${a}`;i&&(s=typeof i=="string"?i:i.message),s&&console.warn(s)}return Xb[n]=r,r}async function Gk(a){const e=a.toDataURL();return e==="data:,"?a.cloneNode(!1):Lx(e)}async function Vk(a,e){if(a.currentSrc){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=a.clientWidth,i.height=a.clientHeight,s==null||s.drawImage(a,0,0,i.width,i.height);const o=i.toDataURL();return Lx(o)}const t=a.poster,n=Aw(t),r=await _w(t,n,e);return Lx(r)}async function Wk(a,e){var t;try{if(!((t=a==null?void 0:a.contentDocument)===null||t===void 0)&&t.body)return await n_(a.contentDocument.body,e,!0)}catch{}return a.cloneNode(!1)}async function Kk(a,e){return Is(a,HTMLCanvasElement)?Gk(a):Is(a,HTMLVideoElement)?Vk(a,e):Is(a,HTMLIFrameElement)?Wk(a,e):a.cloneNode(yD(a))}const Yk=a=>a.tagName!=null&&a.tagName.toUpperCase()==="SLOT",yD=a=>a.tagName!=null&&a.tagName.toUpperCase()==="SVG";async function qk(a,e,t){var n,r;if(yD(e))return e;let i=[];return Yk(a)&&a.assignedNodes?i=Yd(a.assignedNodes()):Is(a,HTMLIFrameElement)&&(!((n=a.contentDocument)===null||n===void 0)&&n.body)?i=Yd(a.contentDocument.body.childNodes):i=Yd(((r=a.shadowRoot)!==null&&r!==void 0?r:a).childNodes),i.length===0||Is(a,HTMLVideoElement)||await i.reduce((s,o)=>s.then(()=>n_(o,t)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function Xk(a,e,t){const n=e.style;if(!n)return;const r=window.getComputedStyle(a);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):mD(t).forEach(i=>{let s=r.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Is(a,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))})}function Jk(a,e){Is(a,HTMLTextAreaElement)&&(e.innerHTML=a.value),Is(a,HTMLInputElement)&&e.setAttribute("value",a.value)}function Zk(a,e){if(Is(a,HTMLSelectElement)){const t=e,n=Array.from(t.children).find(r=>a.value===r.getAttribute("value"));n&&n.setAttribute("selected","")}}function Qk(a,e,t){return Is(e,Element)&&(Xk(a,e,t),Bk(a,e,t),Jk(a,e),Zk(a,e)),e}async function $k(a,e){const t=a.querySelectorAll?a.querySelectorAll("use"):[];if(t.length===0)return a;const n={};for(let i=0;i<t.length;i++){const o=t[i].getAttribute("xlink:href");if(o){const l=a.querySelector(o),c=document.querySelector(o);!l&&c&&!n[o]&&(n[o]=await n_(c,e,!0))}}const r=Object.values(n);if(r.length){const i="http://www.w3.org/1999/xhtml",s=document.createElementNS(i,"svg");s.setAttribute("xmlns",i),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const o=document.createElementNS(i,"defs");s.appendChild(o);for(let l=0;l<r.length;l++)o.appendChild(r[l]);a.appendChild(s)}return a}async function n_(a,e,t){return!t&&e.filter&&!e.filter(a)?null:Promise.resolve(a).then(n=>Kk(n,e)).then(n=>qk(a,n,e)).then(n=>Qk(a,n,e)).then(n=>$k(n,e))}const xD=/url\((['"]?)([^'"]+?)\1\)/g,e7=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,t7=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function n7(a){const e=a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function a7(a){const e=[];return a.replace(xD,(t,n,r)=>(e.push(r),t)),e.filter(t=>!p3(t))}async function r7(a,e,t,n,r){try{const i=t?Rk(e,t):e,s=Aw(e);let o;return r||(o=await _w(i,s,n)),a.replace(n7(e),`$1${o}$3`)}catch{}return a}function i7(a,{preferredFontFormat:e}){return e?a.replace(t7,t=>{for(;;){const[n,,r]=e7.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}}):a}function AD(a){return a.search(xD)!==-1}async function _D(a,e,t){if(!AD(a))return a;const n=i7(a,t);return a7(n).reduce((i,s)=>i.then(o=>r7(o,s,e,t)),Promise.resolve(n))}async function um(a,e,t){var n;const r=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(a);if(r){const i=await _D(r,null,t);return e.style.setProperty(a,i,e.style.getPropertyPriority(a)),!0}return!1}async function s7(a,e){await um("background",a,e)||await um("background-image",a,e),await um("mask",a,e)||await um("-webkit-mask",a,e)||await um("mask-image",a,e)||await um("-webkit-mask-image",a,e)}async function o7(a,e){const t=Is(a,HTMLImageElement);if(!(t&&!p3(a.src))&&!(Is(a,SVGImageElement)&&!p3(a.href.baseVal)))return;const n=t?a.src:a.href.baseVal,r=await _w(n,Aw(n),e);await new Promise((i,s)=>{a.onload=i,a.onerror=e.onImageErrorHandler?(...l)=>{try{i(e.onImageErrorHandler(...l))}catch(c){s(c)}}:s;const o=a;o.decode&&(o.decode=i),o.loading==="lazy"&&(o.loading="eager"),t?(a.srcset="",a.src=r):a.href.baseVal=r})}async function l7(a,e){const n=Yd(a.childNodes).map(r=>bD(r,e));await Promise.all(n).then(()=>a)}async function bD(a,e){Is(a,Element)&&(await s7(a,e),await o7(a,e),await l7(a,e))}function c7(a,e){const{style:t}=a;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(r=>{t[r]=n[r]}),a}const FT={};async function kT(a){let e=FT[a];if(e!=null)return e;const n=await(await fetch(a)).text();return e={url:a,cssText:n},FT[a]=e,e}async function HT(a,e){let t=a.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,i=(t.match(/url\([^)]+\)/g)||[]).map(async s=>{let o=s.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,a.url).href),vD(o,e.fetchRequestInit,({result:l})=>(t=t.replace(s,`url(${l})`),[s,l]))});return Promise.all(i).then(()=>t)}function jT(a){if(a==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let n=a.replace(t,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=r.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(s,"gi");for(;;){let l=i.exec(n);if(l===null){if(l=o.exec(n),l===null)break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;e.push(l[0])}return e}async function u7(a,e){const t=[],n=[];return a.forEach(r=>{if("cssRules"in r)try{Yd(r.cssRules||[]).forEach((i,s)=>{if(i.type===CSSRule.IMPORT_RULE){let o=s+1;const l=i.href,c=kT(l).then(d=>HT(d,e)).then(d=>jT(d).forEach(h=>{try{r.insertRule(h,h.startsWith("@import")?o+=1:r.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(c)}})}catch(i){const s=a.find(o=>o.href==null)||document.styleSheets[0];r.href!=null&&n.push(kT(r.href).then(o=>HT(o,e)).then(o=>jT(o).forEach(l=>{s.insertRule(l,s.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",i)}}),Promise.all(n).then(()=>(a.forEach(r=>{if("cssRules"in r)try{Yd(r.cssRules||[]).forEach(i=>{t.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${r.href}`,i)}}),t))}function d7(a){return a.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>AD(e.style.getPropertyValue("src")))}async function f7(a,e){if(a.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Yd(a.ownerDocument.styleSheets),n=await u7(t,e);return d7(n)}function SD(a){return a.trim().replace(/["']/g,"")}function h7(a){const e=new Set;function t(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(i=>{e.add(SD(i))}),Array.from(n.children).forEach(i=>{i instanceof HTMLElement&&t(i)})}return t(a),e}async function p7(a,e){const t=await f7(a,e),n=h7(a);return(await Promise.all(t.filter(i=>n.has(SD(i.style.fontFamily))).map(i=>{const s=i.parentStyleSheet?i.parentStyleSheet.href:null;return _D(i.cssText,s,e)}))).join(`
`)}async function m7(a,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await p7(a,e);if(t){const n=document.createElement("style"),r=document.createTextNode(t);n.appendChild(r),a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n)}}async function g7(a,e={}){const{width:t,height:n}=gD(a,e),r=await n_(a,e,!0);return await m7(r,e),await bD(r,e),c7(r,e),await Lk(r,t,n)}async function ED(a,e={}){const{width:t,height:n}=gD(a,e),r=await g7(a,e),i=await Lx(r),s=document.createElement("canvas"),o=s.getContext("2d"),l=e.pixelRatio||Ck(),c=e.canvasWidth||t,d=e.canvasHeight||n;return s.width=c*l,s.height=d*l,e.skipAutoScale||Ik(s),s.style.width=`${c}`,s.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,s.width,s.height)),o.drawImage(i,0,0,s.width,s.height),s}async function v7(a,e={}){return(await ED(a,e)).toDataURL()}async function y7(a,e={}){return(await ED(a,e)).toDataURL("image/jpeg",e.quality||1)}function x7(){const[a,e]=H.useState(0),[t,n]=H.useState(100),[r,i]=H.useState(100),[s,o]=H.useState(0),[l,c]=H.useState(0),[d,h]=H.useState(100),[m,v]=H.useState(100),[A,E]=H.useState(0),[b,_]=H.useState("png"),[R,T]=H.useState(1),M=()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.addEventListener("change",F=>{const L=F.target.files[0];if(L){const U=new Image;U.src=URL.createObjectURL(L),U.onload=()=>{const j=document.getElementById("canvas"),W=j.getContext("2d");j.width=U.width,j.height=U.height,W.drawImage(U,0,0)}}}),B.click()},I=()=>{e(0),n(100),i(100),o(0),c(0),h(100),v(100),E(0)},P=()=>{const B=document.getElementById("canvas"),F={pixelRatio:R};b==="png"?v7(B,F).then(L=>{const U=document.createElement("a");U.download=`edited-image-x${R}.png`,U.href=L,U.click()}):y7(B,F).then(L=>{const U=document.createElement("a");U.download=`edited-image-x${R}.jpeg`,U.href=L,U.click()})};return x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",marginBottom:"10px"},children:[x.jsx("button",{style:{padding:"4px",backgroundColor:"green",color:"white",width:"150px"},onClick:M,children:"Upload Button"}),x.jsxs("div",{children:[x.jsx("button",{style:{padding:"10px",marginLeft:"285px",marginRight:"10px",backgroundColor:"blue",color:"white"},onClick:I,children:"Reset"}),x.jsxs("div",{style:{display:"inline-block"},children:[x.jsx("label",{children:"Image Format: "}),x.jsxs("select",{style:{padding:"10px",marginRight:"10px",color:"black"},onChange:B=>_(B.target.value),children:[x.jsx("option",{value:"png",children:"PNG"}),x.jsx("option",{value:"jpeg",children:"JPEG"})]})]}),x.jsxs("div",{style:{display:"inline-block"},children:[x.jsx("label",{children:"Image Scale: "}),x.jsxs("select",{style:{padding:"10px",marginRight:"10px",color:"black"},onChange:B=>T(parseInt(B.target.value)),children:[x.jsx("option",{value:"1",children:"x1"}),x.jsx("option",{value:"2",children:"x2"}),x.jsx("option",{value:"3",children:"x3"}),x.jsx("option",{value:"4",children:"x4"})]})]}),x.jsx("button",{style:{padding:"10px",backgroundColor:"purple",color:"white"},onClick:P,children:"Download"})]})]}),x.jsxs("div",{style:{display:"flex"},children:[x.jsx("canvas",{id:"canvas",style:{border:"3px solid black",width:"400px",height:"400px",filter:`blur(${a}px) brightness(${t}%) contrast(${r}%) grayscale(${s}%) invert(${l}%) opacity(${d}%) saturate(${m}%) sepia(${A}%)`}}),x.jsxs("div",{style:{padding:"10px",border:"3px solid black",width:"340px",height:"380px",marginLeft:"95px"},children:[x.jsxs("div",{children:[x.jsx("label",{children:"Blur"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"20",value:a,onChange:B=>e(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Brightness"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:t,onChange:B=>n(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Contrast"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:r,onChange:B=>i(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Grayscale"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:B=>o(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Invert"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:B=>c(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Opacity"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:B=>h(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Saturate"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:m,onChange:B=>v(B.target.value),style:{width:"250px"}})]}),x.jsxs("div",{children:[x.jsx("label",{children:"Sepia"}),x.jsx("br",{}),x.jsx("input",{type:"range",min:"0",max:"100",value:A,onChange:B=>E(B.target.value),style:{width:"250px"}})]})]})]})]})}function A7(){const[a,e]=H.useState({x:0,y:0}),t=n=>{const r=n%3,i=Math.floor(n/3);e({x:r,y:i})};return x.jsxs("div",{children:[x.jsx("div",{className:"frame",style:{width:"220px",height:"220px",backgroundImage:"url(images/boy-walking.png)",backgroundRepeat:"no-repeat",backgroundPositionX:`${a.x*-220}px`,backgroundPositionY:`${a.y*-220}px`}}),x.jsx("button",{onClick:()=>t(0),style:{marginRight:"5px"},children:"1"}),x.jsx("button",{onClick:()=>t(1),style:{marginRight:"5px"},children:"2"}),x.jsx("button",{onClick:()=>t(2),style:{marginRight:"5px"},children:"3"}),x.jsx("button",{onClick:()=>t(3),style:{marginRight:"5px"},children:"4"}),x.jsx("button",{onClick:()=>t(4),style:{marginRight:"5px"},children:"5"}),x.jsx("button",{onClick:()=>t(5),style:{marginRight:"5px"},children:"6"}),x.jsx("button",{onClick:()=>t(6),style:{marginRight:"5px"},children:"7"}),x.jsx("button",{onClick:()=>t(7),style:{marginRight:"5px"},children:"8"}),x.jsx("button",{onClick:()=>t(8),style:{marginRight:"5px"},children:"9"}),x.jsx("button",{onClick:()=>t(9),style:{marginRight:"5px"},children:"10"}),x.jsx("button",{onClick:()=>t(10),style:{marginRight:"5px"},children:"11"}),x.jsx("button",{onClick:()=>t(11),style:{marginRight:"5px"},children:"12"})]})}function _7(){const[a,e]=H.useState(0),t=a%3,n=Math.floor(a/3);return H.useEffect(()=>{const r=setTimeout(()=>{e((a+1)%12)},100);return()=>clearTimeout(r)},[a]),x.jsx("div",{children:x.jsx("div",{className:"frame",style:{width:"220px",height:"220px",backgroundImage:"url(images/boy-walking.png)",backgroundRepeat:"no-repeat",backgroundPositionX:`${t*-220}px`,backgroundPositionY:`${n*-220}px`}})})}function b7(){const[a,e]=H.useState(0),[t,n]=H.useState("forward"),[r,i]=H.useState(100),s=a%3,o=Math.floor(a/3);return H.useEffect(()=>{const l=setTimeout(()=>{e(c=>t==="forward"?c===11?0:c+1:c===0?11:c-1)},r);return()=>clearTimeout(l)},[a,t,r]),x.jsxs("div",{children:[x.jsx("div",{className:"frame",style:{width:"220px",height:"220px",backgroundImage:"url(images/boy-walking.png)",backgroundRepeat:"no-repeat",backgroundPositionX:`${s*-220}px`,backgroundPositionY:`${o*-220}px`}}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("label",{children:"Direction: "}),x.jsxs("select",{value:t,onChange:l=>n(l.target.value),children:[x.jsx("option",{value:"forward",children:"Forward"}),x.jsx("option",{value:"backward",children:"Backward"})]})]}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{children:"Speed: "}),x.jsx("input",{type:"range",min:"50",max:"500",value:r,onChange:l=>i(l.target.value)})]})]})]})}function S7(){const[a,e]=H.useState(8),[t,n]=H.useState(!1),[r,i]=H.useState(null),s=()=>{n(!0);const l=setInterval(()=>{e(c=>c===7?0:c+1)},65);i(l)},o=()=>{n(!1),e(8),clearInterval(r)};return x.jsxs("div",{children:[x.jsx("div",{className:"frame",style:{width:"130px",height:"185px",backgroundImage:"url(images/boy-walking-2.png)",backgroundPosition:`${a*-130}px`}}),x.jsx("button",{onMouseDown:s,onMouseUp:o,onMouseOut:o,children:"Hold to walk"})]})}const E7=""+new URL("ASG_2025_03_19_1-DjGpJIRO.png",import.meta.url).href,w7=""+new URL("back-DkdHjBwt.png",import.meta.url).href,R7=""+new URL("heart-DCrs8sKj.png",import.meta.url).href,M7=""+new URL("cart-CD1D9Fo9.png",import.meta.url).href,T7=""+new URL("filter1-BbrAG1vG.png",import.meta.url).href,wD=""+new URL("search-CG_s3Ege.png",import.meta.url).href,N7=""+new URL("main-CsRMX9AK.png",import.meta.url).href,C7=""+new URL("filter-DYTlIpcR.png",import.meta.url).href;function I7(){return x.jsxs("div",{className:"product-container",children:[x.jsxs("div",{className:"image-container",children:[x.jsx("img",{src:E7,alt:"Pink Jumper"}),x.jsxs("div",{className:"top-icons",children:[x.jsx("img",{src:w7,alt:"Back"}),x.jsx("img",{src:R7,alt:"Favorite"})]})]}),x.jsxs("div",{className:"product-details",children:[x.jsx("div",{className:"cart-icon",children:x.jsx("img",{src:M7,alt:"Cart"})}),x.jsxs("div",{className:"product-NameAndPrice",children:[x.jsx("p",{className:"product-name",children:"Pink Jumper"}),x.jsx("p",{className:"product-price",children:"$29.95"})]}),x.jsxs("div",{className:"product-SizeAndDescription",children:[x.jsxs("div",{className:"size-box",children:[x.jsx("img",{src:T7,alt:"Filter1"}),x.jsx("p",{className:"size",children:"Size"}),x.jsx("p",{className:"size-number",children:"10"})]}),x.jsx("div",{className:"description",children:x.jsx("p",{children:"This is a description for the item that is listed above in the shopping interface."})})]})]}),x.jsxs("div",{className:"bottom-navbar",children:[x.jsx("div",{children:x.jsx("img",{src:wD,alt:"Search"})}),x.jsx("div",{children:x.jsx("img",{src:N7,alt:"Main"})}),x.jsx("div",{children:x.jsx("img",{src:C7,alt:"Filter"})})]})]})}const D7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABGCAYAAACJ4ts2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTYyODhGMTY1NTU3MTFFRThDRjdDRDcxMDQ2RDIwMEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTYyODhGMTc1NTU3MTFFRThDRjdDRDcxMDQ2RDIwMEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NjI4OEYxNDU1NTcxMUVFOENGN0NENzEwNDZEMjAwRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NjI4OEYxNTU1NTcxMUVFOENGN0NENzEwNDZEMjAwRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnRLXTgAAAl7SURBVHja7F0LiBVlFD6ba6YZsmGFCEJXjKxQ66aoKYW5lUVJ1pr2MHNzpReVRtoLjV5KWlYUuuuWmpW5KfagByqBpEm6ihtmhm4hLUWFa1FZlm7nY87szt7uPO7Mnce993zwoezMvf/cmf/7/3POf/4zZW1tbaRQKLKjTAWiUKhAFAoViEKhAlEo4hDI4O3zknZtZzLvYU5idmV+yHyOuTtJF7l76DztRUWMExJ4TX2Z85m7mPcz+zB7M6cwv2DWMgfqo1OUmkDOZS5k7mTOZvbKcs6JzOnMRuYy5gX6CBXFLpCUmE7bmLOYp3v4THdmNXMrcznzfH2UimITSF8Rxk4xpXr6+I5uzFuZnzPrZRZSKApaIPAfllh8jF55+E4IZZr4KG8zh+ujVRSaQBCVWiz+wwzmaSG00YM5kfkZcwVzsD5iRdIFgk76kswY94r/EDa6UEfU63XmCH3UiqQJBP5ArTjSd+fJlMoViHrdLDNKgwpFkQSBpMTHwOg9XcyeJPzO6y2ml0a9FJELBKbUa2REpWYkRBjZfi9ML0S91jMv0S6gCFsgA8WUwowxNSZTKlcg6jWe+SlzLXOkdgVFvgVylgijUUypEwv0HkwQ0wvh4SHaJRRBBQL7fbmYUhBG9yK4D2VkhIe3k5EUeal2DUWuAkFUql7sd6xen1yE96OcOY65kTTqpfAokOFifsDHmCb2eynAjHp9xByrXaU0Ue5wDFGpmcybyFh4K9UB5AohhLKIucnLB/sOqq7hfyp8tNkoM5jCA1qa6iMXyDlkpJtPKmDHOwyME75Pxn6VrS7nVwWYeVqZC8gIgrTqrU+GidVH7G4431NUHLa4mrlFZpJBIbVRISI8wEzrLU+GQOrE7u6mt8UTxpARzQsTEMoGFUkyBDJGb0fOGBBBGxDJGp/+jCKPPshhKo41jShx1OfnMp3wlNAOOFYjfokiJoE8wnyFeZLeFs9Y4udDLU31leb/+w6qtopgjYM5VeVBIGk5L50lQNBIHRGyBg+XOd/hWiot/x9rCUikLEGGjcLaMNvi+9feFt/X2nw/4MyyP4hg3UfGQqA66fbAYukDzK12ZX/4wW0gmygWP8iyLAIxzakDDuZUmcMMs5S8R82amXNchLLB4fvK5BqXSod1grlBrjGqtvj+NobhgwBfyVQ+jLkygAlR7ECod2sI39vq0pGymWF4Xjsot5CyOVvNDxg8qPJwblrOTUXVFg86qbAEYmK3zCIQylvMP1UTnRBmpK85B4FUycjq14GfLZ/PFU4mkVOggRLelmeBWIVyowilrsSEcpy5mrkn4nZTLiaEtSMszUN7NR5H58zP5Iq0z8/5aksyGUIXiIk9cqHYN4EdeX8XuTiQVjKKOZn5fYTtpl1MpdaMkbXC4bwF4uBWir/R7DJK+53tFsj3e1n1D5LTFmVb7SjP8XzMKFOZLzBvZ95GxRMaPibm5HLqnG/VNYK2K2QUd+qoDRnn1zjMMpUZHciMJtk5uin5e0MO1zyH/h9Vm0POC5tVPu9PlG35mkEygQold8nFwfQ6UsDCQBhvncwYt5DHZMQg4Om/zaS0f8iDL1Hr8eHPsRldW+VYPkbcBsoecm7NIs5ssyRF0Rbf33RcAjGxV0aytIy8vxaQMGAmrhVhXEdG6dOkwlxTcOtkzeScCdxM9lGyXCI/tS5mYIPLbEkJbSuwieUkFJhbT5BR4gc7DXsmWBirxUzcVQBCRoeemENnnu3BnAs6g7il4zfneXCIqq3QBGK9WOwhQZI+isRhL0lSqpscF1PqGTIylgsBGB1nkPeU91QAh1sRgollBzPqhfDw4phNr6Mi2FFiuyddHK1iVlTKzNEaYbuKkGeQbEJBgeoXyXhbFLbs9opQGDClEvdWKuqcX5TZSYOkSTS6OOIqkJgE0kNs+2M2x78V0wvJkA+SUQ40rPBwm5gmT3sUBopo/xzlTW9pqm+3qzNysXIxZf3a7IoYTCxU/0Bu0lRyTsPYL6YXSgc9mWfTC6v8dWLW3eBBHNg+u5l5ZwE+NzuBpD048BtsWKNyCNcHQcdE6dFt0kGdvnsf8zEyXqH2fEChYObC6v5I6kjcc8LlZKx1oP7VaErmexq9OO9OIrBz4HFsrA3VxApRINZ3SQ8R2x8lc6pdZhQz6gWhPMv8KYc2j4jJNkJmLqcZAynTE0QUH1Pn3ZOF+B7sZgeRYJBYQx2LiSnLwFHh4/tUICEBHXeZPBi3IhDN4ptAKE8xf3ERRp2YE1jNd1vLuErEulbMqmKB0+apKhEJxI/9JW6r9LpTMQaBmDhPTCAUnpvs0mYL81Hp/DC9DluOISq1kjqyQve6tHulmFIfULDi1G0e/xY1gkSsrKglb7v+ShLlEbaFQnRvikmFGeAN5h825x6U8xAeHiXXiQ7xpQfBw5TCav7FebrusoQKxBz5K8h99dxJHDNUBvHOIJm4UKb8beQe9fqOuYqMPC83cVxLHW+Sypc4EOEamuXv1eLgJwGYRXJdUDQTF1UcCRSI1fQyo17YvegnJaWL+BUwpdZRfotNY1HzZeYpWY71Y74nPlMSgEGhP7nv/TbNsv7qd3g0HzKKNvjFGAqeJr5X/I5V5J4+b0al4NgPC9ju48zMH9+b+Q25Z4Nu3D10XmWQxn0uFHpBZvJhUS4gxlGbNy6Yb6pCaspC5jvM3zLOweala5izKNxXEwwkb6nSgxP8gHVFvcgEYu2c6DVzmU1kRLYwzZ3BPFuOhw2vRRm6ahdSgcSFfsI48K/H845pF1InvRSxj7xtI96vt0oFUor4gbyVFV2kt0oFUqpAOHSVgwmGxTnNX1IfpOiFZvd6OaS2oMoJcriQItNb/o7cplcp2UUeFAkTSCGX/Tnkcny9UKEmlm9ghXZTAf5+ZAKv0G6gCFsgfzHHk7F+USj4hIyM30PaDRRR+A7IzEU50jvIPks3CcCiI0rjYEX+R+0Ciqida4RHL6Nw3p8RFKiygqzfh0jffaKISSAk4hgtM8rBBPxOVC15mIzExnf1sSviFghwXHwS7P9AgYaWGH4fikEgQxhVVFBRUV8EpEiMQKyjN0r8YO8EMnU3U/g78rC5aq60OTMmcSqKAFEmK6JiyWIhZhWUBsLOv0EU/JVmmK2+FvEhTX4LGZE1haJgBGLFDiE2Pg2Qkf4iMkrUIK0d5UlPtfkswrK/k1H5BNVQsKKNert4Aek/+kgV+UT7jkKFQqECUShUIApFvvCfAAMA/ZUlX8ySfBsAAAAASUVORK5CYII=",wh=""+new URL("chevron-down-CPFW6tbh.png",import.meta.url).href,L7=""+new URL("heart1-5KrVUfXn.png",import.meta.url).href,P7=""+new URL("cart1-CNtTkmjb.png",import.meta.url).href,s2=""+new URL("arrow-right-short-C8dELReY.png",import.meta.url).href,O7=""+new URL("home-image-CRKmnduo.png",import.meta.url).href,U7="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.1625%2010.87C9.0625%2010.86%208.9425%2010.86%208.8325%2010.87C6.4525%2010.79%204.5625%208.84%204.5625%206.44C4.5625%203.99%206.5425%202%209.0025%202C11.4525%202%2013.4425%203.99%2013.4425%206.44C13.4325%208.84%2011.5425%2010.79%209.1625%2010.87Z'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.4112%204C18.3512%204%2019.9112%205.57%2019.9112%207.5C19.9112%209.39%2018.4113%2010.93%2016.5413%2011C16.4613%2010.99%2016.3713%2010.99%2016.2812%2011'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4.15875%2014.56C1.73875%2016.18%201.73875%2018.82%204.15875%2020.43C6.90875%2022.27%2011.4188%2022.27%2014.1688%2020.43C16.5888%2018.81%2016.5888%2016.17%2014.1688%2014.56C11.4288%2012.73%206.91875%2012.73%204.15875%2014.56Z'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M18.3438%2020C19.0638%2019.85%2019.7437%2019.56%2020.3037%2019.13C21.8637%2017.96%2021.8637%2016.03%2020.3037%2014.86C19.7537%2014.44%2019.0838%2014.16%2018.3738%2014'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",B7="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M22%2010V15C22%2020%2020%2022%2015%2022H9C4%2022%202%2020%202%2015V9C2%204%204%202%209%202H14'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M22%2010H18C15%2010%2014%209%2014%206V2L22%2010Z'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7%2013H13'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7%2017H11'%20stroke='%2330BEAD'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function F7(){return x.jsxs("div",{className:"main-container",children:[x.jsxs("div",{className:"navbar",children:[x.jsx("img",{src:D7,alt:"Logo"}),x.jsxs("div",{className:"nav-links",children:[x.jsxs("div",{children:["Home ",x.jsx("img",{src:wh,alt:"Arrow"})]}),x.jsxs("div",{children:["Pages ",x.jsx("img",{src:wh,alt:"Arrow"})]}),x.jsxs("div",{children:["Courses ",x.jsx("img",{src:wh,alt:"Arrow"})]}),x.jsxs("div",{children:["Shop ",x.jsx("img",{src:wh,alt:"Arrow"})]}),x.jsxs("div",{children:["Blog ",x.jsx("img",{src:wh,alt:"Arrow"})]}),x.jsx("div",{children:"Contact"})]}),x.jsxs("div",{className:"nav-icons",children:[x.jsxs("div",{className:"icon-container",children:[x.jsx("img",{src:L7,alt:"Heart"}),x.jsx("span",{className:"circle",children:"0"})]}),x.jsxs("div",{className:"icon-container",children:[x.jsx("img",{src:P7,alt:"Cart"}),x.jsx("span",{className:"circle",children:"2"})]})]}),x.jsxs("div",{className:"nav-buttons",children:[x.jsx("button",{className:"login-button",children:"Login"}),x.jsx("button",{className:"signUp-button",children:"Sign Up"})]})]}),x.jsxs("div",{className:"main",children:[x.jsxs("div",{className:"main-text",children:[x.jsxs("h1",{children:["Better"," ",x.jsxs("span",{className:"highlight",children:["Learning ",x.jsx("br",{}),"Future"," "]}),"Starts ",x.jsx("br",{}),"With Penn"]}),x.jsx("p",{children:"It is a long established fact that reader will be distracted readable content of a page when."}),x.jsxs("div",{className:"explore",children:[x.jsx("span",{children:"EXPLORE COURSES"}),x.jsx("div",{className:"under-circle"}),x.jsx("img",{src:s2,alt:"Arrow Right"})]})]}),x.jsxs("div",{className:"main-image",children:[x.jsx("img",{src:O7,alt:"Student"}),x.jsxs("div",{className:"box student",children:[x.jsx("img",{src:U7,alt:"Active Students"}),x.jsx("h4",{children:"7500 +"}),x.jsx("p",{children:"Active Student"})]}),x.jsxs("div",{className:"box course",children:[x.jsx("img",{src:B7,alt:"Online Course"}),x.jsx("h4",{children:"4500 +"}),x.jsx("p",{children:"Online Course"})]})]})]}),x.jsxs("div",{className:"features",children:[x.jsxs("div",{className:"feature",children:[x.jsx("h2",{children:"Quality Education"}),x.jsx("p",{children:"Lorem ipsum dolor sit amet,consectetur notted adipisicing elit sed do eiusmod tempor incididunt ut labore."}),x.jsxs("div",{className:"explore",children:[x.jsx("span",{children:"EXPLORE"}),x.jsx("div",{className:"under-circle"}),x.jsx("img",{src:s2,alt:"Arrow Right"})]})]}),x.jsxs("div",{className:"feature",children:[x.jsx("h2",{children:"Experienced Teachers"}),x.jsx("p",{children:"Lorem ipsum dolor sit amet,consectetur notted adipisicing elit sed do eiusmod tempor incididunt ut labore."}),x.jsxs("div",{className:"explore",children:[x.jsx("span",{children:"EXPLORE"}),x.jsx("div",{className:"under-circle"}),x.jsx("img",{src:s2,alt:"Arrow Right"})]})]}),x.jsxs("div",{className:"feature",children:[x.jsx("h2",{children:"Delicious Food"}),x.jsx("p",{children:"Lorem ipsum dolor sit amet,consectetur notted adipisicing elit sed do eiusmod tempor incididunt ut labore."}),x.jsxs("div",{className:"explore",children:[x.jsx("span",{children:"EXPLORE"}),x.jsx("div",{className:"under-circle"}),x.jsx("img",{src:s2,alt:"Arrow Right"})]})]})]})]})}const zT=""+new URL("logo-30_AJov-.svg",import.meta.url).href,k7=""+new URL("bag-bFpgUNvg.png",import.meta.url).href,H7=""+new URL("search1-BP_b-_Nf.png",import.meta.url).href,GT=""+new URL("arrow-right-CuYWVhPH.png",import.meta.url).href,j7=""+new URL("cover-image-BTUJyWHb.png",import.meta.url).href,VT=""+new URL("triangle-fill-DeVCIzOQ.png",import.meta.url).href,Jb=""+new URL("medical_services-BgXxdBy_.png",import.meta.url).href,Zb=""+new URL("arrow-right1-CJG63uj2.png",import.meta.url).href,z7=""+new URL("facebook-DFCAB5Z7.png",import.meta.url).href,G7=""+new URL("twitter-CGTkioP2.png",import.meta.url).href,V7=""+new URL("linkedin-in-dX5hs1yO.png",import.meta.url).href,W7=""+new URL("instagram-DTbKID24.png",import.meta.url).href,K7=""+new URL("email-BjlsIeAe.png",import.meta.url).href,Y7=""+new URL("telephone-DLCtjGgS.png",import.meta.url).href,q7=""+new URL("location-pin-CwZ3NkbN.png",import.meta.url).href;function X7(){return x.jsxs("div",{className:"medical-container",children:[x.jsxs("div",{className:"medical-navbar",children:[x.jsx("img",{src:zT,alt:"Logo"}),x.jsxs("div",{className:"medical-nav-links",children:[x.jsx("div",{children:"Home"}),x.jsx("div",{children:"About"}),x.jsx("div",{children:"Pages"}),x.jsx("div",{children:"Services"}),x.jsx("div",{children:"Portfolio"}),x.jsx("div",{children:"Blog"}),x.jsx("div",{children:"Contact"})]}),x.jsxs("div",{className:"medical-nav-icons",children:[x.jsxs("div",{className:"bag-icon",children:[x.jsx("div",{className:"bag-under-circle"}),x.jsx("img",{src:k7,alt:"Bag"}),x.jsx("span",{className:"medical-circle",children:"0"})]}),x.jsxs("div",{className:"search-icon",children:[x.jsx("div",{className:"search-under-circle"}),x.jsx("img",{src:H7,alt:"Search"})]})]})]}),x.jsxs("div",{className:"main-medical",children:[x.jsxs("div",{className:"main-medical-text",children:[x.jsx("button",{className:"topic",children:"We are Here for You"}),x.jsxs("h1",{children:["Helping People Lead ",x.jsx("br",{})," Healthy & Happy Lives"]}),x.jsx("p",{children:"Nisi molestie fusce quis eget vitae. Aliquam senectus id placerat egestas sed sed venenatis nisl. Tincidunt fauclibus facilisi vestibulum et ut congue in eget. Augue purus hendrerit tempus consequat ut sit."}),x.jsx("div",{className:"medical-appointment",children:x.jsxs("button",{children:["Make Appointment",x.jsx("div",{className:"circle-outline",children:x.jsx("img",{src:GT,alt:"Arrow Right"})})]})})]}),x.jsx("div",{className:"cover-image",children:x.jsx("img",{src:j7,alt:"Doctor"})}),x.jsxs("div",{className:"medical-details",children:[x.jsxs("div",{className:"patient-name",children:[x.jsx("p",{children:"Your Name"}),x.jsx("input",{placeholder:"Name"})]}),x.jsxs("div",{className:"patient-email",children:[x.jsx("p",{children:"Your Email"}),x.jsx("input",{placeholder:"Email"})]}),x.jsxs("div",{className:"department",children:[x.jsx("p",{children:"Select Department"}),x.jsxs("div",{className:"input-container",children:[x.jsx("input",{placeholder:"Department"}),x.jsx("img",{src:VT,alt:"Triangle"})]})]}),x.jsxs("div",{className:"choose-doctor",children:[x.jsx("p",{children:"Choose Doctor"}),x.jsxs("div",{className:"input-container",children:[x.jsx("input",{placeholder:"Doctor"}),x.jsx("img",{src:VT,alt:"Triangle"})]})]}),x.jsx("div",{className:"send-button",children:x.jsx("button",{children:"Send"})})]})]}),x.jsx("div",{className:"main-medical-2",children:x.jsxs("div",{className:"medical-services",children:[x.jsx("div",{className:"department-services",children:x.jsx("button",{children:"Department Services"})}),x.jsx("h2",{children:"Our Medical Services"}),x.jsxs("div",{className:"services",children:[x.jsxs("div",{className:"service",children:[x.jsx("div",{className:"medical-icon",children:x.jsx("img",{src:Jb,alt:"Medical"})}),x.jsx("h3",{children:"Dental Care"}),x.jsx("p",{children:"We have more doctor for your dental illness. We are here for your better treatment"}),x.jsx("img",{src:Zb,alt:"Arrow Right1"})]}),x.jsxs("div",{className:"service",children:[x.jsx("div",{className:"medical-icon",children:x.jsx("img",{src:Jb,alt:"Medical"})}),x.jsx("h3",{children:"Pharmacology"}),x.jsx("p",{children:"We have more doctor for your dental illness. We are here for your better treatment"}),x.jsx("img",{src:Zb,alt:"Arrow Right1"})]}),x.jsxs("div",{className:"service",children:[x.jsx("div",{className:"medical-icon",children:x.jsx("img",{src:Jb,alt:"Medical"})}),x.jsx("h3",{children:"Orthopedic"}),x.jsx("p",{children:"We have more doctor for your dental illness. We are here for your better treatment"}),x.jsx("img",{src:Zb,alt:"Arrow Right1"})]})]}),x.jsx("div",{className:"services button",children:x.jsxs("button",{children:["See All Services",x.jsx("div",{className:"services-circle-outline",children:x.jsx("img",{src:GT,alt:"Arrow Right"})})]})})]})}),x.jsxs("div",{className:"medical-footer",children:[x.jsxs("div",{className:"conclusion",children:[x.jsx("h2",{children:"Get A Free Consultation"}),x.jsx("p",{children:"Drop us a line! We are here to answer your questions 24/7"}),x.jsxs("div",{className:"conclusion-details",children:[x.jsx("input",{placeholder:"Your Name*"}),x.jsx("input",{placeholder:"Your Email*"}),x.jsx("input",{placeholder:"Your Company*"}),x.jsx("button",{children:"Free Consultancy"})]})]}),x.jsxs("div",{className:"footer-container",children:[x.jsxs("div",{className:"footer-section",children:[x.jsx("img",{src:zT,alt:"Logo"}),x.jsxs("p",{children:["Mattis inelit neque quis donec ",x.jsx("br",{}),"eleifnd amet. Amet sed et cursus eu ",x.jsx("br",{})," euismod. Egestas in morbi tristique."]}),x.jsxs("div",{className:"social-icons",children:[x.jsx("img",{src:z7,alt:"Facebook"}),x.jsx("img",{src:G7,alt:"Twitter"}),x.jsx("img",{src:V7,alt:"LinkedIn"}),x.jsx("img",{src:W7,alt:"Instagram"})]})]}),x.jsxs("div",{className:"quick-links",children:[x.jsx("h4",{children:"Quick Links"}),x.jsx("p",{children:"Home"}),x.jsx("p",{children:"About Us"}),x.jsx("p",{children:"Services"}),x.jsx("p",{children:"Latest News"}),x.jsx("p",{children:"Team"})]}),x.jsxs("div",{className:"useful-links",children:[x.jsx("h4",{children:"Useful Links"}),x.jsx("p",{children:"Projects"}),x.jsx("p",{children:"Shop"}),x.jsx("p",{children:"Cart"}),x.jsx("p",{children:"Contact Us"}),x.jsx("p",{children:"Faq"})]}),x.jsxs("div",{className:"contact-information",children:[x.jsx("h4",{children:"Contact Us"}),x.jsxs("p",{children:[x.jsx("img",{src:K7,alt:"Email"})," medically@gmail.com"]}),x.jsxs("p",{children:[x.jsx("img",{src:Y7,alt:"Telephone"}),"(704) 555-0127 ",x.jsx("br",{})," (208) 555-0112"]}),x.jsxs("p",{children:[x.jsx("img",{src:q7,alt:"Location"}),"4517 Washington Ave. ",x.jsx("br",{})," Manchter, Kentucky 495"]})]})]})]})]})}function J7(){return x.jsxs("div",{className:"ASG_2025_03_25_1-container",children:[x.jsx("div",{className:"x-box",children:"Header"}),x.jsxs("div",{className:"y-box",children:[x.jsxs("div",{className:"y1-box",children:[x.jsx("div",{className:"y1-1-box",children:"Left #1"}),x.jsx("div",{className:"y1-2-box",children:"Left #2"})]}),x.jsx("div",{className:"y2-box",children:"Middle"}),x.jsxs("div",{className:"y3-box",children:[x.jsx("div",{className:"y3-1-box",children:"Right #1"}),x.jsx("div",{className:"y3-2-box",children:"Right #2"})]})]}),x.jsx("div",{className:"z-box",children:"Footer"})]})}const Z7=""+new URL("news-eyP9ELxG.png",import.meta.url).href,Q7=""+new URL("livestream-BsUn0Cev.png",import.meta.url).href,WT=""+new URL("gaming-DBhO-XFI.png",import.meta.url).href,$7=""+new URL("people-ca_7ID4f.png",import.meta.url).href,eH=""+new URL("bookmark-star-C_o0r9Im.png",import.meta.url).href,tH=""+new URL("icon_profile-BsQyYRl2.png",import.meta.url).href,nH=""+new URL("bell-CjvKtbeI.png",import.meta.url).href,aH=""+new URL("sun-BfDnXgqZ.png",import.meta.url).href,rH=""+new URL("square-D63o7iDS.png",import.meta.url).href,iH=""+new URL("menu-DNtrTald.png",import.meta.url).href,No=""+new URL("arrow-up-circle-B6-FYIno.png",import.meta.url).href,Co=""+new URL("message-BhmjJex6.png",import.meta.url).href,KT=""+new URL("bell-fill-Chf4LD0U.png",import.meta.url).href,sH=""+new URL("c1-BCYWOgia.png",import.meta.url).href,oH=""+new URL("c2-uqgFQC_f.png",import.meta.url).href,lH=""+new URL("c3-Dc2SkVLi.png",import.meta.url).href,cH=""+new URL("c4-Dy_cyldU.png",import.meta.url).href,uH=""+new URL("c5-CN6D0YQX.png",import.meta.url).href,dH=""+new URL("c6-Bj9bDEVd.png",import.meta.url).href,fH=""+new URL("arrow-up-right-CRbZb-AG.png",import.meta.url).href,hH=""+new URL("circle-BHDQXOx-.png",import.meta.url).href,pH=""+new URL("bell-slash-Cy2aELAj.png",import.meta.url).href;function mH(){return x.jsxs("div",{className:"ASG_2025_03_25_2-container",children:[x.jsxs("div",{className:"p-box",children:[x.jsx("div",{className:"p1-box",children:"C B R"}),x.jsxs("div",{className:"p2-box",children:[x.jsxs("div",{className:"p2-1-box",children:[x.jsxs("div",{className:"p2-1-1-box",children:[x.jsx("img",{src:Z7,alt:"News"})," News"]}),x.jsxs("div",{className:"p2-1-2-box",children:[x.jsx("img",{src:Q7,alt:"Live"}),"Live"]}),x.jsxs("div",{className:"p2-1-3-box",children:[x.jsx("img",{src:WT,alt:"Matches"}),"Matches"]})]}),x.jsxs("div",{className:"p2-2-box",children:[x.jsxs("div",{className:"p2-2-1-box",children:[x.jsx("img",{src:$7,alt:"Blogs"}),"Blogs"]}),x.jsxs("div",{className:"p2-2-2-box",children:[x.jsx("img",{src:eH,alt:"Bookmakers"}),"Bookmakers"]}),x.jsxs("div",{className:"p2-2-3-box",children:[x.jsx("img",{src:tH,alt:"Night Stalker"}),"Night Stalker"]})]})]}),x.jsx("div",{className:"p3-box"})]}),x.jsxs("div",{className:"q-box",children:[x.jsxs("div",{className:"q1-box",children:[x.jsx("div",{className:"q1-1-box",children:"News"}),x.jsxs("div",{className:"q1-2-box",children:[x.jsx("div",{className:"q1-2-1-box",children:x.jsx("img",{src:nH,alt:"Bell"})}),x.jsx("div",{className:"q1-2-2-box",children:x.jsx("img",{src:aH,alt:"Sun"})})]})]}),x.jsxs("div",{className:"q2-box",children:[x.jsxs("div",{className:"q2-1-box",children:[x.jsxs("div",{className:"q2-1-1-box",children:[x.jsx("div",{className:"q2-1-1-1-box",children:"Recent"}),x.jsx("div",{className:"q2-1-1-2-box",children:x.jsx("img",{src:wh,alt:"Arrow"})})]}),x.jsxs("div",{className:"q2-1-2-box",children:[x.jsx("div",{className:"q2-1-2-1-box",children:x.jsx("img",{src:WT,alt:"Matches"})}),x.jsx("div",{className:"q2-1-2-2-box",children:" All Games"}),x.jsx("div",{className:"q2-1-2-3-box",children:x.jsx("img",{src:wh,alt:"Arrow"})})]})]}),x.jsxs("div",{className:"q2-2-box",children:[x.jsx("div",{className:"q2-2-1-box",children:x.jsx("img",{src:rH,alt:"Square"})}),x.jsx("div",{className:"q2-2-2-box",children:x.jsx("img",{src:iH,alt:"Menu"})})]})]}),x.jsxs("div",{className:"q3-box",children:[x.jsxs("div",{className:"q3-1-box",children:[x.jsxs("div",{className:"q3-1-1-box",children:[x.jsx("div",{className:"q3-1-1-1-box"}),x.jsx("div",{className:"q3-1-1-2-box",children:"Legends of Runeterra Patch 0.9.3 will reduce swings in rank from wins and losses"}),x.jsxs("div",{className:"q3-1-1-3-box",children:[x.jsxs("div",{className:"q3-1-1-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"50 XP"]}),x.jsxs("div",{className:"q3-1-1-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"2"]}),x.jsx("div",{className:"q3-1-1-3-3-box",children:"21 Mar B 09:45"})]})]}),x.jsxs("div",{className:"q3-1-2-box",children:[x.jsx("div",{className:"q3-1-2-1-box"}),x.jsx("div",{className:"q3-1-2-2-box",children:"Riot adds Fiddlesticks jump scare Easter egg"}),x.jsxs("div",{className:"q3-1-2-3-box",children:[x.jsxs("div",{className:"q3-1-2-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"20 XP"]}),x.jsxs("div",{className:"q3-1-2-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"1"]}),x.jsx("div",{className:"q3-1-2-3-3-box",children:"27 Mar B 11:16"})]})]}),x.jsxs("div",{className:"q3-1-3-box",children:[x.jsx("div",{className:"q3-1-3-1-box"}),x.jsx("div",{className:"q3-1-3-2-box",children:"Best storylines to follow through 2020 LCS Spring Split"}),x.jsxs("div",{className:"q3-1-3-3-box",children:[x.jsxs("div",{className:"q3-1-3-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"940 XP"]}),x.jsxs("div",{className:"q3-1-3-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"2"]}),x.jsx("div",{className:"q3-1-3-3-3-box",children:"27 Mar B 10:45"})]})]})]}),x.jsxs("div",{className:"q3-2-box",children:[x.jsxs("div",{className:"q3-2-1-box",children:[x.jsx("div",{className:"q3-2-1-1-box"}),x.jsx("div",{className:"q3-2-1-2-box",children:"Sony says it doesn't expect COVID-19 to impact PlayStation 5 launch later this year"}),x.jsxs("div",{className:"q3-2-1-3-box",children:[x.jsxs("div",{className:"q3-2-1-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"140 XP"]}),x.jsxs("div",{className:"q3-2-1-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"9"]}),x.jsx("div",{className:"q3-2-1-3-3-box",children:"27 Mar B 10:27"})]})]}),x.jsxs("div",{className:"q3-2-2-box",children:[x.jsx("div",{className:"q3-2-2-1-box"}),x.jsxs("div",{className:"q3-2-2-2-box",children:["Nintendo Switch surges past Wii,s lifetime sales in Japan"," "]}),x.jsxs("div",{className:"q3-2-2-3-box",children:[x.jsxs("div",{className:"q3-2-2-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"220 XP"]}),x.jsxs("div",{className:"q3-2-2-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"7"]}),x.jsx("div",{className:"q3-2-2-3-3-box",children:"27 Mar B 12:44"})]})]}),x.jsxs("div",{className:"q3-2-3-box",children:[x.jsx("div",{className:"q3-2-3-1-box"}),x.jsx("div",{className:"q3-2-3-2-box",children:"Epic introduces 3-hour limit for Fortnite players in China"}),x.jsxs("div",{className:"q3-2-3-3-box",children:[x.jsxs("div",{className:"q3-2-3-3-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"940 XP"]}),x.jsxs("div",{className:"q3-2-3-3-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"2"]}),x.jsx("div",{className:"q3-2-3-3-3-box",children:"27 Mar B 10:45"})]})]})]})]})]}),x.jsxs("div",{className:"r-box",children:[x.jsxs("div",{className:"r1-box",children:[x.jsx("div",{className:"r1-1-box",children:"International 2020 Final"}),x.jsx("div",{className:"r1-2-box",children:x.jsx("img",{src:wD,alt:"Search"})})]}),x.jsxs("div",{className:"r2-box",children:[x.jsxs("div",{className:"r2-1-box",children:[x.jsxs("div",{className:"r2-1-1-box",children:["19:00 ",x.jsx("br",{})," ",x.jsx("span",{className:"highlight",children:"Today"})," ",x.jsx("img",{src:KT,alt:"Bell 2"})]}),x.jsxs("div",{className:"r2-1-2-box",children:["Live ",x.jsx("img",{src:fH,alt:"Arrow 3"})]})]}),x.jsxs("div",{className:"r2-2-box",children:[x.jsxs("div",{className:"r2-2-1-box",children:[x.jsxs("div",{className:"r2-2-1-1-box",children:[x.jsx("img",{src:sH,alt:"Circle1"})," Vitality"]}),x.jsx("div",{className:"r2-2-1-2-box",children:"9"})]}),x.jsxs("div",{className:"r2-2-2-box",children:[x.jsxs("div",{className:"r2-2-2-1-box",children:[x.jsx("img",{src:oH,alt:"Circle2"})," Helsinki ",x.jsx("br",{})," REDS"," "]}),x.jsx("div",{className:"r2-2-2-2-box",children:"16"})]})]})]}),x.jsxs("div",{className:"r3-box",children:[x.jsxs("div",{className:"r3-1-box",children:[x.jsx("img",{src:hH,alt:"Circle"}),"ESL One: Rio 2020"]}),x.jsxs("div",{className:"r3-2-box",children:[x.jsxs("div",{className:"r3-2-1-box",children:[x.jsxs("div",{className:"r3-2-1-1-box",children:[x.jsxs("div",{className:"r3-2-1-1-1-box",children:["21:00",x.jsx("br",{}),x.jsx("span",{className:"highlight",children:"Today"})," ",x.jsx("img",{src:KT,alt:"Bell 2"})]}),x.jsx("div",{className:"r3-2-1-1-2-box",children:"02:10:59"})]}),x.jsxs("div",{className:"r3-2-1-2-box",children:[x.jsxs("div",{className:"r3-2-1-2-1-box",children:[x.jsx("img",{src:lH,alt:"Circle3"}),"Team Liquid"]}),x.jsxs("div",{className:"r3-2-1-2-2-box",children:[x.jsx("img",{src:cH,alt:"Circle4"}),"Astralis"]})]})]}),x.jsxs("div",{className:"r3-2-2-box",children:[x.jsxs("div",{className:"r3-2-2-1-box",children:[x.jsxs("div",{className:"r3-2-2-1-1-box",children:["22:30 ",x.jsx("br",{})," ",x.jsx("span",{className:"highlight",children:"Today"})," ",x.jsx("img",{src:pH,alt:"Bell 3"})]}),x.jsx("div",{className:"r3-2-2-1-2-box",children:"03:40:59"})]}),x.jsxs("div",{className:"r3-2-2-2-box",children:[x.jsxs("div",{className:"r3-2-2-2-1-box",children:[x.jsx("img",{src:uH,alt:"Circle5"}),"Winstrike Team"]}),x.jsxs("div",{className:"r3-2-2-2-2-box",children:[x.jsx("img",{src:dH,alt:"Circle6"}),"CR4ZY"]})]})]})]})]}),x.jsxs("div",{className:"r4-box",children:[x.jsx("div",{className:"r4-1-box",children:"Trending Posts 🔥"}),x.jsxs("div",{className:"r4-2-box",children:[x.jsxs("div",{className:"r4-2-1-box",children:[x.jsx("div",{className:"r4-2-1-1-box",children:"Riot launch VALORANT closed beta on April 7 in select regions"}),x.jsxs("div",{className:"r4-2-1-2-box",children:[x.jsxs("div",{className:"r4-2-1-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"940 XP"]}),x.jsxs("div",{className:"r4-2-1-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"2"]}),x.jsx("div",{className:"r4-2-1-2-3-box",children:"26 Mar B 11:23"})]})]}),x.jsxs("div",{className:"r4-2-2-box",children:[x.jsx("div",{className:"r4-2-2-1-box",children:"Dendi's team BB add Excalibur to its roster"}),x.jsxs("div",{className:"r4-2-2-2-box",children:[x.jsxs("div",{className:"r4-2-2-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"70 XP"]}),x.jsxs("div",{className:"r4-2-2-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"1"]}),x.jsx("div",{className:"r4-2-2-2-3-box",children:"23 Mar B 22:22"})]})]}),x.jsxs("div",{className:"r4-2-3-box",children:[x.jsx("div",{className:"r4-2-3-1-box",children:"Steam makes changes to manage bandwidth during COVID-19 pandemic"}),x.jsxs("div",{className:"r4-2-3-2-box",children:[x.jsxs("div",{className:"r4-2-3-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"320 XP"," "]}),x.jsxs("div",{className:"r4-2-3-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"5"]}),x.jsx("div",{className:"r4-2-3-2-3-box",children:"24 Mar B 9:50"})]})]}),x.jsxs("div",{className:"r4-2-4-box",children:[x.jsx("div",{className:"r4-2-4-1-box",children:"The 10 best games in Dota 2 history"}),x.jsxs("div",{className:"r4-2-4-2-box",children:[x.jsxs("div",{className:"r4-2-4-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"70 XP"]}),x.jsxs("div",{className:"r4-2-4-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"1"]}),x.jsx("div",{className:"r4-2-4-2-3-box",children:"25 Mar B 21:56"})]})]}),x.jsxs("div",{className:"r4-2-5-box",children:[x.jsx("div",{className:"r4-2-5-1-box",children:"Call of Duty: Modern Warfare update version 1.18 goes live soon"}),x.jsxs("div",{className:"r4-2-5-2-box",children:[x.jsxs("div",{className:"r4-2-5-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"1.4k XP"]}),x.jsxs("div",{className:"r4-2-5-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"1"]}),x.jsx("div",{className:"r4-2-5-2-3-box",children:"25 Mar B 17:35"})]})]}),x.jsxs("div",{className:"r4-2-6-box",children:[x.jsx("div",{className:"r4-2-6-1-box",children:"Hearthstone Masters Tour Jonkoping and next Masters Tour in Asia-Pacific to be online-only"}),x.jsxs("div",{className:"r4-2-6-2-box",children:[x.jsxs("div",{className:"r4-2-6-2-1-box",children:[x.jsx("img",{src:No,alt:"Arrow Up"}),"70 XP"]}),x.jsxs("div",{className:"r4-2-6-2-2-box",children:[x.jsx("img",{src:Co,alt:"Message"}),"1"]}),x.jsx("div",{className:"r4-2-6-2-3-box",children:"27 Mar B 19:49"})]})]})]})]})]})]})}const gH="Trincomalee",vH=[{party_code:"IND1",votes:192,percentage:.08,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:149,percentage:.06,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:111,percentage:.05,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1746,percentage:.73,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:146,percentage:.06,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:72,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:271,percentage:.11,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:49,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:874,percentage:.36,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:258,percentage:.11,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:68,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:115,percentage:.05,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:46,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:131,percentage:.05,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:49886,percentage:20.83,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:167,percentage:.07,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:18524,percentage:7.74,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:268,percentage:.11,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:347,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:120588,percentage:50.36,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:379,percentage:.16,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:468,percentage:.2,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:102,percentage:.04,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:69,percentage:.03,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:345,percentage:.14,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:54,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:138,percentage:.06,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:72,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:33,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:119,percentage:.05,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:2183,percentage:.91,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:467,percentage:.2,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:40,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:77,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:277,percentage:.12,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:40496,percentage:16.91,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:62,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:72,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],yH={valid:239461,rejected:5821,polled:245282,electors:315925,percent_valid:97.63,percent_rejected:2.37,percent_polled:77.64},xH="PRESIDENTIAL-FIRST",AH="0192",_H="1103759151",RD={name:gH,by_party:vH,summary:yH,type:xH,sequence_number:AH,reference:_H},bH="Mulaithivu",SH=[{party_code:"IND1",votes:101,percentage:.18,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:63,percentage:.11,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:49,percentage:.09,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1220,percentage:2.21,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:63,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:29,percentage:.05,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:170,percentage:.31,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:27,percentage:.05,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:49,percentage:.09,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:143,percentage:.26,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:19,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:32,percentage:.06,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:23,percentage:.04,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:35,percentage:.06,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:3453,percentage:6.25,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:61,percentage:.11,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:12810,percentage:23.17,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:184,percentage:.33,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:165,percentage:.3,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:28301,percentage:51.19,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:158,percentage:.29,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:58,percentage:.1,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:37,percentage:.07,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:36,percentage:.07,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:20,percentage:.04,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:19,percentage:.03,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:46,percentage:.08,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:30,percentage:.05,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:24,percentage:.04,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:53,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:215,percentage:.39,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:273,percentage:.49,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:10,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:32,percentage:.06,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:86,percentage:.16,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:7117,percentage:12.87,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:30,percentage:.05,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:44,percentage:.08,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],EH={valid:55285,rejected:3560,polled:58845,electors:83323,percent_valid:93.95,percent_rejected:6.05,percent_polled:70.62},wH="PRESIDENTIAL-FIRST",RH="0036",MH="10658204449",MD={name:bH,by_party:SH,summary:EH,type:wH,sequence_number:RH,reference:MH},TH="Jaffna",NH=[{party_code:"IND1",votes:782,percentage:.21,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:463,percentage:.12,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:540,percentage:.15,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:6074,percentage:1.63,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:629,percentage:.17,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:239,percentage:.06,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:816,percentage:.22,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:172,percentage:.05,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:495,percentage:.13,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:817,percentage:.22,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:226,percentage:.06,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:215,percentage:.06,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:195,percentage:.05,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:329,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:27086,percentage:7.29,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:600,percentage:.16,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:116688,percentage:31.39,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:1178,percentage:.32,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:712,percentage:.19,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:121177,percentage:32.6,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:901,percentage:.24,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:508,percentage:.14,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:405,percentage:.11,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:331,percentage:.09,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:617,percentage:.17,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:221,percentage:.06,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:346,percentage:.09,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:261,percentage:.07,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:170,percentage:.05,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:330,percentage:.09,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:800,percentage:.22,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1019,percentage:.27,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:148,percentage:.04,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:201,percentage:.05,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:684,percentage:.18,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:84558,percentage:22.75,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:392,percentage:.11,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:363,percentage:.1,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],CH={valid:371688,rejected:25353,polled:397041,electors:593187,percent_valid:93.61,percent_rejected:6.39,percent_polled:66.93},IH="PRESIDENTIAL-FIRST",DH="0104",LH="1193157050",TD={name:TH,by_party:NH,summary:CH,type:IH,sequence_number:DH,reference:LH},PH="Kilinochchi",OH=[{party_code:"IND1",votes:104,percentage:.16,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:51,percentage:.08,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:66,percentage:.1,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1238,percentage:1.92,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:73,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:28,percentage:.04,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:173,percentage:.27,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:24,percentage:.04,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:42,percentage:.07,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:118,percentage:.18,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:20,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:35,percentage:.05,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:30,percentage:.05,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:40,percentage:.06,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:2805,percentage:4.34,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:100,percentage:.15,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:20348,percentage:31.51,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:210,percentage:.33,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:182,percentage:.28,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:30571,percentage:47.33,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:167,percentage:.26,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:59,percentage:.09,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:54,percentage:.08,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:43,percentage:.07,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:33,percentage:.05,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:31,percentage:.05,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:72,percentage:.11,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:30,percentage:.05,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:28,percentage:.04,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:39,percentage:.06,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:102,percentage:.16,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:226,percentage:.35,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:22,percentage:.03,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:29,percentage:.04,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:92,percentage:.14,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:7182,percentage:11.12,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:64,percentage:.1,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:54,percentage:.08,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],UH={valid:64585,rejected:4695,polled:69280,electors:97251,percent_valid:93.22,percent_rejected:6.78,percent_polled:71.24},BH="PRESIDENTIAL-FIRST",FH="0035",kH="10375914431",ND={name:PH,by_party:OH,summary:UH,type:BH,sequence_number:FH,reference:kH},HH="Mannar",jH=[{party_code:"IND1",votes:70,percentage:.11,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:55,percentage:.09,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:60,percentage:.09,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:802,percentage:1.26,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:64,percentage:.1,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:34,percentage:.05,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:102,percentage:.16,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:17,percentage:.03,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:21,percentage:.03,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:110,percentage:.17,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:18,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:18,percentage:.03,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:17,percentage:.03,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:44,percentage:.07,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:4276,percentage:6.74,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:52,percentage:.08,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:10757,percentage:16.96,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:103,percentage:.16,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:104,percentage:.16,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:28491,percentage:44.93,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:144,percentage:.23,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:104,percentage:.16,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:56,percentage:.09,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:25,percentage:.04,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:15,percentage:.02,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:11,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:43,percentage:.07,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:31,percentage:.05,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:18,percentage:.03,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:24,percentage:.04,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:125,percentage:.2,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:152,percentage:.24,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:12,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:28,percentage:.04,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:141,percentage:.22,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:17181,percentage:27.09,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:38,percentage:.06,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:49,percentage:.08,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],zH={valid:63412,rejected:2082,polled:65494,electors:86509,percent_valid:96.82,percent_rejected:3.18,percent_polled:75.71},GH="PRESIDENTIAL-FIRST",VH="0056",WH="10476931474",CD={name:HH,by_party:jH,summary:zH,type:GH,sequence_number:VH,reference:WH},KH="Puttalam",YH=[{party_code:"IND1",votes:376,percentage:.08,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:699,percentage:.15,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:297,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1769,percentage:.38,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:503,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:134,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:526,percentage:.11,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:114,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:3003,percentage:.64,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:314,percentage:.07,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:66,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:398,percentage:.08,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:104,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:406,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:207134,percentage:44.06,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:164,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:375,percentage:.08,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:271,percentage:.06,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:643,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:173382,percentage:36.88,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:683,percentage:.15,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1553,percentage:.33,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:142,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:194,percentage:.04,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:323,percentage:.07,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:81,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:159,percentage:.03,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:116,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:65,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:459,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:13285,percentage:2.83,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:769,percentage:.16,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:64,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:139,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:365,percentage:.08,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:60719,percentage:12.92,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:149,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:152,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],qH={valid:470095,rejected:8279,polled:478374,electors:663673,percent_valid:98.27,percent_rejected:1.73,percent_polled:72.08},XH="PRESIDENTIAL-FIRST",JH="0165",ZH="1186015371",ID={name:KH,by_party:YH,summary:qH,type:XH,sequence_number:JH,reference:ZH},QH="Gampaha",$H=[{party_code:"IND1",votes:807,percentage:.06,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:449,percentage:.03,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:562,percentage:.04,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1669,percentage:.11,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:1232,percentage:.08,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:270,percentage:.02,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:704,percentage:.05,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:254,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:17143,percentage:1.18,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:409,percentage:.03,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:154,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:1857,percentage:.13,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:280,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:1073,percentage:.07,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:809410,percentage:55.5,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:419,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:731,percentage:.05,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:391,percentage:.03,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:1128,percentage:.08,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:349550,percentage:23.97,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1940,percentage:.13,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:2853,percentage:.2,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:262,percentage:.02,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:865,percentage:.06,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:1145,percentage:.08,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:136,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:270,percentage:.02,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:360,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:211,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:1397,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:41193,percentage:2.82,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1391,percentage:.1,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:137,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:392,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:699,percentage:.05,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:216028,percentage:14.81,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:325,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:293,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],ej={valid:1458389,rejected:29381,polled:1487770,electors:1881129,percent_valid:98.03,percent_rejected:1.97,percent_polled:79.09},tj="PRESIDENTIAL-FIRST",nj="0203",aj="1120486966",DD={name:QH,by_party:$H,summary:ej,type:tj,sequence_number:nj,reference:aj},rj="Colombo",ij=[{party_code:"IND1",votes:690,percentage:.05,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:396,percentage:.03,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:449,percentage:.03,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1477,percentage:.11,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:912,percentage:.07,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:212,percentage:.02,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:415,percentage:.03,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:179,percentage:.01,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:26356,percentage:1.98,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:388,percentage:.03,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:119,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:1483,percentage:.11,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:292,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:775,percentage:.06,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:629963,percentage:47.21,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:306,percentage:.02,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:3168,percentage:.24,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:320,percentage:.02,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:942,percentage:.07,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:342108,percentage:25.64,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:2044,percentage:.15,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1691,percentage:.13,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:196,percentage:.01,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:891,percentage:.07,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:1018,percentage:.08,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:105,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:236,percentage:.02,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:444,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:261,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:1099,percentage:.08,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:30432,percentage:2.28,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1554,percentage:.12,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:140,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:496,percentage:.04,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:737,percentage:.06,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:281436,percentage:21.09,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:388,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:272,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],sj={valid:1334390,rejected:31796,polled:1366186,electors:1765351,percent_valid:97.67,percent_rejected:2.33,percent_polled:77.39},oj="PRESIDENTIAL-FIRST",lj="0186",cj="1193157070",LD={name:rj,by_party:ij,summary:sj,type:oj,sequence_number:lj,reference:cj},uj="Kalutara",dj=[{party_code:"IND1",votes:652,percentage:.08,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:299,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:459,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1730,percentage:.21,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:960,percentage:.12,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:216,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:611,percentage:.07,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:154,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:10261,percentage:1.26,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:377,percentage:.05,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:62,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:925,percentage:.11,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:176,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:582,percentage:.07,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:387764,percentage:47.43,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:258,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:215,percentage:.03,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:395,percentage:.05,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:773,percentage:.09,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:236307,percentage:28.91,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1317,percentage:.16,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1521,percentage:.19,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:223,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:434,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:1013,percentage:.12,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:80,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:318,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:249,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:124,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:789,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:22727,percentage:2.78,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:938,percentage:.11,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:75,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:241,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:561,percentage:.07,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:143285,percentage:17.53,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:217,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:230,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],fj={valid:817518,rejected:16243,polled:833761,electors:1024244,percent_valid:98.05,percent_rejected:1.95,percent_polled:81.4},hj="PRESIDENTIAL-FIRST",pj="0195",mj="1114360867",PD={name:uj,by_party:dj,summary:fj,type:hj,sequence_number:pj,reference:mj},gj="Galle",vj=[{party_code:"IND1",votes:608,percentage:.09,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:275,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:473,percentage:.07,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1465,percentage:.21,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:935,percentage:.13,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:194,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:721,percentage:.1,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:183,percentage:.03,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:8263,percentage:1.16,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:392,percentage:.05,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:87,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:698,percentage:.1,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:176,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:673,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:366721,percentage:51.45,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:261,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:165,percentage:.02,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:342,percentage:.05,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:692,percentage:.1,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:189555,percentage:26.59,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1105,percentage:.16,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1788,percentage:.25,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:213,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:334,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:1086,percentage:.15,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:85,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:259,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:175,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:133,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:866,percentage:.12,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:24382,percentage:3.42,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:912,percentage:.13,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:82,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:239,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:587,percentage:.08,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:107336,percentage:15.06,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:178,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:181,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],yj={valid:712820,rejected:12541,polled:725361,electors:903163,percent_valid:98.27,percent_rejected:1.73,percent_polled:80.31},xj="PRESIDENTIAL-FIRST",Aj="0087",_j="1104268358",OD={name:gj,by_party:vj,summary:yj,type:xj,sequence_number:Aj,reference:_j},bj="Matara",Sj=[{party_code:"IND1",votes:376,percentage:.07,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:200,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:354,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1094,percentage:.2,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:845,percentage:.15,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:151,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:470,percentage:.09,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:113,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:7316,percentage:1.33,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:284,percentage:.05,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:50,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:391,percentage:.07,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:117,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:535,percentage:.1,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:287662,percentage:52.46,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:220,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:115,percentage:.02,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:322,percentage:.06,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:501,percentage:.09,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:147462,percentage:26.89,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:791,percentage:.14,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1379,percentage:.25,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:141,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:309,percentage:.06,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:362,percentage:.07,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:51,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:212,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:119,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:78,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:579,percentage:.11,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:14962,percentage:2.73,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:652,percentage:.12,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:57,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:139,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:399,percentage:.07,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:79249,percentage:14.45,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:149,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:123,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Ej={valid:548329,rejected:9687,polled:558016,electors:686175,percent_valid:98.26,percent_rejected:1.74,percent_polled:81.32},wj="PRESIDENTIAL-FIRST",Rj="0173",Mj="1171436557",UD={name:bj,by_party:Sj,summary:Ej,type:wj,sequence_number:Rj,reference:Mj},Tj="Hambantota",Nj=[{party_code:"IND1",votes:203,percentage:.05,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:173,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:242,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:826,percentage:.19,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:665,percentage:.16,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:114,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:442,percentage:.1,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:98,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:2978,percentage:.7,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:242,percentage:.06,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:44,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:385,percentage:.09,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:98,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:482,percentage:.11,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:221913,percentage:51.96,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:201,percentage:.05,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:103,percentage:.02,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:314,percentage:.07,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:497,percentage:.12,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:131503,percentage:30.79,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:563,percentage:.13,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1792,percentage:.42,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:167,percentage:.04,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:230,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:367,percentage:.09,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:31,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:192,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:97,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:69,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:732,percentage:.17,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:26707,percentage:6.25,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:803,percentage:.19,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:57,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:100,percentage:.02,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:271,percentage:.06,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:33217,percentage:7.78,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:72,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:72,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Cj={valid:427062,rejected:6443,polled:433505,electors:520940,percent_valid:98.51,percent_rejected:1.49,percent_polled:83.22},Ij="PRESIDENTIAL-FIRST",Dj="0057",Lj="1126481056",BD={name:Tj,by_party:Nj,summary:Cj,type:Ij,sequence_number:Dj,reference:Lj},Pj="Digamadulla",Oj=[{party_code:"IND1",votes:285,percentage:.07,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:163,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:206,percentage:.05,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1452,percentage:.34,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:340,percentage:.08,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:123,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:431,percentage:.1,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:56,percentage:.01,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:800,percentage:.19,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:243,percentage:.06,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:48,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:193,percentage:.05,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:59,percentage:.01,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:245,percentage:.06,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:108971,percentage:25.74,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:137,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:9985,percentage:2.36,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:346,percentage:.08,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:568,percentage:.13,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:200384,percentage:47.33,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:625,percentage:.15,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:827,percentage:.2,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:143,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:97,percentage:.02,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:261,percentage:.06,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:57,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:198,percentage:.05,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:163,percentage:.04,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:51,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:233,percentage:.06,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:7570,percentage:1.79,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:720,percentage:.17,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:50,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:119,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:409,percentage:.1,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:86589,percentage:20.45,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:112,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:138,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Uj={valid:423397,rejected:6563,polled:429960,electors:555432,percent_valid:98.47,percent_rejected:1.53,percent_polled:77.41},Bj="PRESIDENTIAL-FIRST",Fj="0194",kj="1132597153",FD={name:Pj,by_party:Oj,summary:Uj,type:Bj,sequence_number:Fj,reference:kj},Hj="Batticaloa",jj=[{party_code:"IND1",votes:331,percentage:.1,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:197,percentage:.06,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:267,percentage:.08,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:3057,percentage:.96,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:310,percentage:.1,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:192,percentage:.06,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:768,percentage:.24,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:92,percentage:.03,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:211,percentage:.07,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:406,percentage:.13,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:93,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:87,percentage:.03,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:69,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:219,percentage:.07,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:38832,percentage:12.19,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:245,percentage:.08,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:36905,percentage:11.58,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:535,percentage:.17,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:609,percentage:.19,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:139110,percentage:43.66,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:759,percentage:.24,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:494,percentage:.16,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:185,percentage:.06,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:83,percentage:.03,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:132,percentage:.04,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:101,percentage:.03,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:223,percentage:.07,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:137,percentage:.04,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:74,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:161,percentage:.05,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:559,percentage:.18,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:822,percentage:.26,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:96,percentage:.03,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:168,percentage:.05,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:623,percentage:.2,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:91132,percentage:28.6,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:164,percentage:.05,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:200,percentage:.06,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],zj={valid:318648,rejected:8876,polled:327524,electors:449686,percent_valid:97.29,percent_rejected:2.71,percent_polled:72.83},Gj="PRESIDENTIAL-FIRST",Vj="0155",Wj="1159214852",kD={name:Hj,by_party:jj,summary:zj,type:Gj,sequence_number:Vj,reference:Wj},Kj="Ratnapura",Yj=[{party_code:"IND1",votes:744,percentage:.1,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:348,percentage:.05,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:611,percentage:.08,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:2334,percentage:.31,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:943,percentage:.13,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:260,percentage:.04,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:830,percentage:.11,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:170,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:7629,percentage:1.03,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:589,percentage:.08,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:109,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:640,percentage:.09,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:133,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:594,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:291708,percentage:39.32,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:260,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:250,percentage:.03,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:650,percentage:.09,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:1038,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:257721,percentage:34.74,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1515,percentage:.2,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1621,percentage:.22,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:205,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:340,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:463,percentage:.06,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:105,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:373,percentage:.05,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:134,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:148,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:777,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:20575,percentage:2.77,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1299,percentage:.18,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:130,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:284,percentage:.04,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:861,percentage:.12,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:145038,percentage:19.55,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:241,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:230,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],qj={valid:741900,rejected:15070,polled:756970,electors:923736,percent_valid:98.01,percent_rejected:1.99,percent_polled:81.95},Xj="PRESIDENTIAL-FIRST",Jj="0141",Zj="1165820463",HD={name:Kj,by_party:Yj,summary:qj,type:Xj,sequence_number:Jj,reference:Zj},Qj="Monaragala",$j=[{party_code:"IND1",votes:345,percentage:.1,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:148,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:221,percentage:.07,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1362,percentage:.41,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:505,percentage:.15,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:107,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:588,percentage:.18,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:74,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:2286,percentage:.68,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:278,percentage:.08,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:58,percentage:.02,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:287,percentage:.09,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:72,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:283,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:140269,percentage:41.86,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:150,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:122,percentage:.04,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:337,percentage:.1,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:459,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:134238,percentage:40.06,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:531,percentage:.16,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1084,percentage:.32,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:148,percentage:.04,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:156,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:307,percentage:.09,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:57,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:219,percentage:.07,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:68,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:70,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:369,percentage:.11,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:12832,percentage:3.83,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:666,percentage:.2,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:36,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:126,percentage:.04,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:294,percentage:.09,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:35728,percentage:10.66,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:89,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:113,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],ez={valid:335082,rejected:6671,polled:341753,electors:399166,percent_valid:98.05,percent_rejected:1.95,percent_polled:85.62},tz="PRESIDENTIAL-FIRST",nz="0153",az="1126481059",jD={name:Qj,by_party:$j,summary:ez,type:tz,sequence_number:nz,reference:az},rz="Kegalle",iz=[{party_code:"IND1",votes:507,percentage:.09,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:274,percentage:.05,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:480,percentage:.08,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1451,percentage:.25,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:656,percentage:.12,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:159,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:468,percentage:.08,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:116,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:4619,percentage:.81,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:343,percentage:.06,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:87,percentage:.02,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:736,percentage:.13,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:100,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:448,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:247179,percentage:43.39,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:197,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:205,percentage:.04,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:403,percentage:.07,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:544,percentage:.1,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:185930,percentage:32.64,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1056,percentage:.19,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1416,percentage:.25,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:126,percentage:.02,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:273,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:707,percentage:.12,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:77,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:191,percentage:.03,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:117,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:95,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:420,percentage:.07,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:11722,percentage:2.06,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:910,percentage:.16,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:81,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:190,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:567,percentage:.1,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:106510,percentage:18.7,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:164,percentage:.03,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:155,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],sz={valid:569679,rejected:11878,polled:581557,electors:709622,percent_valid:97.96,percent_rejected:2.04,percent_polled:81.95},oz="PRESIDENTIAL-FIRST",lz="0201",cz="1126981569",zD={name:rz,by_party:iz,summary:sz,type:oz,sequence_number:lz,reference:cz},uz="Badulla",dz=[{party_code:"IND1",votes:894,percentage:.16,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:357,percentage:.06,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:676,percentage:.12,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:3377,percentage:.59,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:809,percentage:.14,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:237,percentage:.04,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:829,percentage:.15,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:141,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:3042,percentage:.53,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:661,percentage:.12,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:122,percentage:.02,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:475,percentage:.08,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:139,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:503,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:197283,percentage:34.68,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:209,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:446,percentage:.08,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:807,percentage:.14,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:823,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:219674,percentage:38.61,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1312,percentage:.23,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1352,percentage:.24,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:194,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:360,percentage:.06,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:581,percentage:.1,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:98,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:466,percentage:.08,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:160,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:156,percentage:.03,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:460,percentage:.08,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:13869,percentage:2.44,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1298,percentage:.23,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:124,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:258,percentage:.05,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:974,percentage:.17,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:115138,percentage:20.24,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:300,percentage:.05,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:320,percentage:.06,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],fz={valid:568924,rejected:15519,polled:584443,electors:705772,percent_valid:97.34,percent_rejected:2.66,percent_polled:82.81},hz="PRESIDENTIAL-FIRST",pz="0202",mz="1187092660",GD={name:uz,by_party:dz,summary:fz,type:hz,sequence_number:pz,reference:mz},gz="Matale",vz=[{party_code:"IND1",votes:412,percentage:.12,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:181,percentage:.05,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:293,percentage:.09,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1365,percentage:.4,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:444,percentage:.13,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:111,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:418,percentage:.12,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:95,percentage:.03,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:2835,percentage:.83,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:290,percentage:.09,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:58,percentage:.02,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:418,percentage:.12,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:85,percentage:.03,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:317,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:140544,percentage:41.37,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:139,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:203,percentage:.06,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:331,percentage:.1,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:479,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:121803,percentage:35.85,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:637,percentage:.19,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1225,percentage:.36,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:117,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:198,percentage:.06,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:180,percentage:.05,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:53,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:183,percentage:.05,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:94,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:63,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:313,percentage:.09,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:10327,percentage:3.04,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:868,percentage:.26,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:53,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:110,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:397,percentage:.12,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:53829,percentage:15.84,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:128,percentage:.04,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:138,percentage:.04,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],yz={valid:339734,rejected:7921,polled:347655,electors:429991,percent_valid:97.72,percent_rejected:2.28,percent_polled:80.85},xz="PRESIDENTIAL-FIRST",Az="0185",_z="1114860365",VD={name:gz,by_party:vz,summary:yz,type:xz,sequence_number:Az,reference:_z},bz="Polonnaruwa",Sz=[{party_code:"IND1",votes:246,percentage:.09,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:93,percentage:.03,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:167,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:824,percentage:.29,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:305,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:82,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:272,percentage:.1,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:63,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:1727,percentage:.61,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:191,percentage:.07,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:39,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:195,percentage:.07,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:78,percentage:.03,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:253,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:130880,percentage:46.12,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:104,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:160,percentage:.06,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:200,percentage:.07,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:406,percentage:.14,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:100730,percentage:35.49,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:452,percentage:.16,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1040,percentage:.37,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:81,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:114,percentage:.04,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:551,percentage:.19,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:31,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:126,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:592,percentage:.21,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:46,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:229,percentage:.08,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:5594,percentage:1.97,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:507,percentage:.18,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:37,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:85,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:257,percentage:.09,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:36908,percentage:13,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:65,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:71,percentage:.03,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Ez={valid:283801,rejected:4962,polled:288763,electors:351302,percent_valid:98.28,percent_rejected:1.72,percent_polled:82.2},wz="PRESIDENTIAL-FIRST",Rz="0083",Mz="1121436054",WD={name:bz,by_party:Sz,summary:Ez,type:wz,sequence_number:Rz,reference:Mz},Tz="Kurunegala",Nz=[{party_code:"IND1",votes:743,percentage:.07,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:381,percentage:.03,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:656,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:2348,percentage:.21,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:1440,percentage:.13,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:271,percentage:.02,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:1474,percentage:.13,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:226,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:7532,percentage:.67,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:486,percentage:.04,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:113,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:1284,percentage:.11,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:215,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:863,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:544763,percentage:48.2,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:368,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:225,percentage:.02,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:630,percentage:.06,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:1236,percentage:.11,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:368290,percentage:32.58,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1723,percentage:.15,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:2719,percentage:.24,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:346,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:490,percentage:.04,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:502,percentage:.04,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:114,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:465,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:220,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:136,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:1584,percentage:.14,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:38730,percentage:3.43,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1499,percentage:.13,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:107,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:315,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:772,percentage:.07,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:146520,percentage:12.96,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:230,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:277,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Cz={valid:1130293,rejected:19337,polled:1149630,electors:1417226,percent_valid:98.32,percent_rejected:1.68,percent_polled:81.12},Iz="PRESIDENTIAL-FIRST",Dz="0200",Lz="1193158764",KD={name:Tz,by_party:Nz,summary:Cz,type:Iz,sequence_number:Dz,reference:Lz},Pz="Anuradhapura",Oz=[{party_code:"IND1",votes:508,percentage:.08,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:259,percentage:.04,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:387,percentage:.06,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1991,percentage:.33,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:825,percentage:.14,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:204,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:756,percentage:.13,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:99,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:3696,percentage:.61,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:372,percentage:.06,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:74,percentage:.01,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:480,percentage:.08,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:124,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:570,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:285944,percentage:47.37,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:248,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:155,percentage:.03,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:353,percentage:.06,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:754,percentage:.12,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:202289,percentage:33.51,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:880,percentage:.15,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:1770,percentage:.29,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:186,percentage:.03,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:226,percentage:.04,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:285,percentage:.05,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:69,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:256,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:106,percentage:.02,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:81,percentage:.01,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:575,percentage:.1,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:15029,percentage:2.49,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:958,percentage:.16,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:68,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:168,percentage:.03,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:508,percentage:.08,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:82152,percentage:13.61,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:141,percentage:.02,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:140,percentage:.02,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],Uz={valid:603686,rejected:9782,polled:613468,electors:741862,percent_valid:98.41,percent_rejected:1.59,percent_polled:82.69},Bz="PRESIDENTIAL-FIRST",Fz="0147",kz="1175904262",YD={name:Pz,by_party:Oz,summary:Uz,type:Bz,sequence_number:Fz,reference:kz},Hz="Nuwara-Eliya",jz=[{party_code:"IND1",votes:651,percentage:.14,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:333,percentage:.07,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:616,percentage:.13,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:3614,percentage:.76,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:537,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:292,percentage:.06,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:579,percentage:.12,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:111,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:2003,percentage:.42,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:616,percentage:.13,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:228,percentage:.05,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:352,percentage:.07,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:144,percentage:.03,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:398,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:105057,percentage:22.17,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:185,percentage:.04,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:793,percentage:.17,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:786,percentage:.17,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:765,percentage:.16,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:201814,percentage:42.58,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1059,percentage:.22,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:828,percentage:.17,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:106,percentage:.02,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:240,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:246,percentage:.05,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:92,percentage:.02,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:431,percentage:.09,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:155,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:106,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:369,percentage:.08,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:8821,percentage:1.86,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:904,percentage:.19,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:126,percentage:.03,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:278,percentage:.06,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:1102,percentage:.23,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:138619,percentage:29.25,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:363,percentage:.08,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:216,percentage:.05,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],zz={valid:473935,rejected:14643,polled:488578,electors:605292,percent_valid:97,percent_rejected:3,percent_polled:80.72},Gz="PRESIDENTIAL-FIRST",Vz="0193",Wz="1158704268",qD={name:Hz,by_party:jz,summary:zz,type:Gz,sequence_number:Vz,reference:Wz},Kz="Vavuniya",Yz=[{party_code:"IND1",votes:168,percentage:.2,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:81,percentage:.09,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:125,percentage:.15,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:1105,percentage:1.29,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:103,percentage:.12,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:33,percentage:.04,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:174,percentage:.2,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:32,percentage:.04,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:146,percentage:.17,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:147,percentage:.17,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:29,percentage:.03,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:53,percentage:.06,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:27,percentage:.03,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:73,percentage:.09,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:11591,percentage:13.51,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:65,percentage:.08,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:11650,percentage:13.58,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:139,percentage:.16,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:146,percentage:.17,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:33731,percentage:39.31,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:232,percentage:.27,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:187,percentage:.22,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:50,percentage:.06,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:44,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:113,percentage:.13,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:40,percentage:.05,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:85,percentage:.1,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:37,percentage:.04,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:30,percentage:.03,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:59,percentage:.07,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:671,percentage:.78,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:251,percentage:.29,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:17,percentage:.02,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:58,percentage:.07,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:179,percentage:.21,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:24018,percentage:27.99,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:57,percentage:.07,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:62,percentage:.07,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],qz={valid:85808,rejected:3395,polled:89203,electors:122860,percent_valid:96.19,percent_rejected:3.81,percent_polled:72.61},Xz="PRESIDENTIAL-FIRST",Jz="0053",Zz="10860325458",XD={name:Kz,by_party:Yz,summary:qz,type:Xz,sequence_number:Jz,reference:Zz},Qz="Kandy",$z=[{party_code:"IND1",votes:837,percentage:.09,party_name:"Independent Candidate 1",candidate:"AKMEEMANA DAYARATHANA THERO"},{party_code:"DUA",votes:487,percentage:.05,party_name:"Democratic Unity Alliance",candidate:"ABUBAKAR MOHAMED INFAS"},{party_code:"IND2",votes:731,percentage:.08,party_name:"Independent Candidate 2",candidate:"SIRIPALA AMARASINGHE"},{party_code:"IND4",votes:3278,percentage:.35,party_name:"Independent Candidate 4",candidate:"K.K. PIYADASA"},{party_code:"IND5",votes:1010,percentage:.11,party_name:"Independent Candidate 5",candidate:"SARATH KEERTHIRATHNA"},{party_code:"IND6",votes:275,percentage:.03,party_name:"Independent Candidate 6",candidate:"K.A. KULARATNA"},{party_code:"APP",votes:754,percentage:.08,party_name:"Arunalu Peoples Alliance",candidate:"K.R. KRISHAN"},{party_code:"IND7",votes:162,percentage:.02,party_name:"Independent Candidate 7",candidate:"PALLIMULLA KAPUGAMAGE ANURA SIDNEY JAYARATHNA"},{party_code:"SLCP",votes:9098,percentage:.97,party_name:"Communist Party of Sri Lanka ",candidate:"DILITH JAYAWEERA"},{party_code:"USP",votes:594,percentage:.06,party_name:"United Socialist Party",candidate:"SIRITUNGA JAYASURIYA"},{party_code:"IND8",votes:161,percentage:.02,party_name:"Independent Candidate 8",candidate:"MYLVAGANAM THILAKARAJAH"},{party_code:"DUNF",votes:1176,percentage:.13,party_name:"Democratic United National Front",candidate:"AGAMPODI PRASANGA SURANJEEWA ANOJ DE SILVA"},{party_code:"UNFF",votes:232,percentage:.02,party_name:"United National Freedom Front",candidate:"LALITH DE SILVA"},{party_code:"RJA",votes:715,percentage:.08,party_name:"Ruhunu Janatha Alliance",candidate:"AJANTHA DE ZOYSA"},{party_code:"NPP",votes:394534,percentage:42.26,party_name:"Jathika Jana Balawegaya",candidate:"ANURA KUMARA DISSANAYAKE"},{party_code:"SLSP",votes:319,percentage:.03,party_name:"Socialist Party of Sri Lanka",candidate:"MAHINDA DEWAGE"},{party_code:"IND9",votes:433,percentage:.05,party_name:"Independent Candidate 9",candidate:"ARIYANETHIRAN PAKKIYASELVAM"},{party_code:"IND10",votes:764,percentage:.08,party_name:"Independent Candidate 10",candidate:"VICTOR PERERA"},{party_code:"IND11",votes:1074,percentage:.12,party_name:"Independent Candidate 11",candidate:"ANURUDDHA POLGAMPALA"},{party_code:"SJB",votes:323998,percentage:34.71,party_name:"Samagi Jana Balawegaya",candidate:"SAJITH PREMADASA"},{party_code:"IND12",votes:1584,percentage:.17,party_name:"Independent Candidate 12",candidate:"SARATH FONSEKA"},{party_code:"IND13",votes:2365,percentage:.25,party_name:"Independent Candidate 13",candidate:"DISSANAYAKA MUDIYANSELAGE BANDARANAYAKE"},{party_code:"NDF",votes:233,percentage:.02,party_name:"Jathika Sangwardhena Peramuna",candidate:"SARATH BANDARANAYAKE"},{party_code:"JSP",votes:497,percentage:.05,party_name:"Jana Setha Peramuna",candidate:"BATHTHARAMULLE SEELARATHANA THERO"},{party_code:"SPF",votes:546,percentage:.06,party_name:"Socialist People Forum",candidate:"NUWAN BOPEGE"},{party_code:"NSU",votes:140,percentage:.01,party_name:"Nawa Sihala Urumaya",candidate:"SARATH MANAMENDRA"},{party_code:"IND14",votes:384,percentage:.04,party_name:"Independent Candidate 14",candidate:"PEMASIRI MANAGE"},{party_code:"IND15",votes:265,percentage:.03,party_name:"Independent Candidate 15",candidate:"ANURUDDHA ROSHAN RANASINGHE"},{party_code:"ELPP",votes:160,percentage:.02,party_name:"Eksath Lanka Podujana Pakshaya",candidate:"JANAKA RATNAYAKE"},{party_code:"SBP",votes:699,percentage:.07,party_name:"Samabima Party",candidate:"NAMAL RAJAPAKSHA"},{party_code:"SLPP",votes:19403,percentage:2.08,party_name:"Sri Lanka Podujana Peramuna",candidate:"NAMAL RAJAPAKSA"},{party_code:"JPF",votes:1668,percentage:.18,party_name:"National Democratic Front",candidate:"WIJEYADASA RAJAPAKSHE"},{party_code:"SLLP",votes:111,percentage:.01,party_name:"Sri Lanka Labour Party",candidate:"A.S.P. LIYANAGE"},{party_code:"AJP",votes:432,percentage:.05,party_name:"Ape Janabala Pakshaya",candidate:"KEERTHIE WICKRAMARATNE"},{party_code:"NSSP",votes:999,percentage:.11,party_name:"Nawa Sama Samaja Party",candidate:"PRIYANTHA WICKRAMASINGHE"},{party_code:"IND16",votes:162707,percentage:17.43,party_name:"Independent Candidate 16",candidate:"RANIL WICKREMESINGHE"},{party_code:"SEP",votes:354,percentage:.04,party_name:"Socialist Equality Party",candidate:"PANI WIJESIRIWARDENA"},{party_code:"NIF",votes:337,percentage:.04,party_name:"New Independent Front",candidate:"OSHALA HERATH"}],e9={valid:933516,rejected:24153,polled:957669,electors:1191399,percent_valid:97.48,percent_rejected:2.52,percent_polled:80.38},t9="PRESIDENTIAL-FIRST",n9="0204",a9="1160825461",JD={name:Qz,by_party:$z,summary:e9,type:t9,sequence_number:n9,reference:a9},r9={Trincomalee:RD,Mullaithivu:MD,Jaffna:TD,Kilinochchi:ND,Mannar:CD,Puttalam:ID,Gampaha:DD,Colombo:LD,Kalutara:PD,Galle:OD,Matara:UD,Hambantota:BD,Ampara:FD,Batticaloa:kD,Rathnapura:HD,Moneragala:jD,Kegalle:zD,Badulla:GD,Matale:VD,Polonnaruwa:WD,Kurunegala:KD,Anuradhapura:YD,NuwaraEliya:qD,Vavuniya:XD,Kandy:JD};function i9(){const[a,e]=H.useState(""),t=n=>{const r=r9[n];e(r)};return x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 1000 1000",width:"1000",height:"1000",children:x.jsxs("g",{id:"features",stroke:"#ffffff","stroke-width":".5",children:[x.jsx("path",{d:"M534.5 241.9l0.1 3.6 2.7 2-2.4 2.3-2.2 2.6 3.6 2.8 3.9-0.3 3.2-2.9 2.4-4.2 1.5-3.9 0.1 0.1 8.3 10.1 7.4 12.7 3 3.1 4.2 1.3 3.4 2.7 5 12.1 1.2 1.3 1.3 1.4 0.1 0 5.6 2.6 2.9 6 3.2 12.2 0.6-2.2 0.7-0.9 1.3 0.3 2.2 1.2-0.6 2.3 6.4 7 2.1 3.5 0 4.2-1.7 1.7-2.4 1.1-2.2 2.5 0.1 0 1.6-0.4 1.8-0.5 0.4-0.2 0.8-0.5 0.1 0.1 5 10.9 0.7 5.6-5.7 1-0.1 0 1.2-3.8-1.5-3-2.6-0.4-1.8 4 0.6 3.1 1.7 2.2 0.9 2.4-1.7 3.5-1.4-1-2.5-1.9-4-2.5-4-1-3.9 1.7-3 4 1.1 2.1 3.6-0.5 4.8-4 3.3 3.5 2.9 4.2 3.6 3.5 5.1 1.5 10.6-0.2 3.6-2.3-2.4-5.4 6.1-2.8 2.4-0.8 2.5 0.2 0.1 0 2.8 1.6 2.5 2.8 1.9 3.2 1.7 9.3 3.6 12 0.1 3.1 0.1 3.2-2.9-2.1-3.1-6.2-2.7-1.3-0.1 1.7 1.1 7.6 0.1 0.5 1.3 2.9 1.5 0.8 1.4 0.6 0.1 0 3.1 0 2.4 1.2 1.5 8.9 1.8 6.2 0.3 1 0.5 3.8-20.7-2.2-3.9 1.3-3.5 0-2.9 0-2.1 2.3-1.5 2.8-1.8 1.3-1.6 1.4-1.4 6.1-1.2 2.2-3.3 7.6-5.7 1.4-1.2-0.4-0.9-0.7 2.7-1.7 1.2-2.9-0.8-4.4 0.1-3-0.3-2.9-1.7-2.4-2.9 0.3-4.1-2.1-3.7-2.9-3.8-2.2-4.1 0-17.5-4.3-9.7 1-2.9-2.9-0.9-4.9-3.6-2.7-3.7-1.5-2.7-4-3.5 1 5-17.9 0.6-2.9 0.9-2.8 2.9-2.8 3.2-2.2 1.9-3.4-1.5-3.6-2.7-2-2-2.7-3.3-7.7-6.1-9.1-0.9-5.6-2.5-2.4-1.9-2.2-0.2-4.8 3.5-8.3-1.7-4.9-4.3-9.4-0.1-10 3.9-5.8 2.7-6-2.2-1.7-1.9-2.5-3.5-3.9-10.1-7-5.8-3.4-6.8-0.1-6.5 2.6 1-4 1.9-3.4 9.1-4.2 10.6-1.4 4.5-1.3 4-2.3 4.4-1.3 3.6-1.6z",name:"Trincomalee",onClick:()=>t("Trincomalee")}),x.jsx("path",{d:"M534.5 241.9l-3.6 1.6-4.4 1.3-4 2.3-4.5 1.3-10.6 1.4-9.1 4.2 4.3-15.8-2.8-3.7-7.4-4.5-7.2-1.1-3.4 2.3-3.6 0.9 0.4-3.2 2.2-3.3-2.7-4.7-6.2-0.7-0.8-7.5-7.2-2.7-7.5 0.2-0.5 1.1-0.4 1.2-2.2 1.3-2.3 1.1-4 3.5-5.6 2.5-3.6-5.3-5.7-3.6-8 0.2-4.4-0.3-4.2 0.4-0.6 3.4 1.8 2.5 3.4 0.5 0.2 1.9 0 2.1 0.9 4 0.2 3.9-4.1 6.3-6.4 5.2-10.7 6.8-38.1 2 3-8.4-1.1-1.6-1.1-2.1 0.8-2.7 1.2-2.6 0.8-2.6 1-2.3 5.1-1.7 0.3-4.8-0.5-5.5 0.9-3.4 0.1-3.5-0.2-1.8-0.5-1.6-4.2-6.8-1.4-7.6-0.3-8 6.1 0.8-0.6-6.5 6-7.9 17.7-2 6.3-0.1 6.2 1.1 6.1-0.6 4-10.1 3.1-0.1 10.5 0.6 5.8-0.4 3.9-2.1 3.2-10.6 1.1-0.3 1.7 2.2 4.6 3.8 5.2 2.9-0.6-5.3 0.7-5.3 4.9-3.9 0.5-3.9 1.1-1.1 1.2-0.8 1.4-1.2 27.3 22.2 0.2 0.4 1.7 2.7 2.5 3.3 5 4.7 3.1 4-2.7 1.5-0.1 0-1.5-0.7-0.2-0.1-0.1 0-2.4-3.1-1.3-0.7-4.2-0.7-1.8 0.5 0.9 1.9 0.3 0.6 11.9 11.2 4.7 2.6-1.8-2.9-1.1-2.7 0.5-1.9 3.2-0.8 1.5 1 2.5 7.3 2.2 4.4 8.8 17.6-1.8-0.6-4.9-1.9-3 0-1.3 3.3 1.8 0.8 3.7 0.7 3.4 2.1 0 0.3 0.5 5 1.6 0 0.7-1.3 0.7-0.6 0.8-0.4 1.1-0.7 1.1 4.6 0.2 0.6 3.2 7.5 4.4 6.7 4.5 2.9 0.3 0.3 0.5 0.4 0 1.7-1.1 1.6-2.1 0.8-0.6-0.7-2.6-4.1-2.7-1.5-6.3-1.6-3.7-1.7 1.7 2.4 0.9 1.3 8.3 7.8 0 0.8z",name:"Mulaithivu",onClick:()=>t("Mullaithivu")}),x.jsx("path",{d:"M466.1 133.1l-1.4 1.2-1.2 0.8-15.7-10.8-5.4-2.5-4.8-1.1-0.7-0.3-0.7-0.3-4.1-3.2-1.6-0.9-1.6-0.3-1.9 0.1-0.4-2.3-3-9 0.6 0.3 0-1.8-8.4-4.2-20.3-16.7-16.6-19.2-8.4-4.6-13.2-3.1-3.5-2.5-0.5-3.6 4.9-2.1 1.5-0.3 4.8-0.8 9.6-0.4 4.6 0.8 3.2 2.3 2.1 7.6 2.1 3.2 30.2 35.7 4.4 3.2 9 5.2 36.4 29.6z m-85.3-37.6l-11.8-5.2-4.3-2.5-2.9 0 0.6 5.7 1.6 1.6 2.4 1.9 1.5 2.3-1.5 3-1.7 0.6-1.7-1-1.5-1.3-4.5-2.3-8.6-7.5-4.9-2.1 2.5 2.8 4.5 3.9 2.6 2.8-5.6-1-5.5-2.3-11.1-6.2-8.9-7-5.2-1.9-0.5-0.3-2-1.3-1.9-0.8-0.3 1.7-2.5-1.7-1-2.3-0.4-2.7-0.9-3-1.5-2.6-0.9-1.2-2.4-3.1-1.5-2.7 5-2.5 9.1-8.5 4-1.8 0.1 0 18 1.6 9.4-1.1 3.4 0.4 1.4 3.2-0.3 4.9 0.7 1.7 2 0.6 1.9 0.3 5.5 1.4 1.2 0.7 1 2 2.5-0.1 1.9-0.6 0.8-0.2 1.1-0.2 0.8-0.1 1.8 1.1 0.8 0.4 6.4 7.1 9.3 10.1 0 0.1-3.1 6.7-4.9 8.5z m-121 27l-1.9 1.7-1.9 1.8-5.8 0.4-5.4-1.8-2.3-3 0-9.6 0.6-2.4 1.6 0.3 1.5 2 1 2.4 4 1.3 4.7 0.4 1.2 0.8 2.7 5.7z m38-27.4l-3.6-2.6-3.5-5.4-5.6-11.2 2.5-4 0.6-5.1 1.5-4.2 5-1.1 2.6 0.8 0.1 0 0.2 2-0.9 2.8-0.6 3.1 0.1 3.2 0.3 2.6 0 0.2 0.2 0.5 0.8 1.8 1.1 1.2 0.8 1 1 0.2 4.5-0.2 0.7 0.7 0.3 3.5 0.6 1.4 2.6 1.7 3.6 1.5 3 1.7 0.2 0.6 0.8 1.7-1.6 1.6-3 0-3.3-1-2.3-1.4-1.6-0.4-4.2 2.4-2.9 0.4z",name:"Jaffna",onClick:()=>t("Jaffna")}),x.jsx("path",{d:"M423.6 104.5l3 9 0.4 2.3-2.8 0.2-1.8 0.7-0.3 0.4-0.5 0.8-0.9 0.5-3.1-2.3-1.2-0.2-7.5 0.2-2.1-0.6-16.4-14.3-7-4.6-0.1 0-2.5-1.1 4.9-8.5 3.1-6.7 0-0.1 11 12.1 7.2 4.5 16.6 7.7z m39.9 30.6l-1.1 1.1-0.5 3.9-4.9 3.9-0.7 5.3 0.6 5.3-5.2-2.9-4.6-3.8-1.7-2.2-1.1 0.3-3.2 10.6-3.9 2.1-5.8 0.4-10.5-0.6-3.1 0.1-4 10.1-6.1 0.6-6.2-1.1-6.3 0.1-17.7 2-6 7.9 0.6 6.5-6.1-0.8-4.4 3.3-4.9 2.5-7.9 0.7-1.7 0 1.4-5.7 0-13.6 0.5-2-0.4-1.3-2.7-0.5-6.4-3.3-2.4-2.4-1.6-4.4-0.3-0.8-1.1-5.4-0.1-3.1 2.8-3 5.1-2.5 5.6-1.8 4.7-0.7 2.1-1.1 5-6.7 0.6-0.5 0.9-0.7 1.7-1 2.1-0.8 2.6-0.4-2.2-4-1.3-1.8-1.3-1.8-3.4-3.4-4.5-3.4-17-10-3.5-4.3 7.4 0.2 7.1 2.9 13.9 8.1 13.2 3.3 3.5 2.3 5.5 4.8 1.3 2.5-2.8 1.4 0.6 1.6 0.8 1.6-1.4 1.6 4.8 3.3 11.4-2.8 20.8-8.3 5.7 0.5 12.2 3.4 14.5 6.6 11 2.1z",name:"Kilinochchi",onClick:()=>t("Kilinochchi")}),x.jsx("path",{d:"M366 183.9l0.3 8 1.4 7.6 4.2 6.8 0.5 1.6 0.2 1.8-0.1 3.5-0.9 3.4 0.5 5.5-0.3 4.8-5.1 1.7-1 2.3-0.8 2.6-1.2 2.6-0.8 2.7 1.1 2.1 1.1 1.6-3 8.4 38.1-2 6.2 2.9 3.6 5.7 3.5 9-1.2 8.1-12.3 4.6-13 1.6-8.4-0.9-6.4 3.6-3.5 7.8-5.9 0.6-0.9 3.5 0 3 5.4 4.2 8.8 11.3-22.5 5.9-11.3-0.1-10.2-4.2 1.8 13.7-0.5 21.6-2.2-0.3-1.9-0.9-6.2-3.5-5.9-2.5-6.8-0.6-6.1-2.3-2.6-1.6 0.9-0.9 0.3-1.2 2.3-7.1 0.3-0.3 0.2-0.2 0.5-2 2.2-4.7 2-22.7-5.5-14.5 0.4-2.5 0.4-16.5 0-0.2-0.5-5.6-0.7-2.7-1.2-2-1-2.4 2.2-1.1 3.1-0.6 2-0.6 13.4-12.1 7-3.5 2.9-2.5 1.5-5.7 2.8-5.9 1.5-8.1 7.5-19.2 0.2-1.1 0.7-2.8 1.7 0 7.9-0.7 4.9-2.5 4.4-3.3z m-110.1 37.7l-2.6-1-1.1-2.2 0.7-2.3 3-1 10.3 0 4.6 1.2 4.7 1.2 9.8 3.8 9.4 5.4 7.9 7.7-0.1 0-3.7-0.8-6.7-3.3-3.9-0.7 6 6.8 4.7 5.4 2.1 3.7-5.5-0.7-3.6-2.8-2.5-3-1.9-1.4-2.3-1.2-9.5-8.5-4.7-2.1-4.8-2.2-3.4-0.9-1.8-0.5-5.1-0.6z",name:"Mannar",onClick:()=>t("Mannar")}),x.jsx("path",{d:"M301.7 339.1l2.6 1.6 6.1 2.3 6.8 0.6 5.9 2.5 6.2 3.5 1.3 9.6-4.2 8.9-7.2 5.9-0.3 1.7-1 2.1-3.9 1.8-2.6 5.7 3.4 6.6 5.8 23.4 1.4 4.2 4.8 0 3.9-1.8 4.1 3.1 4.7-0.2 3.4 2.8 2.5 3.3 0.5 4.4-0.1 4.7 2.4 9.2 0.8 4.6 2.2 4.1 3.2 1.1 2.7 1.8-0.6 2.8-0.9 3 0.2 6.3-0.2 5.3-1.7 2.6-1.4 2.7 2.8 5.2-2.9 2.2-4.8-2.7-1.3 2.3-0.1 2.8-1.8 1.9-1.4 0.4 0.2-0.4 0.2-0.4-3.4 1.6-1.4 3.2-0.4 2.4-0.9 2.1-4.9 2.5-1.1 2.4-0.6 2.5-2.8 1.9-3 1.6-0.9 2.5-0.4 2.8-2.2 5.6-0.7 6.2 1.2 2.6 0.9 2.4-1.6 2.2-2.5 1-3.3 0.3-3 0.9-1.6 2.7-1.1 3 2.8 0.7 1.3 2.2-2.8 1.5-3.3 0.8-1.6 2.3-0.9 2.7-3.5 5.9-2.5 6.4-0.4 8 0.4 8 8.5 45.8 0.6 13.8-4-1.6-3.4 2.2-2.7-0.4-1.8-2-4.5 0.6-4.3 1.1-5.5-0.2-9.9-73-1.4-3 0.9-1 0.7-0.1 1.7 1.1 0.4-4 1.1-4.7 0.3-2.2 0.3-2.3-1.3-3.5-1.8-3.2-0.3-2.1-0.3-2.1 0-8.6-5.3-26.1-0.7-3-2.7-5.7-2.3-12.1-3.8-9.5-5.8-26.2 0-7.5 1 0.5 0.1 0.1 0 0.2 0.5 0.8 0.8-4.3-1.2-13.8-1.2-4.1 3.8-2.5 3.6-4.7 2.6-5.3 1-4.4 1.1-2.9 6.8-10.8-0.1 0.2-3.4 8.2-4.4 7.7 1 1.9 0.2 0.4 1.7 1.8 2.2 0.8 2.8 0-2.3 6.4-2.3 4.6-1 0.8-1.1 0.1-0.8 0.7-0.4 2.4 0.2 5.6-0.2 1.7-3.9 12.4 0.2 2.4 0.3 4.6 4 4.8 1.1 1.3-4.6 9.7 7.4 5.4 10.7 0.8 5.4-3.9-1-4.1-1.8-3.2-0.6-1.3-0.9-1-2-2.6-2.3-1.5-0.7-2.5 7.8-14.8-0.3-2.7-1-2-1.2-1.7-0.7-1.7-0.2-2.8 0.3-4.9-0.1-1.9 0-0.1-0.1-0.4-0.6-1.6-0.4-0.4-0.5-0.4-0.4-1 0.4-2.6 1.1-2.2 3-3.9 0.7-2.6 0.5-4.9 2.1-9.7 2.2-22.8 1.4-2.6 1.5-1.3 1.2-1.5 0.5-3.4 0-9.7 1.3-4.8 3.1-3 3.8-2.6 2.1-2.3z",name:"Puttalam",onClick:()=>t("Puttalam")}),x.jsx("path",{d:"M282.1 640.8l5.5 0.2 4.3-1.1 4.5-0.6 1.8 2 2.7 0.4 3.4-2.2 4 1.6 4.9-1.9 8.8-6.9 5.5-0.2 6.4 4.4 6.6-1.9 5.7-4 6.4-1.2 2.1 2.3 0.6 2 1.4 1.9 5.7 6.6 4 2.9 0.4 3.1-2.3 1.8-0.6 8-3 2.8-3.6 1.9-1 6.6 2.8 5.8 5.6-1.3 4.9 1.4-1.7 3.9-3.4 2.4-2.9 6.7-1.2 6.8 3.4 11 0.1 2.1-0.7 1.9-4.2 1.5-6.2-0.6-4.6 2.1-3.7 3.6-0.9 4.4-0.3 4.5-4.9 0.3-4.1-0.5-2.7-1.1-2.6-1.4-2.7-2.5-3.1-1.9-3.9 0.2-4 0.8-11.5-3.3-2.1 0.8-1.8 1-4.1-1-3.8-2-4.9-1.9 2.3-5.5 0.6-2.6-0.1-2.7 0-0.1-11-39.2 1.5-5.8-0.1 3.6 0.9 2.2 1.2 1.7 1.1 2.1 2.2 7.7 1.1 1.9 1.4 0 0.4-2.2 0.6-0.9 0.6-0.2 0.2 0.1-0.1-7.1-0.5-3.1-1.2-2.6-1.1-0.7-3-0.7-1.3-0.9-0.2-0.3-0.8-1.7 0.4-1.9 0.8-1.7 0.5-1.6-1.4-10z",name:"Gampaha",onClick:()=>t("Gampaha")}),x.jsx("path",{d:"M287.1 713l4.9 1.9 3.8 2 4.1 1 1.8-1 2.1-0.8 11.5 3.3 4-0.8 3.9-0.2 3.1 1.9 2.7 2.5 2.6 1.4 2.7 1.1 4.1 0.5 4.9-0.3 0.3-4.5 0.9-4.4 3.7-3.6 4.6-2.1 6.2 0.6 4.2-1.5 5 0.4 4 2 0.7 4.2-3.1 2.9 0.3 2.2 0.1 2.3-2.9 3.6-2.5 4-1 3.2-1.2 2.8 5.7 6-5.1 4.6-6.7-1.6-7.5 3.2 1.5 6.7-4.5-1.2-3-6.9-1.2-0.7-1.5-0.3-2.8 3.3-3.6 1.8-2.5-1.1-2.6 0.3-8.9 7.6-2.5 1.1-2.7 0.7-6.7 2.5-10.6-6.7-0.3 3.9 1.4 4.3 0.7 3 0.1 2.9-0.1 0.1-0.4 0.6-8.6-22.1-3.1-17.5-0.3-1.7 0-16.7 0.3-0.7z",name:"Colombo",onClick:()=>t("Colombo")}),x.jsx("path",{d:"M298.8 771.7l0.4-0.6 0.1-0.1-0.1-2.9-0.7-3-1.4-4.3 0.3-3.9 10.6 6.7 6.7-2.5 2.7-0.7 2.5-1.1 8.9-7.6 2.6-0.3 2.5 1.1 3.6-1.8 2.8-3.3 1.5 0.3 1.2 0.7 3 6.9 4.5 1.2-1.5-6.7 7.5-3.2 6.7 1.6 0.8 4.7 4 10.7-0.3 3.7 1.4 4.4 2.3 4.6 7 6.8 1.4 6.8 2.5 2.4 3.2 1.2 5.2 4.7 3.3 6.4-3.5 1.4 1.3 3.9 9.7 13.7 8.3 14.5-8.2 1.9-8 5-4.3 1.9 0 4.9 1.7 5.1-0.4 4.6-3.6-2.8-3.6-3.5-6.8-5.2-7 0.6-6.3 3.5-9.9-1.9-3.9-2.6-3.7-3.2-4.6-2-4.2-0.9-8.4-3.9-1.2-2-1.7-1.6-2.3 0.9-1.5 1-1.4-1.2-1.2-1.7-1.6-0.4-1-4-0.5-0.4-1-0.6-1-0.9-0.6-1.2 0.2-1.4 1.1-0.3 1.2 0.1 0.6 0-1.8-12.2-0.1-1-4.8-12.3-11.2-28.7z",name:"Kalutara",onClick:()=>t("Kalutara")}),x.jsx("path",{d:"M317.7 834.6l1.6 0.4 1.2 1.7 1.4 1.2 1.5-1 2.3-0.9 1.7 1.6 1.2 2 8.4 3.9 4.2 0.9 4.6 2 3.7 3.2 3.9 2.6 9.9 1.9 6.3-3.5 7-0.6 6.8 5.2 3.6 3.5 3.6 2.8 0.4-4.6-1.7-5.1 0-4.9 4.3-1.9 8-5 8.2-1.9 2.8 2.9 3.2 2.7 3.9 1.6 3.4 0.1 7.2 3.5 3.7-0.1 2 2.9-4.8 1.4-3.1 3.1 2.7 4.2 3.6 3.5-1.4 6.6-7.1-1.6-4.4-4.2-4.9-3.6-3.8-1.2-3.7 1 2.3 4.3 4.6 2.9 4.8 7 1.8 6.6-4.1 5-8.1-1.4 2.4 2.8 1.1 3.8-1.6 4.8-2.1 4.5 1.5 4.5 3.5 3.4 4.1 2.8 3.7 3.3-3.2 3.7-3.6 3.7-3.2 1.3-1.4 2.2 0.7 2.4 1.8 1 4.1 1.7-1.4 2.8-4.2 1.5-2.5 4.5 0 2.6 0.4 2.4 0.1 0.3-1.5-0.3-1.1-0.5-0.8-1-1-1.1-1.8-0.5-1 0.3-0.9 0.8-0.9 0.6-1.2 0-0.4-0.3-0.4-0.4-1.4-2-0.8-0.5-0.1-0.1-1.7-0.6-9.8-3.5-4.1-0.9-2.8-0.6-5-4-1.2-0.5-2.2-1.1-1.7 1.7-4.3-3.5-18.8-19.9-1.5-1.2-0.2-0.2-0.5-0.7-0.3-0.9 0.1-2-0.6-1-0.8-1.1-2.1-2.7-10.6-22.5-0.5-2.1 0.1-2 0-1.9-0.4-1.2-1.9-4-1.9-10.8-4.3-7.6-2.6-10.9z",name:"Galle",onClick:()=>t("Galle")}),x.jsx("path",{d:"M410.6 945.3l-0.1-0.3-0.4-2.4 0-2.6 2.5-4.5 4.2-1.5 1.4-2.8-4.1-1.7-1.8-1-0.7-2.4 1.4-2.2 3.2-1.3 3.6-3.7 3.2-3.7-3.7-3.3-4.1-2.8-3.5-3.4-1.5-4.5 2.1-4.5 1.6-4.8-1.1-3.8-2.4-2.8 8.1 1.4 4.1-5-1.8-6.6-4.8-7-4.6-2.9-2.3-4.3 3.7-1 3.8 1.2 4.9 3.6 4.4 4.2 7.1 1.6 1.4-6.6-3.6-3.5-2.7-4.2 3.1-3.1 4.8-1.4 4.5-0.7 4.5-1 1.6-3.8 3.9 0 10.2-1.4 3.3 6.2-1.5 4.1 4.1 0.7 5.5-0.9 2.6 3.2-0.2 2.2 3 2.2-1.2 1.2 0 2.2-2.2 0.9 0.4 1.7-1.6 4.1 1.6 3.7-8.9 6.7-2.8 9.9 4 2.9 4.4 1.6 2-0.3 1.3 1.2-1.1 2.4-1.4 2.1 0.8 4 3.8 2 2.7-0.4 2.5 0.5-0.8 2-2.1 2 2.5 8.9-7.5 3.2 0.6 3.7 3.2 2.1 2.2 0.2 2 1.1-0.1 1.9-1.7 0.9 2.8 4.2 5.8 2.7 1.3 0.7-3.5 4.1-9.5-0.5-3.9 0.5-3.1 1.2-3.2 1.8-5.6 4.2-1.6 0.4-1.6 0.3-3.8-1.4-4.1-2.1-2.3-0.7-1.6-0.5-13.4 1.6-3.8-0.8-1.9-1.9-1.2-2.5-1-1.5-0.7-1.1-3.9 2.3-3.5 0.3-6.2-0.9z",name:"Matara",onClick:()=>t("Matara")}),x.jsx("path",{d:"M490 942.5l-1.3-0.7-5.8-2.7-2.8-4.2 1.7-0.9 0.1-1.9-2-1.1-2.2-0.2-3.2-2.1-0.6-3.7 7.5-3.2-2.5-8.9 2.1-2 0.8-2-2.5-0.5-2.7 0.4-3.8-2-0.8-4 1.4-2.1 1.1-2.4-1.3-1.2-2 0.3-4.4-1.6-4-2.9 2.8-9.9 8.9-6.7-1.6-3.7 1.6-4.1-0.4-1.7 2.2-0.9 13.1 2.6 16.9 6.1 4.5 0.7 4.4-1.1 4.4-0.4 3.5 2.8 2.7 3.1 8.4 1.7 4.9 1.6 1.1-4.1-2.1-5.9-4.3-4.7 5.7-3.7 5.8-3.2 6.5-2.1 5-3.8-2.2-5.2 1.1-5.2 2.9 0 3.2-0.3 1.9-2.6-0.1-3.1 2.9 2 2.1-2.5 5.8 0 5.8 0.7 3.9 1.4 1.7 4.2 2.3 0.4 2.5-0.1 2.1-1.5 2.9-0.4 4.3 5.7 3.6 6 5.7 2.4 6.3-3.5 2.3-2.3 3.5-1.4 6.7-1.8 13.7-5.3 2.6-1.8 0.5 0.6 2.1 0.3 6.1-2.2 6.4 1.4 3-4.9 0-2-0.1-1.9 1-1.4 1-1.7-1.1-3.1-0.1-3.9 4.5-3.7 5.5-2.4 4.2-4.1 4.9-3.7 6.2-1.1 4.1-4.9 6.9 8.5 2.6 0.2 3 0.4 3.8 4.4 5.6 1.8 2.1 0.6-7.1 11.2-7.2 7.3-13.4 9.5-4.4 1.3-5.8 3.1-42.8 33.7-8.6 4.7-27.8 9.8-0.4-3.3 0-0.2-1.6-1.3-0.1 0-0.3 0.1-1.4 0.4-0.9 1.8-0.5 3.9-1.2 1.5-2 0.6-2.7 1.1-5 3.1-5 2.2-24 5.1-11.7 4-12.7 2.4-5.8 2.2-3.5 4.9-6.3-1.2-3.8 1.5-2.2 0.8-8.9 6.6-8.8 6.6-0.6 0.6z",name:"Hambantota",onClick:()=>t("Hambantota")}),x.jsx("path",{d:"M716.5 818.5l-2.1-0.6-5.6-1.8-3.8-4.4-3-0.4-2.6-0.2-6.9-8.5 6-85.1-1.2-4.6-2.7-4 0-4.5-1.6-4.4 1-4.6 0.5-4.4-6.8-4.1-8.2-2.1-1.2-1.1-1.5-0.8-1.7 0-1.8-0.8-1.8-3.2-1-3.6-2.9-5.5 2.7-7.2 4.8-5.7 3.7-2.9-5-7-0.7-5-3.2-5.6-5.1-4.4-0.9-4.5 0.3-5.6-2.7-12.2 0.4-3.1-1.5-0.3-1.4-0.9 3.4-5.3-4.6-1.2-5.7 3.1-2.8 1-2.6 1.1-0.8 2.2-1.6 2.5-3.2 0.8-2.3 0.2 0 3 1.3 2.7 0.2 2.8-1 2.3-1.6 1.9-1.1 1.6-4.7 2.6-5.7-0.2 0.1 8.9 1.2 8.7-4.3 3.1-4.7 1.6-2-3.8-1.8-4.4-0.8-4.2-2.1-4.2-1.6-2.7-1-2.1-2.8-0.5-2 0.5-3.4-3.4-2.6-5.5-1.5-10.2-0.9-2.9-0.7-2.9 0.6-2.1 1.3-2.4 2.4-11.3-0.8-11.6-10.3-2.2-11.3 6.3-4.9 4.6-2.8 1.1-2.3 0.5-4.2 1.5-5.7-9.5-1.8-5.6-0.3-3.8-1.5-3.3-3.5-2.1-0.6-0.6 2.2-11.1-0.5-4.4-1.7-5.3 0.2-3.9 4.3 0 8.6-0.8 4.2-0.7 8.4 3.2 6.8 6.8 11.2 3.5 5.4 3.1 4.5 0.6 0.6-2.4 1-2.8 1.5-1.5 1.3-2.5-0.7-5.5 1-5.2 6.3 1.2 7.4-0.4 6.1 2 7.9 11.5 5.1 4.8 7 2 7.3 1.5-0.3 6.9-2.3 6.8 0.5 3.9 2.1 3.4 7.3 4.4 3.9 3.8 15.1 2.6 15.4-1.6 5.4-3.1 0.1 5.9 1.8 5.7 0.7 13.1 1.6 3.8 8.1-8 4.7-3.8 6.3-1 4.4-0.7 0.2 0.9 1.9 0.4 1.9-2.4 1.4 0 1.8 9.4-0.1 3.4 1.6 0 0-0.1 0.2-3.2 0.6-3.2 0.9-2.8 1.5-1.9 0-1.6-0.2-0.4-0.5-1.4 0.4-0.8 1.3 0.6 2.1 2 0.7 1.8 0.5 5 3.6 5.6 5.7 19.8-1.1 54.6 0.6 3.7 2.4 8.2 0.3 4.8-1.3 9.3-10.6 36.8-0.6 3.8-0.2 5-0.8 4.2-3.3 6.5-0.8 2.9-1.3 4-4.4 7-2.1 3.3 1.5 5.6-2.5 6.7-14.6 23.2z",name:"Ampara",onClick:()=>t("Ampara")}),x.jsx("path",{d:"M623.8 412.4l3.9-1.3 20.7 2.2 0.7 2.4 4.8 16.3 1.8 10.6-4.2 5.8-2.3-9.6-0.3-1.4-3.6-9.7-1.6 0-0.3 7.4 0.3 2.3-0.2-0.1-0.2 0.7 0 1.2 0.4 1.4 0.7 0.9 2 0.6 0.4 0.7 1.9 4.9 4 3 3.9-0.3 1.3-5 1.5 0 1.4 2.6 0.4 0.7 1.9 8.4 1.9 3.3 2.6 2.8 1.7 2.7 2.8 6.6 1.1-1.1 1.5-1.1 0.7-1.1 1 2.2-1 1.1 0.5 0.9 0.5 0.5 0 0.1 0.3 0.5 0.1 1.1 0.1-0.1 1.1-0.9 2.4-1.2 1.2-0.9 0.5 1.3 0.7 1.6-0.5 1.9-0.8 1.9 0 1.4 0.1 1.4 1.6 3.2 2.8 2.2 1.9 1.4 1.7 2.8-1.1 0.1-0.5 0.3-0.7 0.5-0.5 0.3-0.4 0.2-0.7 2.6-0.6 2.5 2.7 7.9 1.4 1.7 3.3 3.8 0.1 0 4.8-0.9 1.6 0 1.6 4.9 1.8 3 0.6 0.9 9.9 10.4 3.2 5.1 0.6 4.5-5.1 1.6-2.4-1.6-5.6-7.3-3-2.5-3.8-1.4-0.1 0-0.4 0-2.7 0.2-2.4 2.5-1.6 5.2 2.7 1.2 2.7 0.4 2.3-0.9 1.7-2.3 2.7 1 2.5 1.2 0.9 1.1 0.6 0.7-0.4 2.5 3.1 2.8 3 2.9 2.4 2.8 2.5 4.2-1.2 1.4-0.3 1.3 0.4 1.6 1.1 2.2 1.5-1.8-0.9-3.1 2.7 0.9 5.4 4 1.3 1.8 4.2 10.9-0.3 0.4-1.3 5.9 0.2 0.7 0 0.1 1.1 2.2 0.3 0.9-0.9 1.6-1.7 1.3-1 1.4 1.2 2.1 1.2 1.5 0.3 1.1 0.1 0.2 0.7 1.3 1.7 1.5-2.5 1.8 0.2 0.9-4.4 0.7-6.3 1-4.7 3.8-8.1 8-1.6-3.8-0.7-13.1-1.8-5.7-0.1-5.9-5.4 3.1-15.4 1.6-15.1-2.6-3.9-3.8-7.3-4.4-2.1-3.4-0.5-3.9 2.3-6.8 0.3-6.9-7.3-1.5-7-2-5.1-4.8-7.9-11.5-6.1-2-7.4 0.4-6.3-1.2-3.3-18 2.1-17.9 1.7-6.8 5.2-3.5 6.6-0.9 8.3 1.1 2.2-0.2-1.9-8.6-3.9-8.4-1.7-8.6 1.9-36.7-1.3-12.2z m98.8 139l-0.4-2.5-0.9-1.9-1.1-2.3-0.7-2.3 0.1-2.4 0.7-2.1 0.3-2.3-1.1-2.7 2.9 2.9 2.9 6.7 2 3.1 0.5 1.3 2.2 5.8 5.6 8.9 2.6 4.2 3.9 20.2 0 0.1-0.2 4.6-3.4 2.8-3.2-2.5-1-1.1-0.5-0.5-0.1-1.1-0.2-1.2 0-0.5 1-14.6-0.7-5-2.5-2.2-1-2.1-7.7-11.3z",name:"Batticaloa",onClick:()=>t("Batticaloa")}),x.jsx("path",{d:"M363.2 748.2l5.1-4.6-5.7-6 1.2-2.8 1-3.2 2.5-4 2.9-3.6 3.6-1.6 9.6 9.7 2.8 3.7 3.6 2.7 1.6-0.9 2.4-0.5 1.6 2 1.1 2.3 5.8 1.3 7-4 2.9-0.3 3.5 0.1 4.9 2.8 6.4 2.2 4.5 0.6 4.6-0.1-0.1 3.8 1.5 1.7-1.7 1.6-0.9 2.4 4.8 3.6 5.6 0.5 12 2.7 12.6 1.7 4.9-0.8 5.7-0.5 7.6 0.3 7.2-1 13.1-6.8 0.6 8.5 1.7-0.8 1.7-0.7 3.2 3.5 3.9 1.2-0.5 2.2-0.7 1.8-0.9 0.9-6.3 2.8-1.1 3.1 2.5 3.8 3.5 2.9 5.3 1 5.5-2.3 4.7-3.5 4.2-0.2-3.8 5.8-2.3 5.9-4.3 5.1-2.2 5.2-2.2 10-4.4 6.2-3.5 6.6 0.7 3.8 1.5 3.7 0.2 14.3 2.5 5 3.3 4.3 4.4 2.4 4.2 3 2.2 4.2 1.8 5.4 4.3 4.7 2.1 5.9-1.1 4.1-4.9-1.6-8.4-1.7-2.7-3.1-3.5-2.8-4.4 0.4-4.4 1.1-4.5-0.7-16.9-6.1-13.1-2.6 0-2.2 1.2-1.2-3-2.2 0.2-2.2-2.6-3.2-5.5 0.9-4.1-0.7 1.5-4.1-3.3-6.2-10.2 1.4-3.9 0-1.6 3.8-4.5 1-4.5 0.7-2-2.9-3.7 0.1-7.2-3.5-3.4-0.1-3.9-1.6-3.2-2.7-2.8-2.9-8.3-14.5-9.7-13.7-1.3-3.9 3.5-1.4-3.3-6.4-5.2-4.7-3.2-1.2-2.5-2.4-1.4-6.8-7-6.8-2.3-4.6-1.4-4.4 0.3-3.7-4-10.7-0.8-4.7z",name:"Ratnapura",onClick:()=>t("Rathnapura")}),x.jsx("path",{d:"M692.5 802.6l-4.1 4.9-6.2 1.1-4.9 3.7-4.2 4.1-5.5 2.4-4.5 3.7 0.1 3.9 1.1 3.1-1 1.7-1 1.4 0.1 1.9 0 2-3 4.9-6.4-1.4-6.1 2.2-2.1-0.3-0.5-0.6-2.6 1.8-13.7 5.3-6.7 1.8-3.5 1.4-2.3 2.3-6.3 3.5-5.7-2.4-3.6-6-4.3-5.7-2.9 0.4-2.1 1.5-2.5 0.1-2.3-0.4-1.7-4.2-3.9-1.4-5.8-0.7-5.8 0-2.1 2.5-2.9-2 0.1 3.1-1.9 2.6-3.2 0.3-2.9 0-1.1 5.2 2.2 5.2-5 3.8-6.5 2.1-5.8 3.2-5.7 3.7-1.8-5.4-2.2-4.2-4.2-3-4.4-2.4-3.3-4.3-2.5-5-0.2-14.3-1.5-3.7-0.7-3.8 3.5-6.6 4.4-6.2 2.2-10 2.2-5.2 4.3-5.1 2.3-5.9 3.8-5.8 2.8 0.2 1.7 2.7 1.1 4 1.8 1 1.9 0.4 2.1 4.7 1.6 5.1 1.6 0.8 1.6 0.9 1 7.4 2.6 3.3 2 3.3 0.9-6.2 3.3-5.1 2.5 1.6 2.5 1.2 0.7-5.5 4.8-1.7-3.4-5.4-2.2-6.4 0-3.6 0.5-3.4 3.4-5.3-0.3-4.1-4.1-1.1-0.9-3 2-4.2-0.5-5 0.6-4.9 7.8-0.7 2-3.9 6.7-2-5.6-7.9 4.9-2.7 5.9-1.6 2.9-2.4 2.3-2.9 1.1-1.9 1.4-1.4 2.3 1 3-0.6 1.1-3.4 0.6-3.6 1.6-2.4 1.2-2.6 0.9-6.4 1.1-4.2 0-4.3-0.7-3.2-1.2-3.1-1.7-2.1-1.2-1.1-2.5-3.2-8.5 2.2-2.7-2.8-2.3-4.8-3.5-3.5-2.9-3.7 0.7-4.7 2.7-4.1 3.8 0.5 3.2 3.5 3.8-1.6 2.1-3.6 6.3-8 1.8-4.4 0-4.8 9-2.1 1.8 4.4 2 3.8 4.7-1.6 4.3-3.1-1.2-8.7-0.1-8.9 5.7 0.2 4.7-2.6 1.1-1.6 1.6-1.9 1-2.3-0.2-2.8-1.3-2.7 0-3 2.3-0.2 3.2-0.8 1.6-2.5 0.8-2.2 2.6-1.1 2.8-1 5.7-3.1 4.6 1.2-3.4 5.3 1.4 0.9 1.5 0.3-0.4 3.1 2.7 12.2-0.3 5.6 0.9 4.5 5.1 4.4 3.2 5.6 0.7 5 5 7-3.7 2.9-4.8 5.7-2.7 7.2 2.9 5.5 1 3.6 1.8 3.2 1.8 0.8 1.7 0 1.5 0.8 1.2 1.1 8.2 2.1 6.8 4.1-0.5 4.4-1 4.6 1.6 4.4 0 4.5 2.7 4 1.2 4.6-6 85.1z",name:"Monaragala",onClick:()=>t("Moneragala")}),x.jsx("path",{d:"M363.2 710l0.7-1.9-0.1-2.1-3.4-11 1.2-6.8 2.9-6.7 3.4-2.4 1.7-3.9-4.9-1.4-5.6 1.3-2.8-5.8 1-6.6 3.6-1.9 3-2.8 0.6-8 2.3-1.8-0.4-3.1 4.7-2.7 4.8-4.3 5-3.6 5.4-2.5 11.3-2.5 2.5-0.1 1.6-2.3 0.8-2.7-0.3-4.8 0.8-4.4 5.1-2 5.5 0.7 3.4 3.5 2.1 4.5 2.8 7.1 10 8.7-0.4 4.5 2 1.4 5.8 3.3 2.8 3.4-0.5 4.1 0 3.4 3.4 3.3 2.6 3.4-1.3 3.1-1.8 2.8-2.5 0.6-2.5 0.2-3.6 3.9-8 1.3-2.6 2.4 3.5 8.4 1.6 2.9-1.6 3.6-0.2 4.6 0.3 0.7 0.8 0.2-2 3.3-3.2 2.8-1.8 0.6-1.2 1.8 1.2 1.7 1.5 1.5-1.6 8.7 2 6.7 6.7 2.1 5.3 4 1.8 6.1 0.4 3.1-2.7 2.4-4.6 0.1-4.5-0.6-6.4-2.2-4.9-2.8-3.5-0.1-2.9 0.3-7 4-5.8-1.3-1.1-2.3-1.6-2-2.4 0.5-1.6 0.9-3.6-2.7-2.8-3.7-9.6-9.7-3.6 1.6-0.1-2.3-0.3-2.2 3.1-2.9-0.7-4.2-4-2-5-0.4z",name:"Kegalle",onClick:()=>t("Kegalle")}),x.jsx("path",{d:"M549.6 562l0.6 0.6 3.5 2.1 1.5 3.3 0.3 3.8 1.8 5.6 5.7 9.5 4.2-1.5 2.3-0.5 2.8-1.1 4.9-4.6 11.3-6.3 10.3 2.2 0.8 11.6-2.4 11.3-1.3 2.4-0.6 2.1 0.7 2.9 0.9 2.9 1.5 10.2 2.6 5.5 3.4 3.4 2-0.5 2.8 0.5 1 2.1 1.6 2.7 2.1 4.2 0.8 4.2-9 2.1 0 4.8-1.8 4.4-6.3 8-2.1 3.6-3.8 1.6-3.2-3.5-3.8-0.5-2.7 4.1-0.7 4.7 2.9 3.7 3.5 3.5 2.3 4.8 2.7 2.8 8.5-2.2 2.5 3.2 1.2 1.1 1.7 2.1 1.2 3.1 0.7 3.2 0 4.3-1.1 4.2-0.9 6.4-1.2 2.6-1.6 2.4-0.6 3.6-1.1 3.4-3 0.6-2.3-1-1.4 1.4-1.1 1.9-2.3 2.9-2.9 2.4-5.9 1.6-4.9 2.7 5.6 7.9-6.7 2-2 3.9-7.8 0.7-0.6 4.9 0.5 5-2 4.2 0.9 3 4.1 1.1 0.3 4.1-3.4 5.3-0.5 3.4 0 3.6 2.2 6.4 3.4 5.4-4.8 1.7-0.7 5.5-2.5-1.2-2.5-1.6-3.3 5.1-0.9 6.2-2-3.3-2.6-3.3-1-7.4-1.6-0.9-1.6-0.8-1.6-5.1-2.1-4.7-1.9-0.4-1.8-1-1.1-4-1.7-2.7-2.8-0.2-4.2 0.2-4.7 3.5-5.5 2.3-5.3-1-3.5-2.9-2.5-3.8 1.1-3.1 6.3-2.8 0.9-0.9 0.7-1.8 0.5-2.2-3.9-1.2-3.2-3.5-1.7 0.7-1.7 0.8-0.6-8.5 4.4-1.1 2.3-3.4-2.1-1-2.1-1.4 3.4-5.5-0.9-1.6-1.2-1.4-1.3-3.6-1.6-3.2-7.3-3.7-0.3-3.7 4.2-0.2 4.3 0.2 3.1-3.5 1.1-4.6 3.7-3.4 4.1-2 8.8-1.9 5.1-7.6 1-4.5 2.1-4.1 1.9-1.7 1.5-2 0.8-1.7-0.4-1.6-1.2-4.1 1.1-2.1 1.6-2-0.9-1.2-1-1.2-0.5-2 0.5-2.1-1.7-5.8 0.2-4.2 2.9-1.8 4.9-1.4 6.2-5.7 0.4-7.6-5-16.8-2-35.1-1.2-19 2.3-10.9z",name:"Badulla",onClick:()=>t("Badulla")}),x.jsx("path",{d:"M549.8 537.3l-0.2 3.9 1.7 5.3 0.5 4.4-2.2 11.1-2.3 10.9 1.2 19-7.3-0.8-4.7 0.7-2.6 4.3-1.4 1.3-1.7 0.9-2.8-3.5-3.8 1.9-9.5-0.1-7.3 6.1-6.6 1-8.6-7.1-3.4-1.4-3.2 2-1.4 3.6 0.8 8.5-5 5.5-8.4-0.5-14.7-9.2-4.7-6.6 0.1-2.4 1.3-1.7 0.5-2.8-0.7-2.9-1.2-2.5-1.4-2.3-2.3-4.7 0.6-4.9 3.3-3 0.8-2-0.1-2.1 0.7-2.7 0.1-2.7-4.2-4.2-1.3-7.2-0.7-7.7-1.1-1.7-0.9-0.6 0-4-1.6-4-2.3-3.8-1.6-3.7-1.8-0.5-2-1.1-0.6-4.1 1.1-3.8 4.9-3.6 7.7-2.9 4.1-4.9 3.7 0.1 2.8 1.8 3.4-2.3 1.7-2.8 1.6-1.2 1.5-0.8-0.1-1.7-0.6-1.1 3-3 2.2-3.4 0-4.3 1.2-3.8 2.4 0 1.7 0.5 1.3-1 4.5-4.7 3-2.6 4.4-2.2 4.8-2 2 2 3.2 3.6-0.1 4.1 1.3 1.3 1.9 0.8 1.5-1 0.1-1.5 2.8-1.3 2.7 0.8 3.6 0.7 3.4 2.1-6.9 7.2-2.3 11-0.6 5.4-2.2 9.4-0.8 1.6-0.4 1.7-6.7 1.5-1.6 6.4 3.1 14.1-0.4 4.6 2.3 3.2 6.1 1.3 5.8-2.4 4.5-4.2 2 2.8 3.6 2.2 1-4.1 0.5-4.1 12.3 0.8 12-2.2z",name:"Matale",onClick:()=>t("Matale")}),x.jsx("path",{d:"M534.8 393.9l3.5-1 2.7 4 3.7 1.5 3.6 2.7 0.9 4.9 2.9 2.9 9.7-1 17.5 4.3 4.1 0 3.8 2.2 3.7 2.9 4.1 2.1 2.9-0.3 1.7 2.4 0.3 2.9-0.1 3 0.8 4.4-1.2 2.9-2.7 1.7 0.9 0.7 1.2 0.4 5.7-1.4 3.3-7.6 1.2-2.2 1.4-6.1 1.6-1.4 1.8-1.3 1.5-2.8 2.1-2.3 2.9 0 3.5 0 1.3 12.2-1.9 36.7 1.7 8.6 3.9 8.4 1.9 8.6-2.2 0.2-8.3-1.1-6.6 0.9-5.2 3.5-1.7 6.8-2.1 17.9 3.3 18-1 5.2 0.7 5.5-1.3 2.5-1.5 1.5-1 2.8-0.6 2.4-4.5-0.6-5.4-3.1-11.2-3.5-6.8-6.8-8.4-3.2-4.2 0.7-8.6 0.8-4.3 0-12 2.2-12.3-0.8-0.5 4.1-1 4.1-3.6-2.2-2-2.8-4.5 4.2-5.8 2.4-6.1-1.3-2.3-3.2 0.4-4.6-3.1-14.1 1.6-6.4 6.7-1.5 0.4-1.7 0.8-1.6 2.2-9.4 0.6-5.4 2.3-11 6.9-7.2-3.4-2.1-3.6-0.7-2.7-0.8-2.8 1.3-0.1 1.5-1.5 1-1.9-0.8-1.3-1.3 0.1-4.1-3.2-3.6-2-2 0.3-6.1 4.5-6.4-4.6-3.6 0.4-8.1 1.6-9.1 3.3-8.8 1.9-9.8 3.4-8.9 9.1-1.7 10.2 0 3-1.8 0.9-4.1 1.8-4.1 2.9-3.1z",name:"Polonnaruwa",onClick:()=>t("Polonnaruwa")}),x.jsx("path",{d:"M308.3 641.1l-0.6-13.8-8.5-45.8-0.4-8 0.4-8 2.5-6.4 3.5-5.9 0.9-2.7 1.6-2.3 3.3-0.8 2.8-1.5-1.3-2.2-2.8-0.7 1.1-3 1.6-2.7 3-0.9 3.3-0.3 2.5-1 1.6-2.2-0.9-2.4-1.2-2.6 0.7-6.2 2.2-5.6 0.4-2.8 0.9-2.5 3-1.6 2.8-1.9 0.6-2.5 1.1-2.4 4.9-2.5 0.9-2.1 0.4-2.4 1.4-3.2 3.4-1.6-0.2 0.4-0.2 0.4 1.4-0.4 1.8-1.9 0.1-2.8 1.3-2.3 4.8 2.7 2.9-2.2-2.8-5.2 1.4-2.7 1.7-2.6 0.2-5.3-0.2-6.3 0.9-3 0.6-2.8-2.7-1.8-3.2-1.1-2.2-4.1-0.8-4.6-2.4-9.2 0.1-4.7-0.5-4.4 5 2.8 21.3 9.7 4.5 1.2 4.4 1.8 3.5 2.4 4.2 0.7 7.7 2.9 6.9 5.7 3.8 3.8 4.2 2.6 4.3-0.2 3.5 2.9 0 2.9-0.4 2.9 0.7 5-0.3 4.2 0.4 4.1 3.2 1.3 3.8 0.3 1.9 3.2 0.6 3.9 2.1 5.4 1.2 5.5-0.9 8.1 5.9 5.6-1.1 3.8 0.6 4.1 2 1.1 1.8 0.5 1.6 3.7 2.3 3.8 1.6 4 0 4 0.9 0.6 1.1 1.7 0.7 7.7 1.3 7.2 4.2 4.2-0.1 2.7-0.7 2.7 0.1 2.1-0.8 2-3.3 3-0.6 4.9 2.3 4.7 1.4 2.3 1.2 2.5 0.7 2.9-0.5 2.8-1.3 1.7-0.1 2.4-2.8 1.3-2.7 0.7 1.9 3 1.3 3.1-2.4 1.2-3.4-0.5-3.3 1.8 0.3 2.6-0.3 2.4-4-0.3-3.5-2.5-3.4 0-0.7 4.6-1 1.3-0.8 1.4 0.2 1.5 0.4 1.1-4.1 1.2-4.8-0.5-2.1-4.5-3.4-3.5-5.5-0.7-5.1 2-0.8 4.4 0.3 4.8-0.8 2.7-1.6 2.3-2.5 0.1-11.3 2.5-5.4 2.5-5 3.6-4.8 4.3-4.7 2.7-4-2.9-5.7-6.6-1.4-1.9-0.6-2-2.1-2.3-6.4 1.2-5.7 4-6.6 1.9-6.4-4.4-5.5 0.2-8.8 6.9-4.9 1.9z",name:"Kurunegala",onClick:()=>t("Kurunegala")}),x.jsx("path",{d:"M495.4 261.4l6.5-2.6 6.8 0.1 5.8 3.4 10.1 7 3.5 3.9 1.9 2.5 2.2 1.7-2.7 6-3.9 5.8 0.1 10 4.3 9.4 1.7 4.9-3.5 8.3 0.2 4.8 1.9 2.2 2.5 2.4 0.9 5.6 6.1 9.1 3.3 7.7 2 2.7 2.7 2 1.5 3.6-1.9 3.4-3.2 2.2-2.9 2.8-0.9 2.8-0.6 2.9-5 17.9-2.9 3.1-1.8 4.1-0.9 4.1-3 1.8-10.2 0-9.1 1.7-3.4 8.9-1.9 9.8-3.3 8.8-1.6 9.1-0.4 8.1 4.6 3.6-4.5 6.4-0.3 6.1-4.8 2-4.4 2.2-3 2.6-4.5 4.7-1.3 1-1.7-0.5-2.4 0-1.2 3.8 0 4.3-2.2 3.4-3 3 0.6 1.1 0.1 1.7-1.5 0.8-1.6 1.2-1.7 2.8-3.4 2.3-2.8-1.8-3.7-0.1-4.1 4.9-7.7 2.9-4.9 3.6-5.9-5.6 0.9-8.1-1.2-5.5-2.1-5.4-0.6-3.9-1.9-3.2-3.8-0.3-3.2-1.3-0.4-4.1 0.3-4.2-0.7-5 0.4-2.9 0-2.9-3.5-2.9-4.3 0.2-4.2-2.6-3.8-3.8-6.9-5.7-7.7-2.9-4.2-0.7-3.5-2.4-4.4-1.8-4.5-1.2-21.3-9.7-5-2.8-2.5-3.3-3.4-2.8-4.7 0.2-4.1-3.1-3.9 1.8-4.8 0-1.4-4.2-5.8-23.4-3.4-6.6 2.6-5.7 3.9-1.8 1-2.1 0.3-1.7 7.2-5.9 4.2-8.9-1.3-9.6 1.9 0.9 2.2 0.3 0.5-21.6-1.8-13.7 10.2 4.2 11.3 0.1 22.5-5.9 0.1 7.5 2.3 6.6 3.5 1.2 3.4 1.6 1.5 2.8 0.9 3.2 2.4 4.9 4.9 2.6 2.4 0.7 2.2 0.1 3.5-6.3 4.1-1.8 4.3-10.1 9.1-11.8 7-3.2 4.3 2.2 3.9 2.8 7.3 0 6.2-4.7 5.8-5.3 5-5.9 2.8-4.3 3.3-3.9 5.5-4.4-2-6-4.2-5.5-6-2.1-0.4-5.1 17.1-0.6 6.7-4.7 6.1-1.8 6.3-1.2z",name:"Anuradhapura",onClick:()=>t("Anuradhapura")}),x.jsx("path",{d:"M508.4 753.2l-13.1 6.8-7.2 1-7.6-0.3-5.7 0.5-4.9 0.8-12.6-1.7-12-2.7-5.6-0.5-4.8-3.6 0.9-2.4 1.7-1.6-1.5-1.7 0.1-3.8 2.7-2.4-0.4-3.1-1.8-6.1-5.3-4-6.7-2.1-2-6.7 1.6-8.7-1.5-1.5-1.2-1.7 1.2-1.8 1.8-0.6 3.2-2.8 2-3.3-0.8-0.2-0.3-0.7 6.6 0.6 10.4 15.4 6.7 4 5-5.3 2.7-7.8-2.7-3.7-3.4-3.3-4.1-7.5-1.8-0.8-1.9 0.6 5.2-4.2 8.4 1 4.6-1 6.7-4.6 4.5-0.1 4 1 14.8-17.6 4.7-7.9-2.1-8.7-0.7-6.7 4 3.6 3.3 4.4 2.4 0.9 2 0.2 5.3 8.4 8.4 0.6 9.9-1.4 9.6 1.9-0.2 4.2 1.7 5.8-0.5 2.1 0.5 2 1 1.2 0.9 1.2-1.6 2-1.1 2.1 1.2 4.1 0.4 1.6-0.8 1.7-1.5 2-1.9 1.7-2.1 4.1-1 4.5-5.1 7.6-8.8 1.9-4.1 2-3.7 3.4-1.1 4.6-3.1 3.5-4.3-0.2-4.2 0.2 0.3 3.7 7.3 3.7 1.6 3.2 1.3 3.6 1.2 1.4 0.9 1.6-3.4 5.5 2.1 1.4 2.1 1-2.3 3.4-4.4 1.1z",name:"Nuwara-Eliya",onClick:()=>t("NuwaraEliya")}),x.jsx("path",{d:"M498.3 254l-1.9 3.4-1 4-6.3 1.2-6.1 1.8-6.7 4.7-17.1 0.6 0.4 5.1 6 2.1 4.2 5.5 2 6-5.5 4.4-3.3 3.9-2.8 4.3-5 5.9-5.8 5.3-6.2 4.7-7.3 0-3.9-2.8-4.3-2.2-7 3.2-9.1 11.8-4.3 10.1-4.1 1.8-3.5 6.3-2.2-0.1-2.4-0.7-4.9-2.6-2.4-4.9-0.9-3.2-1.5-2.8-3.4-1.6-3.5-1.2-2.3-6.6-0.1-7.5-8.8-11.3-5.4-4.2 0-3 0.9-3.5 5.9-0.6 3.5-7.8 6.4-3.6 8.4 0.9 13-1.6 12.3-4.6 1.2-8.1-3.5-9-3.6-5.7-6.2-2.9 10.7-6.8 6.4-5.2 4.1-6.3-0.2-3.9-0.9-4 0-2.1-0.2-1.9-3.4-0.5-1.8-2.5 0.6-3.4 4.2-0.4 4.4 0.3 8-0.2 5.7 3.6 3.6 5.3 5.6-2.5 4-3.5 2.3-1.1 2.2-1.3 0.4-1.2 0.5-1.1 7.5-0.2 7.2 2.7 0.8 7.5 6.2 0.7 2.7 4.7-2.2 3.3-0.4 3.2 3.6-0.9 3.4-2.3 7.2 1.1 7.4 4.5 2.8 3.7-4.3 15.8z",name:"Vavuniya",onClick:()=>t("Vavuniya")}),x.jsx("path",{d:"M428.6 698.3l0.2-4.6 1.6-3.6-1.6-2.9-3.5-8.4 2.6-2.4 8-1.3 3.6-3.9 2.5-0.2 2.5-0.6 1.8-2.8 1.3-3.1-2.6-3.4-3.4-3.3 0-3.4 0.5-4.1-2.8-3.4-5.8-3.3-2-1.4 0.4-4.5-10-8.7-2.8-7.1 4.8 0.5 4.1-1.2-0.4-1.1-0.2-1.5 0.8-1.4 1-1.3 0.7-4.6 3.4 0 3.5 2.5 4 0.3 0.3-2.4-0.3-2.6 3.3-1.8 3.4 0.5 2.4-1.2-1.3-3.1-1.9-3 2.7-0.7 2.8-1.3 4.7 6.6 14.7 9.2 8.4 0.5 5-5.5-0.8-8.5 1.4-3.6 3.2-2 3.4 1.4 8.6 7.1 6.6-1 7.3-6.1 9.5 0.1 3.8-1.9 2.8 3.5 1.7-0.9 1.4-1.3 2.6-4.3 4.7-0.7 7.3 0.8 2 35.1 5 16.8-0.4 7.6-6.2 5.7-4.9 1.4-2.9 1.8-9.6-1.9-9.9 1.4-8.4-0.6-5.3-8.4-2-0.2-2.4-0.9-3.3-4.4-4-3.6 0.7 6.7 2.1 8.7-4.7 7.9-14.8 17.6-4-1-4.5 0.1-6.7 4.6-4.6 1-8.4-1-5.2 4.2 1.9-0.6 1.8 0.8 4.1 7.5 3.4 3.3 2.7 3.7-2.7 7.8-5 5.3-6.7-4-10.4-15.4-6.6-0.6z",name:"Kandy",onClick:()=>t("Kandy")})]})})}),x.jsx("div",{children:a&&x.jsxs("div",{children:[x.jsx("h2",{children:a.name}),x.jsxs("table",{border:"1",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Party_Code"}),x.jsx("th",{children:"Votes"}),x.jsx("th",{children:"Percentage"}),x.jsx("th",{children:"Party_Name"}),x.jsx("th",{children:"Candidate"})]})}),x.jsx("tbody",{children:a.by_party.map((n,r)=>x.jsxs("tr",{children:[x.jsx("td",{children:n.party_code}),x.jsx("td",{children:n.votes}),x.jsx("td",{children:n.percentage}),x.jsx("td",{children:n.party_name}),x.jsx("td",{children:n.candidate})]},r))})]}),x.jsx("h3",{children:"Summary"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Valid: "}),a.summary.valid]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Rejected: "}),a.summary.rejected]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Polled: "}),a.summary.polled]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Electors: "}),a.summary.electors]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Valid: "}),a.summary.percent_valid]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Rejected: "}),a.summary.percent_rejected]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Polled: "}),a.summary.percent_polled]})]})]})})]})}const YT=[{id:"NPP",symbol:1,party:{en:"Jathika Jana Balawegaya",si:"ජාතික ජන බලවේගය"},color:["rgb(175.00, 20.00, 75.00)","rgb(200.00, 40.00, 125.00)","rgb(175.00, 20.00, 75.00)"]},{id:"SJB",symbol:2,party:{en:"Samagi Jana Balawegaya",si:"සමගි ජන බලවේගය"},color:["rgb(5.00, 121.20, 25.00)","rgb(255.00, 225.00, 0.00)"]},{id:"IND16",symbol:3,party:{en:"Independent Candidate 16",si:"ස්වාධීන අපේක්ෂක 16"},color:["rgb(182.00, 51.00, 47.00)","rgb(250.00, 204.00, 42.00)","rgb(0.00, 80.00, 58.00)"]},{id:"SLPP",symbol:4,party:{en:"Sri Lanka Podujana Peramuna",si:"ශ්‍රී ලංකා පොදුජන පෙරමුණ"},color:["rgb(132.00, 12.00, 16.00)","rgb(162.95, 12.00, 16.00)","rgb(132.00, 12.00, 16.00)"]},{id:"SLCP",symbol:5,party:{en:"Communist Party of Sri Lanka",si:"ශ‍්‍රී ලංකාවේ කොමියුනිස්ට් පක්ෂය"},color:["rgb(255.00, 32.00, 50.00)","rgb(22.00, 79.00, 168.00)"]},{id:"IND9",symbol:6,party:{en:"Independent Candidate 9",si:"ස්වාධීන අපේක්ෂක 9"},color:["rgb(248.00, 138.00, 7.00)","rgb(225.00, 200.00, 0.00)"]},{id:"IND4",symbol:7,party:{en:"Independent Candidate 4",si:"ස්වාධීන අපේක්ෂක 4"},color:["rgb(106.00, 106.00, 106.00)","rgb(0.00, 0.00, 0.00)","rgb(28.00, 28.00, 28.00)"]},{id:"IND13",symbol:8,party:{en:"Independent Candidate 13",si:"ස්වාධීන අපේක්ෂක 13"},color:["rgb(106.00, 106.00, 106.00)","rgb(0.00, 0.00, 0.00)","rgb(28.00, 28.00, 28.00)"]},{id:"IND12",symbol:0,party:{en:"Independent Candidate 12",si:"ස්වාධීන අපේක්ෂක 12"},color:["rgb(106.00, 106.00, 106.00)","rgb(0.00, 0.00, 0.00)","rgb(28.00, 28.00, 28.00)"]},{id:"DEFAULT",symbol:0,party:{en:"INVALID NAME",si:"INVALID NAME"},color:["rgb(0.00, 0.00, 0.00)","rgb(25.00, 25.00, 25.00)","rgb(0.00, 0.00, 0.00)"]}],s9={Trincomalee:RD,Mullaithivu:MD,Jaffna:TD,Kilinochchi:ND,Mannar:CD,Puttalam:ID,Gampaha:DD,Colombo:LD,Kalutara:PD,Galle:OD,Matara:UD,Hambantota:BD,Ampara:FD,Batticaloa:kD,Rathnapura:HD,Moneragala:jD,Kegalle:zD,Badulla:GD,Matale:VD,Polonnaruwa:WD,Kurunegala:KD,Anuradhapura:YD,NuwaraEliya:qD,Vavuniya:XD,Kandy:JD},o9=a=>YT.find(e=>e.id===a)||YT.find(e=>e.id==="DEFAULT");function l9(){const[a,e]=H.useState(""),t=n=>{const r=s9[n];e(r)};return x.jsxs("div",{children:[x.jsx("div",{children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 1000 1000",width:"1000",height:"1000",children:x.jsxs("g",{id:"features",stroke:"#ffffff","stroke-width":".5",children:[x.jsx("path",{d:"M534.5 241.9l0.1 3.6 2.7 2-2.4 2.3-2.2 2.6 3.6 2.8 3.9-0.3 3.2-2.9 2.4-4.2 1.5-3.9 0.1 0.1 8.3 10.1 7.4 12.7 3 3.1 4.2 1.3 3.4 2.7 5 12.1 1.2 1.3 1.3 1.4 0.1 0 5.6 2.6 2.9 6 3.2 12.2 0.6-2.2 0.7-0.9 1.3 0.3 2.2 1.2-0.6 2.3 6.4 7 2.1 3.5 0 4.2-1.7 1.7-2.4 1.1-2.2 2.5 0.1 0 1.6-0.4 1.8-0.5 0.4-0.2 0.8-0.5 0.1 0.1 5 10.9 0.7 5.6-5.7 1-0.1 0 1.2-3.8-1.5-3-2.6-0.4-1.8 4 0.6 3.1 1.7 2.2 0.9 2.4-1.7 3.5-1.4-1-2.5-1.9-4-2.5-4-1-3.9 1.7-3 4 1.1 2.1 3.6-0.5 4.8-4 3.3 3.5 2.9 4.2 3.6 3.5 5.1 1.5 10.6-0.2 3.6-2.3-2.4-5.4 6.1-2.8 2.4-0.8 2.5 0.2 0.1 0 2.8 1.6 2.5 2.8 1.9 3.2 1.7 9.3 3.6 12 0.1 3.1 0.1 3.2-2.9-2.1-3.1-6.2-2.7-1.3-0.1 1.7 1.1 7.6 0.1 0.5 1.3 2.9 1.5 0.8 1.4 0.6 0.1 0 3.1 0 2.4 1.2 1.5 8.9 1.8 6.2 0.3 1 0.5 3.8-20.7-2.2-3.9 1.3-3.5 0-2.9 0-2.1 2.3-1.5 2.8-1.8 1.3-1.6 1.4-1.4 6.1-1.2 2.2-3.3 7.6-5.7 1.4-1.2-0.4-0.9-0.7 2.7-1.7 1.2-2.9-0.8-4.4 0.1-3-0.3-2.9-1.7-2.4-2.9 0.3-4.1-2.1-3.7-2.9-3.8-2.2-4.1 0-17.5-4.3-9.7 1-2.9-2.9-0.9-4.9-3.6-2.7-3.7-1.5-2.7-4-3.5 1 5-17.9 0.6-2.9 0.9-2.8 2.9-2.8 3.2-2.2 1.9-3.4-1.5-3.6-2.7-2-2-2.7-3.3-7.7-6.1-9.1-0.9-5.6-2.5-2.4-1.9-2.2-0.2-4.8 3.5-8.3-1.7-4.9-4.3-9.4-0.1-10 3.9-5.8 2.7-6-2.2-1.7-1.9-2.5-3.5-3.9-10.1-7-5.8-3.4-6.8-0.1-6.5 2.6 1-4 1.9-3.4 9.1-4.2 10.6-1.4 4.5-1.3 4-2.3 4.4-1.3 3.6-1.6z",name:"Trincomalee",onClick:()=>t("Trincomalee")}),x.jsx("path",{d:"M534.5 241.9l-3.6 1.6-4.4 1.3-4 2.3-4.5 1.3-10.6 1.4-9.1 4.2 4.3-15.8-2.8-3.7-7.4-4.5-7.2-1.1-3.4 2.3-3.6 0.9 0.4-3.2 2.2-3.3-2.7-4.7-6.2-0.7-0.8-7.5-7.2-2.7-7.5 0.2-0.5 1.1-0.4 1.2-2.2 1.3-2.3 1.1-4 3.5-5.6 2.5-3.6-5.3-5.7-3.6-8 0.2-4.4-0.3-4.2 0.4-0.6 3.4 1.8 2.5 3.4 0.5 0.2 1.9 0 2.1 0.9 4 0.2 3.9-4.1 6.3-6.4 5.2-10.7 6.8-38.1 2 3-8.4-1.1-1.6-1.1-2.1 0.8-2.7 1.2-2.6 0.8-2.6 1-2.3 5.1-1.7 0.3-4.8-0.5-5.5 0.9-3.4 0.1-3.5-0.2-1.8-0.5-1.6-4.2-6.8-1.4-7.6-0.3-8 6.1 0.8-0.6-6.5 6-7.9 17.7-2 6.3-0.1 6.2 1.1 6.1-0.6 4-10.1 3.1-0.1 10.5 0.6 5.8-0.4 3.9-2.1 3.2-10.6 1.1-0.3 1.7 2.2 4.6 3.8 5.2 2.9-0.6-5.3 0.7-5.3 4.9-3.9 0.5-3.9 1.1-1.1 1.2-0.8 1.4-1.2 27.3 22.2 0.2 0.4 1.7 2.7 2.5 3.3 5 4.7 3.1 4-2.7 1.5-0.1 0-1.5-0.7-0.2-0.1-0.1 0-2.4-3.1-1.3-0.7-4.2-0.7-1.8 0.5 0.9 1.9 0.3 0.6 11.9 11.2 4.7 2.6-1.8-2.9-1.1-2.7 0.5-1.9 3.2-0.8 1.5 1 2.5 7.3 2.2 4.4 8.8 17.6-1.8-0.6-4.9-1.9-3 0-1.3 3.3 1.8 0.8 3.7 0.7 3.4 2.1 0 0.3 0.5 5 1.6 0 0.7-1.3 0.7-0.6 0.8-0.4 1.1-0.7 1.1 4.6 0.2 0.6 3.2 7.5 4.4 6.7 4.5 2.9 0.3 0.3 0.5 0.4 0 1.7-1.1 1.6-2.1 0.8-0.6-0.7-2.6-4.1-2.7-1.5-6.3-1.6-3.7-1.7 1.7 2.4 0.9 1.3 8.3 7.8 0 0.8z",name:"Mulaithivu",onClick:()=>t("Mullaithivu")}),x.jsx("path",{d:"M466.1 133.1l-1.4 1.2-1.2 0.8-15.7-10.8-5.4-2.5-4.8-1.1-0.7-0.3-0.7-0.3-4.1-3.2-1.6-0.9-1.6-0.3-1.9 0.1-0.4-2.3-3-9 0.6 0.3 0-1.8-8.4-4.2-20.3-16.7-16.6-19.2-8.4-4.6-13.2-3.1-3.5-2.5-0.5-3.6 4.9-2.1 1.5-0.3 4.8-0.8 9.6-0.4 4.6 0.8 3.2 2.3 2.1 7.6 2.1 3.2 30.2 35.7 4.4 3.2 9 5.2 36.4 29.6z m-85.3-37.6l-11.8-5.2-4.3-2.5-2.9 0 0.6 5.7 1.6 1.6 2.4 1.9 1.5 2.3-1.5 3-1.7 0.6-1.7-1-1.5-1.3-4.5-2.3-8.6-7.5-4.9-2.1 2.5 2.8 4.5 3.9 2.6 2.8-5.6-1-5.5-2.3-11.1-6.2-8.9-7-5.2-1.9-0.5-0.3-2-1.3-1.9-0.8-0.3 1.7-2.5-1.7-1-2.3-0.4-2.7-0.9-3-1.5-2.6-0.9-1.2-2.4-3.1-1.5-2.7 5-2.5 9.1-8.5 4-1.8 0.1 0 18 1.6 9.4-1.1 3.4 0.4 1.4 3.2-0.3 4.9 0.7 1.7 2 0.6 1.9 0.3 5.5 1.4 1.2 0.7 1 2 2.5-0.1 1.9-0.6 0.8-0.2 1.1-0.2 0.8-0.1 1.8 1.1 0.8 0.4 6.4 7.1 9.3 10.1 0 0.1-3.1 6.7-4.9 8.5z m-121 27l-1.9 1.7-1.9 1.8-5.8 0.4-5.4-1.8-2.3-3 0-9.6 0.6-2.4 1.6 0.3 1.5 2 1 2.4 4 1.3 4.7 0.4 1.2 0.8 2.7 5.7z m38-27.4l-3.6-2.6-3.5-5.4-5.6-11.2 2.5-4 0.6-5.1 1.5-4.2 5-1.1 2.6 0.8 0.1 0 0.2 2-0.9 2.8-0.6 3.1 0.1 3.2 0.3 2.6 0 0.2 0.2 0.5 0.8 1.8 1.1 1.2 0.8 1 1 0.2 4.5-0.2 0.7 0.7 0.3 3.5 0.6 1.4 2.6 1.7 3.6 1.5 3 1.7 0.2 0.6 0.8 1.7-1.6 1.6-3 0-3.3-1-2.3-1.4-1.6-0.4-4.2 2.4-2.9 0.4z",name:"Jaffna",onClick:()=>t("Jaffna")}),x.jsx("path",{d:"M423.6 104.5l3 9 0.4 2.3-2.8 0.2-1.8 0.7-0.3 0.4-0.5 0.8-0.9 0.5-3.1-2.3-1.2-0.2-7.5 0.2-2.1-0.6-16.4-14.3-7-4.6-0.1 0-2.5-1.1 4.9-8.5 3.1-6.7 0-0.1 11 12.1 7.2 4.5 16.6 7.7z m39.9 30.6l-1.1 1.1-0.5 3.9-4.9 3.9-0.7 5.3 0.6 5.3-5.2-2.9-4.6-3.8-1.7-2.2-1.1 0.3-3.2 10.6-3.9 2.1-5.8 0.4-10.5-0.6-3.1 0.1-4 10.1-6.1 0.6-6.2-1.1-6.3 0.1-17.7 2-6 7.9 0.6 6.5-6.1-0.8-4.4 3.3-4.9 2.5-7.9 0.7-1.7 0 1.4-5.7 0-13.6 0.5-2-0.4-1.3-2.7-0.5-6.4-3.3-2.4-2.4-1.6-4.4-0.3-0.8-1.1-5.4-0.1-3.1 2.8-3 5.1-2.5 5.6-1.8 4.7-0.7 2.1-1.1 5-6.7 0.6-0.5 0.9-0.7 1.7-1 2.1-0.8 2.6-0.4-2.2-4-1.3-1.8-1.3-1.8-3.4-3.4-4.5-3.4-17-10-3.5-4.3 7.4 0.2 7.1 2.9 13.9 8.1 13.2 3.3 3.5 2.3 5.5 4.8 1.3 2.5-2.8 1.4 0.6 1.6 0.8 1.6-1.4 1.6 4.8 3.3 11.4-2.8 20.8-8.3 5.7 0.5 12.2 3.4 14.5 6.6 11 2.1z",name:"Kilinochchi",onClick:()=>t("Kilinochchi")}),x.jsx("path",{d:"M366 183.9l0.3 8 1.4 7.6 4.2 6.8 0.5 1.6 0.2 1.8-0.1 3.5-0.9 3.4 0.5 5.5-0.3 4.8-5.1 1.7-1 2.3-0.8 2.6-1.2 2.6-0.8 2.7 1.1 2.1 1.1 1.6-3 8.4 38.1-2 6.2 2.9 3.6 5.7 3.5 9-1.2 8.1-12.3 4.6-13 1.6-8.4-0.9-6.4 3.6-3.5 7.8-5.9 0.6-0.9 3.5 0 3 5.4 4.2 8.8 11.3-22.5 5.9-11.3-0.1-10.2-4.2 1.8 13.7-0.5 21.6-2.2-0.3-1.9-0.9-6.2-3.5-5.9-2.5-6.8-0.6-6.1-2.3-2.6-1.6 0.9-0.9 0.3-1.2 2.3-7.1 0.3-0.3 0.2-0.2 0.5-2 2.2-4.7 2-22.7-5.5-14.5 0.4-2.5 0.4-16.5 0-0.2-0.5-5.6-0.7-2.7-1.2-2-1-2.4 2.2-1.1 3.1-0.6 2-0.6 13.4-12.1 7-3.5 2.9-2.5 1.5-5.7 2.8-5.9 1.5-8.1 7.5-19.2 0.2-1.1 0.7-2.8 1.7 0 7.9-0.7 4.9-2.5 4.4-3.3z m-110.1 37.7l-2.6-1-1.1-2.2 0.7-2.3 3-1 10.3 0 4.6 1.2 4.7 1.2 9.8 3.8 9.4 5.4 7.9 7.7-0.1 0-3.7-0.8-6.7-3.3-3.9-0.7 6 6.8 4.7 5.4 2.1 3.7-5.5-0.7-3.6-2.8-2.5-3-1.9-1.4-2.3-1.2-9.5-8.5-4.7-2.1-4.8-2.2-3.4-0.9-1.8-0.5-5.1-0.6z",name:"Mannar",onClick:()=>t("Mannar")}),x.jsx("path",{d:"M301.7 339.1l2.6 1.6 6.1 2.3 6.8 0.6 5.9 2.5 6.2 3.5 1.3 9.6-4.2 8.9-7.2 5.9-0.3 1.7-1 2.1-3.9 1.8-2.6 5.7 3.4 6.6 5.8 23.4 1.4 4.2 4.8 0 3.9-1.8 4.1 3.1 4.7-0.2 3.4 2.8 2.5 3.3 0.5 4.4-0.1 4.7 2.4 9.2 0.8 4.6 2.2 4.1 3.2 1.1 2.7 1.8-0.6 2.8-0.9 3 0.2 6.3-0.2 5.3-1.7 2.6-1.4 2.7 2.8 5.2-2.9 2.2-4.8-2.7-1.3 2.3-0.1 2.8-1.8 1.9-1.4 0.4 0.2-0.4 0.2-0.4-3.4 1.6-1.4 3.2-0.4 2.4-0.9 2.1-4.9 2.5-1.1 2.4-0.6 2.5-2.8 1.9-3 1.6-0.9 2.5-0.4 2.8-2.2 5.6-0.7 6.2 1.2 2.6 0.9 2.4-1.6 2.2-2.5 1-3.3 0.3-3 0.9-1.6 2.7-1.1 3 2.8 0.7 1.3 2.2-2.8 1.5-3.3 0.8-1.6 2.3-0.9 2.7-3.5 5.9-2.5 6.4-0.4 8 0.4 8 8.5 45.8 0.6 13.8-4-1.6-3.4 2.2-2.7-0.4-1.8-2-4.5 0.6-4.3 1.1-5.5-0.2-9.9-73-1.4-3 0.9-1 0.7-0.1 1.7 1.1 0.4-4 1.1-4.7 0.3-2.2 0.3-2.3-1.3-3.5-1.8-3.2-0.3-2.1-0.3-2.1 0-8.6-5.3-26.1-0.7-3-2.7-5.7-2.3-12.1-3.8-9.5-5.8-26.2 0-7.5 1 0.5 0.1 0.1 0 0.2 0.5 0.8 0.8-4.3-1.2-13.8-1.2-4.1 3.8-2.5 3.6-4.7 2.6-5.3 1-4.4 1.1-2.9 6.8-10.8-0.1 0.2-3.4 8.2-4.4 7.7 1 1.9 0.2 0.4 1.7 1.8 2.2 0.8 2.8 0-2.3 6.4-2.3 4.6-1 0.8-1.1 0.1-0.8 0.7-0.4 2.4 0.2 5.6-0.2 1.7-3.9 12.4 0.2 2.4 0.3 4.6 4 4.8 1.1 1.3-4.6 9.7 7.4 5.4 10.7 0.8 5.4-3.9-1-4.1-1.8-3.2-0.6-1.3-0.9-1-2-2.6-2.3-1.5-0.7-2.5 7.8-14.8-0.3-2.7-1-2-1.2-1.7-0.7-1.7-0.2-2.8 0.3-4.9-0.1-1.9 0-0.1-0.1-0.4-0.6-1.6-0.4-0.4-0.5-0.4-0.4-1 0.4-2.6 1.1-2.2 3-3.9 0.7-2.6 0.5-4.9 2.1-9.7 2.2-22.8 1.4-2.6 1.5-1.3 1.2-1.5 0.5-3.4 0-9.7 1.3-4.8 3.1-3 3.8-2.6 2.1-2.3z",name:"Puttalam",onClick:()=>t("Puttalam")}),x.jsx("path",{d:"M282.1 640.8l5.5 0.2 4.3-1.1 4.5-0.6 1.8 2 2.7 0.4 3.4-2.2 4 1.6 4.9-1.9 8.8-6.9 5.5-0.2 6.4 4.4 6.6-1.9 5.7-4 6.4-1.2 2.1 2.3 0.6 2 1.4 1.9 5.7 6.6 4 2.9 0.4 3.1-2.3 1.8-0.6 8-3 2.8-3.6 1.9-1 6.6 2.8 5.8 5.6-1.3 4.9 1.4-1.7 3.9-3.4 2.4-2.9 6.7-1.2 6.8 3.4 11 0.1 2.1-0.7 1.9-4.2 1.5-6.2-0.6-4.6 2.1-3.7 3.6-0.9 4.4-0.3 4.5-4.9 0.3-4.1-0.5-2.7-1.1-2.6-1.4-2.7-2.5-3.1-1.9-3.9 0.2-4 0.8-11.5-3.3-2.1 0.8-1.8 1-4.1-1-3.8-2-4.9-1.9 2.3-5.5 0.6-2.6-0.1-2.7 0-0.1-11-39.2 1.5-5.8-0.1 3.6 0.9 2.2 1.2 1.7 1.1 2.1 2.2 7.7 1.1 1.9 1.4 0 0.4-2.2 0.6-0.9 0.6-0.2 0.2 0.1-0.1-7.1-0.5-3.1-1.2-2.6-1.1-0.7-3-0.7-1.3-0.9-0.2-0.3-0.8-1.7 0.4-1.9 0.8-1.7 0.5-1.6-1.4-10z",name:"Gampaha",onClick:()=>t("Gampaha")}),x.jsx("path",{d:"M287.1 713l4.9 1.9 3.8 2 4.1 1 1.8-1 2.1-0.8 11.5 3.3 4-0.8 3.9-0.2 3.1 1.9 2.7 2.5 2.6 1.4 2.7 1.1 4.1 0.5 4.9-0.3 0.3-4.5 0.9-4.4 3.7-3.6 4.6-2.1 6.2 0.6 4.2-1.5 5 0.4 4 2 0.7 4.2-3.1 2.9 0.3 2.2 0.1 2.3-2.9 3.6-2.5 4-1 3.2-1.2 2.8 5.7 6-5.1 4.6-6.7-1.6-7.5 3.2 1.5 6.7-4.5-1.2-3-6.9-1.2-0.7-1.5-0.3-2.8 3.3-3.6 1.8-2.5-1.1-2.6 0.3-8.9 7.6-2.5 1.1-2.7 0.7-6.7 2.5-10.6-6.7-0.3 3.9 1.4 4.3 0.7 3 0.1 2.9-0.1 0.1-0.4 0.6-8.6-22.1-3.1-17.5-0.3-1.7 0-16.7 0.3-0.7z",name:"Colombo",onClick:()=>t("Colombo")}),x.jsx("path",{d:"M298.8 771.7l0.4-0.6 0.1-0.1-0.1-2.9-0.7-3-1.4-4.3 0.3-3.9 10.6 6.7 6.7-2.5 2.7-0.7 2.5-1.1 8.9-7.6 2.6-0.3 2.5 1.1 3.6-1.8 2.8-3.3 1.5 0.3 1.2 0.7 3 6.9 4.5 1.2-1.5-6.7 7.5-3.2 6.7 1.6 0.8 4.7 4 10.7-0.3 3.7 1.4 4.4 2.3 4.6 7 6.8 1.4 6.8 2.5 2.4 3.2 1.2 5.2 4.7 3.3 6.4-3.5 1.4 1.3 3.9 9.7 13.7 8.3 14.5-8.2 1.9-8 5-4.3 1.9 0 4.9 1.7 5.1-0.4 4.6-3.6-2.8-3.6-3.5-6.8-5.2-7 0.6-6.3 3.5-9.9-1.9-3.9-2.6-3.7-3.2-4.6-2-4.2-0.9-8.4-3.9-1.2-2-1.7-1.6-2.3 0.9-1.5 1-1.4-1.2-1.2-1.7-1.6-0.4-1-4-0.5-0.4-1-0.6-1-0.9-0.6-1.2 0.2-1.4 1.1-0.3 1.2 0.1 0.6 0-1.8-12.2-0.1-1-4.8-12.3-11.2-28.7z",name:"Kalutara",onClick:()=>t("Kalutara")}),x.jsx("path",{d:"M317.7 834.6l1.6 0.4 1.2 1.7 1.4 1.2 1.5-1 2.3-0.9 1.7 1.6 1.2 2 8.4 3.9 4.2 0.9 4.6 2 3.7 3.2 3.9 2.6 9.9 1.9 6.3-3.5 7-0.6 6.8 5.2 3.6 3.5 3.6 2.8 0.4-4.6-1.7-5.1 0-4.9 4.3-1.9 8-5 8.2-1.9 2.8 2.9 3.2 2.7 3.9 1.6 3.4 0.1 7.2 3.5 3.7-0.1 2 2.9-4.8 1.4-3.1 3.1 2.7 4.2 3.6 3.5-1.4 6.6-7.1-1.6-4.4-4.2-4.9-3.6-3.8-1.2-3.7 1 2.3 4.3 4.6 2.9 4.8 7 1.8 6.6-4.1 5-8.1-1.4 2.4 2.8 1.1 3.8-1.6 4.8-2.1 4.5 1.5 4.5 3.5 3.4 4.1 2.8 3.7 3.3-3.2 3.7-3.6 3.7-3.2 1.3-1.4 2.2 0.7 2.4 1.8 1 4.1 1.7-1.4 2.8-4.2 1.5-2.5 4.5 0 2.6 0.4 2.4 0.1 0.3-1.5-0.3-1.1-0.5-0.8-1-1-1.1-1.8-0.5-1 0.3-0.9 0.8-0.9 0.6-1.2 0-0.4-0.3-0.4-0.4-1.4-2-0.8-0.5-0.1-0.1-1.7-0.6-9.8-3.5-4.1-0.9-2.8-0.6-5-4-1.2-0.5-2.2-1.1-1.7 1.7-4.3-3.5-18.8-19.9-1.5-1.2-0.2-0.2-0.5-0.7-0.3-0.9 0.1-2-0.6-1-0.8-1.1-2.1-2.7-10.6-22.5-0.5-2.1 0.1-2 0-1.9-0.4-1.2-1.9-4-1.9-10.8-4.3-7.6-2.6-10.9z",name:"Galle",onClick:()=>t("Galle")}),x.jsx("path",{d:"M410.6 945.3l-0.1-0.3-0.4-2.4 0-2.6 2.5-4.5 4.2-1.5 1.4-2.8-4.1-1.7-1.8-1-0.7-2.4 1.4-2.2 3.2-1.3 3.6-3.7 3.2-3.7-3.7-3.3-4.1-2.8-3.5-3.4-1.5-4.5 2.1-4.5 1.6-4.8-1.1-3.8-2.4-2.8 8.1 1.4 4.1-5-1.8-6.6-4.8-7-4.6-2.9-2.3-4.3 3.7-1 3.8 1.2 4.9 3.6 4.4 4.2 7.1 1.6 1.4-6.6-3.6-3.5-2.7-4.2 3.1-3.1 4.8-1.4 4.5-0.7 4.5-1 1.6-3.8 3.9 0 10.2-1.4 3.3 6.2-1.5 4.1 4.1 0.7 5.5-0.9 2.6 3.2-0.2 2.2 3 2.2-1.2 1.2 0 2.2-2.2 0.9 0.4 1.7-1.6 4.1 1.6 3.7-8.9 6.7-2.8 9.9 4 2.9 4.4 1.6 2-0.3 1.3 1.2-1.1 2.4-1.4 2.1 0.8 4 3.8 2 2.7-0.4 2.5 0.5-0.8 2-2.1 2 2.5 8.9-7.5 3.2 0.6 3.7 3.2 2.1 2.2 0.2 2 1.1-0.1 1.9-1.7 0.9 2.8 4.2 5.8 2.7 1.3 0.7-3.5 4.1-9.5-0.5-3.9 0.5-3.1 1.2-3.2 1.8-5.6 4.2-1.6 0.4-1.6 0.3-3.8-1.4-4.1-2.1-2.3-0.7-1.6-0.5-13.4 1.6-3.8-0.8-1.9-1.9-1.2-2.5-1-1.5-0.7-1.1-3.9 2.3-3.5 0.3-6.2-0.9z",name:"Matara",onClick:()=>t("Matara")}),x.jsx("path",{d:"M490 942.5l-1.3-0.7-5.8-2.7-2.8-4.2 1.7-0.9 0.1-1.9-2-1.1-2.2-0.2-3.2-2.1-0.6-3.7 7.5-3.2-2.5-8.9 2.1-2 0.8-2-2.5-0.5-2.7 0.4-3.8-2-0.8-4 1.4-2.1 1.1-2.4-1.3-1.2-2 0.3-4.4-1.6-4-2.9 2.8-9.9 8.9-6.7-1.6-3.7 1.6-4.1-0.4-1.7 2.2-0.9 13.1 2.6 16.9 6.1 4.5 0.7 4.4-1.1 4.4-0.4 3.5 2.8 2.7 3.1 8.4 1.7 4.9 1.6 1.1-4.1-2.1-5.9-4.3-4.7 5.7-3.7 5.8-3.2 6.5-2.1 5-3.8-2.2-5.2 1.1-5.2 2.9 0 3.2-0.3 1.9-2.6-0.1-3.1 2.9 2 2.1-2.5 5.8 0 5.8 0.7 3.9 1.4 1.7 4.2 2.3 0.4 2.5-0.1 2.1-1.5 2.9-0.4 4.3 5.7 3.6 6 5.7 2.4 6.3-3.5 2.3-2.3 3.5-1.4 6.7-1.8 13.7-5.3 2.6-1.8 0.5 0.6 2.1 0.3 6.1-2.2 6.4 1.4 3-4.9 0-2-0.1-1.9 1-1.4 1-1.7-1.1-3.1-0.1-3.9 4.5-3.7 5.5-2.4 4.2-4.1 4.9-3.7 6.2-1.1 4.1-4.9 6.9 8.5 2.6 0.2 3 0.4 3.8 4.4 5.6 1.8 2.1 0.6-7.1 11.2-7.2 7.3-13.4 9.5-4.4 1.3-5.8 3.1-42.8 33.7-8.6 4.7-27.8 9.8-0.4-3.3 0-0.2-1.6-1.3-0.1 0-0.3 0.1-1.4 0.4-0.9 1.8-0.5 3.9-1.2 1.5-2 0.6-2.7 1.1-5 3.1-5 2.2-24 5.1-11.7 4-12.7 2.4-5.8 2.2-3.5 4.9-6.3-1.2-3.8 1.5-2.2 0.8-8.9 6.6-8.8 6.6-0.6 0.6z",name:"Hambantota",onClick:()=>t("Hambantota")}),x.jsx("path",{d:"M716.5 818.5l-2.1-0.6-5.6-1.8-3.8-4.4-3-0.4-2.6-0.2-6.9-8.5 6-85.1-1.2-4.6-2.7-4 0-4.5-1.6-4.4 1-4.6 0.5-4.4-6.8-4.1-8.2-2.1-1.2-1.1-1.5-0.8-1.7 0-1.8-0.8-1.8-3.2-1-3.6-2.9-5.5 2.7-7.2 4.8-5.7 3.7-2.9-5-7-0.7-5-3.2-5.6-5.1-4.4-0.9-4.5 0.3-5.6-2.7-12.2 0.4-3.1-1.5-0.3-1.4-0.9 3.4-5.3-4.6-1.2-5.7 3.1-2.8 1-2.6 1.1-0.8 2.2-1.6 2.5-3.2 0.8-2.3 0.2 0 3 1.3 2.7 0.2 2.8-1 2.3-1.6 1.9-1.1 1.6-4.7 2.6-5.7-0.2 0.1 8.9 1.2 8.7-4.3 3.1-4.7 1.6-2-3.8-1.8-4.4-0.8-4.2-2.1-4.2-1.6-2.7-1-2.1-2.8-0.5-2 0.5-3.4-3.4-2.6-5.5-1.5-10.2-0.9-2.9-0.7-2.9 0.6-2.1 1.3-2.4 2.4-11.3-0.8-11.6-10.3-2.2-11.3 6.3-4.9 4.6-2.8 1.1-2.3 0.5-4.2 1.5-5.7-9.5-1.8-5.6-0.3-3.8-1.5-3.3-3.5-2.1-0.6-0.6 2.2-11.1-0.5-4.4-1.7-5.3 0.2-3.9 4.3 0 8.6-0.8 4.2-0.7 8.4 3.2 6.8 6.8 11.2 3.5 5.4 3.1 4.5 0.6 0.6-2.4 1-2.8 1.5-1.5 1.3-2.5-0.7-5.5 1-5.2 6.3 1.2 7.4-0.4 6.1 2 7.9 11.5 5.1 4.8 7 2 7.3 1.5-0.3 6.9-2.3 6.8 0.5 3.9 2.1 3.4 7.3 4.4 3.9 3.8 15.1 2.6 15.4-1.6 5.4-3.1 0.1 5.9 1.8 5.7 0.7 13.1 1.6 3.8 8.1-8 4.7-3.8 6.3-1 4.4-0.7 0.2 0.9 1.9 0.4 1.9-2.4 1.4 0 1.8 9.4-0.1 3.4 1.6 0 0-0.1 0.2-3.2 0.6-3.2 0.9-2.8 1.5-1.9 0-1.6-0.2-0.4-0.5-1.4 0.4-0.8 1.3 0.6 2.1 2 0.7 1.8 0.5 5 3.6 5.6 5.7 19.8-1.1 54.6 0.6 3.7 2.4 8.2 0.3 4.8-1.3 9.3-10.6 36.8-0.6 3.8-0.2 5-0.8 4.2-3.3 6.5-0.8 2.9-1.3 4-4.4 7-2.1 3.3 1.5 5.6-2.5 6.7-14.6 23.2z",name:"Ampara",onClick:()=>t("Ampara")}),x.jsx("path",{d:"M623.8 412.4l3.9-1.3 20.7 2.2 0.7 2.4 4.8 16.3 1.8 10.6-4.2 5.8-2.3-9.6-0.3-1.4-3.6-9.7-1.6 0-0.3 7.4 0.3 2.3-0.2-0.1-0.2 0.7 0 1.2 0.4 1.4 0.7 0.9 2 0.6 0.4 0.7 1.9 4.9 4 3 3.9-0.3 1.3-5 1.5 0 1.4 2.6 0.4 0.7 1.9 8.4 1.9 3.3 2.6 2.8 1.7 2.7 2.8 6.6 1.1-1.1 1.5-1.1 0.7-1.1 1 2.2-1 1.1 0.5 0.9 0.5 0.5 0 0.1 0.3 0.5 0.1 1.1 0.1-0.1 1.1-0.9 2.4-1.2 1.2-0.9 0.5 1.3 0.7 1.6-0.5 1.9-0.8 1.9 0 1.4 0.1 1.4 1.6 3.2 2.8 2.2 1.9 1.4 1.7 2.8-1.1 0.1-0.5 0.3-0.7 0.5-0.5 0.3-0.4 0.2-0.7 2.6-0.6 2.5 2.7 7.9 1.4 1.7 3.3 3.8 0.1 0 4.8-0.9 1.6 0 1.6 4.9 1.8 3 0.6 0.9 9.9 10.4 3.2 5.1 0.6 4.5-5.1 1.6-2.4-1.6-5.6-7.3-3-2.5-3.8-1.4-0.1 0-0.4 0-2.7 0.2-2.4 2.5-1.6 5.2 2.7 1.2 2.7 0.4 2.3-0.9 1.7-2.3 2.7 1 2.5 1.2 0.9 1.1 0.6 0.7-0.4 2.5 3.1 2.8 3 2.9 2.4 2.8 2.5 4.2-1.2 1.4-0.3 1.3 0.4 1.6 1.1 2.2 1.5-1.8-0.9-3.1 2.7 0.9 5.4 4 1.3 1.8 4.2 10.9-0.3 0.4-1.3 5.9 0.2 0.7 0 0.1 1.1 2.2 0.3 0.9-0.9 1.6-1.7 1.3-1 1.4 1.2 2.1 1.2 1.5 0.3 1.1 0.1 0.2 0.7 1.3 1.7 1.5-2.5 1.8 0.2 0.9-4.4 0.7-6.3 1-4.7 3.8-8.1 8-1.6-3.8-0.7-13.1-1.8-5.7-0.1-5.9-5.4 3.1-15.4 1.6-15.1-2.6-3.9-3.8-7.3-4.4-2.1-3.4-0.5-3.9 2.3-6.8 0.3-6.9-7.3-1.5-7-2-5.1-4.8-7.9-11.5-6.1-2-7.4 0.4-6.3-1.2-3.3-18 2.1-17.9 1.7-6.8 5.2-3.5 6.6-0.9 8.3 1.1 2.2-0.2-1.9-8.6-3.9-8.4-1.7-8.6 1.9-36.7-1.3-12.2z m98.8 139l-0.4-2.5-0.9-1.9-1.1-2.3-0.7-2.3 0.1-2.4 0.7-2.1 0.3-2.3-1.1-2.7 2.9 2.9 2.9 6.7 2 3.1 0.5 1.3 2.2 5.8 5.6 8.9 2.6 4.2 3.9 20.2 0 0.1-0.2 4.6-3.4 2.8-3.2-2.5-1-1.1-0.5-0.5-0.1-1.1-0.2-1.2 0-0.5 1-14.6-0.7-5-2.5-2.2-1-2.1-7.7-11.3z",name:"Batticaloa",onClick:()=>t("Batticaloa")}),x.jsx("path",{d:"M363.2 748.2l5.1-4.6-5.7-6 1.2-2.8 1-3.2 2.5-4 2.9-3.6 3.6-1.6 9.6 9.7 2.8 3.7 3.6 2.7 1.6-0.9 2.4-0.5 1.6 2 1.1 2.3 5.8 1.3 7-4 2.9-0.3 3.5 0.1 4.9 2.8 6.4 2.2 4.5 0.6 4.6-0.1-0.1 3.8 1.5 1.7-1.7 1.6-0.9 2.4 4.8 3.6 5.6 0.5 12 2.7 12.6 1.7 4.9-0.8 5.7-0.5 7.6 0.3 7.2-1 13.1-6.8 0.6 8.5 1.7-0.8 1.7-0.7 3.2 3.5 3.9 1.2-0.5 2.2-0.7 1.8-0.9 0.9-6.3 2.8-1.1 3.1 2.5 3.8 3.5 2.9 5.3 1 5.5-2.3 4.7-3.5 4.2-0.2-3.8 5.8-2.3 5.9-4.3 5.1-2.2 5.2-2.2 10-4.4 6.2-3.5 6.6 0.7 3.8 1.5 3.7 0.2 14.3 2.5 5 3.3 4.3 4.4 2.4 4.2 3 2.2 4.2 1.8 5.4 4.3 4.7 2.1 5.9-1.1 4.1-4.9-1.6-8.4-1.7-2.7-3.1-3.5-2.8-4.4 0.4-4.4 1.1-4.5-0.7-16.9-6.1-13.1-2.6 0-2.2 1.2-1.2-3-2.2 0.2-2.2-2.6-3.2-5.5 0.9-4.1-0.7 1.5-4.1-3.3-6.2-10.2 1.4-3.9 0-1.6 3.8-4.5 1-4.5 0.7-2-2.9-3.7 0.1-7.2-3.5-3.4-0.1-3.9-1.6-3.2-2.7-2.8-2.9-8.3-14.5-9.7-13.7-1.3-3.9 3.5-1.4-3.3-6.4-5.2-4.7-3.2-1.2-2.5-2.4-1.4-6.8-7-6.8-2.3-4.6-1.4-4.4 0.3-3.7-4-10.7-0.8-4.7z",name:"Ratnapura",onClick:()=>t("Rathnapura")}),x.jsx("path",{d:"M692.5 802.6l-4.1 4.9-6.2 1.1-4.9 3.7-4.2 4.1-5.5 2.4-4.5 3.7 0.1 3.9 1.1 3.1-1 1.7-1 1.4 0.1 1.9 0 2-3 4.9-6.4-1.4-6.1 2.2-2.1-0.3-0.5-0.6-2.6 1.8-13.7 5.3-6.7 1.8-3.5 1.4-2.3 2.3-6.3 3.5-5.7-2.4-3.6-6-4.3-5.7-2.9 0.4-2.1 1.5-2.5 0.1-2.3-0.4-1.7-4.2-3.9-1.4-5.8-0.7-5.8 0-2.1 2.5-2.9-2 0.1 3.1-1.9 2.6-3.2 0.3-2.9 0-1.1 5.2 2.2 5.2-5 3.8-6.5 2.1-5.8 3.2-5.7 3.7-1.8-5.4-2.2-4.2-4.2-3-4.4-2.4-3.3-4.3-2.5-5-0.2-14.3-1.5-3.7-0.7-3.8 3.5-6.6 4.4-6.2 2.2-10 2.2-5.2 4.3-5.1 2.3-5.9 3.8-5.8 2.8 0.2 1.7 2.7 1.1 4 1.8 1 1.9 0.4 2.1 4.7 1.6 5.1 1.6 0.8 1.6 0.9 1 7.4 2.6 3.3 2 3.3 0.9-6.2 3.3-5.1 2.5 1.6 2.5 1.2 0.7-5.5 4.8-1.7-3.4-5.4-2.2-6.4 0-3.6 0.5-3.4 3.4-5.3-0.3-4.1-4.1-1.1-0.9-3 2-4.2-0.5-5 0.6-4.9 7.8-0.7 2-3.9 6.7-2-5.6-7.9 4.9-2.7 5.9-1.6 2.9-2.4 2.3-2.9 1.1-1.9 1.4-1.4 2.3 1 3-0.6 1.1-3.4 0.6-3.6 1.6-2.4 1.2-2.6 0.9-6.4 1.1-4.2 0-4.3-0.7-3.2-1.2-3.1-1.7-2.1-1.2-1.1-2.5-3.2-8.5 2.2-2.7-2.8-2.3-4.8-3.5-3.5-2.9-3.7 0.7-4.7 2.7-4.1 3.8 0.5 3.2 3.5 3.8-1.6 2.1-3.6 6.3-8 1.8-4.4 0-4.8 9-2.1 1.8 4.4 2 3.8 4.7-1.6 4.3-3.1-1.2-8.7-0.1-8.9 5.7 0.2 4.7-2.6 1.1-1.6 1.6-1.9 1-2.3-0.2-2.8-1.3-2.7 0-3 2.3-0.2 3.2-0.8 1.6-2.5 0.8-2.2 2.6-1.1 2.8-1 5.7-3.1 4.6 1.2-3.4 5.3 1.4 0.9 1.5 0.3-0.4 3.1 2.7 12.2-0.3 5.6 0.9 4.5 5.1 4.4 3.2 5.6 0.7 5 5 7-3.7 2.9-4.8 5.7-2.7 7.2 2.9 5.5 1 3.6 1.8 3.2 1.8 0.8 1.7 0 1.5 0.8 1.2 1.1 8.2 2.1 6.8 4.1-0.5 4.4-1 4.6 1.6 4.4 0 4.5 2.7 4 1.2 4.6-6 85.1z",name:"Monaragala",onClick:()=>t("Moneragala")}),x.jsx("path",{d:"M363.2 710l0.7-1.9-0.1-2.1-3.4-11 1.2-6.8 2.9-6.7 3.4-2.4 1.7-3.9-4.9-1.4-5.6 1.3-2.8-5.8 1-6.6 3.6-1.9 3-2.8 0.6-8 2.3-1.8-0.4-3.1 4.7-2.7 4.8-4.3 5-3.6 5.4-2.5 11.3-2.5 2.5-0.1 1.6-2.3 0.8-2.7-0.3-4.8 0.8-4.4 5.1-2 5.5 0.7 3.4 3.5 2.1 4.5 2.8 7.1 10 8.7-0.4 4.5 2 1.4 5.8 3.3 2.8 3.4-0.5 4.1 0 3.4 3.4 3.3 2.6 3.4-1.3 3.1-1.8 2.8-2.5 0.6-2.5 0.2-3.6 3.9-8 1.3-2.6 2.4 3.5 8.4 1.6 2.9-1.6 3.6-0.2 4.6 0.3 0.7 0.8 0.2-2 3.3-3.2 2.8-1.8 0.6-1.2 1.8 1.2 1.7 1.5 1.5-1.6 8.7 2 6.7 6.7 2.1 5.3 4 1.8 6.1 0.4 3.1-2.7 2.4-4.6 0.1-4.5-0.6-6.4-2.2-4.9-2.8-3.5-0.1-2.9 0.3-7 4-5.8-1.3-1.1-2.3-1.6-2-2.4 0.5-1.6 0.9-3.6-2.7-2.8-3.7-9.6-9.7-3.6 1.6-0.1-2.3-0.3-2.2 3.1-2.9-0.7-4.2-4-2-5-0.4z",name:"Kegalle",onClick:()=>t("Kegalle")}),x.jsx("path",{d:"M549.6 562l0.6 0.6 3.5 2.1 1.5 3.3 0.3 3.8 1.8 5.6 5.7 9.5 4.2-1.5 2.3-0.5 2.8-1.1 4.9-4.6 11.3-6.3 10.3 2.2 0.8 11.6-2.4 11.3-1.3 2.4-0.6 2.1 0.7 2.9 0.9 2.9 1.5 10.2 2.6 5.5 3.4 3.4 2-0.5 2.8 0.5 1 2.1 1.6 2.7 2.1 4.2 0.8 4.2-9 2.1 0 4.8-1.8 4.4-6.3 8-2.1 3.6-3.8 1.6-3.2-3.5-3.8-0.5-2.7 4.1-0.7 4.7 2.9 3.7 3.5 3.5 2.3 4.8 2.7 2.8 8.5-2.2 2.5 3.2 1.2 1.1 1.7 2.1 1.2 3.1 0.7 3.2 0 4.3-1.1 4.2-0.9 6.4-1.2 2.6-1.6 2.4-0.6 3.6-1.1 3.4-3 0.6-2.3-1-1.4 1.4-1.1 1.9-2.3 2.9-2.9 2.4-5.9 1.6-4.9 2.7 5.6 7.9-6.7 2-2 3.9-7.8 0.7-0.6 4.9 0.5 5-2 4.2 0.9 3 4.1 1.1 0.3 4.1-3.4 5.3-0.5 3.4 0 3.6 2.2 6.4 3.4 5.4-4.8 1.7-0.7 5.5-2.5-1.2-2.5-1.6-3.3 5.1-0.9 6.2-2-3.3-2.6-3.3-1-7.4-1.6-0.9-1.6-0.8-1.6-5.1-2.1-4.7-1.9-0.4-1.8-1-1.1-4-1.7-2.7-2.8-0.2-4.2 0.2-4.7 3.5-5.5 2.3-5.3-1-3.5-2.9-2.5-3.8 1.1-3.1 6.3-2.8 0.9-0.9 0.7-1.8 0.5-2.2-3.9-1.2-3.2-3.5-1.7 0.7-1.7 0.8-0.6-8.5 4.4-1.1 2.3-3.4-2.1-1-2.1-1.4 3.4-5.5-0.9-1.6-1.2-1.4-1.3-3.6-1.6-3.2-7.3-3.7-0.3-3.7 4.2-0.2 4.3 0.2 3.1-3.5 1.1-4.6 3.7-3.4 4.1-2 8.8-1.9 5.1-7.6 1-4.5 2.1-4.1 1.9-1.7 1.5-2 0.8-1.7-0.4-1.6-1.2-4.1 1.1-2.1 1.6-2-0.9-1.2-1-1.2-0.5-2 0.5-2.1-1.7-5.8 0.2-4.2 2.9-1.8 4.9-1.4 6.2-5.7 0.4-7.6-5-16.8-2-35.1-1.2-19 2.3-10.9z",name:"Badulla",onClick:()=>t("Badulla")}),x.jsx("path",{d:"M549.8 537.3l-0.2 3.9 1.7 5.3 0.5 4.4-2.2 11.1-2.3 10.9 1.2 19-7.3-0.8-4.7 0.7-2.6 4.3-1.4 1.3-1.7 0.9-2.8-3.5-3.8 1.9-9.5-0.1-7.3 6.1-6.6 1-8.6-7.1-3.4-1.4-3.2 2-1.4 3.6 0.8 8.5-5 5.5-8.4-0.5-14.7-9.2-4.7-6.6 0.1-2.4 1.3-1.7 0.5-2.8-0.7-2.9-1.2-2.5-1.4-2.3-2.3-4.7 0.6-4.9 3.3-3 0.8-2-0.1-2.1 0.7-2.7 0.1-2.7-4.2-4.2-1.3-7.2-0.7-7.7-1.1-1.7-0.9-0.6 0-4-1.6-4-2.3-3.8-1.6-3.7-1.8-0.5-2-1.1-0.6-4.1 1.1-3.8 4.9-3.6 7.7-2.9 4.1-4.9 3.7 0.1 2.8 1.8 3.4-2.3 1.7-2.8 1.6-1.2 1.5-0.8-0.1-1.7-0.6-1.1 3-3 2.2-3.4 0-4.3 1.2-3.8 2.4 0 1.7 0.5 1.3-1 4.5-4.7 3-2.6 4.4-2.2 4.8-2 2 2 3.2 3.6-0.1 4.1 1.3 1.3 1.9 0.8 1.5-1 0.1-1.5 2.8-1.3 2.7 0.8 3.6 0.7 3.4 2.1-6.9 7.2-2.3 11-0.6 5.4-2.2 9.4-0.8 1.6-0.4 1.7-6.7 1.5-1.6 6.4 3.1 14.1-0.4 4.6 2.3 3.2 6.1 1.3 5.8-2.4 4.5-4.2 2 2.8 3.6 2.2 1-4.1 0.5-4.1 12.3 0.8 12-2.2z",name:"Matale",onClick:()=>t("Matale")}),x.jsx("path",{d:"M534.8 393.9l3.5-1 2.7 4 3.7 1.5 3.6 2.7 0.9 4.9 2.9 2.9 9.7-1 17.5 4.3 4.1 0 3.8 2.2 3.7 2.9 4.1 2.1 2.9-0.3 1.7 2.4 0.3 2.9-0.1 3 0.8 4.4-1.2 2.9-2.7 1.7 0.9 0.7 1.2 0.4 5.7-1.4 3.3-7.6 1.2-2.2 1.4-6.1 1.6-1.4 1.8-1.3 1.5-2.8 2.1-2.3 2.9 0 3.5 0 1.3 12.2-1.9 36.7 1.7 8.6 3.9 8.4 1.9 8.6-2.2 0.2-8.3-1.1-6.6 0.9-5.2 3.5-1.7 6.8-2.1 17.9 3.3 18-1 5.2 0.7 5.5-1.3 2.5-1.5 1.5-1 2.8-0.6 2.4-4.5-0.6-5.4-3.1-11.2-3.5-6.8-6.8-8.4-3.2-4.2 0.7-8.6 0.8-4.3 0-12 2.2-12.3-0.8-0.5 4.1-1 4.1-3.6-2.2-2-2.8-4.5 4.2-5.8 2.4-6.1-1.3-2.3-3.2 0.4-4.6-3.1-14.1 1.6-6.4 6.7-1.5 0.4-1.7 0.8-1.6 2.2-9.4 0.6-5.4 2.3-11 6.9-7.2-3.4-2.1-3.6-0.7-2.7-0.8-2.8 1.3-0.1 1.5-1.5 1-1.9-0.8-1.3-1.3 0.1-4.1-3.2-3.6-2-2 0.3-6.1 4.5-6.4-4.6-3.6 0.4-8.1 1.6-9.1 3.3-8.8 1.9-9.8 3.4-8.9 9.1-1.7 10.2 0 3-1.8 0.9-4.1 1.8-4.1 2.9-3.1z",name:"Polonnaruwa",onClick:()=>t("Polonnaruwa")}),x.jsx("path",{d:"M308.3 641.1l-0.6-13.8-8.5-45.8-0.4-8 0.4-8 2.5-6.4 3.5-5.9 0.9-2.7 1.6-2.3 3.3-0.8 2.8-1.5-1.3-2.2-2.8-0.7 1.1-3 1.6-2.7 3-0.9 3.3-0.3 2.5-1 1.6-2.2-0.9-2.4-1.2-2.6 0.7-6.2 2.2-5.6 0.4-2.8 0.9-2.5 3-1.6 2.8-1.9 0.6-2.5 1.1-2.4 4.9-2.5 0.9-2.1 0.4-2.4 1.4-3.2 3.4-1.6-0.2 0.4-0.2 0.4 1.4-0.4 1.8-1.9 0.1-2.8 1.3-2.3 4.8 2.7 2.9-2.2-2.8-5.2 1.4-2.7 1.7-2.6 0.2-5.3-0.2-6.3 0.9-3 0.6-2.8-2.7-1.8-3.2-1.1-2.2-4.1-0.8-4.6-2.4-9.2 0.1-4.7-0.5-4.4 5 2.8 21.3 9.7 4.5 1.2 4.4 1.8 3.5 2.4 4.2 0.7 7.7 2.9 6.9 5.7 3.8 3.8 4.2 2.6 4.3-0.2 3.5 2.9 0 2.9-0.4 2.9 0.7 5-0.3 4.2 0.4 4.1 3.2 1.3 3.8 0.3 1.9 3.2 0.6 3.9 2.1 5.4 1.2 5.5-0.9 8.1 5.9 5.6-1.1 3.8 0.6 4.1 2 1.1 1.8 0.5 1.6 3.7 2.3 3.8 1.6 4 0 4 0.9 0.6 1.1 1.7 0.7 7.7 1.3 7.2 4.2 4.2-0.1 2.7-0.7 2.7 0.1 2.1-0.8 2-3.3 3-0.6 4.9 2.3 4.7 1.4 2.3 1.2 2.5 0.7 2.9-0.5 2.8-1.3 1.7-0.1 2.4-2.8 1.3-2.7 0.7 1.9 3 1.3 3.1-2.4 1.2-3.4-0.5-3.3 1.8 0.3 2.6-0.3 2.4-4-0.3-3.5-2.5-3.4 0-0.7 4.6-1 1.3-0.8 1.4 0.2 1.5 0.4 1.1-4.1 1.2-4.8-0.5-2.1-4.5-3.4-3.5-5.5-0.7-5.1 2-0.8 4.4 0.3 4.8-0.8 2.7-1.6 2.3-2.5 0.1-11.3 2.5-5.4 2.5-5 3.6-4.8 4.3-4.7 2.7-4-2.9-5.7-6.6-1.4-1.9-0.6-2-2.1-2.3-6.4 1.2-5.7 4-6.6 1.9-6.4-4.4-5.5 0.2-8.8 6.9-4.9 1.9z",name:"Kurunegala",onClick:()=>t("Kurunegala")}),x.jsx("path",{d:"M495.4 261.4l6.5-2.6 6.8 0.1 5.8 3.4 10.1 7 3.5 3.9 1.9 2.5 2.2 1.7-2.7 6-3.9 5.8 0.1 10 4.3 9.4 1.7 4.9-3.5 8.3 0.2 4.8 1.9 2.2 2.5 2.4 0.9 5.6 6.1 9.1 3.3 7.7 2 2.7 2.7 2 1.5 3.6-1.9 3.4-3.2 2.2-2.9 2.8-0.9 2.8-0.6 2.9-5 17.9-2.9 3.1-1.8 4.1-0.9 4.1-3 1.8-10.2 0-9.1 1.7-3.4 8.9-1.9 9.8-3.3 8.8-1.6 9.1-0.4 8.1 4.6 3.6-4.5 6.4-0.3 6.1-4.8 2-4.4 2.2-3 2.6-4.5 4.7-1.3 1-1.7-0.5-2.4 0-1.2 3.8 0 4.3-2.2 3.4-3 3 0.6 1.1 0.1 1.7-1.5 0.8-1.6 1.2-1.7 2.8-3.4 2.3-2.8-1.8-3.7-0.1-4.1 4.9-7.7 2.9-4.9 3.6-5.9-5.6 0.9-8.1-1.2-5.5-2.1-5.4-0.6-3.9-1.9-3.2-3.8-0.3-3.2-1.3-0.4-4.1 0.3-4.2-0.7-5 0.4-2.9 0-2.9-3.5-2.9-4.3 0.2-4.2-2.6-3.8-3.8-6.9-5.7-7.7-2.9-4.2-0.7-3.5-2.4-4.4-1.8-4.5-1.2-21.3-9.7-5-2.8-2.5-3.3-3.4-2.8-4.7 0.2-4.1-3.1-3.9 1.8-4.8 0-1.4-4.2-5.8-23.4-3.4-6.6 2.6-5.7 3.9-1.8 1-2.1 0.3-1.7 7.2-5.9 4.2-8.9-1.3-9.6 1.9 0.9 2.2 0.3 0.5-21.6-1.8-13.7 10.2 4.2 11.3 0.1 22.5-5.9 0.1 7.5 2.3 6.6 3.5 1.2 3.4 1.6 1.5 2.8 0.9 3.2 2.4 4.9 4.9 2.6 2.4 0.7 2.2 0.1 3.5-6.3 4.1-1.8 4.3-10.1 9.1-11.8 7-3.2 4.3 2.2 3.9 2.8 7.3 0 6.2-4.7 5.8-5.3 5-5.9 2.8-4.3 3.3-3.9 5.5-4.4-2-6-4.2-5.5-6-2.1-0.4-5.1 17.1-0.6 6.7-4.7 6.1-1.8 6.3-1.2z",name:"Anuradhapura",onClick:()=>t("Anuradhapura")}),x.jsx("path",{d:"M508.4 753.2l-13.1 6.8-7.2 1-7.6-0.3-5.7 0.5-4.9 0.8-12.6-1.7-12-2.7-5.6-0.5-4.8-3.6 0.9-2.4 1.7-1.6-1.5-1.7 0.1-3.8 2.7-2.4-0.4-3.1-1.8-6.1-5.3-4-6.7-2.1-2-6.7 1.6-8.7-1.5-1.5-1.2-1.7 1.2-1.8 1.8-0.6 3.2-2.8 2-3.3-0.8-0.2-0.3-0.7 6.6 0.6 10.4 15.4 6.7 4 5-5.3 2.7-7.8-2.7-3.7-3.4-3.3-4.1-7.5-1.8-0.8-1.9 0.6 5.2-4.2 8.4 1 4.6-1 6.7-4.6 4.5-0.1 4 1 14.8-17.6 4.7-7.9-2.1-8.7-0.7-6.7 4 3.6 3.3 4.4 2.4 0.9 2 0.2 5.3 8.4 8.4 0.6 9.9-1.4 9.6 1.9-0.2 4.2 1.7 5.8-0.5 2.1 0.5 2 1 1.2 0.9 1.2-1.6 2-1.1 2.1 1.2 4.1 0.4 1.6-0.8 1.7-1.5 2-1.9 1.7-2.1 4.1-1 4.5-5.1 7.6-8.8 1.9-4.1 2-3.7 3.4-1.1 4.6-3.1 3.5-4.3-0.2-4.2 0.2 0.3 3.7 7.3 3.7 1.6 3.2 1.3 3.6 1.2 1.4 0.9 1.6-3.4 5.5 2.1 1.4 2.1 1-2.3 3.4-4.4 1.1z",name:"Nuwara-Eliya",onClick:()=>t("NuwaraEliya")}),x.jsx("path",{d:"M498.3 254l-1.9 3.4-1 4-6.3 1.2-6.1 1.8-6.7 4.7-17.1 0.6 0.4 5.1 6 2.1 4.2 5.5 2 6-5.5 4.4-3.3 3.9-2.8 4.3-5 5.9-5.8 5.3-6.2 4.7-7.3 0-3.9-2.8-4.3-2.2-7 3.2-9.1 11.8-4.3 10.1-4.1 1.8-3.5 6.3-2.2-0.1-2.4-0.7-4.9-2.6-2.4-4.9-0.9-3.2-1.5-2.8-3.4-1.6-3.5-1.2-2.3-6.6-0.1-7.5-8.8-11.3-5.4-4.2 0-3 0.9-3.5 5.9-0.6 3.5-7.8 6.4-3.6 8.4 0.9 13-1.6 12.3-4.6 1.2-8.1-3.5-9-3.6-5.7-6.2-2.9 10.7-6.8 6.4-5.2 4.1-6.3-0.2-3.9-0.9-4 0-2.1-0.2-1.9-3.4-0.5-1.8-2.5 0.6-3.4 4.2-0.4 4.4 0.3 8-0.2 5.7 3.6 3.6 5.3 5.6-2.5 4-3.5 2.3-1.1 2.2-1.3 0.4-1.2 0.5-1.1 7.5-0.2 7.2 2.7 0.8 7.5 6.2 0.7 2.7 4.7-2.2 3.3-0.4 3.2 3.6-0.9 3.4-2.3 7.2 1.1 7.4 4.5 2.8 3.7-4.3 15.8z",name:"Vavuniya",onClick:()=>t("Vavuniya")}),x.jsx("path",{d:"M428.6 698.3l0.2-4.6 1.6-3.6-1.6-2.9-3.5-8.4 2.6-2.4 8-1.3 3.6-3.9 2.5-0.2 2.5-0.6 1.8-2.8 1.3-3.1-2.6-3.4-3.4-3.3 0-3.4 0.5-4.1-2.8-3.4-5.8-3.3-2-1.4 0.4-4.5-10-8.7-2.8-7.1 4.8 0.5 4.1-1.2-0.4-1.1-0.2-1.5 0.8-1.4 1-1.3 0.7-4.6 3.4 0 3.5 2.5 4 0.3 0.3-2.4-0.3-2.6 3.3-1.8 3.4 0.5 2.4-1.2-1.3-3.1-1.9-3 2.7-0.7 2.8-1.3 4.7 6.6 14.7 9.2 8.4 0.5 5-5.5-0.8-8.5 1.4-3.6 3.2-2 3.4 1.4 8.6 7.1 6.6-1 7.3-6.1 9.5 0.1 3.8-1.9 2.8 3.5 1.7-0.9 1.4-1.3 2.6-4.3 4.7-0.7 7.3 0.8 2 35.1 5 16.8-0.4 7.6-6.2 5.7-4.9 1.4-2.9 1.8-9.6-1.9-9.9 1.4-8.4-0.6-5.3-8.4-2-0.2-2.4-0.9-3.3-4.4-4-3.6 0.7 6.7 2.1 8.7-4.7 7.9-14.8 17.6-4-1-4.5 0.1-6.7 4.6-4.6 1-8.4-1-5.2 4.2 1.9-0.6 1.8 0.8 4.1 7.5 3.4 3.3 2.7 3.7-2.7 7.8-5 5.3-6.7-4-10.4-15.4-6.6-0.6z",name:"Kandy",onClick:()=>t("Kandy")})]})})}),x.jsx("div",{children:a&&x.jsxs("div",{children:[x.jsx("h2",{children:a.name}),x.jsxs("table",{border:"1",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Party_Code"}),x.jsx("th",{children:"Votes"}),x.jsx("th",{children:"Percentage"}),x.jsx("th",{children:"Party_Name"}),x.jsx("th",{children:"Candidate"}),x.jsx("th",{children:"Symbol"})]})}),x.jsx("tbody",{children:a.by_party.map((n,r)=>{const i=o9(n.party_code),s=i.color[0],o=`/symbols/${i.symbol}.png`;return x.jsxs("tr",{style:{backgroundColor:s,color:"white"},children:[x.jsx("td",{children:n.party_code}),x.jsx("td",{children:n.votes}),x.jsx("td",{children:n.percentage}),x.jsx("td",{children:n.party_name}),x.jsx("td",{children:n.candidate}),x.jsx("td",{children:i.symbol>=0?x.jsx("img",{src:o,alt:i.symbol,style:{width:"40px",height:"40px"}}):"N/A"})]},r)})})]}),x.jsx("h3",{children:"Summary"}),x.jsxs("ul",{children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Valid: "}),a.summary.valid]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Rejected: "}),a.summary.rejected]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Polled: "}),a.summary.polled]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Electors: "}),a.summary.electors]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Valid: "}),a.summary.percent_valid]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Rejected: "}),a.summary.percent_rejected]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Percent_Polled: "}),a.summary.percent_polled]})]})]})})]})}function c9(){const[a,e]=H.useState(null),t=r=>{const i=r.target.files[0];if(i&&i.type==="application/json"){const s=new FileReader;s.onload=o=>{try{const l=JSON.parse(o.target.result);e(l)}catch(l){console.error("Error parsing JSON:",l),e(null)}},s.readAsText(i)}else console.error("Invalid file type. Please select a JSON file."),e(null)},n=r=>{const i=Math.round(r.r*255),s=Math.round(r.g*255),o=Math.round(r.b*255),l=r.a;return`rgb(${i}, ${s}, ${o}, ${l})`};return x.jsxs("div",{children:[x.jsx("h2",{style:{textAlign:"center"},children:"Upload Json File"}),x.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:x.jsx("input",{type:"file",accept:".json",onChange:t,style:{padding:"10px",borderRadius:"8px",border:"1px solid #ccc",backgroundColor:"#91A3B0"}})}),a&&x.jsxs("table",{border:"1",children:[x.jsx("thead",{style:{backgroundColor:"#333333",color:"#ffffff"},children:x.jsxs("tr",{children:[x.jsx("th",{children:"Party Code"}),x.jsx("th",{children:"Party Name"}),x.jsx("th",{children:"Base Color Bottom"}),x.jsx("th",{children:"Base Color Top"}),x.jsx("th",{children:"Base Color Mid"}),x.jsx("th",{children:"Title Color"}),x.jsx("th",{children:"Shadow Color"}),x.jsx("th",{children:"Percent Color"}),x.jsx("th",{children:"Count Color"}),x.jsx("th",{children:"Title Background"})]})}),x.jsx("tbody",{children:a.candidate_ary.map(r=>x.jsxs("tr",{children:[x.jsx("td",{children:r.xml_id}),x.jsx("td",{children:r.party_name}),["baseColorBottom","baseColorTop","baseColorMid","titleColor","shadowColor","percentColor","countColor","titleBackground"].map(i=>x.jsx("td",{children:x.jsx("div",{style:{height:"40px",backgroundColor:n(r[i]),border:"1px solid #ccc",textAlign:"center"}})},i))]},r.xml_id))})]})]})}function u9(){const[a,e]=H.useState([]),t=i=>{Array.from(i.target.files).forEach(o=>{const l=new FileReader;l.onload=()=>{try{const c=JSON.parse(l.result);e(d=>[...d,{name:o.name,content:c}])}catch{console.error("Invalid Json in file")}},l.readAsText(o)})},n=()=>{const i={};return a.forEach(({content:s})=>{const o=s.ad_code;i[o]||(i[o]={}),s.by_party.forEach(l=>{var d,h;(d=i[o])[h=l.party_code]||(d[h]={party_code:l.party_code,party_name:l.party_name,votes:0,seats_by_wards:0,seats_return:0,total_seats:0});const c=i[o][l.party_code];c.votes+=l.votes,c.seats_by_wards+=l.seats_by_wards,c.seats_return+=l.seats_return,c.total_seats+=l.total_seats})}),i},r=()=>{const i={};return a.forEach(({content:s})=>{const o=s.ad_code;i[o]||(i[o]={valid:0,rejected:0,polled:0,electors:0});const l=i[o];l.valid+=s.summary.valid,l.rejected+=s.summary.rejected,l.polled+=s.summary.polled,l.electors+=s.summary.electors}),i};return x.jsx("div",{className:"election-container",children:x.jsxs("div",{className:"election-content",children:[x.jsx("h1",{children:"Local Authority Election"}),x.jsxs("div",{className:"file-upload",children:[x.jsx("label",{for:"files",children:"Select Json files:"}),x.jsx("input",{type:"file",id:"files",name:"files",multiple:!0,accept:".json",onChange:t})]}),x.jsx("div",{children:Object.entries(n()).map(([i,s])=>{var c;const o=r()[i],l=(c=a.find(d=>d.content.ad_code===i))==null?void 0:c.content.ad_name;return x.jsxs("div",{className:"result-content",children:[x.jsxs("h2",{children:["Electoral District: ",i," - ",l]}),x.jsx("h3",{children:"Party Results:"}),x.jsxs("table",{children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{}),x.jsx("th",{}),x.jsx("th",{}),x.jsx("th",{}),x.jsx("th",{children:"Seats By Wards"}),x.jsx("th",{children:"Seats Return"}),x.jsx("th",{children:"Total Seats"})]})}),x.jsx("tbody",{children:Object.values(s).sort((d,h)=>h.votes-d.votes).map((d,h)=>x.jsxs("tr",{children:[x.jsx("td",{children:h+1}),x.jsx("td",{children:d.party_code}),x.jsx("td",{children:d.party_name}),x.jsx("td",{children:d.votes}),x.jsx("td",{children:d.seats_by_wards}),x.jsx("td",{children:d.seats_return}),x.jsx("td",{children:d.total_seats})]},d.party_code))})]}),x.jsx("h3",{children:"Summary Results:"}),x.jsxs("table",{children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Valid"}),x.jsx("th",{children:"Rejected"}),x.jsx("th",{children:"Polled"}),x.jsx("th",{children:"Electors"})]})}),x.jsx("tbody",{children:x.jsxs("tr",{children:[x.jsx("td",{children:o.valid}),x.jsx("td",{children:o.rejected}),x.jsx("td",{children:o.polled}),x.jsx("td",{children:o.electors})]})})]})]},i)})})]})})}function d9(){const[a,e]=H.useState({alpha:0,beta:0,gamma:0});return H.useEffect(()=>{function t(n){const r=n.alpha,i=n.beta,s=n.gamma;e({alpha:r.toFixed(2),beta:i.toFixed(2),gamma:s.toFixed(2)})}window.addEventListener("deviceorientation",t,!0)},[]),x.jsxs("div",{children:[x.jsx("h1",{children:"Device Orientation"}),x.jsxs("p",{children:["Alpha (Z axis): ",a.alpha,"°"]}),x.jsxs("p",{children:["Beta (X axis): ",a.beta,"°"]}),x.jsxs("p",{children:["Gamma (Y axis): ",a.gamma,"°"]})]})}const ZD=""+new URL("base-XCPXipUW.png",import.meta.url).href,QD=""+new URL("arrow-dJLkr5v4.png",import.meta.url).href;function f9(){const[a,e]=H.useState({alpha:0,beta:0,gamma:0});return H.useEffect(()=>{function t(n){const r=n.alpha,i=n.beta,s=n.gamma;e({alpha:r.toFixed(2),beta:i.toFixed(2),gamma:s.toFixed(2)})}window.addEventListener("deviceorientation",t,!0)},[]),x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("h1",{children:"Device Orientation and Compass"}),x.jsxs("p",{children:["Alpha (Z axis): ",a.alpha,"°"]}),x.jsxs("p",{children:["Beta (X axis): ",a.beta,"°"]}),x.jsxs("p",{children:["Gamma (Y axis): ",a.gamma,"°"]})]}),x.jsxs("div",{style:{position:"relative",width:"250px",height:"250px"},children:[x.jsx("img",{src:ZD,alt:"Compass Base",style:{position:"absolute",width:"100%",height:"100%"}}),x.jsx("img",{src:QD,alt:"Compass Arrow",style:{position:"absolute",width:"100%",height:"100%",transform:`rotate(${a.alpha}deg)`}})]})]})}function h9(){const[a,e]=H.useState({alpha:0,beta:0,gamma:0});return H.useEffect(()=>{function t(n){const r=n.alpha,i=n.beta,s=n.gamma;e({alpha:r.toFixed(2),beta:i.toFixed(2),gamma:s.toFixed(2)})}window.addEventListener("deviceorientation",t,!0)},[]),x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("h1",{children:"Device Orientation and Compass"}),x.jsxs("p",{children:["Alpha (Z axis): ",a.alpha,"°"]}),x.jsxs("p",{children:["Beta (X axis): ",a.beta,"°"]}),x.jsxs("p",{children:["Gamma (Y axis): ",a.gamma,"°"]})]}),x.jsxs("div",{style:{position:"relative",width:"250px",height:"250px"},children:[x.jsx("img",{src:ZD,alt:"Compass Base",style:{position:"absolute",width:"100%",height:"100%",transform:`rotate(${a.alpha}deg)`}}),x.jsx("img",{src:QD,alt:"Compass Arrow",style:{position:"absolute",width:"100%",height:"100%"}})]})]})}function p9(){const[a,e]=H.useState(null),[t,n]=H.useState(""),[r,i]=H.useState(!1),s=async()=>{try{const[c]=await window.showOpenFilePicker({types:[{description:"Text Files",accept:{"text/*":[".txt"]}}],excludeAcceptAllOption:!0,multiple:!1}),d=await c.getFile(),h=new FileReader;h.onload=()=>{n(h.result)},h.onerror=()=>{console.error("Error reading file.")},h.readAsText(d),e(c),i(!0)}catch(c){console.error(c)}},o=async()=>{try{let c=a;c||(c=await window.showSaveFilePicker({suggestedName:"untitled.txt",types:[{description:"Text Files",accept:{"text/*":[".txt"]}}]}),e(c));const d=await c.createWritable();await d.write(t),await d.close(),i(!0),alert("File saved successfully!")}catch(c){console.error(c)}},l=()=>{e(null),n(""),i(!1)};return x.jsxs("div",{className:"file-container",children:[x.jsxs("div",{className:"options",children:[x.jsx("button",{onClick:s,children:"Open"}),x.jsx("button",{onClick:o,children:a?"Save":"Save As"}),x.jsx("button",{onClick:l,disabled:!r,children:"Close"})]}),x.jsx("textarea",{value:t,onChange:c=>n(c.target.value)})]})}function m9(){const[a,e]=H.useState(Notification.permission),[t,n]=H.useState(""),[r,i]=H.useState([]),[s,o]=H.useState(""),[l,c]=H.useState(""),[d,h]=H.useState(null),m=()=>{const A=new Date(Date.now()+d),E={id:Date.now(),title:s,description:l,dueTime:A};i(b=>[...b,E]),o(""),c(""),h(null)},v=A=>{const E=A-new Date;return`${Math.floor(E/1e3)}s`};return H.useEffect(()=>{a==="default"&&Notification.requestPermission().then(A=>{console.log(A),e(A)})},[a]),H.useEffect(()=>{const A=setInterval(()=>n(new Date),1e3);return()=>clearInterval(A)},[]),H.useEffect(()=>{const A=setInterval(()=>{i(E=>{const b=new Date;return E.filter(_=>b>=_.dueTime?(new Notification(_.title,{body:_.description}),!1):!0)})},1e3);return()=>clearInterval(A)},[]),a==="default"?x.jsx("h2",{children:"Enable Notifications"}):a==="denied"?x.jsx("h2",{children:"Notifications Blocked"}):x.jsxs("div",{className:"notification-container",children:[x.jsx("div",{className:"time",children:t.toLocaleString()}),x.jsxs("div",{className:"inputs",children:[x.jsx("div",{children:x.jsx("input",{type:"text",value:s,onChange:A=>o(A.target.value),placeholder:"Notification Title"})}),x.jsx("div",{children:x.jsx("input",{type:"text",value:l,onChange:A=>c(A.target.value),placeholder:"Notification Description"})})]}),x.jsxs("div",{className:"buttons",children:[x.jsx("button",{className:d===5e3?"active":"",onClick:()=>h(5e3),children:"In 5 Seconds"}),x.jsx("button",{className:d===1e4?"active":"",onClick:()=>h(1e4),children:"In 10 Seconds"}),x.jsx("button",{className:d===3e4?"active":"",onClick:()=>h(3e4),children:"In 30 Seconds"})]}),x.jsx("div",{children:x.jsx("button",{className:"create-button",onClick:m,disabled:!s||!l||!d,children:"Create Notification"})}),x.jsx("div",{className:"notification-list",children:r.map(A=>x.jsxs("div",{className:"notification-item",children:[x.jsxs("div",{children:[A.title," - ",A.description]}),x.jsx("div",{className:"time-remaining",children:v(A.dueTime)})]},A.id))})]})}var Qb={exports:{}},qT;function g9(){return qT||(qT=1,function(a){var e=function(t){var n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(X,z,J){X[z]=J.value},s,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function h(X,z,J){return Object.defineProperty(X,z,{value:J,enumerable:!0,configurable:!0,writable:!0}),X[z]}try{h({},"")}catch{h=function(z,J,le){return z[J]=le}}function m(X,z,J,le){var ce=z&&z.prototype instanceof T?z:T,xe=Object.create(ce.prototype),fe=new G(le||[]);return i(xe,"_invoke",{value:W(X,J,fe)}),xe}t.wrap=m;function v(X,z,J){try{return{type:"normal",arg:X.call(z,J)}}catch(le){return{type:"throw",arg:le}}}var A="suspendedStart",E="suspendedYield",b="executing",_="completed",R={};function T(){}function M(){}function I(){}var P={};h(P,l,function(){return this});var B=Object.getPrototypeOf,F=B&&B(B(Y([])));F&&F!==n&&r.call(F,l)&&(P=F);var L=I.prototype=T.prototype=Object.create(P);M.prototype=I,i(L,"constructor",{value:I,configurable:!0}),i(I,"constructor",{value:M,configurable:!0}),M.displayName=h(I,d,"GeneratorFunction");function U(X){["next","throw","return"].forEach(function(z){h(X,z,function(J){return this._invoke(z,J)})})}t.isGeneratorFunction=function(X){var z=typeof X=="function"&&X.constructor;return z?z===M||(z.displayName||z.name)==="GeneratorFunction":!1},t.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,I):(X.__proto__=I,h(X,d,"GeneratorFunction")),X.prototype=Object.create(L),X},t.awrap=function(X){return{__await:X}};function j(X,z){function J(xe,fe,_e,Ie){var Ge=v(X[xe],X,fe);if(Ge.type==="throw")Ie(Ge.arg);else{var Ue=Ge.arg,$e=Ue.value;return $e&&typeof $e=="object"&&r.call($e,"__await")?z.resolve($e.__await).then(function(dt){J("next",dt,_e,Ie)},function(dt){J("throw",dt,_e,Ie)}):z.resolve($e).then(function(dt){Ue.value=dt,_e(Ue)},function(dt){return J("throw",dt,_e,Ie)})}}var le;function ce(xe,fe){function _e(){return new z(function(Ie,Ge){J(xe,fe,Ie,Ge)})}return le=le?le.then(_e,_e):_e()}i(this,"_invoke",{value:ce})}U(j.prototype),h(j.prototype,c,function(){return this}),t.AsyncIterator=j,t.async=function(X,z,J,le,ce){ce===void 0&&(ce=Promise);var xe=new j(m(X,z,J,le),ce);return t.isGeneratorFunction(z)?xe:xe.next().then(function(fe){return fe.done?fe.value:xe.next()})};function W(X,z,J){var le=A;return function(xe,fe){if(le===b)throw new Error("Generator is already running");if(le===_){if(xe==="throw")throw fe;return K()}for(J.method=xe,J.arg=fe;;){var _e=J.delegate;if(_e){var Ie=Q(_e,J);if(Ie){if(Ie===R)continue;return Ie}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(le===A)throw le=_,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);le=b;var Ge=v(X,z,J);if(Ge.type==="normal"){if(le=J.done?_:E,Ge.arg===R)continue;return{value:Ge.arg,done:J.done}}else Ge.type==="throw"&&(le=_,J.method="throw",J.arg=Ge.arg)}}}function Q(X,z){var J=z.method,le=X.iterator[J];if(le===s)return z.delegate=null,J==="throw"&&X.iterator.return&&(z.method="return",z.arg=s,Q(X,z),z.method==="throw")||J!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+J+"' method")),R;var ce=v(le,X.iterator,z.arg);if(ce.type==="throw")return z.method="throw",z.arg=ce.arg,z.delegate=null,R;var xe=ce.arg;if(!xe)return z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,R;if(xe.done)z[X.resultName]=xe.value,z.next=X.nextLoc,z.method!=="return"&&(z.method="next",z.arg=s);else return xe;return z.delegate=null,R}U(L),h(L,d,"Generator"),h(L,l,function(){return this}),h(L,"toString",function(){return"[object Generator]"});function $(X){var z={tryLoc:X[0]};1 in X&&(z.catchLoc=X[1]),2 in X&&(z.finallyLoc=X[2],z.afterLoc=X[3]),this.tryEntries.push(z)}function re(X){var z=X.completion||{};z.type="normal",delete z.arg,X.completion=z}function G(X){this.tryEntries=[{tryLoc:"root"}],X.forEach($,this),this.reset(!0)}t.keys=function(X){var z=Object(X),J=[];for(var le in z)J.push(le);return J.reverse(),function ce(){for(;J.length;){var xe=J.pop();if(xe in z)return ce.value=xe,ce.done=!1,ce}return ce.done=!0,ce}};function Y(X){if(X){var z=X[l];if(z)return z.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var J=-1,le=function ce(){for(;++J<X.length;)if(r.call(X,J))return ce.value=X[J],ce.done=!1,ce;return ce.value=s,ce.done=!0,ce};return le.next=le}}return{next:K}}t.values=Y;function K(){return{value:s,done:!0}}return G.prototype={constructor:G,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(re),!X)for(var z in this)z.charAt(0)==="t"&&r.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=s)},stop:function(){this.done=!0;var X=this.tryEntries[0],z=X.completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var z=this;function J(Ie,Ge){return xe.type="throw",xe.arg=X,z.next=Ie,Ge&&(z.method="next",z.arg=s),!!Ge}for(var le=this.tryEntries.length-1;le>=0;--le){var ce=this.tryEntries[le],xe=ce.completion;if(ce.tryLoc==="root")return J("end");if(ce.tryLoc<=this.prev){var fe=r.call(ce,"catchLoc"),_e=r.call(ce,"finallyLoc");if(fe&&_e){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else if(fe){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0)}else if(_e){if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(X,z){for(var J=this.tryEntries.length-1;J>=0;--J){var le=this.tryEntries[J];if(le.tryLoc<=this.prev&&r.call(le,"finallyLoc")&&this.prev<le.finallyLoc){var ce=le;break}}ce&&(X==="break"||X==="continue")&&ce.tryLoc<=z&&z<=ce.finallyLoc&&(ce=null);var xe=ce?ce.completion:{};return xe.type=X,xe.arg=z,ce?(this.method="next",this.next=ce.finallyLoc,R):this.complete(xe)},complete:function(X,z){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&z&&(this.next=z),R},finish:function(X){for(var z=this.tryEntries.length-1;z>=0;--z){var J=this.tryEntries[z];if(J.finallyLoc===X)return this.complete(J.completion,J.afterLoc),re(J),R}},catch:function(X){for(var z=this.tryEntries.length-1;z>=0;--z){var J=this.tryEntries[z];if(J.tryLoc===X){var le=J.completion;if(le.type==="throw"){var ce=le.arg;re(J)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(X,z,J){return this.delegate={iterator:Y(X),resultName:z,nextLoc:J},this.method==="next"&&(this.arg=s),R}},t}(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(Qb)),Qb.exports}var $b,XT;function bw(){return XT||(XT=1,$b=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`),$b}var eS,JT;function $D(){if(JT)return eS;JT=1;const a=bw();let e=0;return eS=({id:t,action:n,payload:r={}})=>{let i=t;return typeof i>"u"&&(i=a("Job",e),e+=1),{id:i,action:n,payload:r}},eS}var ev={},ZT;function Sw(){if(ZT)return ev;ZT=1;let a=!1;return ev.logging=a,ev.setLogging=e=>{a=e},ev.log=(...e)=>a?console.log.apply(this,e):null,ev}var tS,QT;function v9(){if(QT)return tS;QT=1;const a=$D(),{log:e}=Sw(),t=bw();let n=0;return tS=()=>{const r=t("Scheduler",n),i={},s={};let o=[];n+=1;const l=()=>o.length,c=()=>Object.keys(i).length,d=()=>{if(o.length!==0){const E=Object.keys(i);for(let b=0;b<E.length;b+=1)if(typeof s[E[b]]>"u"){o[0](i[E[b]]);break}}},h=(E,b)=>new Promise((_,R)=>{const T=a({action:E,payload:b});o.push(async M=>{o.shift(),s[M.id]=T;try{_(await M[E].apply(this,[...b,T.id]))}catch(I){R(I)}finally{delete s[M.id],d()}}),e(`[${r}]: Add ${T.id} to JobQueue`),e(`[${r}]: JobQueue length=${o.length}`),d()});return{addWorker:E=>(i[E.id]=E,e(`[${r}]: Add ${E.id}`),e(`[${r}]: Number of workers=${c()}`),d(),E.id),addJob:async(E,...b)=>{if(c()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return h(E,b)},terminate:async()=>{Object.keys(i).forEach(async E=>{await i[E].terminate()}),o=[]},getQueueLen:l,getNumWorkers:c}},tS}function y9(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nS,$T;function x9(){return $T||($T=1,nS=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof y9=="function"&&(e.type="node"),typeof a>"u"?e:e[a]}),nS}var aS,eN;function A9(){if(eN)return aS;eN=1;const e=x9()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return aS=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},aS}var rS,tN;function e5(){return tN||(tN=1,rS={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),rS}const _9="tesseract.js",b9="6.0.1",S9="Pure Javascript Multilingual OCR",E9="src/index.js",w9="commonjs",R9="src/index.d.ts",M9="dist/tesseract.min.js",T9="dist/tesseract.min.js",N9={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},C9={"./src/worker/node/index.js":"./src/worker/browser/index.js"},I9="",D9=["jeromewu"],L9="Apache-2.0",P9={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},O9={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},U9={"@rollup/pluginutils":"^5.0.2"},B9={type:"git",url:"https://github.com/naptha/tesseract.js.git"},F9={url:"https://github.com/naptha/tesseract.js/issues"},k9="https://github.com/naptha/tesseract.js",H9={type:"opencollective",url:"https://opencollective.com/tesseractjs"},j9={name:_9,version:b9,description:S9,main:E9,type:w9,types:R9,unpkg:M9,jsdelivr:T9,scripts:N9,browser:C9,author:I9,contributors:D9,license:L9,devDependencies:P9,dependencies:O9,overrides:U9,repository:B9,bugs:F9,homepage:k9,collective:H9};var iS,nN;function z9(){return nN||(nN=1,iS={workerBlobURL:!0,logger:()=>{}}),iS}var sS,aN;function G9(){if(aN)return sS;aN=1;const a=j9.version;return sS={...z9(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},sS}var oS,rN;function V9(){return rN||(rN=1,oS=({workerPath:a,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${a}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(a);return t}),oS}var lS,iN;function W9(){return iN||(iN=1,lS=a=>{a.terminate()}),lS}var cS,sN;function K9(){return sN||(sN=1,cS=(a,e)=>{a.onmessage=({data:t})=>{e(t)}}),cS}var uS,oN;function Y9(){return oN||(oN=1,uS=async(a,e)=>{a.postMessage(e)}),uS}var dS,lN;function q9(){if(lN)return dS;lN=1;const a=t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},i.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async i=>{n=await a(i),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await a(r)}else(t instanceof File||t instanceof Blob)&&(n=await a(t));return new Uint8Array(n)};return dS=e,dS}var fS,cN;function X9(){if(cN)return fS;cN=1;const a=G9(),e=V9(),t=W9(),n=K9(),r=Y9(),i=q9();return fS={defaultOptions:a,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:i},fS}var hS,uN;function t5(){if(uN)return hS;uN=1;const a=A9(),e=$D(),{log:t}=Sw(),n=bw(),r=e5(),{defaultOptions:i,spawnWorker:s,terminateWorker:o,onMessage:l,loadImage:c,send:d}=X9();let h=0;return hS=async(m="eng",v=r.LSTM_ONLY,A={},E={})=>{const b=n("Worker",h),{logger:_,errorHandler:R,...T}=a({...i,...A}),M={},I=typeof m=="string"?m.split("+"):m;let P=v,B=E;const F=[r.DEFAULT,r.LSTM_ONLY].includes(v)&&!T.legacyCore;let L,U;const j=new Promise((Ue,$e)=>{U=Ue,L=$e}),W=Ue=>{L(Ue.message)};let Q=s(T);Q.onerror=W,h+=1;const $=({id:Ue,action:$e,payload:dt})=>new Promise((ct,se)=>{t(`[${b}]: Start ${Ue}, action=${$e}`);const Be=`${$e}-${Ue}`;M[Be]={resolve:ct,reject:se},d(Q,{workerId:b,jobId:Ue,action:$e,payload:dt})}),re=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),G=Ue=>$(e({id:Ue,action:"load",payload:{options:{lstmOnly:F,corePath:T.corePath,logging:T.logging}}})),Y=(Ue,$e,dt)=>$(e({id:dt,action:"FS",payload:{method:"writeFile",args:[Ue,$e]}})),K=(Ue,$e)=>$(e({id:$e,action:"FS",payload:{method:"readFile",args:[Ue,{encoding:"utf8"}]}})),X=(Ue,$e)=>$(e({id:$e,action:"FS",payload:{method:"unlink",args:[Ue]}})),z=(Ue,$e,dt)=>$(e({id:dt,action:"FS",payload:{method:Ue,args:$e}})),J=(Ue,$e)=>$(e({id:$e,action:"loadLanguage",payload:{langs:Ue,options:{langPath:T.langPath,dataPath:T.dataPath,cachePath:T.cachePath,cacheMethod:T.cacheMethod,gzip:T.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(P)&&!T.legacyLang}}})),le=(Ue,$e,dt,ct)=>$(e({id:ct,action:"initialize",payload:{langs:Ue,oem:$e,config:dt}})),ce=(Ue="eng",$e,dt,ct)=>{if(F&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes($e))throw Error("Legacy model requested but code missing.");const se=$e||P;P=se;const Be=dt||B;B=Be;const Ke=(typeof Ue=="string"?Ue.split("+"):Ue).filter(ze=>!I.includes(ze));return I.push(...Ke),Ke.length>0?J(Ke,ct).then(()=>le(Ue,se,Be,ct)):le(Ue,se,Be,ct)},xe=(Ue={},$e)=>$(e({id:$e,action:"setParameters",payload:{params:Ue}})),fe=async(Ue,$e={},dt={text:!0},ct)=>$(e({id:ct,action:"recognize",payload:{image:await c(Ue),options:$e,output:dt}})),_e=async(Ue,$e)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return $(e({id:$e,action:"detect",payload:{image:await c(Ue)}}))},Ie=async()=>(Q!==null&&(o(Q),Q=null),Promise.resolve());l(Q,({workerId:Ue,jobId:$e,status:dt,action:ct,data:se})=>{const Be=`${ct}-${$e}`;if(dt==="resolve")t(`[${Ue}]: Complete ${$e}`),M[Be].resolve({jobId:$e,data:se}),delete M[Be];else if(dt==="reject")if(M[Be].reject(se),delete M[Be],ct==="load"&&L(se),R)R(se);else throw Error(se);else dt==="progress"&&_({...se,userJobId:$e})});const Ge={id:b,worker:Q,load:re,writeText:Y,readText:K,removeFile:X,FS:z,reinitialize:ce,setParameters:xe,recognize:fe,detect:_e,terminate:Ie};return G().then(()=>J(m)).then(()=>le(m,v,E)).then(()=>U(Ge)).catch(()=>{}),j},hS}var pS,dN;function J9(){if(dN)return pS;dN=1;const a=t5();return pS={recognize:async(n,r,i)=>{const s=await a(r,1,i);return s.recognize(n).finally(async()=>{await s.terminate()})},detect:async(n,r)=>{const i=await a("osd",0,r);return i.detect(n).finally(async()=>{await i.terminate()})}},pS}var mS,fN;function Z9(){return fN||(fN=1,mS={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),mS}var gS,hN;function Q9(){return hN||(hN=1,gS={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),gS}var vS,pN;function $9(){if(pN)return vS;pN=1,g9();const a=v9(),e=t5(),t=J9(),n=Z9(),r=e5(),i=Q9(),{setLogging:s}=Sw();return vS={languages:n,OEM:r,PSM:i,createScheduler:a,createWorker:e,setLogging:s,...t},vS}var eG=$9();const tG=r1(eG);function nG(){const[a,e]=H.useState(!1),[t,n]=H.useState(""),[r,i]=H.useState(!1),s=d=>{if(!a)return;const m=document.getElementById("my-canvas").getContext("2d");m.lineTo(d.nativeEvent.offsetX,d.nativeEvent.offsetY),m.stroke()},o=d=>{const m=document.getElementById("my-canvas").getContext("2d");m.lineWidth=2,m.strokeStyle="green",m.beginPath(),m.moveTo(d.nativeEvent.offsetX,d.nativeEvent.offsetY),e(!0)},l=()=>{const d=document.getElementById("my-canvas");d.getContext("2d").clearRect(0,0,d.width,d.height),n("")},c=()=>{const d=document.getElementById("my-canvas");i(!0),tG.recognize(d,"eng",{logger:h=>console.log(h)}).then(({data:{text:h}})=>{n(h),i(!1)}).catch(h=>{console.log(h),i(!1)})};return x.jsxs("div",{className:"canvas-container",children:[x.jsx("canvas",{id:"my-canvas",width:600,height:200,onMouseDown:o,onMouseUp:()=>e(!1),onMouseOut:()=>e(!1),onMouseLeave:()=>e(!1),onMouseMove:s}),x.jsxs("div",{className:"buttons-options",children:[x.jsx("button",{onClick:l,disabled:r,className:"clear-button",children:"Clear Canvas"}),x.jsx("button",{onClick:c,disabled:r,className:"detect-button",children:r?"Detecting...":"Detect Text Content"})]}),x.jsx("textarea",{value:t,readOnly:!0})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var n5=function(a,e){return(n5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(a,e)};function Rl(a,e){function t(){this.constructor=a}n5(a,e),a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Bt(a,e,t,n){return new(t||(t=Promise))(function(r,i){function s(c){try{l(n.next(c))}catch(d){i(d)}}function o(c){try{l(n.throw(c))}catch(d){i(d)}}function l(c){c.done?r(c.value):new t(function(d){d(c.value)}).then(s,o)}l((n=n.apply(a,[])).next())})}function Ft(a,e){var t,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(c){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(r=2&d[0]?n.return:d[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,d[1])).done)return r;switch(n=0,r&&(d=[2&d[0],r.value]),d[0]){case 0:case 1:r=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,n=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){s.label=d[1];break}if(d[0]===6&&s.label<r[1]){s.label=r[1],r=d;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(d);break}r[2]&&s.ops.pop(),s.trys.pop();continue}d=e.call(a,s)}catch(h){d=[6,h],n=0}finally{t=r=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,c])}}}var aG=function(){function a(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return a.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},a.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},a.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},a.prototype.getNumber=function(e){return this.get(e)},a.prototype.getBool=function(e){return this.get(e)},a.prototype.getFlags=function(){return this.flags},Object.defineProperty(a.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),a.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},a.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},a.prototype.setFlags=function(e){this.flags=Object.assign({},e)},a.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},a.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return rG(n,s[0],s[1]),s.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(i){var s=i.split(":"),o=s[0],l=s[1];e.urlFlags[o]=function(c,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+c+".")}(o,l)})}},a}();function rG(a,e,t){a[decodeURIComponent(e)]=decodeURIComponent(t||"")}function qe(){return a5}var a5=null,Px=new Map,m3=new Map;function r5(a,e){var t=s5(a,e);return Px.get(t)}function iG(a){return m3.get(a)}function mN(a){for(var e=Px.entries(),t=[];;){var n=e.next(),r=n.done,i=n.value;if(r)break;var s=i[0],o=i[1];s.split("_")[0]===a&&t.push(o)}return t}function i5(a){var e=a.kernelName,t=a.backendName,n=s5(e,t);if(Px.has(n))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");Px.set(n,a)}function sG(a){var e=a.kernelName;m3.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),m3.set(e,a)}function s5(a,e){return e+"_"+a}function g3(a,e,t){return Math.max(a,Math.min(e,t))}function o5(a){return a%2==0?a:a+1}function oG(a){for(var e=0,t=0;t<a.length;t++)e+=a[t];return e}function oe(a,e){if(!a)throw new Error(typeof e=="string"?e:e())}function oa(a,e,t){t===void 0&&(t=""),oe(Zr(a,e),function(){return t+" Shapes "+a+" and "+e+" must match"})}function R0(a){oe(a!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function r0(a,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(a)||_c(a)&&!t)for(var n=0;n<a.length;++n)r0(a[n],e,t);else e.push(a);return e}function Gt(a){if(a.length===0)return 1;for(var e=a[0],t=1;t<a.length;t++)e*=a[t];return e}function Zr(a,e){if(a===e)return!0;if(a==null||e==null||a.length!==e.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==e[t])return!1;return!0}function dr(a){return a%1==0}function lG(a){if(Math.tanh!=null)return Math.tanh(a);if(a===1/0)return 1;if(a===-1/0)return-1;var e=Math.exp(2*a);return(e-1)/(e+1)}function v3(a){var e=Math.ceil(Math.sqrt(a));return[e,Math.ceil(a/e)]}function Km(a,e){return e<=a.length?a:a+" ".repeat(e-a.length)}function gN(a,e,t){return e===void 0&&(e=function(n){return 0}),new Promise(function(n,r){var i=0,s=function(){if(a())n();else{i++;var o=e(i);t!=null&&i>=t?r():setTimeout(s,o)}};s()})}function cG(a,e){for(var t=1,n=-1,r=0;r<a.length;++r)if(a[r]>=0)t*=a[r];else if(a[r]===-1){if(n!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+n+" and dim "+r);n=r}else if(a[r]<0)throw Error("Shapes can not be < 0. Found "+a[r]+" at dim "+r);if(n===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+a);return a}if(t===0)throw Error("Cannot infer the missing size in ["+a+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var i=a.slice();return i[n]=e/t,i}function zr(a,e){var t=e.length;return oe((a=a==null?e.map(function(n,r){return r}):[].concat(a)).every(function(n){return n>=-t&&n<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+a}),oe(a.every(function(n){return dr(n)}),function(){return"All values in axis param must be integers but got axis "+a}),a.map(function(n){return n<0?t+n:n})}function Rh(a,e){for(var t=[],n=[],r=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||r?null:zr(e,a).sort(),s=0,o=0;o<a.length;++o){if(i!=null){if(i[s]===o&&a[o]!==1)throw new Error("Can't squeeze axis "+o+" since its dim '"+a[o]+"' is not 1");(i[s]==null||i[s]>o)&&a[o]===1&&(t.push(a[o]),n.push(o)),i[s]<=o&&s++}a[o]!==1&&(t.push(a[o]),n.push(o))}return{newShape:t,keptDims:n}}function Fv(a,e){var t=null;if(a==null||a==="float32")t=new Float32Array(e);else if(a==="int32")t=new Int32Array(e);else{if(a!=="bool")throw new Error("Unknown data type "+a);t=new Uint8Array(e)}return t}function Ox(a,e){var t=null;if(a==null||a==="float32")t=new Float32Array(e);else if(a==="int32")t=new Int32Array(e);else if(a==="bool")t=new Uint8Array(e);else{if(a!=="string")throw new Error("Unknown data type "+a);t=new Array(e)}return t}function uG(a,e){for(var t=0;t<a.length;t++){var n=a[t];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+e+" being uploaded contains "+n+".")}}function dG(a){return a==="bool"||a==="complex64"||a==="float32"||a==="int32"||a==="string"}function fG(a,e){return e!=="complex64"&&(e!=="float32"||a==="complex64")&&(e!=="int32"||a==="float32"||a==="complex64")&&(e!=="bool"||a!=="bool")}function _c(a){return a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array}function l5(a){if(a==="float32"||a==="int32")return 4;if(a==="complex64")return 8;if(a==="bool")return 1;throw new Error("Unknown dtype "+a)}function hG(a){if(a==null)return 0;var e=0;return a.forEach(function(t){return e+=t.length}),e}function Ew(a){return typeof a=="string"||a instanceof String}function pG(a){return typeof a=="boolean"}function mG(a){return typeof a=="number"}function u1(a){return Array.isArray(a)?u1(a[0]):a instanceof Float32Array?"float32":a instanceof Int32Array||a instanceof Uint8Array?"int32":mG(a)?"float32":Ew(a)?"string":pG(a)?"bool":"float32"}function y3(a){return!!(a&&a.constructor&&a.call&&a.apply)}function x3(a,e){for(var t=e;t<a;++t)if(a%t==0)return t;return a}function bc(a){var e=a.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=a[e-1];for(var n=e-3;n>=0;--n)t[n]=t[n+1]*a[n+1];return t}function c5(a,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(a)&&(a=r0(a)),t&&uG(a,e),function(i,s){return i instanceof Float32Array&&s==="float32"||i instanceof Int32Array&&s==="int32"||i instanceof Uint8Array&&s==="bool"}(a,e))return a;if(e==null||e==="float32"||e==="complex64")return new Float32Array(a);if(e==="int32")return new Int32Array(a);if(e==="bool"){for(var n=new Uint8Array(a.length),r=0;r<n.length;++r)Math.round(a[r])!==0&&(n[r]=1);return n}throw new Error("Unknown data type "+e)}function vN(a,e){if(a.length===0)return e[0];var t=a.reduce(function(n,r){return n*r});if(t===0)return[];if(t!==e.length)throw new Error("["+a+"] does not match the input size.");return function n(r,i,s){var o=new Array;if(i.length===1)for(var l=i[0],c=0;c<l;c++)o[c]=s[r+c];else{l=i[0];var d=i.slice(1),h=d.reduce(function(m,v){return m*v});for(c=0;c<l;c++)o[c]=n(r+c*h,d,s)}return o}(0,a,e)}function u5(a,e){for(var t=d1(a,e),n=0;n<t.length;n++)t[n]=1;return t}function d1(a,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(a);if(e==="int32")return new Int32Array(a);if(e==="bool")return new Uint8Array(a);throw new Error("Unknown data type "+e)}function gc(){return qe().platform.now()}function d5(a){a.forEach(function(e){oe(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+a+"]."})})}function gG(a,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",qe().platform.encode(a,e)}function Ux(a,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",qe().platform.decode(a,e)}function yN(a,e,t){if(e===0)return 0;if(e===1)return a[0];for(var n=a[a.length-1],r=0;r<a.length-1;++r)n+=t[r]*a[r];return n}function vG(a,e,t){if(e===0)return[];if(e===1)return[a];for(var n=new Array(e),r=0;r<n.length-1;++r)n[r]=Math.floor(a/t[r]),a-=n[r]*t[r];return n[n.length-1]=a,n}var yG=function(){function a(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new xG)}return a.prototype.profileKernel=function(e,t,n){var r,i=this,s=this.backendTimer.time(function(){r=n()});return r.forEach(function(o){o.data().then(function(l){(function(c,d,h){if(d!=="float32")return!1;for(var m=0;m<c.length;m++){var v=c[m];if(isNaN(v)||!isFinite(v))return console.warn("Found "+v+" in the result of '"+h+"'"),!0}})(l,o.dtype,e),s.then(function(c){var d="";c.getExtraProfileInfo!=null&&(d=c.getExtraProfileInfo()),i.logger.logKernelProfile(e,o,l,c.kernelMs,t,d)})})}),r},a}(),xG=function(){function a(){}return a.prototype.logKernelProfile=function(e,t,n,r,i,s){var o=typeof r=="number"?Km(r+"ms",9):r.error,l=Km(e,25),c=t.rank,d=t.size,h=Km(t.shape.toString(),14),m="";for(var v in i){var A=i[v].shape||t.shape,E=A.length;m+=v+": "+E+"D "+(E>0?A:"")+" "}console.log("%c"+l+"	%c"+o+"	%c"+c+"D "+h+"	%c"+d+"	%c"+m+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},a}(),xN=20,tv=3,yS=7;function AG(a,e,t,n){var r=bc(e),i=function(c,d,h,m){var v=Gt(d),A=m[m.length-1],E=new Array(A).fill(0),b=d.length,_=h==="complex64"?av(c):c;if(b>1)for(var R=0;R<v/A;R++)for(var T=R*A,M=0;M<A;M++)E[M]=Math.max(E[M],nv(_[T+M],0,h).length);return E}(a,e,t,r),s=e.length,o=function c(d,h,m,v,A,E){E===void 0&&(E=!0);var b=m==="complex64"?2:1,_=h[0],R=h.length;if(R===0)return m==="complex64"?[nv(av(d)[0],0,m)]:m==="bool"?[f5(d[0])]:[d[0].toString()];if(R===1){if(_>xN){var T=tv*b,M=Array.from(d.slice(0,T)),I=Array.from(d.slice((_-tv)*b,_*b));return m==="complex64"&&(M=av(M),I=av(I)),["["+M.map(function(re,G){return nv(re,A[G],m)}).join(", ")+", ..., "+I.map(function(re,G){return nv(re,A[_-tv+G],m)}).join(", ")+"]"]}return["["+(m==="complex64"?av(d):Array.from(d)).map(function(re,G){return nv(re,A[G],m)}).join(", ")+"]"]}var P=h.slice(1),B=v.slice(1),F=v[0]*b,L=[];if(_>xN){for(var U=0;U<tv;U++){var j=(W=U*F)+F;L.push.apply(L,c(d.slice(W,j),P,m,B,A,!1))}for(L.push("..."),U=_-tv;U<_;U++)j=(W=U*F)+F,L.push.apply(L,c(d.slice(W,j),P,m,B,A,U===_-1))}else for(U=0;U<_;U++){var W;j=(W=U*F)+F,L.push.apply(L,c(d.slice(W,j),P,m,B,A,U===_-1))}var Q=R===2?",":"";for(L[0]="["+L[0]+Q,U=1;U<L.length-1;U++)L[U]=" "+L[U]+Q;var $=`,
`;for(U=2;U<R;U++)$+=`
`;return L[L.length-1]=" "+L[L.length-1]+"]"+(E?"":$),L}(a,e,t,r,i),l=["Tensor"];return n&&(l.push("  dtype: "+t),l.push("  rank: "+s),l.push("  shape: ["+e+"]"),l.push("  values:")),l.push(o.map(function(c){return"    "+c}).join(`
`)),l.join(`
`)}function nv(a,e,t){return Km(Array.isArray(a)?parseFloat(a[0].toFixed(yS))+" + "+parseFloat(a[1].toFixed(yS))+"j":Ew(a)?"'"+a+"'":t==="bool"?f5(a):parseFloat(a.toFixed(yS)).toString(),e)}function f5(a){return a===0?"false":"true"}function av(a){for(var e=[],t=0;t<a.length;t+=2)e.push([a[t],a[t+1]]);return e}var kv=function(){function a(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Gt(e),n!=null){var i=n.length;oe(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Ox(t,this.size),this.strides=bc(e)}return a.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.length===0&&(n=[0]),oe(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(n);this.values[i]=e},a.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var s=i[r];if(s<0||s>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var l=e[e.length-1],c=0;c<e.length-1;++c)l+=this.strides[c]*e[c];return this.values[l]},a.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},a.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(a.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),a.prototype.toTensor=function(){return vc().makeTensor(this.values,this.shape,this.dtype)},a}(),vc=null,Ve=null,h5=null,za=function(){function a(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Gt(e),this.strides=bc(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return a.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},a.prototype.asScalar=function(){return this.throwIfDisposed(),oe(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},a.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},a.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},a.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},a.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},a.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},a.prototype.asType=function(e){return this.throwIfDisposed(),Ve.cast(this,e)},Object.defineProperty(a.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),a.prototype.buffer=function(){return Bt(this,void 0,void 0,function(){var e;return Ft(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ve.buffer(this.shape,this.dtype,e)]}})})},a.prototype.bufferSync=function(){return Ve.buffer(this.shape,this.dtype,this.dataSync())},a.prototype.array=function(){return Bt(this,void 0,void 0,function(){var e;return Ft(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,vN(this.shape,e)]}})})},a.prototype.arraySync=function(){return vN(this.shape,this.dataSync())},a.prototype.data=function(){return Bt(this,void 0,void 0,function(){var e,t;return Ft(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=vc().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map(function(r){return Ux(r)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}})})},a.prototype.dataSync=function(){this.throwIfDisposed();var e=vc().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return Ux(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},a.prototype.bytes=function(){return Bt(this,void 0,void 0,function(){var e;return Ft(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,vc().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},a.prototype.dispose=function(){this.isDisposed||(vc().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(a.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),a.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},a.prototype.toFloat=function(){return this.asType("float32")},a.prototype.toInt=function(){return this.asType("int32")},a.prototype.toBool=function(){return this.asType("bool")},a.prototype.print=function(e){return e===void 0&&(e=!1),Ve.print(this,e)},a.prototype.reshape=function(e){return this.throwIfDisposed(),Ve.reshape(this,e)},a.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},a.prototype.expandDims=function(e){return e===void 0&&(e=0),Ve.expandDims(this,e)},a.prototype.cumsum=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=!1),n===void 0&&(n=!1),Ve.cumsum(this,e,t,n)},a.prototype.squeeze=function(e){return this.throwIfDisposed(),Ve.squeeze(this,e)},a.prototype.clone=function(){return this.throwIfDisposed(),Ve.clone(this)},a.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Ve.oneHot(this,e,t,n)},a.prototype.toString=function(e){return e===void 0&&(e=!1),AG(this.dataSync(),this.shape,this.dtype,e)},a.prototype.tile=function(e){return this.throwIfDisposed(),Ve.tile(this,e)},a.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),Ve.gather(this,e,t)},a.prototype.matMul=function(e,t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),this.throwIfDisposed(),Ve.matMul(this,e,t,n)},a.prototype.dot=function(e){return this.throwIfDisposed(),Ve.dot(this,e)},a.prototype.norm=function(e,t,n){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ve.norm(this,e,t,n)},a.prototype.slice=function(e,t){return this.throwIfDisposed(),Ve.slice(this,e,t)},a.prototype.reverse=function(e){return this.throwIfDisposed(),Ve.reverse(this,e)},a.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof a&&(e=[e]),Ve.concat([this].concat(e),t)},a.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),Ve.split(this,e,t)},a.prototype.stack=function(e,t){return t===void 0&&(t=0),Ve.stack([this,e],t)},a.prototype.unstack=function(e){return e===void 0&&(e=0),Ve.unstack(this,e)},a.prototype.pad=function(e,t){return t===void 0&&(t=0),Ve.pad(this,e,t)},a.prototype.batchNormalization=function(e,t,n,r,i){return n===void 0&&(n=.001),h5("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},a.prototype.batchNorm=function(e,t,n,r,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Ve.batchNorm(this,e,t,n,r,i)},a.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.all(this,e,t)},a.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.any(this,e,t)},a.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.logSumExp(this,e,t)},a.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.sum(this,e,t)},a.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.prod(this,e,t)},a.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.mean(this,e,t)},a.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.min(this,e,t)},a.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),Ve.max(this,e,t)},a.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Ve.argMin(this,e)},a.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Ve.argMax(this,e)},a.prototype.cast=function(e){return this.throwIfDisposed(),Ve.cast(this,e)},a.prototype.add=function(e){return this.throwIfDisposed(),Ve.add(this,e)},a.prototype.addStrict=function(e){return this.throwIfDisposed(),Ve.addStrict(this,e)},a.prototype.atan2=function(e){return this.throwIfDisposed(),Ve.atan2(this,e)},a.prototype.sub=function(e){return this.throwIfDisposed(),Ve.sub(this,e)},a.prototype.subStrict=function(e){return this.throwIfDisposed(),Ve.subStrict(this,e)},a.prototype.pow=function(e){return this.throwIfDisposed(),Ve.pow(this,e)},a.prototype.powStrict=function(e){return this.throwIfDisposed(),Ve.powStrict(this,e)},a.prototype.mul=function(e){return this.throwIfDisposed(),Ve.mul(this,e)},a.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ve.mulStrict(this,e)},a.prototype.div=function(e){return this.throwIfDisposed(),Ve.div(this,e)},a.prototype.divNoNan=function(e){return this.throwIfDisposed(),Ve.divNoNan(this,e)},a.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ve.floorDiv(this,e)},a.prototype.divStrict=function(e){return this.throwIfDisposed(),Ve.divStrict(this,e)},a.prototype.minimum=function(e){return this.throwIfDisposed(),Ve.minimum(this,e)},a.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ve.minimumStrict(this,e)},a.prototype.maximum=function(e){return this.throwIfDisposed(),Ve.maximum(this,e)},a.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ve.maximumStrict(this,e)},a.prototype.mod=function(e){return this.throwIfDisposed(),Ve.mod(this,e)},a.prototype.modStrict=function(e){return this.throwIfDisposed(),Ve.modStrict(this,e)},a.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ve.squaredDifferenceStrict(this,e)},a.prototype.transpose=function(e){return this.throwIfDisposed(),Ve.transpose(this,e)},a.prototype.notEqual=function(e){return this.throwIfDisposed(),Ve.notEqual(this,e)},a.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ve.notEqualStrict(this,e)},a.prototype.less=function(e){return this.throwIfDisposed(),Ve.less(this,e)},a.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ve.lessStrict(this,e)},a.prototype.equal=function(e){return this.throwIfDisposed(),Ve.equal(this,e)},a.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ve.equalStrict(this,e)},a.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ve.lessEqual(this,e)},a.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ve.lessEqualStrict(this,e)},a.prototype.greater=function(e){return this.throwIfDisposed(),Ve.greater(this,e)},a.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ve.greaterStrict(this,e)},a.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ve.greaterEqual(this,e)},a.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ve.greaterEqualStrict(this,e)},a.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ve.logicalAnd(this,e)},a.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ve.logicalOr(this,e)},a.prototype.logicalNot=function(){return this.throwIfDisposed(),Ve.logicalNot(this)},a.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ve.logicalXor(this,e)},a.prototype.where=function(e,t){return this.throwIfDisposed(),Ve.where(e,this,t)},a.prototype.neg=function(){return this.throwIfDisposed(),Ve.neg(this)},a.prototype.ceil=function(){return this.throwIfDisposed(),Ve.ceil(this)},a.prototype.floor=function(){return this.throwIfDisposed(),Ve.floor(this)},a.prototype.sign=function(){return this.throwIfDisposed(),Ve.sign(this)},a.prototype.isNaN=function(){return this.throwIfDisposed(),Ve.isNaN(this)},a.prototype.isInf=function(){return this.throwIfDisposed(),Ve.isInf(this)},a.prototype.isFinite=function(){return this.throwIfDisposed(),Ve.isFinite(this)},a.prototype.exp=function(){return this.throwIfDisposed(),Ve.exp(this)},a.prototype.expm1=function(){return this.throwIfDisposed(),Ve.expm1(this)},a.prototype.log=function(){return this.throwIfDisposed(),Ve.log(this)},a.prototype.log1p=function(){return this.throwIfDisposed(),Ve.log1p(this)},a.prototype.sqrt=function(){return this.throwIfDisposed(),Ve.sqrt(this)},a.prototype.rsqrt=function(){return this.throwIfDisposed(),Ve.rsqrt(this)},a.prototype.square=function(){return this.throwIfDisposed(),Ve.square(this)},a.prototype.reciprocal=function(){return this.throwIfDisposed(),Ve.reciprocal(this)},a.prototype.abs=function(){return this.throwIfDisposed(),Ve.abs(this)},a.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ve.clipByValue(this,e,t)},a.prototype.relu=function(){return this.throwIfDisposed(),Ve.relu(this)},a.prototype.relu6=function(){return this.throwIfDisposed(),Ve.relu6(this)},a.prototype.elu=function(){return this.throwIfDisposed(),Ve.elu(this)},a.prototype.selu=function(){return this.throwIfDisposed(),Ve.selu(this)},a.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),Ve.leakyRelu(this,e)},a.prototype.prelu=function(e){return this.throwIfDisposed(),Ve.prelu(this,e)},a.prototype.sigmoid=function(){return this.throwIfDisposed(),Ve.sigmoid(this)},a.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ve.logSigmoid(this)},a.prototype.softplus=function(){return this.throwIfDisposed(),Ve.softplus(this)},a.prototype.zerosLike=function(){return this.throwIfDisposed(),Ve.zerosLike(this)},a.prototype.onesLike=function(){return this.throwIfDisposed(),Ve.onesLike(this)},a.prototype.sin=function(){return this.throwIfDisposed(),Ve.sin(this)},a.prototype.cos=function(){return this.throwIfDisposed(),Ve.cos(this)},a.prototype.tan=function(){return this.throwIfDisposed(),Ve.tan(this)},a.prototype.asin=function(){return this.throwIfDisposed(),Ve.asin(this)},a.prototype.acos=function(){return this.throwIfDisposed(),Ve.acos(this)},a.prototype.atan=function(){return this.throwIfDisposed(),Ve.atan(this)},a.prototype.sinh=function(){return this.throwIfDisposed(),Ve.sinh(this)},a.prototype.cosh=function(){return this.throwIfDisposed(),Ve.cosh(this)},a.prototype.tanh=function(){return this.throwIfDisposed(),Ve.tanh(this)},a.prototype.asinh=function(){return this.throwIfDisposed(),Ve.asinh(this)},a.prototype.acosh=function(){return this.throwIfDisposed(),Ve.acosh(this)},a.prototype.atanh=function(){return this.throwIfDisposed(),Ve.atanh(this)},a.prototype.erf=function(){return this.throwIfDisposed(),Ve.erf(this)},a.prototype.round=function(){return this.throwIfDisposed(),Ve.round(this)},a.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),Ve.step(this,e)},a.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Ve.softmax(this,e)},a.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Ve.logSoftmax(this,e)},a.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),Ve.image.resizeBilinear(this,e,t)},a.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),Ve.image.resizeNearestNeighbor(this,e,t)},a.prototype.conv1d=function(e,t,n,r,i,s){return r===void 0&&(r="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Ve.conv1d(this,e,t,n,r,i,s)},a.prototype.conv2d=function(e,t,n,r,i,s){return r===void 0&&(r="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ve.conv2d(this,e,t,n,r,i,s)},a.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),Ve.conv2dTranspose(this,e,t,n,r,i)},a.prototype.depthwiseConv2D=function(e,t,n,r,i,s){return r===void 0&&(r="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ve.depthwiseConv2d(this,e,t,n,r,i,s)},a.prototype.separableConv2d=function(e,t,n,r,i,s){return i===void 0&&(i=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),Ve.separableConv2d(this,e,t,n,r,i,s)},a.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ve.avgPool(this,e,t,n,r)},a.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Ve.maxPool(this,e,t,n,r)},a.prototype.localResponseNormalization=function(e,t,n,r){return e===void 0&&(e=5),t===void 0&&(t=1),n===void 0&&(n=1),r===void 0&&(r=.5),Ve.localResponseNormalization(this,e,t,n,r)},a.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),Ve.pool(this,e,t,n,r,i)},a.prototype.variable=function(e,t,n){return e===void 0&&(e=!0),this.throwIfDisposed(),vc().makeVariable(this,e,t,n)},a.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Ve.unsortedSegmentSum(this,e,t)},a.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Ve.batchToSpaceND(this,e,t)},a.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ve.spaceToBatchND(this,e,t)},a.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),Ve.topk(this,e,t)},a.prototype.stridedSlice=function(e,t,n,r,i,s,o,l){return r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),l===void 0&&(l=0),this.throwIfDisposed(),Ve.stridedSlice(this,e,t,n,r,i,s,o,l)},a.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ve.depthToSpace(this,e,t)},a.prototype.fft=function(){return this.throwIfDisposed(),Ve.spectral.fft(this)},a.prototype.ifft=function(){return this.throwIfDisposed(),Ve.spectral.ifft(this)},a.prototype.rfft=function(){return this.throwIfDisposed(),Ve.spectral.rfft(this)},a.prototype.irfft=function(){return this.throwIfDisposed(),Ve.spectral.irfft(this)},a}();Object.defineProperty(za,Symbol.hasInstance,{value:function(a){return!!a&&a.dataId!=null&&a.shape!=null&&a.dtype!=null}});var AN,A3,_3,b3,S3,i0=function(a){function e(t,n,r,i){var s=a.call(this,t.shape,t.dtype,t.dataId,i)||this;return s.trainable=n,s.name=r,s}return Rl(e,a),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Zr(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");vc().disposeTensor(this),this.dataId=t.dataId,vc().incRef(this,null)},e.prototype.dispose=function(){vc().disposeVariable(this),this.isDisposedInternal=!0},e}(za);Object.defineProperty(i0,Symbol.hasInstance,{value:function(a){return a instanceof za&&a.assign!=null&&a.assign instanceof Function}}),function(a){a.R0="R0",a.R1="R1",a.R2="R2",a.R3="R3",a.R4="R4",a.R5="R5",a.R6="R6"}(AN||(AN={})),function(a){a.float32="float32",a.int32="int32",a.bool="int32",a.complex64="complex64"}(A3||(A3={})),function(a){a.float32="float32",a.int32="int32",a.bool="bool",a.complex64="complex64"}(_3||(_3={})),function(a){a.float32="float32",a.int32="float32",a.bool="float32",a.complex64="complex64"}(b3||(b3={})),function(a){a.float32="complex64",a.int32="complex64",a.bool="complex64",a.complex64="complex64"}(S3||(S3={}));var _G={float32:b3,int32:A3,bool:_3,complex64:S3};function di(a,e){if(a==="string"||e==="string"){if(a==="string"&&e==="string")return"string";throw new Error("Can not upcast "+a+" with "+e)}return _G[a][e]}function xS(a){return di(a,"int32")}function Ka(a,e){if(a.dtype===e.dtype)return[a,e];var t=di(a.dtype,e.dtype);return[a.cast(t),e.cast(t)]}function bG(a,e){oe(a.dtype===e.dtype,function(){return"The dtypes of the first("+a.dtype+") and second("+e.dtype+") input must match"})}function p5(a){var e=[];return function t(n,r,i){if(n!=null){if(n instanceof za)return void r.push(n);if(s=n,!(!Array.isArray(s)&&typeof s!="object")){var s,o=n;for(var l in o){var c=o[l];i.has(c)||(i.add(c),t(c,r,i))}}}}(a,e,new Set),e}var AS,_N=function(){function a(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return a.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},a}(),SG=function(){function a(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _N}return a.prototype.ready=function(){return Bt(this,void 0,void 0,function(){var e,t,n;return Ft(this,function(r){switch(r.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(a.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),a.prototype.backendNames=function(){return Object.keys(this.registryFactory)},a.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},a.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},a.prototype.registerBackend=function(e,t,n){return n===void 0&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},a.prototype.setBackend=function(e){return Bt(this,void 0,void 0,function(){var t,n,r;return Ft(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new yG(this.backendInstance),[2,!0]}})})},a.prototype.setupRegisteredKernels=function(){var e=this;mN(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},a.prototype.disposeRegisteredKernels=function(e){var t=this;mN(e).forEach(function(n){n.disposeFunc!=null&&n.disposeFunc(t.registry[e])})},a.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(n==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,s=r.then(function(o){return!(i<t.pendingBackendInitId)&&(t.registry[e]=o,t.pendingBackendInit=null,!0)}).catch(function(o){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(o.stack||o.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(o){return console.warn("Initialization of backend "+e+" failed"),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}},a.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},a.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},a.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,s=r.asyncInit;if(s||i)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},a.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},a.prototype.tidy=function(e,t){var n,r=this,i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},a.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(i){throw t(),i}},a.prototype.nextTensorId=function(){return a.nextTensorId++},a.prototype.nextVariableId=function(){return a.nextVariableId++},a.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],function(r){return{x:function(){return r.toFloat()}}},[]),t},a.prototype.runKernel=function(e,t,n,r,i){return this.runKernelFunc(null,t,null,e,n,r,i)},a.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},a.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),i=0;n.forEach(function(l){i+=l.dtype==="complex64"?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-s;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},a.prototype.runKernelFunc=function(e,t,n,r,i,s,o){var l,c=this;s===void 0&&(s=[]),o===void 0&&(o=[]);var d=[],h=this.isTapeOn();r==null&&(r=this.state.activeScope!=null?this.state.activeScope.name:"");var m,v=function(R){h&&(d=R.map(function(T){return c.keep(c.clone(T))}))},A=this.state.numBytes,E=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,_=r5(r,this.backendName);return m=_!=null?function(){var R=c.backend.numDataIds();b=_.kernelFunc({inputs:t,attrs:i,backend:c.backend});var T=Array.isArray(b)?b:[b];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,R,T);var M=T.map(function(P){var B=P.dataId,F=P.shape,L=P.dtype;return c.makeTensorFromDataId(B,F,L)}),I=M.filter(function(P,B){return o[B]});return v((s||[]).slice().concat(I)),M}:function(){var R=c.backend.numDataIds();b=c.tidy(function(){return e(c.backend,v)});var T=Array.isArray(b)?b:[b];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,R,T),T},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){l=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(r,t,function(){return m()}):m()}),h&&this.addTapeNode(r,t,l,n,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-A,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-E,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(R){return t[R].shape}),outputShapes:l.map(function(R){return R.shape})}),Array.isArray(b)?l:l[0]},a.prototype.makeTensor=function(e,t,n,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var i=e;n==="string"&&Ew(e[0])&&(i=e.map(function(d){return gG(d)}));var s=r.write(i,t,n),o=new za(t,n,s,this.nextTensorId());if(this.incRef(o,r),n==="string"){var l=this.state.tensorInfo.get(s),c=hG(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return o},a.prototype.makeTensorFromDataId=function(e,t,n,r){var i=new za(t,n=n||"float32",e,this.nextTensorId());return this.incRef(i,r),i},a.prototype.makeVariable=function(e,t,n,r){t===void 0&&(t=!0),n=n||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.asType(r));var i=new i0(e,t,n,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},a.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,n===0){this.state.numDataBuffers++;var r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*l5(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof i0||this.track(e)},a.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},a.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},a.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},a.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},a.prototype.profile=function(e){return Bt(this,void 0,void 0,function(){var t,n;return Ft(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},a.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},a.prototype.addTapeNode=function(e,t,n,r,i){var s=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},l=iG(e);l!=null&&(r=l.gradFunc),r!=null&&(o.gradient=function(c){return c=c.map(function(d,h){if(d==null){var m=n[h],v=d1(m.size,m.dtype);return s.makeTensor(v,m.shape,m.dtype)}return d}),r(c.length>1?c:c[0],i)}),this.state.activeTape.push(o)},a.prototype.keep=function(e){return e.kept=!0,e},a.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},a.prototype.endTape=function(){this.state.gradientDepth--},a.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},a.prototype.endScope=function(e){for(var t=this,n=p5(e),r=new Set(n.map(function(l){return l.id})),i=0;i<this.state.activeScope.track.length;i++){var s=this.state.activeScope.track[i];s.kept||r.has(s.id)||s.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(l){l.kept||l.scopeId!==o.id||t.track(l)})},a.prototype.gradients=function(e,t,n,r){var i=this;if(r===void 0&&(r=!1),oe(t.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var s=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});oe(s instanceof za,function(){return"The result y returned by f() must be a tensor."});var o=function(l,c,d){for(var h={},m={},v=0;v<c.length;v++)h[c[v].id]=!0;for(v=0;v<l.length;v++){var A=(P=l[v]).inputs;for(var E in A){for(var b=A[E],_=!1,R=0;R<c.length;R++)if(h[b.id]){P.outputs.forEach(function(U){return h[U.id]=!0}),_=!0,m[P.id]=!0;break}if(_)break}}var T={};T[d.id]=!0;var M={};for(v=l.length-1;v>=0;v--)for(A=(P=l[v]).inputs,R=0;R<P.outputs.length;R++)if(T[P.outputs[R].id]){for(var E in A)T[A[E].id]=!0,M[P.id]=!0;break}var I=[];for(v=0;v<l.length;v++){var P;if(m[(P=l[v]).id]&&M[P.id]){var B={};for(var E in P.inputs){var F=P.inputs[E];h[F.id]&&(B[E]=F)}var L=Object.assign({},P);L.inputs=B,L.outputs=P.outputs,I.push(L)}}return I}(this.state.activeTape,t,s);if(!r&&o.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,c,d={};d[s.id]=n??(l=s.shape,c=u5(Gt(l),"float32"),Ae.makeTensor(c,l,"float32")),function(m,v,A){for(var E=function(_){var R=v[_],T=[];if(R.outputs.forEach(function(B){var F=m[B.id];F!=null?T.push(F):T.push(null)}),R.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+R.kernelName+".");var M=R.gradient(T),I=function(B){if(!(B in M))throw new Error("Cannot backprop through input "+B+". Available gradients found: "+Object.keys(M)+".");var F=A(function(){return M[B]()});if(F.dtype!=="float32")throw new Error("Error in gradient for op "+R.kernelName+". The gradient of input "+B+" must have 'float32' dtype, but has '"+F.dtype+"'");var L=R.inputs[B];if(!Zr(F.shape,L.shape))throw new Error("Error in gradient for op "+R.kernelName+". The gradient of input '"+B+"' has shape '"+F.shape+"', which does not match the shape of the input '"+L.shape+"'");if(m[L.id]==null)m[L.id]=F;else{var U=m[L.id];m[L.id]=U.add(F),U.dispose()}};for(var P in R.inputs)I(P)},b=v.length-1;b>=0;b--)E(b)}(d,o,function(m){return i.tidy(m)});var h=t.map(function(m){return d[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var v=0,A=m.saved;v<A.length;v++)A[v].dispose()}),i.state.activeTape=null),{value:s,grads:h}})},a.prototype.customGrad=function(e){var t=this;return oe(y3(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];oe(r.every(function(o){return o instanceof za}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return r.forEach(function(o,l){s[l]=o}),t.runKernelFunc(function(o,l){return oe((n=e.apply(void 0,r.concat([l]))).value instanceof za,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),oe(y3(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},s,function(o,l){var c=n.gradFunc(o,l),d=Array.isArray(c)?c:[c];oe(d.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),oe(d.every(function(m){return m instanceof za}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return d.forEach(function(m,v){h[v]=function(){return m}}),h})}},a.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},a.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},a.prototype.time=function(e){return Bt(this,void 0,void 0,function(){var t,n;return Ft(this,function(r){switch(r.label){case 0:return t=gc(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=gc()-t,[2,n]}})})},a.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(a.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),a.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _N,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},a.nextTensorId=0,a.nextVariableId=0,a}(),Ae=function(){var a=function(){if(AS==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}AS=t}return AS}();if(a._tfengine==null){var e=new aG(a);a._tfengine=new SG(e)}return function(t){a5=t}(a._tfengine.ENV),vc=function(){return a._tfengine},a._tfengine}();function m5(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var iu=qe();iu.registerFlag("DEBUG",function(){return!1},function(a){a&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),iu.registerFlag("IS_BROWSER",function(){return m5()}),iu.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),iu.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),iu.registerFlag("PROD",function(){return!1}),iu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return iu.getBool("DEBUG")}),iu.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),iu.registerFlag("IS_TEST",function(){return!1});var Hv,$s,Qs,yh={},_S={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function EG(a,e){yh[a]=e}function Ic(a){a in yh||(yh[a]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=function(r){if(typeof OffscreenCanvas<"u"&&r===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return n.addEventListener("webglcontextlost",function(r){r.preventDefault(),delete yh[t]},!1),t===1?n.getContext("webgl",_S)||n.getContext("experimental-webgl",_S):n.getContext("webgl2",_S)}(a));var e=yh[a];return e.isContextLost()?(delete yh[a],Ic(a)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),yh[a])}function a_(a,e){return[e,a]}function Sv(a){var e=Gt(a);return v3(Math.ceil(e/4))}function f1(a,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(a/2))]}function ww(a,e){var t,n,r,i,s,o,l,c,d,h=a;return qe().getNumber("WEBGL_VERSION")===2?(t=h.R32F,n=h.R16F,r=h.RGBA16F,i=h.RGBA32F,s=h.RED,o=4,l=1,c=h.HALF_FLOAT,d=h.FLOAT):(t=a.RGBA,n=a.RGBA,r=a.RGBA,i=h.RGBA,s=a.RGBA,o=4,l=4,c=e!=null?e.HALF_FLOAT_OES:null,d=a.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:a.RGBA,downloadUnpackNumChannels:o,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:d}}function Vt(a,e,t){var n=t();return e&&function(r){var i=r.getError();if(i!==r.NO_ERROR)throw new Error("WebGL Error: "+TG(r,i))}(a),n}(function(a){a[a.DENSE=0]="DENSE",a[a.SHARED_BATCH=1]="SHARED_BATCH"})(Hv||(Hv={})),function(a){a[a.RENDER=0]="RENDER",a[a.UPLOAD=1]="UPLOAD",a[a.PIXELS=2]="PIXELS",a[a.DOWNLOAD=3]="DOWNLOAD"}($s||($s={})),function(a){a[a.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",a[a.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",a[a.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",a[a.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",a[a.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Qs||(Qs={}));var wG=596e-10,RG=65504;function MG(a){return!!(qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||a===0||wG<Math.abs(a)&&Math.abs(a)<RG)}function TG(a,e){switch(e){case a.NO_ERROR:return"NO_ERROR";case a.INVALID_ENUM:return"INVALID_ENUM";case a.INVALID_VALUE:return"INVALID_VALUE";case a.INVALID_OPERATION:return"INVALID_OPERATION";case a.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case a.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case a.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function o2(a,e,t){return Nu(a,e,function(){return a.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function NG(a,e,t){var n=Nu(a,e,function(){return a.createShader(a.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Vt(a,e,function(){return a.shaderSource(n,t)}),Vt(a,e,function(){return a.compileShader(n)}),a.getShaderParameter(n,a.COMPILE_STATUS)===!1)throw console.log(a.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function CG(a,e,t){var n=Nu(a,e,function(){return a.createShader(a.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Vt(a,e,function(){return a.shaderSource(n,t)}),Vt(a,e,function(){return a.compileShader(n)}),a.getShaderParameter(n,a.COMPILE_STATUS)===!1)throw function(r,i){var s=IG.exec(i);if(s==null)return console.log("Couldn't parse line number in error: "+i),void console.log(r);for(var o=+s[1],l=r.split(`
`),c=l.length.toString().length+2,d=l.map(function(b,_){return Km((_+1).toString(),c)+b}),h=0,m=0;m<d.length;m++)h=Math.max(d[m].length,h);var v=d.slice(0,o-1),A=d.slice(o-1,o),E=d.slice(o);console.log(v.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+Km(A[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(E.join(`
`))}(t,a.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var bS,SS,IG=/ERROR: [0-9]+:([0-9]+):/g;function DG(a,e){return Nu(a,e,function(){return a.createProgram()},"Unable to create WebGLProgram.")}function LG(a,e,t){if(Vt(a,e,function(){return a.linkProgram(t)}),a.getProgramParameter(t,a.LINK_STATUS)===!1)throw console.log(a.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function ES(a,e,t){if(Vt(a,e,function(){return a.validateProgram(t)}),a.getProgramParameter(t,a.VALIDATE_STATUS)===!1)throw console.log(a.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function PG(a,e,t){var n=Nu(a,e,function(){return a.createBuffer()},"Unable to create WebGLBuffer");return Vt(a,e,function(){return a.bindBuffer(a.ARRAY_BUFFER,n)}),Vt(a,e,function(){return a.bufferData(a.ARRAY_BUFFER,t,a.STATIC_DRAW)}),n}function OG(a,e,t){var n=Nu(a,e,function(){return a.createBuffer()},"Unable to create WebGLBuffer");return Vt(a,e,function(){return a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n)}),Vt(a,e,function(){return a.bufferData(a.ELEMENT_ARRAY_BUFFER,t,a.STATIC_DRAW)}),n}function UG(a,e){return Nu(a,e,function(){return a.createTexture()},"Unable to create WebGLTexture.")}function BG(a,e){var t=qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(a<=0||e<=0){var n="["+a+"x"+e+"]";throw new Error("Requested texture size "+n+" is invalid.")}if(a>t||e>t)throw n="["+a+"x"+e+"]",new Error("Requested texture size "+n+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function FG(a,e){return Nu(a,e,function(){return a.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function bN(a,e,t,n,r,i,s,o){var l=a.getAttribLocation(t,n);return l!==-1&&(Vt(a,e,function(){return a.bindBuffer(a.ARRAY_BUFFER,r)}),Vt(a,e,function(){return a.vertexAttribPointer(l,i,a.FLOAT,!1,s,o)}),Vt(a,e,function(){return a.enableVertexAttribArray(l)}),!0)}function kG(a,e,t,n){VG(a,n),Vt(a,e,function(){return a.activeTexture(a.TEXTURE0+n)}),Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,t)})}function HG(a,e,t,n){return Nu(a,e,function(){return a.getUniformLocation(t,n)},'uniform "'+n+'" not present in program.')}function jG(a,e,t){return a.getUniformLocation(e,t)}function zG(a,e,t,n,r,i){Vt(a,e,function(){return kG(a,e,n,i)}),Vt(a,e,function(){return a.uniform1i(r,i)})}function wS(a,e,t,n){Vt(a,e,function(){return a.bindFramebuffer(a.FRAMEBUFFER,n)}),Vt(a,e,function(){return a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0)})}function SN(a,e,t){Vt(a,e,function(){return a.bindFramebuffer(a.FRAMEBUFFER,t)}),Vt(a,e,function(){return a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)})}function l2(a){var e=a.checkFramebufferStatus(a.FRAMEBUFFER);if(e!==a.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+GG(a,e))}function GG(a,e){switch(e){case a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case a.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Nu(a,e,t,n){var r=Vt(a,e,function(){return t()});if(r==null)throw new Error(n);return r}function VG(a,e){var t=a.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=e+a.TEXTURE0;if(n<a.TEXTURE0||n>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function Bx(a,e){return e===void 0&&(e=2),Gt(a.slice(0,a.length-e))}function Fx(a){if(a.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[a.length>1?a[a.length-2]:1,a[a.length-1]]}function RS(a){var e=[1,1,1];return a.length===0||a.length===1&&a[0]===1||(e=[Bx(a)].concat(Fx(a))),e}function WG(a,e){var t;e===void 0&&(e=!1);var n=qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,(a=a.map(function(c,d){return d>=a.length-2?o5(a[d]):a[d]})).length===1&&(a=[2,a[0]])),a.length!==2){var r=Rh(a);a=r.newShape}var i=Gt(a);if(a.length<=1&&i<=n)return[1,i];if(a.length===2&&a[0]<=n&&a[1]<=n)return a;if(a.length===3&&a[0]*a[1]<=n&&a[2]<=n)return[a[0]*a[1],a[2]];if(a.length===3&&a[0]<=n&&a[1]*a[2]<=n)return[a[0],a[1]*a[2]];if(a.length===4&&a[0]*a[1]*a[2]<=n&&a[3]<=n)return[a[0]*a[1]*a[2],a[3]];if(a.length===4&&a[0]<=n&&a[1]*a[2]*a[3]<=n)return[a[0],a[1]*a[2]*a[3]];if(e){var s=Bx(a),o=2,l=2;return a.length&&(o=(t=Fx(a))[0],l=t[1]),v3(i=s*(o/2)*(l/2)).map(function(c){return 2*c})}return v3(i)}function c2(a){return a%2==0}function u2(a,e){if(Zr(a=a.slice(-2),e=e.slice(-2))||!a.length||!e.length||a[0]===0||a[1]===0||e[0]===0||e[1]===0)return!0;if(a.length!==e.length){var t=a.slice(-1)[0],n=e.slice(-1)[0];if(t===n||c2(t)&&c2(n)&&(a[0]===1||e[0]===1))return!0}return a[1]===e[1]&&c2(a[0])&&c2(e[0])}function KG(a){if(bS==null){var e=Ic(a);bS=e.getParameter(e.MAX_TEXTURE_SIZE)}return bS}function YG(a){if(SS==null){var e=Ic(a);SS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,SS)}function qG(a){if(a===0)return 0;var e=Ic(a);return Oo(e,"EXT_disjoint_timer_query_webgl2")&&a===2?2:Oo(e,"EXT_disjoint_timer_query")?1:0}function Oo(a,e){return a.getExtension(e)!=null}function EN(a){try{if(Ic(a)!=null)return!0}catch{return!1}return!1}function XG(a){if(a===0)return!1;var e=Ic(a);if(a===1){if(!Oo(e,"OES_texture_float"))return!1}else if(!Oo(e,"EXT_color_buffer_float"))return!1;return E3(e)}function JG(a){if(a===0)return!1;var e=Ic(a);if(a!==1){if(Oo(e,"EXT_color_buffer_float"))return E3(e);if(Oo(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(n,r){var i=ww(n,r),s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0);var l=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(s),n.deleteFramebuffer(o),l}(e,t)}return!1}return!!Oo(e,"OES_texture_float")&&!!Oo(e,"WEBGL_color_buffer_float")&&E3(e)}function E3(a){var e=ww(a),t=a.createTexture();a.bindTexture(a.TEXTURE_2D,t),a.texImage2D(a.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var n=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,n),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0);var r=a.checkFramebufferStatus(a.FRAMEBUFFER)===a.FRAMEBUFFER_COMPLETE;return a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteTexture(t),a.deleteFramebuffer(n),r}function ZG(a){return a===2&&Ic(a).fenceSync!=null}var dn=qe();function g5(a){qe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(a+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Pt(a,e){return Ae.tidy(a,e)}function Ds(a){p5(a).forEach(function(e){return e.dispose()})}function QG(a){return Ae.keep(a)}function kx(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];qe().getBool("IS_TEST")||console.warn.apply(console,a)}function af(a,e){var t=a;if(_c(a))return e==="string"?[]:[a.length];if(!Array.isArray(a))return[];for(var n=[];Array.isArray(t)||_c(t)&&e!=="string";)n.push(t.length),t=t[0];return Array.isArray(a)&&qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function r(i,s,o){if(o=o||[],!Array.isArray(i)&&!_c(i))return void oe(s.length===0,function(){return"Element arr["+o.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});oe(s.length>0,function(){return"Element arr["+o.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),oe(i.length===s[0],function(){return"Element arr["+o.join("][")+"] should have "+s[0]+" elements, but has "+i.length+" elements"});for(var l=s.slice(1),c=0;c<i.length;++c)r(i[c],l,o.concat(c))}(a,n,[]),n}function wN(a,e,t,n){if(a!=null&&(a!=="numeric"&&a!==e||a==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+n+"' must be "+a+" tensor, but got "+e+" tensor")}function ne(a,e,t,n){if(n===void 0&&(n="numeric"),a instanceof za)return wN(n,a.dtype,e,t),a;var r=u1(a);if(r!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(r=n),wN(n,r,e,t),a==null||!_c(a)&&!Array.isArray(a)&&typeof a!="number"&&typeof a!="boolean"&&typeof a!="string"){var i=a==null?"null":a.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var s=af(a,r);_c(a)||Array.isArray(a)||(a=[a]);var o=r!=="string"?c5(a,r,qe().getBool("DEBUG")):r0(a,[],!0);return Ae.makeTensor(o,s,r)}function Hx(a,e,t,n){if(n===void 0&&(n="numeric"),!Array.isArray(a))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return a.map(function(r,i){return ne(r,e+"["+i+"]",t)},n)}function v5(a,e){for(var t=0;t<a.length;++t)if(a[a.length-t-1]!==e-1-t)return!1;return!0}function $G(a,e,t){for(var n=a.length+e.length,r=[],i=0,s=0,o=0;o<n;o++)t.indexOf(o)===-1?r.push(a[i++]):r.push(e[s++]);return r}function Ti(a,e){for(var t=[],n=a.length,r=0;r<n;r++)e.indexOf(r)===-1&&t.push(a[r]);return[t,e.map(function(i){return a[i]})]}function Ls(a,e){return $G(a,e.map(function(t){return 1}),e)}function Zs(a,e,t){oe(v5(e,t),function(){return a+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function Dc(a,e){if(v5(a,e))return null;for(var t=[],n=0;n<e;++n)a.indexOf(n)===-1&&t.push(n);return a.forEach(function(r){return t.push(r)}),t}function Rw(a){return a.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Lc(a,e){for(var t=[],n=e-a;n<e;++n)t.push(n);return t}function eV(a,e){var t=a[0].length;a.forEach(function(r,i){oe(r.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),oe(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var n=a[0];a.forEach(function(r,i){for(var s=0;s<t;s++)oe(s===e||r[s]===n[s],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+r+") does not match the shape of the rest ("+n+") along the non-concatenated axis "+i+"."})})}function s0(a,e){for(var t=a[0].slice(),n=1;n<a.length;n++)t[e]+=a[n][e];return t}function me(a){var e=Object.keys(a);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],n=a[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];Ae.startScope(t);try{var o=n.apply(void 0,i);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ae.endScope(o),o}catch(l){throw Ae.endScope(null),l}};return Object.defineProperty(r,"name",{value:t,configurable:!0}),r}dn.registerFlag("HAS_WEBGL",function(){return dn.getNumber("WEBGL_VERSION")>0}),dn.registerFlag("WEBGL_VERSION",function(){return EN(2)?2:EN(1)?1:0}),dn.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return dn.get("WEBGL_VERSION")===2}),dn.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),dn.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),dn.registerFlag("WEBGL_PACK",function(){return dn.getBool("HAS_WEBGL")}),dn.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_CLIP",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),dn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_PACK_REDUCE",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_LAZILY_UNPACK",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_CONV_IM2COL",function(){return dn.getBool("WEBGL_PACK")}),dn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return KG(dn.getNumber("WEBGL_VERSION"))}),dn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return YG(dn.getNumber("WEBGL_VERSION"))}),dn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var a=dn.getNumber("WEBGL_VERSION");return a===0?0:qG(a)}),dn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return dn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(a=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))));var a}),dn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return XG(dn.getNumber("WEBGL_VERSION"))}),dn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!dn.getBool("WEBGL_FORCE_F16_TEXTURES")&&dn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),dn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return JG(dn.getNumber("WEBGL_VERSION"))}),dn.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return ZG(dn.getNumber("WEBGL_VERSION"))}),dn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return dn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),h5=g5;var ui=me({complex_:function(a,e){var t=ne(a,"real","complex"),n=ne(e,"imag","complex");return oa(t.shape,n.shape,"real and imag shapes, "+t.shape+" and "+n.shape+", must match in call to tf.complex()."),Ae.runKernelFunc(function(r){return r.complex(t,n)},{$real:t,$imag:n})}}),Po=me({real_:function(a){var e=ne(a,"input","real");return Ae.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),yc=me({imag_:function(a){var e=ne(a,"input","imag");return Ae.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function fi(a,e,t){return rf(a,e,af(a,t),t)}function rf(a,e,t,n){if(n==null&&(n=u1(a)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!_c(a)&&!Array.isArray(a)&&typeof a!="number"&&typeof a!="boolean"&&typeof a!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){d5(e);var r=Gt(e),i=Gt(t);oe(r===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+r+" values but has "+i});for(var s=0;s<t.length;++s){var o=t[s],l=s!==t.length-1||o!==Gt(e.slice(s));oe(t[s]===e[s]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return _c(a)||Array.isArray(a)||(a=[a]),e=e||t,a=n!=="string"?c5(a,n,qe().getBool("DEBUG")):r0(a,[],!0),Ae.makeTensor(a,e,n)}function Tt(a,e){if((_c(a)&&e!=="string"||Array.isArray(a))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&_c(a)&&!(a instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return rf(a,[],[],e)}function xr(a,e){R0(a);var t=af(a,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return rf(a,null,t,e)}function qd(a,e,t){if(R0(a),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=af(a,t);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return rf(a,e,n,t)}function Mw(a,e,t){if(R0(a),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=af(a,t);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return rf(a,e,n,t)}function ws(a,e,t){if(R0(a),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=af(a,t);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return rf(a,e,n,t)}function tV(a,e,t){if(R0(a),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=af(a,t);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return rf(a,e,n,t)}function nV(a,e,t){if(R0(a),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=af(a,t);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return rf(a,e=e||n,n,t)}function aV(a,e,t,n){return e===void 0&&(e=!0),Ae.makeVariable(a,e,t,n)}function M0(a,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=M0(a,"float32"),n=Ca(a,"float32");return ui(t,n)}var r=u5(Gt(a),e);return Ae.makeTensor(r,a,e)}function Ca(a,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Ca(a,"float32"),n=Ca(a,"float32");return ui(t,n)}var r=d1(Gt(a),e);return Ae.makeTensor(r,a,e)}function Sc(a,e,t){return Ae.runKernelFunc(function(n){return n.fill(a,e,t)},{})}function rV(a,e,t){if(t<=0)throw new Error("The number of values should be positive.");return Ae.runKernelFunc(function(n){return n.linspace(a,e,t)},{})}function jx(a,e,t,n){if(t===void 0&&(t=1),n===void 0&&(n="float32"),t===0)throw new Error("Cannot have a step of zero");if(a===e||a<e&&t<0||e<a&&t>1)return Ca([0],n);var r=d1(Math.abs(Math.ceil((e-a)/t)),n);e<a&&t===1&&(t=-1),r[0]=a;for(var i=1;i<r.length;i++)r[i]=r[i-1]+t;return xr(r,n)}var y5=me({onesLike_:function(a){var e=ne(a,"x","onesLike");if(e.dtype==="complex64"){var t=y5(Po(e)),n=Xn(yc(e));return ui(t,n)}return Ae.runKernelFunc(function(r){return r.onesLike(e)},{$x:e},function(r,i){return{$x:function(){return Xn(r)}}})}}),Xn=me({zerosLike_:function(a){var e=ne(a,"x","zerosLike");return Ae.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,n){return{$x:function(){return Xn(t)}}})}}),Pr=me({concat_:function(a,e){e===void 0&&(e=0),oe(a.length>=1,function(){return"Pass at least one tensor to concat"});var t=Hx(a,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(o){if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+o.dtype+". ")}),e=zr(e,t[0].shape)[0];var n=s0(t.map(function(o){return o.shape}),e);if(Gt(n)===0)return fi([],n);if((t=t.filter(function(o){return o.size>0})).length===1)return t[0];var r=t.map(function(o){return o.shape});eV(r,e);var i=t,s={axis:e};return Ae.runKernelFunc(function(o){return o.concat(t,e)},i,function(o){var l=r.map(function(c){return c[e]});return Tw(o,l,e).map(function(c){return function(){return c}})},"Concat",s)}}),iV=me({concat1d_:function(a){return Pr(a,0)}}),sV=me({concat2d_:function(a,e){return Pr(a,e)}}),oV=me({concat3d_:function(a,e){return Pr(a,e)}}),lV=me({concat4d_:function(a,e){return Pr(a,e)}}),Tw=me({split_:function(a,e,t){t===void 0&&(t=0);var n,r=ne(a,"x","split");return t=zr(t,r.shape)[0],typeof e=="number"?(oe(r.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),n=new Array(e).fill(r.shape[t]/e)):(oe(r.shape[t]===e.reduce(function(i,s){return i+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),n=e),Ae.runKernelFunc(function(i){return i.split(r,n,t)},{$x:r},function(i){return{$x:function(){return Pr(i,t)}}})}});function $h(a,e){return a(e={exports:{}},e.exports),e.exports}var cV=$h(function(a){(function(e,t,n){function r(o){var l,c=this,d=(l=4022871197,function(h){h=h.toString();for(var m=0;m<h.length;m++){var v=.02519603282416938*(l+=h.charCodeAt(m));v-=l=v>>>0,l=(v*=l)>>>0,l+=4294967296*(v-=l)}return 23283064365386963e-26*(l>>>0)});c.next=function(){var h=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=0|h)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(o),c.s0<0&&(c.s0+=1),c.s1-=d(o),c.s1<0&&(c.s1+=1),c.s2-=d(o),c.s2<0&&(c.s2+=1),d=null}function i(o,l){return l.c=o.c,l.s0=o.s0,l.s1=o.s1,l.s2=o.s2,l}function s(o,l){var c=new r(o),d=l&&l.state,h=c.next;return h.int32=function(){return 4294967296*c.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.alea=s})(0,a)}),uV=$h(function(a){(function(e,t,n){function r(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(0|o)?l.x=o:c+=o;for(var d=0;d<c.length+64;d++)l.x^=0|c.charCodeAt(d),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var c=new r(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.xor128=s})(0,a)}),dV=$h(function(a){(function(e,t,n){function r(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^h^h<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(0|o)?l.x=o:c+=o;for(var d=0;d<c.length+64;d++)l.x^=0|c.charCodeAt(d),d==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var c=new r(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.xorwow=s})(0,a)}),fV=$h(function(a){(function(e,t,n){function r(o){var l=this;l.next=function(){var c,d,h=l.x,m=l.i;return c=h[m],d=(c^=c>>>7)^c<<24,d^=(c=h[m+1&7])^c>>>10,d^=(c=h[m+3&7])^c>>>3,d^=(c=h[m+4&7])^c<<7,c=h[m+7&7],d^=(c^=c<<13)^c<<9,h[m]=d,l.i=m+1&7,d},function(c,d){var h,m=[];if(d===(0|d))m[0]=d;else for(d=""+d,h=0;h<d.length;++h)m[7&h]=m[7&h]<<15^d.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],c.x=m,c.i=0,h=256;h>0;--h)c.next()}(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var c=new r(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=c.next,h.quick=h,d&&(d.x&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.xorshift7=s})(0,a)}),hV=$h(function(a){(function(e,t,n){function r(o){var l=this;l.next=function(){var c,d,h=l.w,m=l.X,v=l.i;return l.w=h=h+1640531527|0,d=m[v+34&127],c=m[v=v+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,d=m[v]=d^c,l.i=v,d+(h^h>>>16)|0},function(c,d){var h,m,v,A,E,b=[],_=128;for(d===(0|d)?(m=d,d=null):(d+="\0",m=0,_=Math.max(_,d.length)),v=0,A=-32;A<_;++A)d&&(m^=d.charCodeAt((A+32)%d.length)),A===0&&(E=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,A>=0&&(E=E+1640531527|0,v=(h=b[127&A]^=m+E)==0?v+1:0);for(v>=128&&(b[127&(d&&d.length||0)]=-1),v=127,A=512;A>0;--A)m=b[v+34&127],h=b[v=v+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,b[v]=m^h;c.w=E,c.X=b,c.i=v}(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var c=new r(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=c.next,h.quick=h,d&&(d.X&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.xor4096=s})(0,a)}),pV=$h(function(a){(function(e,t,n){function r(o){var l=this,c="";l.next=function(){var h=l.b,m=l.c,v=l.d,A=l.a;return h=h<<25^h>>>7^m,m=m-v|0,v=v<<24^v>>>8^A,A=A-h|0,l.b=h=h<<20^h>>>12^m,l.c=m=m-v|0,l.d=v<<16^m>>>16^A,l.a=A-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=0|o):c+=o;for(var d=0;d<c.length+20;d++)l.b^=0|c.charCodeAt(d),l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var c=new r(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}t&&t.exports?t.exports=s:this.tychei=s})(0,a)}),xh=$h(function(a){(function(e,t){var n,r=this,i=256,s=6,o="random",l=t.pow(i,s),c=t.pow(2,52),d=2*c,h=i-1;function m(_,R,T){var M=[],I=E(function F(L,U){var j,W=[],Q=typeof L;if(U&&Q=="object")for(j in L)try{W.push(F(L[j],U-1))}catch{}return W.length?W:Q=="string"?L:L+"\0"}((R=R==1?{entropy:!0}:R||{}).entropy?[_,b(e)]:_??function(){try{var F;return n&&(F=n.randomBytes)?F=F(i):(F=new Uint8Array(i),(r.crypto||r.msCrypto).getRandomValues(F)),b(F)}catch{var L=r.navigator,U=L&&L.plugins;return[+new Date,r,U,r.screen,b(e)]}}(),3),M),P=new v(M),B=function(){for(var F=P.g(s),L=l,U=0;F<c;)F=(F+U)*i,L*=i,U=P.g(1);for(;F>=d;)F/=2,L/=2,U>>>=1;return(F+U)/L};return B.int32=function(){return 0|P.g(4)},B.quick=function(){return P.g(4)/4294967296},B.double=B,E(b(P.S),e),(R.pass||T||function(F,L,U,j){return j&&(j.S&&A(j,P),F.state=function(){return A(P,{})}),U?(t[o]=F,L):F})(B,I,"global"in R?R.global:this==t,R.state)}function v(_){var R,T=_.length,M=this,I=0,P=M.i=M.j=0,B=M.S=[];for(T||(_=[T++]);I<i;)B[I]=I++;for(I=0;I<i;I++)B[I]=B[P=h&P+_[I%T]+(R=B[I])],B[P]=R;(M.g=function(F){for(var L,U=0,j=M.i,W=M.j,Q=M.S;F--;)L=Q[j=h&j+1],U=U*i+Q[h&(Q[j]=Q[W=h&W+L])+(Q[W]=L)];return M.i=j,M.j=W,U})(i)}function A(_,R){return R.i=_.i,R.j=_.j,R.S=_.S.slice(),R}function E(_,R){for(var T,M=_+"",I=0;I<M.length;)R[h&I]=h&(T^=19*R[h&I])+M.charCodeAt(I++);return b(R)}function b(_){return String.fromCharCode.apply(0,_)}if(t["seed"+o]=m,E(t.random(),e),a.exports){a.exports=m;try{n=require("crypto")}catch{}}})([],Math)});xh.alea=cV,xh.xor128=uV,xh.xorwow=dV,xh.xorshift7=fV,xh.xor4096=hV,xh.tychei=pV;var r_=xh.alea,Nw=function(){function a(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=i||Math.random();this.random=r_(s.toString())}return a.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,s=void 0,o=void 0;do o=(i=2*this.random()-1)*i+(s=2*this.random()-1)*s;while(o>=1||o===0);var l=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*l,n=this.mean+this.stdDev*s*l,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},a.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},a.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},a}(),mV=function(){function a(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=r_(i.toString()),this.randn=new Nw(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return a.prototype.nextValue=function(){for(var e,t,n,r,i,s;;){do r=this.randn.nextValue(),s=1+this.c*r;while(s<=0);if(s*=s*s,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-s+Math.log(s)),(i=this.randu())<t||Math.log(i)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},a.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},a}(),gV=function(){function a(e,t,n,r){var i=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=n,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=r_(r)}return a.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},a.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},a}();function xn(a,e,t){return e===void 0&&(e="float32"),e=e||"float32",d5(a),new kv(a,e,t)}function vV(a,e){e===void 0&&(e=!1),console.log(a.toString(e))}var x5=me({batchToSpaceND_:function(a,e,t){var n=ne(a,"x","batchToSpaceND"),r=e.reduce(function(i,s){return i*s});return oe(n.rank>=1+e.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+e.length}),oe(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),oe(n.shape[0]%r==0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+r}),Ae.runKernelFunc(function(i){return i.batchToSpaceND(n,e,t)},{$x:n},function(i){return{$x:function(){return i.spaceToBatchND(e,t)}}})}}),yV=me({broadcastTo_:function(a,e){var t=ne(a,"broadcastTo","x"),n=t.shape;if(e.some(function(l){return!(l>0)||l%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var r=t.shape.slice();r.length<e.length;)r.unshift(1);t=t.reshape(r)}for(var i=Array.from(e),s=e.length-1;s>=0;s--)if(t.shape[s]===e[s])i[s]=1;else if(t.shape[s]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+e+"].");var o=i.map(function(l,c){return l>1?c:-1}).filter(function(l){return l>=0});return o.length===0?t.clone():Ae.runKernelFunc(function(l){return l.tile(t,i)},{input:t},function(l){return{input:function(){return l.sum(o,!0)}}})}}),xV=me({cast_:function(a,e){var t=ne(a,"x","cast");if(!dG(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var n={dtype:e};return Ae.runKernelFunc(function(r){return r.cast(t,e)},{x:t},function(r){return{x:function(){return r.clone()}}},"Cast",n)}}),AV=me({clone_:function(a){var e=ne(a,"x","clone",null);return Ae.runKernelFunc(function(){return Ae.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),_V=me({cumsum_:function(a,e,t,n){e===void 0&&(e=0),t===void 0&&(t=!1),n===void 0&&(n=!1);var r=ne(a,"x","cumsum"),i=Dc([e|=0],r.rank),s=r;i!=null&&(s=r.transpose(i));var o=Lc(1,r.rank)[0],l=Ae.runKernelFunc(function(c){return c.cumsum(s,o,t,n)},{permutedX:s},function(c){return{permutedX:function(){return c.cumsum(e,t,!n)}}});return i!=null&&(l=l.transpose(i)),l}}),bV=me({depthToSpace_:function(a,e,t){t===void 0&&(t="NHWC");var n=ne(a,"x","depthToSpace"),r=t==="NHWC"?n.shape[1]:n.shape[2],i=t==="NHWC"?n.shape[2]:n.shape[3],s=t==="NHWC"?n.shape[3]:n.shape[1];return oe(r*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+r+" and "+e+`  for depthToSpace with input shape
      `+n.shape}),oe(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+n.shape}),oe(s%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+s+" for depthToSpace with input shape "+n.shape}),Ae.runKernelFunc(function(o){return o.depthToSpace(n,e,t)},{$x:n})}}),Lo=me({expandDims_:function(a,e){e===void 0&&(e=0);var t=ne(a,"x","expandDims",null);oe(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var n=t.shape.slice();return e<0&&(oe(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),n.splice(e,0,1),xl(t,n)}}),A5=me({eye_:function(a,e,t,n){n===void 0&&(n="float32"),e==null&&(e=a);for(var r=xn([a,e],n),i=a<=e?a:e,s=0;s<i;++s)r.set(1,s,s);var o=r.toTensor().as2D(a,e);if(t==null)return o;if(t.length===1)return Ym(Lo(o,0),[t[0],1,1]);if(t.length===2)return Ym(Lo(Lo(o,0),0),[t[0],t[1],1,1]);if(t.length===3)return Ym(Lo(Lo(Lo(o,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),SV=me({multinomial_:function(a,e,t,n){n===void 0&&(n=!1);var r=ne(a,"logits","multinomial"),i=r.size,s=r.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);t=t||Math.random();var o=s===1?r.as2D(1,-1):r,l=Ae.runKernelFunc(function(c){return c.multinomial(o,n,e,t)},{logits2D:o});return s===1?l.as1D():l}}),w3=me({oneHot_:function(a,e,t,n){if(t===void 0&&(t=1),n===void 0&&(n=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var r=ne(a,"indices","oneHot","int32"),i=r.shape.concat([e]);return r=r.flatten(),Ae.runKernelFunc(function(s){return s.oneHot(r,e,t,n)},{$indices:r},function(s){return{$indices:function(){return Ca(r.shape,"float32")}}}).reshape(i)}}),ep=me({pad_:function(a,e,t){t===void 0&&(t=0);var n=ne(a,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var r={paddings:e,constantValue:t};return Ae.runKernelFunc(function(i){return i.pad(n,e,t)},{x:n},function(i){var s=e.map(function(o){return o[0]});return{x:function(){return i.slice(s,n.shape)}}},"PadV2",r)}}),EV=me({pad1d_:function(a,e,t){return t===void 0&&(t=0),oe(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ep(a,[e],t)}}),wV=me({pad2d_:function(a,e,t){return t===void 0&&(t=0),oe(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ep(a,e,t)}}),RV=me({pad3d_:function(a,e,t){return t===void 0&&(t=0),oe(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ep(a,e,t)}}),MV=me({pad4d_:function(a,e,t){return t===void 0&&(t=0),oe(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ep(a,e,t)}}),TV=me({rand_:function(a,e,t){var n=Gt(a),r=null;if(t==null||t==="float32")r=new Float32Array(n);else if(t==="int32")r=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);r=new Uint8Array(n)}for(var i=0;i<n;i++)r[i]=e();return Ae.makeTensor(r,a,t)}}),NV=me({randomNormal_:function(a,e,t,n,r){if(e===void 0&&(e=0),t===void 0&&(t=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new Nw(e,t,n,!1,r),s=xn(a,n),o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}}),CV=me({randomGamma_:function(a,e,t,n,r){if(t===void 0&&(t=1),n===void 0&&(n="float32"),t==null&&(t=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var i=new mV(e,t,n,r),s=xn(a,n),o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}}),_5=me({randomUniform_:function(a,e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=1),n===void 0&&(n="float32");for(var i=xn(a,n),s=new gV(e,t,null,r),o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),xl=me({reshape_:function(a,e){var t=ne(a,"x","reshape",null);e=cG(e,t.size),oe(t.size===Gt(e),function(){return"new shape and old shape must have the same number of elements."});var n={shape:e};return Ae.runKernelFunc(function(r){return r.reshape(t,e)},{x:t},function(r){return{x:function(){return r.reshape(t.shape)}}},"Reshape",n)}}),b5=me({spaceToBatchND_:function(a,e,t){var n=ne(a,"x","spaceToBatchND");return oe(n.rank>=1+e.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+e.length}),oe(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),oe(n.shape.reduce(function(r,i,s){return s>0&&s<=e.length?r&&(i+t[s-1][0]+t[s-1][1])%e[s-1]==0:r},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),Ae.runKernelFunc(function(r){return r.spaceToBatchND(n,e,t)},{$x:n},function(r){return{$x:function(){return r.batchToSpaceND(e,t)}}})}}),S5=me({squeeze_:function(a,e){var t=ne(a,"x","squeeze");return xl(t,Rh(t.shape,e).newShape)}}),io=me({stack_:function(a,e){e===void 0&&(e=0);var t=Hx(a,"tensors","stack");if(oe(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var n=t[0].rank,r=t[0].shape,i=t[0].dtype;oe(e<=n,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(o){oa(r,o.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(o){oe(i===o.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=t.map(function(o){return o.expandDims(e)});return Pr(s,e)}}),Ym=me({tile_:function(a,e){var t=ne(a,"x","tile",null);oe(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var n=[t],r={reps:e};return Ae.runKernelFunc(function(i,s){var o=i.tile(t,e);return s([t]),o},{x:t},function(i,s){var o=s[0];return{x:function(){var l=Xn(o);if(o.rank===1)for(var c=0;c<e[0];++c)l=l.add(i.slice([c*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(c=0;c<e[0];++c)for(var d=0;d<e[1];++d)l=l.add(i.slice([c*o.shape[0],d*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(c=0;c<e[0];++c)for(d=0;d<e[1];++d)for(var h=0;h<e[2];++h)l=l.add(i.slice([c*o.shape[0],d*o.shape[1],h*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else{if(o.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+o.rank+" tensors yet.");for(c=0;c<e[0];++c)for(d=0;d<e[1];++d)for(h=0;h<e[2];++h)for(var m=0;m<e[3];++m)l=l.add(i.slice([c*o.shape[0],d*o.shape[1],h*o.shape[2],m*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]))}return l}}},"Tile",r,n)}}),IV=me({truncatedNormal_:function(a,e,t,n,r){if(e===void 0&&(e=0),t===void 0&&(t=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new Nw(e,t,n,!0,r),s=xn(a,n),o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}}),Or=me({unstack_:function(a,e){e===void 0&&(e=0),e=e||0;var t=ne(a,"x","unstack");oe(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var n={axis:e};return Ae.runKernelFunc(function(r){return r.unstack(t,e)},{x:t},function(r){return{x:function(){return io(r,e)}}},"Unpack",n)}}),DV=function(a,e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,d,h;return Ft(this,function(m){switch(m.label){case 0:return t=ne(a,"x","setdiff1d"),n=ne(e,"y","setdiff1d"),oe(t.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+n.dtype+")."}),oe(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),oe(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,t.data()];case 1:return r=m.sent(),[4,n.data()];case 2:for(i=m.sent(),s=new Set(i),o=0,d=0;d<r.length;d++)s.has(r[d])||o++;for(l=new kv([o],t.dtype),c=new kv([o],"int32"),d=0,h=0;d<r.length;d++)s.has(r[d])||(l.values[h]=r[d],c.values[h]=d,h++);return[2,[l.toTensor(),c.toTensor()]]}})})};function zx(a,e,t,n){n===void 0&&(n=!0);var r=[];if(n)(r=r.concat(e.slice(0))).push(a[0]/t),r=r.concat(a.slice(1));else{r=r.concat(a[0]);for(var i=e.length,s=0;s<i;++s)r=r.concat([a[s+1]/e[s],e[s]]);r=r.concat(a.slice(i+1))}return r}function Gx(a,e,t){t===void 0&&(t=!0);var n=[];if(t){n.push(e);for(var r=e+1;r<a;++r)r<=2*e?(n.push(r),n.push(r-(e+1))):n.push(r)}else{var i=[],s=[];for(r=1;r<a;++r)r>=2*e+1||r%2==1?s.push(r):i.push(r);n.push.apply(n,i),n.push(0),n.push.apply(n,s)}return n}function Vx(a,e,t,n){n===void 0&&(n=!0);var r=[];n?r.push(a[0]/t):r.push(a[0]*t);for(var i=1;i<a.length;++i)i<=e.length?n?r.push(e[i-1]*a[i]):r.push(a[i]/e[i-1]):r.push(a[i]);return r}function E5(a,e){for(var t=[0],n=0;n<e;++n)t.push(a[n][0]);return t}function w5(a,e,t){for(var n=a.slice(0,1),r=0;r<t;++r)n.push(a[r+1]-e[r][0]-e[r][1]);return n}function R5(a,e){if(a.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+a.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>a.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+a.rank);if(a.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+a.shape+".");for(var t=e.shape,n=t[t.length-1],r=1,i=0;i<t.length-1;++i)r*=t[i];var s=a.shape,o=t.slice();o.pop();var l=1;for(i=n;i<a.rank;++i)l*=s[i],o.push(s[i]);var c=bc(a.shape).map(function(d){return d/l}).concat([1]).slice(0,n);return[o,r,l,c]}var M5=30;function MS(a){return a<=M5?a:x3(a,Math.floor(Math.sqrt(a)))}function LV(a,e,t){var n=e.rank>1?e.shape[e.rank-1]:1,r=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+a+", sliceDim: "+n+", and batchDim: "+r+".";if(t.rank<r)throw new Error(i+" update.rank < "+r+". ");if(a.length<n+(t.rank-r))throw new Error(i+" Output shape length < "+(n+(t.rank-r)));if(t.rank!==r+a.length-n)throw new Error(i+" update.rank != "+(r+a.length-n));for(var s=0;s<r;++s)if(t.shape[s]!==e.shape[s])throw new Error(i+" updates.shape["+s+"] ("+t.shape[s]+") != indices.shape["+s+"] ("+e.shape[s]+").");for(s=0;s<t.rank-r;++s)if(t.shape[s+r]!==a[s+n])throw new Error(i+" updates.shape["+(s+r)+"] ("+t.shape[s+r]+") != shape["+(s+r)+"] ("+a[s+r]+")")}function PV(a,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(a.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+a.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(a.size===0)throw new Error("Updates specified for empty output. updates shape: "+a.shape)}LV(t,e,a)}function Wx(a,e,t){for(var n=e.shape.length,r=n>1?e.shape[n-1]:1,i=t.length,s=1,o=r;o<i;++o)s*=t[o];var l=r<1?1:r;return{sliceRank:r,numUpdates:Gt(e.shape)/l,sliceSize:s,strides:bc(t.slice(0,r)).concat([1]),outputSize:Gt(t)}}function OV(a,e,t){oe(a.rank===e.length,function(){return"Error in slice"+a.rank+"D: Length of begin "+e+" must match the rank of the array ("+a.rank+")."}),oe(a.rank===t.length,function(){return"Error in slice"+a.rank+"D: Length of size "+t+" must match the rank of the array ("+a.rank+")."});for(var n=function(i){oe(e[i]+t[i]<=a.shape[i],function(){return"Error in slice"+a.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+t[i])+") would overflow input.shape["+i+"] ("+a.shape[i]+")"})},r=0;r<a.rank;++r)n(r)}function RN(a){for(var e=[],t=0;a>0;)1&a&&e.push(t),a/=2,t++;return e}function Cw(a,e,t){for(var n=[],r=0;r<a.length;r++)n[r]=Math.ceil((e[r]-a[r])/t[r]);return n}function UV(a,e,t,n,r){var i=e[r],s=t[r]||1;(a&1<<r||i==null)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=n[r];return i<0&&(i+=o),i=g3(0,i,o-1)}function BV(a,e,t,n,r){var i=e[r],s=t[r]||1;(a&1<<r||i==null)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var o=n[r];return i<0&&(i+=o),i=s>0?g3(0,i,o):g3(-1,i,o-1)}function T5(a,e,t){for(var n=t.length,r=0;r<t.length;r++)if(t[r]>1){n=r;break}for(r=n+1;r<t.length;r++)if(e[r]>0||t[r]!==a[r])return!1;return!0}function N5(a,e){for(var t=a.length>0?a[a.length-1]:1,n=0;n<a.length-1;n++)t+=a[n]*e[n];return t}function FV(a,e){oe(y3(a),function(){return"The f passed in variableGrads(f) must be a function"}),oe(e==null||Array.isArray(e)&&e.every(function(d){return d instanceof i0}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var n in e=[],Ae.registeredVariables)e.push(Ae.registeredVariables[n]);var r=t?e.filter(function(d){return!d.trainable}):null,i=e.length;oe((e=e.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var s=Ae.gradients(a,e,null,!0),o=s.value,l=s.grads;oe(l.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),oe(o.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+o.rank+" tensor"});var c={};return e.forEach(function(d,h){l[h]!=null&&(c[d.name]=l[h])}),r!=null&&r.forEach(function(d){return c[d.name]=null}),{value:o,grads:c}}function i_(a){return Ae.customGrad(a)}var Cu=me({softmax_:function(a,e){e===void 0&&(e=-1);var t=ne(a,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return Ae.runKernelFunc(function(n,r){var i=n.softmax(t,e);return r([i]),i},{logits:t},function(n,r){var i=r[0],s=n.mul(i);return{logits:function(){return s.sub(s.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),kV=me({logSoftmax_:function(a,e){e===void 0&&(e=-1);var t=ne(a,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return i_(function(n,r){var i=n.max(e,!0),s=n.sub(i),o=s.toFloat().sub(s.exp().sum(e,!0).log());return r([o]),{value:o,gradFunc:function(l,c){var d=c[0].exp();return l.sub(l.sum(e,!0).mul(d))}}})(t)}}),C5=function(){function a(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return a.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},a.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},a.prototype.has=function(e){return this.data.has(e)},a.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},a.prototype.numDataIds=function(){return this.dataIdsCount},a}(),I5=function(){function a(){}return a.prototype.time=function(e){return He("time")},a.prototype.read=function(e){return He("read")},a.prototype.readSync=function(e){return He("readSync")},a.prototype.numDataIds=function(){return He("numDataIds")},a.prototype.disposeData=function(e){return He("disposeData")},a.prototype.write=function(e,t,n){return He("write")},a.prototype.move=function(e,t,n,r){return He("move")},a.prototype.memory=function(){return He("memory")},a.prototype.floatPrecision=function(){return He("floatPrecision")},a.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},a.prototype.batchMatMul=function(e,t,n,r){return He("batchMatMul")},a.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,He("fusedBatchMatMul")},a.prototype.slice=function(e,t,n){return He("slice")},a.prototype.stridedSlice=function(e,t,n,r){return He("stridedSlice")},a.prototype.unstack=function(e,t){return He("unstack")},a.prototype.reverse=function(e,t){return He("reverse")},a.prototype.concat=function(e,t){return He("concat")},a.prototype.neg=function(e){return He("neg")},a.prototype.add=function(e,t){return He("add")},a.prototype.addN=function(e){return He("addN")},a.prototype.subtract=function(e,t){return He("subtract")},a.prototype.multiply=function(e,t){return He("multiply")},a.prototype.realDivide=function(e,t){return He("realDivide")},a.prototype.floorDiv=function(e,t){return He("floorDiv")},a.prototype.sum=function(e,t){return He("sum")},a.prototype.prod=function(e,t){return He("prod")},a.prototype.unsortedSegmentSum=function(e,t,n){return He("unsortedSegmentSum")},a.prototype.argMin=function(e,t){return He("argMin")},a.prototype.argMax=function(e,t){return He("argMax")},a.prototype.equal=function(e,t){return He("equal")},a.prototype.notEqual=function(e,t){return He("notEqual")},a.prototype.less=function(e,t){return He("less")},a.prototype.lessEqual=function(e,t){return He("lessEqual")},a.prototype.greater=function(e,t){return He("greater")},a.prototype.greaterEqual=function(e,t){return He("greaterEqual")},a.prototype.logicalNot=function(e){return He("logicalNot")},a.prototype.logicalAnd=function(e,t){return He("logicalAnd")},a.prototype.logicalOr=function(e,t){return He("logicalOr")},a.prototype.where=function(e){return He("where")},a.prototype.select=function(e,t,n){return He("select")},a.prototype.topk=function(e,t,n){return He("topk")},a.prototype.min=function(e,t){return He("min")},a.prototype.minimum=function(e,t){return He("minimum")},a.prototype.mod=function(e,t){return He("mod")},a.prototype.max=function(e,t){return He("max")},a.prototype.maximum=function(e,t){return He("maximum")},a.prototype.all=function(e,t){return He("all")},a.prototype.any=function(e,t){return He("any")},a.prototype.squaredDifference=function(e,t){return He("squaredDifference")},a.prototype.ceil=function(e){return He("ceil")},a.prototype.floor=function(e){return He("floor")},a.prototype.round=function(e){return He("round")},a.prototype.sign=function(e){return He("sign")},a.prototype.isNaN=function(e){return He("isNaN")},a.prototype.isInf=function(e){return He("isInf")},a.prototype.isFinite=function(e){return He("isFinite")},a.prototype.pow=function(e,t){return He("pow")},a.prototype.exp=function(e){return He("exp")},a.prototype.expm1=function(e){return He("expm1")},a.prototype.softmax=function(e,t){return He("softmax")},a.prototype.log=function(e){return He("log")},a.prototype.log1p=function(e){return He("log1p")},a.prototype.sqrt=function(e){return He("sqrt")},a.prototype.rsqrt=function(e){return He("rsqrt")},a.prototype.square=function(e){return He("square")},a.prototype.reciprocal=function(e){return He("reciprocal")},a.prototype.relu=function(e){return He("relu")},a.prototype.relu6=function(e){return He("relu6")},a.prototype.prelu=function(e,t){return He("prelu")},a.prototype.elu=function(e){return He("elu")},a.prototype.eluDer=function(e,t){return He("eluDer")},a.prototype.selu=function(e){return He("selu")},a.prototype.int=function(e){return He("int")},a.prototype.clip=function(e,t,n){return He("clip")},a.prototype.abs=function(e){return He("abs")},a.prototype.complexAbs=function(e){return He("complexAbs")},a.prototype.sigmoid=function(e){return He("sigmoid")},a.prototype.softplus=function(e){return He("softplus")},a.prototype.sin=function(e){return He("sin")},a.prototype.cos=function(e){return He("cos")},a.prototype.tan=function(e){return He("tan")},a.prototype.asin=function(e){return He("asin")},a.prototype.acos=function(e){return He("acos")},a.prototype.atan=function(e){return He("atan")},a.prototype.atan2=function(e,t){return He("atan2")},a.prototype.sinh=function(e){return He("sinh")},a.prototype.cosh=function(e){return He("cosh")},a.prototype.tanh=function(e){return He("tanh")},a.prototype.asinh=function(e){return He("asinh")},a.prototype.acosh=function(e){return He("acosh")},a.prototype.atanh=function(e){return He("atanh")},a.prototype.erf=function(e){return He("erf")},a.prototype.step=function(e,t){return He("step")},a.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,He("fusedConv2d")},a.prototype.conv2d=function(e,t,n){return He("conv2d")},a.prototype.conv2dDerInput=function(e,t,n){return He("conv2dDerInput")},a.prototype.conv2dDerFilter=function(e,t,n){return He("conv2dDerFilter")},a.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,He("fusedDepthwiseConv2D")},a.prototype.depthwiseConv2D=function(e,t,n){return He("depthwiseConv2D")},a.prototype.depthwiseConv2DDerInput=function(e,t,n){return He("depthwiseConv2DDerInput")},a.prototype.depthwiseConv2DDerFilter=function(e,t,n){return He("depthwiseConv2DDerFilter")},a.prototype.conv3d=function(e,t,n){return He("conv3d")},a.prototype.conv3dDerInput=function(e,t,n){return He("conv3dDerInput")},a.prototype.conv3dDerFilter=function(e,t,n){return He("conv3dDerFilter")},a.prototype.maxPool=function(e,t){return He("maxPool")},a.prototype.maxPoolBackprop=function(e,t,n,r){return He("maxPoolBackprop")},a.prototype.avgPool=function(e,t){return He("avgPool")},a.prototype.avgPoolBackprop=function(e,t,n){return He("avgPoolBackprop")},a.prototype.avgPool3d=function(e,t){return He("avgPool3d")},a.prototype.avgPool3dBackprop=function(e,t,n){return He("avgPool3dBackprop")},a.prototype.maxPool3d=function(e,t){return He("maxPool3d")},a.prototype.maxPool3dBackprop=function(e,t,n,r){return He("maxPool3dBackprop")},a.prototype.reshape=function(e,t){return He("reshape")},a.prototype.cast=function(e,t){return He("cast")},a.prototype.tile=function(e,t){return He("tile")},a.prototype.pad=function(e,t,n){return He("pad")},a.prototype.transpose=function(e,t){return He("transpose")},a.prototype.gather=function(e,t,n){return He("gather")},a.prototype.gatherND=function(e,t){return He("gatherND")},a.prototype.scatterND=function(e,t,n){return He("scatterND")},a.prototype.batchToSpaceND=function(e,t,n){return He("batchToSpaceND")},a.prototype.spaceToBatchND=function(e,t,n){return He("spaceToBatchND")},a.prototype.resizeBilinear=function(e,t,n,r){return He("resizeBilinear")},a.prototype.resizeBilinearBackprop=function(e,t,n){return He("resizeBilinearBackprop")},a.prototype.resizeNearestNeighbor=function(e,t,n,r){return He("resizeNearestNeighbor")},a.prototype.resizeNearestNeighborBackprop=function(e,t,n){return He("resizeNearestNeighborBackprop")},a.prototype.batchNormalization=function(e,t,n,r,i,s){return He("batchNormalization")},a.prototype.localResponseNormalization4D=function(e,t,n,r,i){return He("localResponseNormalization4D")},a.prototype.LRNGrad=function(e,t,n,r,i,s,o){return He("LRNGrad")},a.prototype.multinomial=function(e,t,n,r){return He("multinomial")},a.prototype.oneHot=function(e,t,n,r){return He("oneHot")},a.prototype.cumsum=function(e,t,n,r){return He("cumsum")},a.prototype.nonMaxSuppression=function(e,t,n,r,i){return He("nonMaxSuppression")},a.prototype.fft=function(e){return He("fft")},a.prototype.ifft=function(e){return He("ifft")},a.prototype.complex=function(e,t){return He("complex")},a.prototype.real=function(e){return He("real")},a.prototype.imag=function(e){return He("imag")},a.prototype.cropAndResize=function(e,t,n,r,i,s){return He("cropAndResize")},a.prototype.depthToSpace=function(e,t,n){return He("depthToSpace")},a.prototype.split=function(e,t,n){return He("split")},a.prototype.sparseToDense=function(e,t,n,r){return He("sparseToDense")},a.prototype.diag=function(e){return He("diag")},a.prototype.fill=function(e,t,n){return He("fill")},a.prototype.onesLike=function(e){return He("onesLike")},a.prototype.zerosLike=function(e){return He("zerosLike")},a.prototype.linspace=function(e,t,n){return He("linspace")},a.prototype.dispose=function(){return He("dispose")},a}();function He(a){throw new Error("'"+a+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Gd(a,e){for(var t=a.length,n=[],r=0;r<t;r++){var i=t-1-r,s=a[i]||1;(e[e.length-1-r]||1)>1&&s===1&&n.unshift(i)}return n}function Fr(a,e){for(var t=[],n=0;n<e.length;n++){var r=a[a.length-n-1],i=e.length-n-1,s=e[i];(r==null||r===1&&s>1)&&t.unshift(i)}return t}function Hn(a,e){for(var t=[],n=Math.max(a.length,e.length),r=0;r<n;r++){var i=a[a.length-r-1];i==null&&(i=1);var s=e[e.length-r-1];if(s==null&&(s=1),i===1)t.unshift(s);else if(s===1)t.unshift(i);else{if(i!==s)throw Error("Operands could not be broadcast together with shapes "+a+" and "+e+".");t.unshift(i)}}return t}function jv(a,e,t,n,r,i,s){s===void 0&&(s="channelsLast");var o,l=qx(e),c=l[0],d=l[1];if(s==="channelsLast")o=[c,d,a[3],a[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);o=[c,d,a[1],a[1]]}return tp(a,o,t,n,r,i,!1,s)}function Kx(a,e,t,n,r,i,s){s===void 0&&(s="NDHWC");var o,l,c=R3(e),d=c[0],h=c[1],m=c[2];if(s==="NDHWC")l="channelsLast",o=[d,h,m,a[4],a[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);l="channelsFirst",o=[d,h,m,a[1],a[1]]}return Yx(a,o,t,n,r,!1,l,i)}function tp(a,e,t,n,r,i,s,o){s===void 0&&(s=!1),o===void 0&&(o="channelsLast");var l=[-1,-1,-1,-1],c=l[0],d=l[1],h=l[2],m=l[3];if(o==="channelsLast")c=a[0],d=a[1],h=a[2],m=a[3];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);c=a[0],m=a[1],d=a[2],h=a[3]}var v,A=e[0],E=e[1],b=e[3],_=qx(t),R=_[0],T=_[1],M=qx(n),I=M[0],P=M[1],B=qm(A,I),F=qm(E,P),L=function($,re,G,Y,K,X,z,J){var le,ce,xe;if(typeof $=="number"){le={top:$,bottom:$,left:$,right:$,type:$===0?"VALID":"NUMBER"};var fe=function(dt,ct,se,Be,Le){Be==null&&(Be=D5(dt,ct,se));var Ke=dt[0],ze=dt[1],ot=Ev((Ke-ct+2*Be)/se+1,Le);oe(dr(ot),function(){return"The output # of rows ("+ot+") must be an integer. Change the stride and/or zero pad parameters"});var Qe=Ev((ze-ct+2*Be)/se+1,Le);return oe(dr(Qe),function(){return"The output # of columns ("+Qe+") must be an integer. Change the stride and/or zero pad parameters"}),[ot,Qe]}([re,G],X,Y,$,J);ce=fe[0],xe=fe[1]}else if($==="same"){ce=Math.ceil(re/Y),xe=Math.ceil(G/K);var _e=Math.max(0,(ce-1)*Y+X-re),Ie=Math.max(0,(xe-1)*K+z-G),Ge=Math.floor(_e/2),Ue=_e-Ge,$e=Math.floor(Ie/2);le={top:Ge,bottom:Ue,left:$e,right:Ie-$e,type:"SAME"}}else{if($!=="valid")throw Error("Unknown padding parameter: "+$);le={top:0,bottom:0,left:0,right:0,type:"VALID"},ce=Math.ceil((re-X+1)/Y),xe=Math.ceil((G-z+1)/K)}return{padInfo:le,outHeight:ce,outWidth:xe}}(r,d,h,R,T,B,F,i),U=L.padInfo,j=L.outHeight,W=L.outWidth,Q=s?b*m:b;return o==="channelsFirst"?v=[c,Q,j,W]:o==="channelsLast"&&(v=[c,j,W,Q]),{batchSize:c,dataFormat:o,inHeight:d,inWidth:h,inChannels:m,outHeight:j,outWidth:W,outChannels:Q,padInfo:U,strideHeight:R,strideWidth:T,filterHeight:A,filterWidth:E,effectiveFilterHeight:B,effectiveFilterWidth:F,dilationHeight:I,dilationWidth:P,inShape:a,outShape:v,filterShape:e}}function Yx(a,e,t,n,r,i,s,o){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1,-1],c=l[0],d=l[1],h=l[2],m=l[3],v=l[4];if(s==="channelsLast")c=a[0],d=a[1],h=a[2],m=a[3],v=a[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=a[0],v=a[1],d=a[2],h=a[3],m=a[4]}var A,E=e[0],b=e[1],_=e[2],R=e[4],T=R3(t),M=T[0],I=T[1],P=T[2],B=R3(n),F=B[0],L=B[1],U=B[2],j=qm(E,F),W=qm(b,L),Q=qm(_,U),$=function(z,J,le,ce,xe,fe,_e,Ie,Ge,Ue,$e){var dt,ct,se,Be;if(typeof z=="number"){dt={top:z,bottom:z,left:z,right:z,front:z,back:z,type:z===0?"VALID":"NUMBER"};var Le=function(q,be,je,Ye,Pe,_t){Pe==null&&(Pe=D5(q,be,Ye));var mt=q[0],Ct=q[1],Dt=q[2],rt=Ev((mt-be+2*Pe)/Ye+1,_t);oe(dr(rt),function(){return"The output # of depths ("+rt+") must be an integer. Change the stride and/or zero pad parameters"});var gt=Ev((Ct-be+2*Pe)/Ye+1,_t);oe(dr(gt),function(){return"The output # of rows ("+gt+") must be an integer. Change the stride and/or zero pad parameters"});var Lt=Ev((Dt-be+2*Pe)/Ye+1,_t);return oe(dr(Lt),function(){return"The output # of columns ("+Lt+") must be an integer. Change the stride and/or zero pad parameters"}),[rt,gt,Lt,je]}([J,le,ce,1],Ie,1,xe,z,$e);ct=Le[0],se=Le[1],Be=Le[2]}else if(z==="same"){ct=Math.ceil(J/xe),se=Math.ceil(le/fe),Be=Math.ceil(ce/_e);var Ke=(ct-1)*xe+Ie-J,ze=(se-1)*fe+Ge-le,ot=(Be-1)*_e+Ue-ce,Qe=Math.floor(Ke/2),st=Ke-Qe,Ot=Math.floor(ze/2),zt=ze-Ot,ie=Math.floor(ot/2);dt={top:Ot,bottom:zt,left:ie,right:ot-ie,front:Qe,back:st,type:"SAME"}}else{if(z!=="valid")throw Error("Unknown padding parameter: "+z);dt={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ct=Math.ceil((J-Ie+1)/xe),se=Math.ceil((le-Ge+1)/fe),Be=Math.ceil((ce-Ue+1)/_e)}return{padInfo:dt,outDepth:ct,outHeight:se,outWidth:Be}}(r,d,h,m,M,I,P,j,W,Q,o),re=$.padInfo,G=$.outDepth,Y=$.outHeight,K=$.outWidth,X=i?R*v:R;return s==="channelsFirst"?A=[c,X,G,Y,K]:s==="channelsLast"&&(A=[c,G,Y,K,X]),{batchSize:c,dataFormat:s,inDepth:d,inHeight:h,inWidth:m,inChannels:v,outDepth:G,outHeight:Y,outWidth:K,outChannels:X,padInfo:re,strideDepth:M,strideHeight:I,strideWidth:P,filterDepth:E,filterHeight:b,filterWidth:_,effectiveFilterDepth:j,effectiveFilterHeight:W,effectiveFilterWidth:Q,dilationDepth:F,dilationHeight:L,dilationWidth:U,inShape:a,outShape:A,filterShape:e}}function D5(a,e,t,n){n===void 0&&(n=1);var r=qm(e,n);return Math.floor((a[0]*(t-1)-t+r)/2)}function qx(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}function R3(a){return typeof a=="number"?[a,a,a]:a}function qm(a,e){return e<=1?a:a+(a-1)*(e-1)}function Ev(a,e){if(!e)return a;switch(e){case"round":return Math.round(a);case"ceil":return Math.ceil(a);case"floor":return Math.floor(a);default:throw new Error("Unknown roundingMode "+e)}}function o0(a){var e=qx(a),t=e[0],n=e[1],r=e[2];return t===1&&n===1&&r===1}function Ps(a,e){return o0(a)||o0(e)}function Iw(a){if(a==="NHWC")return"channelsLast";if(a==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+a)}function L5(a,e,t){if(e==="complex64"){if(a.dtype==="complex64")return a.clone();var n=Ca(a.shape),r=a.toFloat(),i=t.complex(r,n);return n.dispose(),r.dispose(),i}if(!fG(a.dtype,e))return Ae.makeTensorFromDataId(a.dataId,a.shape,e);if(a.dtype==="complex64"){var s=t.real(a);return i=s.cast(e),s.dispose(),i}if(e==="int32")return t.int(a);if(e==="bool"){var o=Tt(0,a.dtype);return i=t.notEqual(a,o),o.dispose(),i}throw new Error("Error in Cast: failed to cast "+a.dtype+" to "+e)}function M3(a,e){return Ae.makeTensorFromDataId(a.dataId,e,a.dtype)}function P5(a,e,t){var n=(e-a)/(t-1),r=d1(t,"float32");r[0]=a;for(var i=1;i<r.length;i++)r[i]=r[i-1]+n;return xr(r,"float32")}function T3(a,e){if(a.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+a.length+", imag: "+e.length+".");for(var t=new Float32Array(2*a.length),n=0;n<t.length;n+=2)t[n]=a[n/2],t[n+1]=e[n/2];return t}function MN(a,e){return{real:a[2*e],imag:a[2*e+1]}}function HV(a,e,t,n){a[2*n]=e,a[2*n+1]=t}function jV(a,e,t){var n=(t?2:-2)*Math.PI*(a/e);return{real:Math.cos(n),imag:Math.sin(n)}}function zV(a,e,t){var n=function(i,s,o){return function(l,c,d){for(var h=0,m=l.length,v=0,A=!1;h<m;){var E=d(c,l[v=h+(m-h>>>1)]);E>0?h=v+1:(m=v,A=!E)}return A?h:-h-1}(i,s,o)}(a,e,t),r=n<0?-(n+1):n;a.splice(r,0,e)}function Dw(a,e,t,n,r){return O5(a,e,t,n,r,0).selectedIndices}function Lw(a,e,t,n,r,i){var s=O5(a,e,t,n,r,i);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function O5(a,e,t,n,r,i,s,o){o===void 0&&(o=!1);for(var l=Array.from(e).map(function(M,I){return{score:M,boxIndex:I,suppressBeginIndex:0}}).filter(function(M){return M.score>r}).sort(TN),c=i>0?-.5/i:0,d=[],h=[];d.length<t&&l.length>0;){var m=l.pop(),v=m.score,A=m.boxIndex,E=m.suppressBeginIndex;if(v<r)break;for(var b=!1,_=d.length-1;_>=E;--_){var R=GV(a,A,d[_]);if(R>=n){b=!0;break}if(m.score=m.score*VV(n,c,R),m.score<=r)break}m.suppressBeginIndex=d.length,b||(m.score===v?(d.push(A),h.push(m.score)):m.score>r&&zV(l,m,TN))}var T=d.length;return o&&(d.fill(0,T),h.fill(0,T)),{selectedIndices:xr(d,"int32"),selectedScores:xr(h,"float32"),numValidOutputs:Tt(T,"int32")}}function GV(a,e,t){var n=a.subarray(4*e,4*e+4),r=a.subarray(4*t,4*t+4),i=Math.min(n[0],n[2]),s=Math.min(n[1],n[3]),o=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]),c=Math.min(r[0],r[2]),d=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),m=Math.max(r[1],r[3]),v=(o-i)*(l-s),A=(h-c)*(m-d);if(v<=0||A<=0)return 0;var E=Math.max(i,c),b=Math.max(s,d),_=Math.min(o,h),R=Math.min(l,m),T=Math.max(_-E,0)*Math.max(R-b,0);return T/(v+A-T)}function VV(a,e,t){var n=Math.exp(e*t*t);return t<=a?n:0}function TN(a,e){return a.score-e.score||a.score===e.score&&e.boxIndex-a.boxIndex}function U5(a,e,t){var n=new Array(a.rank).fill(0),r=a.shape.slice();return e.map(function(i){r[t]=i;var s=a.slice(n,r);return n[t]+=i,s})}function B5(a,e){for(var t=new Array(a.rank),n=0;n<t.length;n++)t[n]=a.shape[n]*e[n];var r=xn(t,a.dtype);for(n=0;n<r.values.length;++n){for(var i=r.indexToLoc(n),s=new Array(a.rank),o=0;o<s.length;o++)s[o]=i[o]%a.shape[o];var l=a.locToIndex(s);r.values[n]=a.values[l]}return r.toTensor()}function F5(a,e,t,n,r){for(var i=e[e.length-1],s=[a.length/i,i],o=s[0],l=s[1],c=Fv(t,o*n),d=Fv("int32",o*n),h=0;h<o;h++){for(var m=h*l,v=a.subarray(m,m+l),A=[],E=0;E<v.length;E++)A.push({value:v[E],index:E});A.sort(function(M,I){return I.value-M.value});var b=h*n,_=c.subarray(b,b+n),R=d.subarray(b,b+n);for(E=0;E<n;E++)_[E]=A[E].value,R[E]=A[E].index}var T=e.slice();return T[T.length-1]=n,[fi(c,T,t),fi(d,T,"int32")]}function Pw(a,e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(n);var r=xn(a,"int32"),i=xn([t.length,a.length],"int32");for(n=0;n<t.length;n++){var s=r.indexToLoc(t[n]),o=n*a.length;i.values.set(s,o)}return i.toTensor()}var WV=function(a,e){this.outputShape=[],this.outputShape=a,this.variableNames=e.map(function(r,i){return"T"+i});var t=[];this.variableNames.forEach(function(r){t.push("float v"+r+" = get"+r+"AtOutCoords();")});var n=this.variableNames.map(function(r){return"v"+r}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+n+`;
        setOutput(result);
      }
    `},KV=function(a,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a,this.variableNames=e.map(function(r,i){return"T"+i});var t=[];this.variableNames.forEach(function(r){t.push("vec4 v"+r+" = get"+r+"AtOutCoords();")});var n=this.variableNames.map(function(r){return"v"+r}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+n+`;
        setOutput(result);
      }
    `},YV=function(a,e,t){this.variableNames=["A"];var n=a.windowSize,r=a.batchSize,i=a.inSize,s=Math.ceil(i/n);t||this.variableNames.push("bestIndicesA"),this.outputShape=[r,s];var o=e==="max"?">":"<",l=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+n+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+o+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function k5(a,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return a+"."+t})}function Rs(a,e){return e===1?[a]:k5(a,e)}function Ii(){var a,e,t,n,r,i,s,o,l,c;return qe().getNumber("WEBGL_VERSION")===2?(a="#version 300 es",e="in",t="out",n="in",r="texture",i="outputColor",s="out vec4 outputColor;",o=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(a="",e="attribute",t="varying",n="varying",r="texture2D",i="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:a,attribute:e,varyingVs:t,varyingFs:n,texture2D:r,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function Nh(a,e,t){t===void 0&&(t="index");var n=bc(e);return n.map(function(r,i){return"int "+a[i]+" = "+t+" / "+r+"; "+(i===n.length-1?"int "+a[i+1]+" = "+t+" - "+a[i]+" * "+r:"index -= "+a[i]+" * "+r)+";"}).join("")}function Ow(a){var e=bc(a).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var H5=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function qV(a,e,t,n){var r=[];a.forEach(function(v){var A=Gt(v.shapeInfo.logicalShape);v.shapeInfo.isUniform?r.push("uniform float "+v.name+(A>1?"["+A+"]":"")+";"):(r.push("uniform sampler2D "+v.name+";"),r.push("uniform int offset"+v.name+";"))});var i,s,o=r.join(`
`),l=a.map(function(v){return function(A,E,b){b===void 0&&(b=!1);var _="";_+=b?j5(A):Hm(A);var R=A.shapeInfo.logicalShape,T=E.logicalShape;return R.length<=T.length&&(_+=b?function(M,I){var P,B=M.name,F=B.charAt(0).toUpperCase()+B.slice(1),L="get"+F+"AtOutCoords",U=M.shapeInfo.logicalShape.length,j=I.logicalShape.length,W=Gd(M.shapeInfo.logicalShape,I.logicalShape),Q=Ra(j),$=j-U,re=["x","y","z","w","u","v"];P=U===0?"":j<2&&W.length>=1?"coords = 0;":W.map(function(le){return"coords."+re[le+$]+" = 0;"}).join(`
`);var G="";G=j<2&&U>0?"coords":M.shapeInfo.logicalShape.map(function(le,ce){return"coords."+re[ce+$]}).join(", ");var Y="return outputValue;",K=Gt(M.shapeInfo.logicalShape)===1,X=Gt(I.logicalShape)===1;if(U!==1||K||X){if(K&&!X)Y=j===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(W.length){var z=U-2,J=U-1;W.indexOf(z)>-1&&W.indexOf(J)>-1?Y="return vec4(outputValue.x);":W.indexOf(z)>-1?Y="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":W.indexOf(J)>-1&&(Y="return vec4(outputValue.xx, outputValue.zz);")}}else Y=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+L+`() {
      `+Q+` coords = getOutputCoords();
      `+P+`
      vec4 outputValue = get`+F+"("+G+`);
      `+Y+`
    }
  `}(A,E):function(M,I){var P=M.name,B=P.charAt(0).toUpperCase()+P.slice(1),F="get"+B+"AtOutCoords",L=I.texShape,U=M.shapeInfo.texShape,j=M.shapeInfo.logicalShape.length,W=I.logicalShape.length;if(!M.shapeInfo.isUniform&&j===W&&M.shapeInfo.flatOffset==null&&Zr(U,L))return`
      float `+F+`() {
        return sampleTexture(`+P+`, resultUV);
      }
    `;var Q,$=Ra(W),re=Gd(M.shapeInfo.logicalShape,I.logicalShape),G=W-j,Y=["x","y","z","w","u","v"];Q=j===0?"":W<2&&re.length>=1?"coords = 0;":re.map(function(X){return"coords."+Y[X+G]+" = 0;"}).join(`
`);var K="";return K=W<2&&j>0?"coords":M.shapeInfo.logicalShape.map(function(X,z){return"coords."+Y[z+G]}).join(", "),`
    float `+F+`() {
      `+$+` coords = getOutputCoords();
      `+Q+`
      return get`+B+"("+K+`);
    }
  `}(A,E)),_}(v,e,n)}).join(`
`),c=e.texShape,d=Ii(),h=function(v){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+v.texture2D+`(textureSampler, uv).r;
    }
  `}(d),m=function(v){return v.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+v.varyingFs+` vec2 resultUV;
    `+v.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+v.defineSpecialNaN+`
    `+v.defineSpecialInf+`
    `+v.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+XV+`
    `+JV+`
    `+ZV+`
  `}(d);return e.isPacked?(i=function(v,A){switch(v.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(M,I){var P=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)];return P[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+P[1]+`.0);
      }
    `:P[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+P[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));
      return 2 * (resTexRC.x * `+P[1]+` + resTexRC.y);
    }
  `}(0,A);case 2:return function(M,I){var P=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)];if(Zr(M,I))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+P[0]+", "+P[1]+`));
      }
    `;var B=Math.ceil(M[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));

      int index = resTexRC.x * `+P[1]+` + resTexRC.y;
      int r = 2 * (index / `+B+`);
      int c = imod(index, `+B+`) * 2;

      return ivec2(r, c);
    }
  `}(v,A);case 3:return E=v,b=A,_=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],R=Math.ceil(E[2]/2),T=R*Math.ceil(E[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+R+`);
      int c = imod(index, `+R+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(M,I){for(var P=[Math.ceil(I[0]/2),Math.ceil(I[1]/2)],B=Math.ceil(M[M.length-1]/2),F=B*Math.ceil(M[M.length-2]/2),L=F,U="",j="b, r, c",W=2;W<M.length-1;W++)L*=M[M.length-W-1],U=`
      int b`+W+" = index / "+L+`;
      index -= b`+W+" * "+L+`;
    `+U,j="b"+W+", "+j;return`
    ivec`+M.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+P[0]+", "+P[1]+`));
      int index = resTexRC.x * `+P[1]+` + resTexRC.y;

      `+U+`

      int b = index / `+F+`;
      index -= b * `+F+`;

      int r = 2 * (index / `+B+`);
      int c = imod(index, `+B+`) * 2;

      return ivec`+M.length+"("+j+`);
    }
  `}(v,A)}var E,b,_,R,T}(e.logicalShape,c),s=function(v){return`
    void setOutput(vec4 val) {
      `+v.output+` = val;
    }
  `}(d)):(i=function(v,A){switch(v.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,R){return R[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+R[1]+`.0);
      }
    `:R[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+R[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+R[0]+", "+R[1]+`));
      return resTexRC.x * `+R[1]+` + resTexRC.y;
    }
  `}(0,A);case 2:return function(_,R){return Zr(_,R)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+R[0]+", "+R[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+R[0]+", "+R[1]+`));
        int index = resTexRC.x * `+R[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+R[0]+", "+R[1]+`));
        int index = resTexRC.x * `+R[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+R[0]+", "+R[1]+`));
      int index = resTexRC.x * `+R[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(v,A);case 3:return E=A,b=Nh(["r","c","d"],v),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,R){var T=Nh(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+R[0]+", "+R[1]+`));
      int index = resTexRC.x * `+R[1]+` + resTexRC.y;
      `+T+`
      return ivec4(r, c, d, d2);
    }
  `}(v,A);case 5:return function(_,R){var T=Nh(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+R[0]+`,
                             `+R[1]+`));

      int index = resTexRC.x * `+R[1]+` + resTexRC.y;

      `+T+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(v,A);case 6:return function(_,R){var T=Nh(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+R[0]+", "+R[1]+`));
      int index = resTexRC.x * `+R[1]+` + resTexRC.y;

      `+T+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(v,A);default:throw new Error(v.length+"-D output sampling is not yet supported")}var E,b}(e.logicalShape,c),s=function(v){return`
    void setOutput(float val) {
      `+v.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),n&&(m+=QV),[m,h,s,o,i,l,t].join(`
`)}function Hm(a){var e=a.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"float "+r+"() {return "+n+";}";var i=t.shapeInfo.texShape,s=i[0],o=i[1];if(s===1&&o===1)return`
      float `+r+`() {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var l=t.shapeInfo.texShape,c=l[0],d=l[1],h=nh(n);return`
    float `+r+`() {
      vec2 uv = uvFromFlat(`+c+", "+d+", "+h+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(a);case 1:return function(t){var n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float `+r+`(int index) {
        `+dm(t)+`
      }
    `;var i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float `+r+`(int index) {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var l=nh(n);return o===1?`
      float `+r+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+s+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:s===1?`
      float `+r+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+o+`.0, 0.5);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+o+", index + "+l+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(a);case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Zr(n,s)){var o=s[0],l=s[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+o+`.0);
      return sampleTexture(`+r+`, uv);
    }
  `}var c=Rh(n),d=c.newShape,h=c.keptDims,m=d;if(m.length<n.length){var v=jm(t,m);return`
      `+Hm(v)+`
      float `+i+`(int row, int col) {
        return `+i+"("+zm(["row","col"],h)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+n[1]+`, 1)));
        `+dm(t)+`
      }
    `;var A=s[0],E=s[1],b=nh(r);return E===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+A+`.0);
      return sampleTexture(`+r+`, uv);
    }
  `:A===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+E+`.0, 0.5);
      return sampleTexture(`+r+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+n[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+A+", "+E+`, index);
    return sampleTexture(`+r+`, uv);
  }
`}(a);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],l=Rh(n),c=l.newShape,d=l.keptDims,h=c;if(h.length<n.length){var m=jm(t,h);return`
        `+Hm(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+zm(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+o+`, 1)));
        `+dm(t)+`
      }
    `;var v=t.shapeInfo.texShape,A=v[0],E=v[1],b=t.shapeInfo.flatOffset;if(E===s&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+o+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+E+".0, "+A+`.0);
          return sampleTexture(`+r+`, uv);
        }
      `;if(E===o&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+n[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+E+".0, "+A+`.0);
      return sampleTexture(`+r+`, uv);
    }
  `;var _=nh(r);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+o+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+A+", "+E+`, index);
        return sampleTexture(`+r+`, uv);
      }
  `}(a);case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,l=n[1]*o,c=Rh(n),d=c.newShape,h=c.keptDims;if(d.length<n.length){var m=jm(t,d);return`
      `+Hm(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+zm(["row","col","depth","depth2"],h)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+o+", "+s+`, 1)));
        `+dm(t)+`
      }
    `;var v=t.shapeInfo.flatOffset,A=t.shapeInfo.texShape,E=A[0],b=A[1];if(b===l&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+o+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+E+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;if(b===s&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+n[1]*n[2]+", "+n[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+E+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;var _=nh(r);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+o+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+E+", "+b+", index + "+_+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(a);case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[4],o=n[3]*s,l=n[2]*o,c=n[1]*l,d=Rh(n),h=d.newShape,m=d.keptDims;if(h.length<n.length){var v=jm(t,h);return`
      `+Hm(v)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+zm(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+l+", "+o+", "+s+`)) +
          depth3;
        `+dm(t)+`
      }
    `;var A=t.shapeInfo.flatOffset,E=t.shapeInfo.texShape,b=E[0],_=E[1];if(_===c&&A==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+o+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+b+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;if(_===s&&A==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]+`,
               `+n[2]*n[3]+", "+n[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+b+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;var R=nh(r);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+" + depth * "+o+` +
          depth2 * `+s+" + depth3 + "+R+`;
      vec2 uv = uvFromFlat(`+b+", "+_+`, index);
      return sampleTexture(`+r+`, uv);
    }
  `}(a);case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=Rh(n),o=s.newShape,l=s.keptDims;if(o.length<n.length){var c=jm(t,o);return`
      `+Hm(c)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+zm(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var d=n[5],h=n[4]*d,m=n[3]*h,v=n[2]*m,A=n[1]*v;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+A+", "+v+", "+m+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+dm(t)+`
      }
    `;var E=t.shapeInfo.flatOffset,b=t.shapeInfo.texShape,_=b[0],R=b[1];if(R===A&&E==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+v+", "+m+", "+h+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+R+".0, "+_+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;if(R===d&&E==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]*n[4]+`,
               `+n[2]*n[3]*n[4]+`,
               `+n[3]*n[4]+`,
               `+n[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+R+".0, "+_+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `;var T=nh(r);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+A+" + col * "+v+" + depth * "+m+` +
          depth2 * `+h+" + depth3 * "+d+" + depth4 + "+T+`;
      vec2 uv = uvFromFlat(`+_+", "+R+`, index);
      return sampleTexture(`+r+`, uv);
    }
  `}(a);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function j5(a){var e,t,n;switch(a.shapeInfo.logicalShape.length){case 0:return e=a.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),n=Ii(),`
    vec4 `+t+`() {
      return `+n.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(r){var i=r.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Ii();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+c.texture2D+"("+i+`, uv);
    }
  `}(a);case 2:return function(r){var i=r.shapeInfo.logicalShape,s=r.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),l=r.shapeInfo.texShape,c=l[0],d=l[1],h=Ii();if(l!=null&&Zr(i,l))return`
      vec4 `+o+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+c+`.0);

        return `+h.texture2D+"("+s+`, uv);
      }
    `;var m=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],v=Math.ceil(i[1]/2);return`
    vec4 `+o+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+v+", "+m[0]+", "+m[1]+`, row, col);
      return `+h.texture2D+"("+s+`, uv);
    }
  `}(a);case 3:return function(r){var i=r.shapeInfo.logicalShape,s=r.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),l=r.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(i[0]===1){var d=i.slice(1),h=jm(r,d);return`
        `+j5(h)+`
        vec4 `+o+`(int b, int row, int col) {
          return `+o+"("+zm(["b","row","col"],[1,2])+`);
        }
      `}var m=c[0],v=c[1],A=Math.ceil(i[2]/2),E=A*Math.ceil(i[1]/2),b=Ii();return`
    vec4 `+o+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+v+", "+E+", "+A+`, b, row, col);
      return `+b.texture2D+"("+s+`, uv);
    }
  `}(a);default:return function(r){for(var i=r.shapeInfo.logicalShape,s=i.length,o=r.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=r.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],h=d[0],m=d[1],v=Math.ceil(i[s-1]/2),A=v*Math.ceil(i[s-2]/2),E="int b, int row, int col",b="b * "+A+" + (row / 2) * "+v+" + (col / 2)",_=2;_<s-1;_++)E="int b"+_+", "+E,A*=i[s-_-1],b="b"+_+" * "+A+" + "+b;var R=Ii();return`
    vec4 `+l+"("+E+`) {
      int index = `+b+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+h+`);
      return `+R.texture2D+"("+o+`, uv);
    }
  `}(a)}}var XV=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,JV=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ZV=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,QV=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function nh(a){return"offset"+a}function dm(a){var e=a.name,t=Gt(a.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Ra(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error("GPU for rank "+a+" is not yet supported")}function jm(a,e){var t=JSON.parse(JSON.stringify(a));return t.shapeInfo.logicalShape=e,t}function zm(a,e){return e.map(function(t){return a[t]}).join(", ")}var $V=function(a,e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,oe(a.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var r=a[a.length-1],i=Math.ceil(r/e);this.outputShape=a.slice(0,-1),i>1&&this.outputShape.push(i),n||this.variableNames.push("bestIndicesA");var s,o,l=this.outputShape,c=l.length,d=Ra(c),h=Rs("coords",c);if(i===1){var m=Ra(o=c+1);s=`
        `+m+" sourceLocR = "+m+"("+h.join()+`, 0);
        ++`+h[c-1]+`;
        `+m+" sourceLocG = "+m+"("+h.join()+`, 0);
        ++`+h[c-2]+`;
        `+m+" sourceLocA = "+m+"("+h.join()+`, 0);
        --`+h[c-1]+`;
        `+m+" sourceLocB = "+m+"("+h.join()+`, 0);
        --`+h[c-2]+";"}else o=c,s=`
        `+d+` sourceLocR = coords;
        ++`+h[c-1]+`;
        `+d+` sourceLocG = coords;
        ++`+h[c-2]+`;
        `+d+` sourceLocA = coords;
        --`+h[c-1]+`;
        `+d+` sourceLocB = coords;
        --`+h[c-2]+";";var v=["x","y","z","w","u","v"].slice(0,o),A="."+v[o-1],E=v.map(function(F){return"int "+F}),b=Rs("sourceLocR",o-1).concat("inIdx.r"),_=Rs("sourceLocG",o-1).concat("inIdx.g"),R=Rs("sourceLocB",o-1).concat("inIdx.b"),T=Rs("sourceLocA",o-1).concat("inIdx.a"),M=t==="max"?"greaterThan":"lessThan",I=n?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+R.join()+`),
                             getBestIndicesAChannel(`+T.join()+")));",P=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+R.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+T.join()+") : 0.)",B=n?"":`
      float getBestIndicesAChannel(`+E.join()+`) {
        return getChannel(getBestIndicesA(`+v.join()+`),
                                          vec2(`+v.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+E.join()+`) {
        return getChannel(getA(`+v.join()+`),
                               vec2(`+v.slice(-2).join()+`));
      }
      `+B+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+h[c-1]+" < "+(l[c-1]-1)+`;
        bool hasNextRow = `+h[c-2]+" < "+(l[c-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+A+", sourceLocG"+A+`,
          sourceLocB`+A+", sourceLocA"+A+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+P+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+I+`
          vec4 candidate = `+P+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+M+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},eW=function(a){this.variableNames=["dy"],this.outputShape=a.inShape;var e=a.filterHeight,t=a.filterWidth,n=a.strideHeight,r=a.strideWidth,i=a.dilationHeight,s=a.dilationWidth,o=a.effectiveFilterHeight,l=a.effectiveFilterWidth,c=o-1-a.padInfo.top,d=l-1-a.padInfo.left,h=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},tW=function(a){this.variableNames=["dy"],this.outputShape=a.inShape;var e=a.filterDepth,t=a.filterHeight,n=a.filterWidth,r=a.strideDepth,i=a.strideHeight,s=a.strideWidth,o=a.dilationDepth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,m=a.effectiveFilterWidth,v=d-1-a.padInfo.front,A=h-1-a.padInfo.top,E=m-1-a.padInfo.left,b=1/(e*t*n);this.userCode=`
      const ivec3 pads = ivec3(`+v+", "+A+", "+E+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+r+`.0;

          if (dyD < 0.0 || dyD >= `+a.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},nW=function(a,e,t,n,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Hn(a,e),Hn(a,t);var s="0.0";n!=null&&(Hn(a,n),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var o="1.0";r!=null&&(Hn(a,r),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=a,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+o+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},aW=function(a,e,t,n,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Hn(a,e),Hn(a,t);var s="vec4(0.0)";n!=null&&(Hn(a,n),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var o="vec4(1.0)";r!=null&&(Hn(a,r),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=a,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+o+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},rW="return areal * breal - aimag * bimag;",iW="return areal * bimag + aimag * breal;",NN=function(a,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Hn(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+a+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},TS="return a + b;",NS="return a - b;",CN="return a * b;",z5="return (a < 0.) ? b * a : a;",$a=function(a,e,t){this.variableNames=["A","B"],this.outputShape=Hn(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+a+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},G5=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,hu=function(a,e,t,n){n===void 0&&(n=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Hn(e,t);var r=this.outputShape.length,i="";if(n)if(r===0||Gt(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Ra(r)+` coords = getOutputCoords();
        `,r===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=Rs("coords",r);i+=`
            bool nextRowOutOfBounds =
              (`+s[r-2]+" + 1) >= "+this.outputShape[r-2]+`;
            bool nextColOutOfBounds =
              (`+s[r-1]+" + 1) >= "+this.outputShape[r-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+a+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},sW=function(){function a(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return a.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){n.minLoc==null&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},a}(),oW=function(){function a(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return a.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){n.minLoc==null&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},a}(),lW=function(a){this.variableNames=["real","imag"],this.outputShape=a,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},cW=function(a){this.outputShape=[],this.outputShape=s0(a,1),this.variableNames=a.map(function(o,l){return"T"+l});var e=new Array(a.length-1);e[0]=a[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+a[t][1];var n=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var r=e[t-1];n.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+r+"));")}var i=e.length,s=e[e.length-1];n.push("else setOutput(getT"+i+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+n.join(`
        `)+`
      }
    `},uW=function(a,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=s0(a,e);var t=this.outputShape,n=t.length,r=Ra(n),i=Rs("coords",n),s=["x","y","z","w","u","v"].slice(0,n);this.variableNames=a.map(function(b,_){return"T"+_});var o=new Array(a.length-1);o[0]=a[0][e];for(var l=1;l<o.length;l++)o[l]=o[l-1]+a[l][e];var c=s[e],d=s.slice(-2),h=s.join(),m="if ("+c+" < "+o[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+d.join()+`));
        }`;for(l=1;l<o.length;l++){var v=o[l-1];m+=`
        if (`+c+" < "+o[l]+"  && "+c+" >= "+o[l-1]+`) {
          return getChannel(
            getT`+l+"("+d2(s,c,v)+`),
            vec2(`+d2(d,c,v)+`));
        }`}var A=o.length,E=o[o.length-1];m+=`
        return getChannel(
          getT`+A+"("+d2(s,c,E)+`),
          vec2(`+d2(d,c,E)+"));",this.userCode=`
      float getValue(`+s.map(function(b){return"int "+b})+`) {
        `+m+`
      }

      void main() {
        `+r+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[n-1]+" = "+i[n-1]+` + 1;
        if (`+i[n-1]+" < "+t[n-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[n-2]+" = "+i[n-2]+` + 1;
        if (`+i[n-2]+" < "+t[n-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[n-1]+" = "+i[n-1]+` - 1;
        if (`+i[n-2]+" < "+t[n-2]+` &&
            `+i[n-1]+" < "+t[n-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function d2(a,e,t){var n=a.indexOf(e);return a.map(function(r,i){return i===n?r+" - "+t:r}).join()}var dW=function(a){this.variableNames=["x","dy"],this.outputShape=a.filterShape;var e=a.strideHeight,t=a.strideWidth,n=a.padInfo.top,r=a.padInfo.left,i=a.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+a.batchSize+`; b++) {
          for (int yR = 0; yR < `+a.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+n+`;

            if (xR < 0 || xR >= `+a.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+a.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+r+`;

              if (xC < 0 || xC >= `+a.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},fW=function(a){this.variableNames=["dy","W"],this.outputShape=a.inShape;var e=a.filterHeight,t=a.filterWidth,n=a.strideHeight,r=a.strideWidth,i=a.dataFormat==="channelsLast",s=e-1-a.padInfo.top,o=t-1-a.padInfo.left,l=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+a.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},hW=function(a){this.variableNames=["x","dy"],this.outputShape=a.filterShape;var e=a.strideDepth,t=a.strideHeight,n=a.strideWidth,r=a.padInfo.front,i=a.padInfo.top,s=a.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+a.batchSize+`; b++) {
          for (int yF = 0; yF < `+a.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+r+`;

            if (xF < 0 || xF >= `+a.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+a.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+a.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+a.outWidth+`; yC++) {
                int xC = wC + yC * `+n+" - "+s+`;

                if (xC < 0 || xC >= `+a.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},pW=function(a){this.variableNames=["dy","W"],this.outputShape=a.inShape;var e=a.filterDepth,t=a.filterHeight,n=a.filterWidth,r=a.strideDepth,i=a.strideHeight,s=a.strideWidth,o=e-1-a.padInfo.front,l=t-1-a.padInfo.top,c=n-1-a.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+o+", "+l+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+r+`.0;

          if (dyF < 0.0 || dyF >= `+a.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+n+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+n+` - 1 - wC;

              for (int d2 = 0; d2 < `+a.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},mW=function(a){this.variableNames=["x","dy"],this.outputShape=a.filterShape;var e=a.strideHeight,t=a.strideWidth,n=a.padInfo.top,r=a.padInfo.left,i=a.outChannels/a.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+a.batchSize+`; b++) {
          for (int yR = 0; yR < `+a.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+n+`;

            if (xR < 0 || xR >= `+a.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+a.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+r+`;

              if (xC < 0 || xC >= `+a.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},gW=function(a){this.variableNames=["dy","W"],this.outputShape=a.inShape;var e=a.filterHeight,t=a.filterWidth,n=a.strideHeight,r=a.strideWidth,i=e-1-a.padInfo.top,s=t-1-a.padInfo.left,o=a.outChannels/a.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+o+`; dm++) {
              int d2 = d1 * `+o+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},IN=function(a,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=a.outShape;var r=a.padInfo.top,i=a.padInfo.left,s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.filterHeight,h=a.filterWidth,m=4*Math.floor(a.inChannels/4),v=a.inChannels%4,A=a.dataFormat==="channelsLast",E=A?1:2,b=A?2:3,_=A?3:1,R="",T="";t&&(R=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,T="result = activation(result);");var M=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+s+", "+o+`);
      const ivec2 pads = ivec2(`+r+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+E+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+a.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+a.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+A+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(v===1)+`) {

              if (`+A+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(v===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+A+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(v===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+A+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+M+`
        `+T+`
        setOutput(result);
      }
    `},vW=function(a){this.variableNames=["x","W"],this.outputShape=a.outShape;var e=a.padInfo.front,t=a.padInfo.top,n=a.padInfo.left,r=a.strideDepth,i=a.strideHeight,s=a.strideWidth,o=a.dilationDepth,l=a.dilationHeight,c=a.dilationWidth,d=a.filterDepth,h=a.filterHeight,m=a.filterWidth,v=4*Math.floor(a.inChannels/4),A=a.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+r+", "+i+", "+s+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+n+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+o+`;

          if (xF < 0 || xF >= `+a.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+a.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+a.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+v+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(A===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+v+`) *
                  getW(wF, wR, wC, `+v+`, d2);
              } else if (`+(A===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+v+`),
                  getX(batch, xF, xR, xC, `+v+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+v+`, d2),
                  getW(wF, wR, wC, `+v+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(A===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+v+`),
                  getX(batch, xF, xR, xC, `+v+` + 1),
                  getX(batch, xF, xR, xC, `+v+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+v+`, d2),
                  getW(wF, wR, wC, `+v+` + 1, d2),
                  getW(wF, wR, wC, `+v+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},DN=function(a,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=a.outShape;var r=a.inHeight,i=a.inWidth,s=a.padInfo.top,o=a.padInfo.left,l=a.strideHeight,c=a.strideWidth,d=a.dilationHeight,h=a.dilationWidth,m=a.filterHeight,v=a.filterWidth,A=a.outChannels/a.inChannels,E="",b="";t&&(E=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,b="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+l+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+A+`;
        int q = d2 - d1 * `+A+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+r+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+b+`
        setOutput(result);
      }
    `},LN=function(a,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a.outShape;for(var r=a.inHeight,i=a.inWidth,s=a.padInfo.top,o=a.padInfo.left,l=a.strideHeight,c=a.strideWidth,d=a.dilationHeight,h=a.dilationWidth,m=a.filterHeight,v=a.filterWidth,A=v,E="int xR; int xC; int xCOffset;",b=0;b<m;b++)for(var _=0;_<v;_++)E+=`
          vec4 xTexelR`+b+"C"+2*_+` = vec4(0.);
          vec4 wR`+b+"C"+_+` = vec4(0.);
          vec4 xR`+b+"C"+_+" = vec4(0.);";for(b=0;b<m;b++)for(var R=0;R<A;R++){if(E+=`
          xR = xRCorner + `+b*d+`;
          xC = xCCorner + `+(_=2*R)*h+`;
        `,c===1){if(_<v&&(E+=o%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+r+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+r+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+_+" = vec4(previous.zw, xTexelR"+b+"C"+_+`.xy);
                } else {
                  xR`+b+"C"+_+" = vec4(0, 0, xTexelR"+b+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+r+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+_+` = vec4(0.);
                }

                xR`+b+"C"+_+" = xTexelR"+b+"C"+_+`;
              `,_+1<v)){var T=o%2==0?o5(h):h;h%2==0&&o%2==1||h%2!=0&&o%2!=1?(E+=`
                  xCOffset = xC + `+o%2+" + "+T+`;

                  if(xR >= 0 && xR < `+r+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(E+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+r+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+_+` = vec4(0.);
                    }
                  `),E+=`
                  xR`+b+"C"+(_+1)+` = vec4(
                    xTexelR`+b+"C"+_+".zw, xTexelR"+b+"C"+(_+2)+`.xy);
                `):E+=`
                  xCOffset = xC + `+T+`;

                  if(xR >= 0 && xR < `+r+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(_+1)+" = xTexelR"+b+"C"+(_+2)+`;
                `}}else _<v&&(E+=`
              if(xR >= 0 && xR < `+r+`) {
            `,o%2==1?(E+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(_+2)+` = vec4(0.);
                }

                xR`+b+"C"+_+` = vec4(
                  xTexelR`+b+"C"+_+".zw, xTexelR"+b+"C"+(_+2)+`.zw);
              `,_+1<v&&(E+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(_+1)+" = vec4(xTexelR"+b+"C"+(_+2)+`.xy, final.xy);
                `)):(E+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(_+2)+` = vec4(0.);
                }

                xR`+b+"C"+_+` = vec4(
                  xTexelR`+b+"C"+_+".xy, xTexelR"+b+"C"+(_+2)+`.xy);
              `,_+1<v&&(E+=`
                  xR`+b+"C"+(_+1)+` = vec4(
                    xTexelR`+b+"C"+_+".zw, xTexelR"+b+"C"+(_+2)+`.zw);
                `)),E+="}");_<v&&(E+=`
            vec4 wTexelR`+b+"C"+_+" = getW("+b+", "+_+`, d1, q);
            wR`+b+"C"+_+" = vec4(wTexelR"+b+"C"+_+".xz, wTexelR"+b+"C"+_+`.xz);
          `,_+1<v&&(E+=`
              vec4 wTexelR`+b+"C"+(_+1)+" = getW("+b+", "+(_+1)+`, d1, q);
              wR`+b+"C"+(_+1)+` =
                vec4(wTexelR`+b+"C"+(_+1)+".xz, wTexelR"+b+"C"+(_+1)+".xz);"))}for(b=0;b<m;b++)for(_=0;_<v;_++)E+="dotProd += xR"+b+"C"+_+" * wR"+b+"C"+_+";";var M="",I="";t&&(M=n?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,I="result = activation(result);");var P=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+M+`

      const ivec2 strides = ivec2(`+l+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+o+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+E+`

        vec4 result = dotProd;
        `+P+`
        `+I+`
        setOutput(result);
      }
    `},yW=function(a,e,t,n,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=a[0],s=a[1],o=a[2],l=a[3],c=e[0],d=t[0],h=t[1];this.outputShape=[c,d,h,l];var m=n==="bilinear"?1:0,v=[s-1+".0",o-1+".0"],A=v[0],E=v[1],b=d>1?[""+(s-1)/(d-1),"(y2-y1) * height_ratio","y1*"+A+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+A],_=b[0],R=b[1],T=b[2],M=h>1?[""+(o-1)/(h-1),"(x2-x1) * width_ratio","x1*"+E+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+E],I=M[0],P=M[1],B=M[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+I+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+R+`;
        float width_scale = `+P+`;

        float in_y = `+T+`;
        if( in_y < 0.0 || in_y > `+A+` ) {
          setOutput(float(`+r+`));
          return;
        }
        float in_x = `+B+`;
        if( in_x < 0.0 || in_x > `+E+` ) {
          setOutput(float(`+r+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},xW=function(a,e,t){this.variableNames=["x"],this.outputShape=a;var n=a.length,r=a[a.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+r+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ra(n)+` coords = getOutputCoords();
        int end = `+PN(n,"coords")+`;
        float val = 0.0;
        for (int i = `+r+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+PN(n,"coords")+` = idx;
          val += getX(`+function(s,o){if(s===1)return""+o;if(s===2)return o+".x, "+o+".y";if(s===3)return o+".x, "+o+".y, "+o+".z";if(s===4)return o+".x, "+o+".y, "+o+".z, "+o+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(n,"coords")+`);
        }
        setOutput(val);
      }
    `};function PN(a,e){if(a===1)return""+e;if(a===2)return e+".y";if(a===3)return e+".z";if(a===4)return e+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}var AW=function(a){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Hv.DENSE;var e=Sv(a),t=Ii();this.outputShape=a,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Nh(["r","c","d"],a)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},_W=function(a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Hv.DENSE;var e=Sv(a),t=Ii();this.outputShape=a,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Nh(["r","c","d"],a)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},bW=function(){function a(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return a.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},a.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},a.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},a.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},a.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},a}(),SW=function(a){this.variableNames=["X"],this.outputShape=[a,a],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},EW=function(a){this.variableNames=["A"],this.outTexUsage=$s.DOWNLOAD;var e=Ii();this.outputShape=a,this.userCode=`
      `+H5+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},wW=function(a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=$s.DOWNLOAD;var e=Ii();this.outputShape=a,this.userCode=`
      `+H5+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},RW=function(a,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var n=Ii(),r=e[0],i=e[1];this.outputShape=a;var s="result";t&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+Ow(a)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+r+`.0);
        vec4 values = `+n.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+n.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},MW=function(a,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Ii(),r=e[0],i=e[1];this.outputShape=a;var s="",o="result";t&&(o="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var c=0;c<=1;c++){var d=2*l+c;s+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+a[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+l+" < "+a[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+r+`.0);
              values = `+n.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Ow(a)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+n.output+" = "+o+`;
      }
    `},TW="return real * expR - imag * expI;",NW="return real * expI + imag * expR;",ON=function(a,e,t){this.variableNames=["real","imag"];var n=e[1];this.outputShape=e;var r=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?n+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+r+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+a+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+n+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+n+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},CW=function(){function a(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return a.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){t.valueLoc==null&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},a}(),IW=function(a,e,t){this.variableNames=["A","indices"];var n=a.slice();n[t]=e,this.outputShape=n,this.rank=n.length;var r=Ra(this.rank),i=function(s,o){var l=s.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],h=0;h<s.length;h++)h===o?d.push("int(getIndices("+c[h]+"))"):d.push(""+c[h]);return d.join()}(a,t);this.userCode=`
      void main() {
        `+r+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},DW=function(a,e,t){this.sliceDim=a,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var n=Ra(e.length),r=Ra(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+n+" strides = "+n+"("+this.strides+`);
         void main() {
          `+r+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function LW(a,e){var t=Ii();return NG(a,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function PW(a,e){return PG(a,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function OW(a,e){return OG(a,e,new Uint16Array([0,1,2,2,1,3]))}function h1(a,e,t,n,r,i,s){BG(t,n);var o=UG(a,e),l=a.TEXTURE_2D;return Vt(a,e,function(){return a.bindTexture(l,o)}),Vt(a,e,function(){return a.texParameteri(l,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE)}),Vt(a,e,function(){return a.texParameteri(l,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)}),Vt(a,e,function(){return a.texParameteri(l,a.TEXTURE_MIN_FILTER,a.NEAREST)}),Vt(a,e,function(){return a.texParameteri(l,a.TEXTURE_MAG_FILTER,a.NEAREST)}),Vt(a,e,function(){return a.texImage2D(l,0,r,t,n,0,i,s,null)}),Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,null)}),o}function UW(a,e,t,n,r){var i=a_(t,n);return h1(a,e,i[0],i[1],r.internalFormatFloat,r.textureFormatFloat,a.FLOAT)}function BW(a,e,t,n,r){var i=a_(t,n);return h1(a,e,i[0],i[1],r.internalFormatHalfFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function FW(a,e,t,n,r){var i=a_(t,n);return h1(a,e,i[0],i[1],a.RGBA,a.RGBA,a.UNSIGNED_BYTE)}function kW(a,e,t,n,r){var i=f1(t,n);return h1(a,e,i[0],i[1],r.internalFormatPackedFloat,a.RGBA,a.FLOAT)}function HW(a,e,t,n,r){var i=f1(t,n);return h1(a,e,i[0],i[1],r.internalFormatPackedHalfFloat,a.RGBA,r.textureTypeHalfFloat)}function jW(a,e,t,n){return Vt(a,e,function(){return a.bindBuffer(a.ARRAY_BUFFER,n)}),bN(a,e,t,"clipSpacePos",n,3,20,0)&&bN(a,e,t,"uv",n,2,20,12)}function zW(a,e,t,n,r,i,s){var o,l,c;Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,t)}),i instanceof Uint8Array?(o=new Uint8Array(n*r*4),l=a.UNSIGNED_BYTE,c=a.RGBA):(o=new Float32Array(n*r*4),l=a.FLOAT,c=s.internalFormatPackedFloat),o.set(i),Vt(a,e,function(){return a.texImage2D(a.TEXTURE_2D,0,c,n,r,0,a.RGBA,l,o)}),Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,null)})}function GW(a,e,t,n){Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,t)}),n.data instanceof Uint8Array?Vt(a,e,function(){return a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n.width,n.height,0,a.RGBA,a.UNSIGNED_BYTE,n.data)}):Vt(a,e,function(){return a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n)}),Vt(a,e,function(){return a.bindTexture(a.TEXTURE_2D,null)})}function VW(a,e,t,n,r){var i=a.createBuffer();Vt(a,e,function(){return a.bindBuffer(a.PIXEL_PACK_BUFFER,i)});var s=16*t*n;return Vt(a,e,function(){return a.bufferData(a.PIXEL_PACK_BUFFER,s,a.STREAM_READ)}),Vt(a,e,function(){return a.readPixels(0,0,n,t,a.RGBA,a.FLOAT,0)}),Vt(a,e,function(){return a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}),i}function WW(a,e,t){var n=a,r=new Float32Array(t);return n.bindBuffer(n.PIXEL_PACK_BUFFER,e),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,r),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),r}function KW(a,e,t,n,r){var i=a_(t,n),s=i[0],o=i[1],l=new Uint8Array(t*n*4);return Vt(a,e,function(){return a.readPixels(0,0,s,o,r.downloadTextureFormat,a.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function YW(a,e,t,n,r,i,s,o){var l=a,c=new Float32Array(function(d,h){var m=f1(d,h);return m[0]*m[1]*4}(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function qW(a,e,t,n){var r=new Float32Array(t*n*4);return Vt(a,e,function(){return a.readPixels(0,0,n,t,a.RGBA,a.FLOAT,r)}),r}var XW=function(){function a(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=qe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,EG(t,e)):this.gl=Ic(t);var n="WEBGL_color_buffer_float";if(qe().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=o2(this.gl,this.debug,"OES_texture_float"),Oo(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=o2(this.gl,this.debug,"OES_texture_half_float");else if(qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Oo(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=o2(this.gl,this.debug,"EXT_color_buffer_half_float");else if(qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Oo(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Oo(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=PW(this.gl,this.debug),this.indexBuffer=OW(this.gl,this.debug),this.framebuffer=FG(this.gl,this.debug),this.textureConfig=ww(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(a.prototype,"debug",{get:function(){return qe().getBool("DEBUG")},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Vt(t,this.debug,function(){return t.finish()}),Vt(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Vt(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Vt(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Vt(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Vt(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},a.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),UW(this.gl,this.debug,e,t,this.textureConfig)},a.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),BW(this.gl,this.debug,e,t,this.textureConfig)},a.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),FW(this.gl,this.debug,e,t,this.textureConfig)},a.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),GW(this.gl,this.debug,e,t)},a.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),zW(this.gl,this.debug,e,t,n,r,this.textureConfig)},a.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),HW(this.gl,this.debug,e,t,this.textureConfig)},a.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),kW(this.gl,this.debug,e,t,this.textureConfig)},a.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(SN(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Vt(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},a.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return KW(r.gl,r.debug,t,n,r.textureConfig)})},a.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,s){return YW(this.gl,e,0,0,0,i,s,this.textureConfig)},a.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return WW(this.gl,e,t)},a.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=VW(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},a.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},a.prototype.createFence=function(e){var t,n,r=this;if(qe().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},t=s}else qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},a.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return qW(r.gl,r.debug,t,n)})},a.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=CG(t,this.debug,e),r=LW(t,this.debug),i=DG(t,this.debug);return Vt(t,this.debug,function(){return t.attachShader(i,r)}),Vt(t,this.debug,function(){return t.attachShader(i,n)}),LG(t,this.debug,i),this.debug&&ES(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=jW(t,this.debug,this.program,this.vertexBuffer)),i},a.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Vt(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},a.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&ES(this.gl,this.debug,this.program),Vt(this.gl,this.debug,function(){return t.gl.useProgram(e)})},a.prototype.getUniformLocation=function(e,t,n){return n===void 0&&(n=!0),this.throwIfDisposed(),n?HG(this.gl,this.debug,e,t):jG(this.gl,e,t)},a.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Vt(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},a.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},a.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),zG(this.gl,this.debug,this.program,e,t,n)},a.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},a.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=f1(t,n),i=r[0],s=r[1];this.setOutputMatrixTextureDriver(e,i,s)},a.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},a.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},a.prototype.debugValidate=function(){this.program!=null&&ES(this.gl,this.debug,this.program),l2(this.gl)},a.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Vt(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},a.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Vt(this.gl,this.debug,function(){return e.gl.finish()})},a.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=o2(this.gl,this.debug,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},a.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},a.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},a.prototype.beginQuery=function(){if(qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},a.prototype.endQuery=function(){if(qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},a.prototype.waitForQueryAndGetTime=function(e){return Bt(this,void 0,void 0,function(){var t=this;return Ft(this,function(n){switch(n.label){case 0:return[4,gN(function(){return t.disposed||t.isQueryAvailable(e,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},a.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},a.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},a.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},a.prototype.pollItems=function(){for(var e=function(n){for(var r=0;r<n.length&&n[r]();++r);return r-1}(this.itemsToPoll.map(function(n){return n.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},a.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||gN(function(){return n.pollItems(),n.itemsToPoll.length===0})},a.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),wS(this.gl,this.debug,e,this.framebuffer),this.debug&&l2(this.gl)},a.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(wS(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&l2(this.gl)):SN(this.gl,this.debug,this.framebuffer)},a.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},a.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;wS(r,this.debug,e,this.framebuffer),this.debug&&l2(r),this.outputTexture=e,Vt(r,this.debug,function(){return r.viewport(0,0,t,n)}),Vt(r,this.debug,function(){return r.scissor(0,0,t,n)})},a.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),Vt(this.gl,this.debug,function(){return i.gl.scissor(e,t,n,r)})},a.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},a.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},a}();function UN(a,e){if(a.length!==e.length)throw Error("Binary was compiled with "+a.length+" inputs, but was executed with "+e.length+" inputs");a.forEach(function(t,n){var r=t.logicalShape,i=e[n],s=i.shape;if(!Zr(r,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+s+" must match");if(!t.isUniform||!i.isUniform){var o=t.texShape,l=i.isUniform?null:i.texData.texShape;if(!Zr(o,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+l+" must match")}})}var JW=function(a,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;for(var n=t.filterWidth,r=t.inChannels,i=t.strideWidth,s=t.strideHeight,o=t.padInfo,l=t.outWidth,c=t.dilationWidth,d=t.dilationHeight,h=t.dataFormat,m=o.left,v=o.top,A=r*n,E=Ii(),b=h==="channelsLast",_=b?0:1,R=b?1:2,T="",M=0;M<=1;M++)for(var I=0;I<=1;I++)T+=`
          blockIndex = rc.y + `+I+`;
          pos = rc.x + `+M+`;

          if(blockIndex < `+a[1]+" && pos < "+a[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+s+" - "+v+`;
            d0 = offsetY + `+d+" * (pos / "+A+`);

            if(d0 < `+e[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+A+".) / "+r+`.));

              if(d1 < `+e[R]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+r+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*M+I)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*M+I)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+T+`

        `+E.output+` = result;
      }
    `},ZW=function(a,e,t,n,r){this.variableNames=["x"],this.outputShape=[];var i,s=e,o=a[3]-1;this.outputShape=a;var l="float("+t+") + float("+n+") * sum";i=r===.5?"inversesqrt("+l+")":r===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+r+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+o+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},QW=function(a,e,t,n,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=a,this.depth=a[3],this.depthRadius=e,this.bias=t,this.alpha=n,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+n+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+n+`)
                * float(`+r+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+r+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},$W=function(a,e,t,n,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=e,o=a[3]-1;this.outputShape=a;var l="float("+t+") + float("+n+") * sum";i=r===.5?"inversesqrt("+l+")":r===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+r+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+o+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},eK=function(a){this.variableNames=["dy","maxPos"],this.outputShape=a.inShape;var e=a.strideHeight,t=a.strideWidth,n=a.dilationHeight,r=a.effectiveFilterHeight,i=a.effectiveFilterWidth,s=r-1-a.padInfo.top,o=i-1-a.padInfo.left,l=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+r+`;
          wR += `+n+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},tK=function(a){this.variableNames=["dy","maxPos"],this.outputShape=a.inShape;var e=a.strideDepth,t=a.strideHeight,n=a.strideWidth,r=a.dilationDepth,i=a.dilationHeight,s=a.dilationWidth,o=a.effectiveFilterDepth,l=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=o-1-a.padInfo.front,h=l-1-a.padInfo.top,m=c-1-a.padInfo.left,v=o*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+h+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+o+`;
           wD += `+r+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+a.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+a.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+n+`.0;

              if (dyC < 0.0 || dyC >= `+a.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+v+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},CS=function(a,e,t,n,r,i,s){t===void 0&&(t=!1),n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var o=t?a[1]:a[2],l=Math.ceil(o/2),c=t?"i * 2, rc.y":"rc.y, i * 2",d=n?"rc.z, i * 2":"i * 2, rc.z",h=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=n?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",A="";i&&(v=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,A="result = activation(result);");var E=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+m[0]+`);
          result += (`+h[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+E+`

        `+A+`

        setOutput(result);
      }
    `},nK=function(){function a(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return a.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){t.seedLoc==null&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},a}(),aK=function(a,e,t,n){this.variableNames=["indices"],this.outputShape=[a,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+n+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},rK=function(a){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=a;var e=a.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=Rs("rc",e),n=Ra(e),r=function(o,l,c){if(o===1)return"rc > "+l[0];for(var d="",h=o-2;h<o;h++)d+=c[h]+" >= "+l[h],h<o-1&&(d+="||");return d}(e,a,t),i=function(o,l,c,d){if(o===1)return"";var h=d.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+c+`;
  `}(e,a[a.length-1],a[a.length-2],t),s=function(o,l){var c=o.length,d=function(h,m){for(var v=[],A=0;A<=1;A++)for(var E=0;E<=1;E++){for(var b=(A===0?"r":"rp1")+", "+(E===0?"c":"cp1"),_=2;_<h;_++)b=m[m.length-1-_]+","+b;v.push(b)}return v}(c,l);return c===1?`getA(rc),
            rc + 1 >= `+o[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(a,t);this.userCode=`
        void main() {
          `+n+` rc = getOutputCoords();

          if(`+r+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},iK=function(a,e,t){this.variableNames=["x"],this.outputShape=e.map(function(l,c){return l[0]+a[c]+l[1]});var n=a.length,r=Ra(n),i=e.map(function(l){return l[0]}).join(","),s=e.map(function(l,c){return l[0]+a[c]}).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n);this.userCode=n!==1?`
      `+r+" start = "+r+"("+i+`);
      `+r+" end = "+r+"("+s+`);

      void main() {
        `+r+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+r+` coords = outC - start;
          setOutput(getX(`+o+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},sK=function(a,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(b,_){return b[0]+a[_]+b[1]});for(var n=a.length,r=Ra(n),i=e.map(function(b){return b[0]}).join(","),s=e.map(function(b,_){return b[0]+a[_]}).join(","),o=Rs("rc",n),l=Rs("source",n),c=o[n-1]+" < "+this.outputShape[n-1],d=n===1?"source":"vec2("+l.slice(-2).join()+")",h=[r+" rc = outputLoc;",o[n-1]+` += 1;
       if(`+c+`) {
      `,n===1?"":`}
       rc = outputLoc;
       `+o[n-2]+` += 1;
       if(`+o[n-2]+" < "+this.outputShape[n-2]+") {",n===1?"":"  "+o[n-1]+` += 1;
         if(`+c+") {"],m=n===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="",A=0,E=n===1?2:4;A<E;A++)v+=`
        `+h[A]+`
        if (`+m+`) {
          result[`+A+"] = float("+t+`);
        } else {
          `+r+` source = rc - start;
          result[`+A+"] = getChannel(getX("+l.join()+"), "+d+`);
        }
      `;v+=n===1?"} ":"}}",this.userCode=`
      const `+r+" start = "+r+"("+i+`);
      const `+r+" end = "+r+"("+s+`);

      void main() {
        `+r+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+v+`
        setOutput(result);
      }
    `},IS=function(a,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var n=a.filterWidth,r=a.strideHeight,i=a.strideWidth,s=a.dilationHeight,o=a.dilationWidth,l=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left;this.outputShape=a.outShape;var m=e==="avg",v="0.0";if(m||(v="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+r+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+a.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+o+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+a.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var A=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(A="avgValue / count");var E=4*Math.floor(n/4),b=n%4,_=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+r+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+h+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+a.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+a.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+E+`; wC += 4) {
            int xC = xCCorner + wC * `+o+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+o+`, d),
              getValue(batch, xR, xC + 2 * `+o+`, d),
              getValue(batch, xR, xC + 3 * `+o+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+E+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+o+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+o+`, d),
              getValue(batch, xR, xC + 2 * `+o+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+A+`);
      }
    `}},DS=function(a,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var n=a.filterWidth,r=a.strideDepth,i=a.strideHeight,s=a.strideWidth,o=a.dilationDepth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,m=a.effectiveFilterWidth,v=a.padInfo.front,A=a.padInfo.top,E=a.padInfo.left;this.outputShape=a.outShape;var b=e==="avg",_="0.0";if(b||(_="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+r+", "+i+", "+s+`);
        const ivec3 pads = ivec3(`+v+", "+A+", "+E+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+o+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+a.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+l+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+a.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+a.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var R=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(R="avgValue / count");var T=4*Math.floor(n/4),M=n%4,I=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+r+", "+i+", "+s+`);
      const ivec3 pads = ivec3(`+v+", "+A+", "+E+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+a.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+o+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+a.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+a.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+T+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+I+`
            }

            int xC = xCCorner + `+T+`;
            if (`+(M===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+I+`
            } else if (`+(M===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+I+`
            } else if (`+(M===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+I+`
            }
          }
          setOutput(`+R+`);
        }
      }
    `}},oK=function(a,e){this.variableNames=["x"];var t=a.windowSize,n=a.batchSize,r=a.inSize,i=Math.ceil(r/t);this.outputShape=[n,i];var s="0.0",o="";e==="prod"?s="1.0":e==="min"?(s="1.0 / 1e-20",o="min"):e==="max"&&(s="-1.0 / 1e-20",o="max");var l=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?l="sumValue":e==="prod"?l="prodValue":e==="all"?l="allValue":e==="any"&&(l="anyValue");var c=4*Math.floor(t/4),d=t%4,h=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+o+`(values, minMaxValue);
      }
    `,m="vec4";e==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):e==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var v="";r%t>0&&(v=`
        if (inIdx < 0 || inIdx >= `+r+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+v+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(d===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(d===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(d===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+l+`);
      }
    `},lK=function(a,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;for(var t="",n=0;n<4;n++){var r="thisRC = rc;";n%2==1&&(r+="thisRC.z += 1;"),n>1&&(r+="thisRC.y += 1;"),t+=`
        `+r+`
        `+(n>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+n+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(n>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Nh(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+Ow(a)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+a[1]+`;
        int cols = `+a[2]+`;

        `+t+`

        setOutput(result);
      }
    `},cK=function(a,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var n=e.shape,r=n[1],i=n[2],s=a.shape,o=s[1],l=s[2],c=[t&&o>1?r-1:r,t&&l>1?i-1:i],d=[t&&o>1?o-1:o,t&&l>1?l-1:l],h=c[0]/d[0],m=c[1]/d[1],v=1/h,A=1/m,E=2*Math.ceil(v)+2,b=2*Math.ceil(A)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+v+`);
        const float invWidthScale = float(`+A+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+o+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(r-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},uK=function(a,e,t,n){this.variableNames=["A"],this.outputShape=[];var r=a[0],i=a[1],s=a[2],o=a[3];this.outputShape=[r,e,t,o];var l=[n&&e>1?i-1:i,n&&t>1?s-1:s],c=[n&&e>1?e-1:e,n&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},dK=function(a,e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var r=a[0],i=a[1],s=a[2],o=a[3];this.outputShape=[r,e,t,o];var l=[n&&e>1?i-1:i,n&&t>1?s-1:s],c=[n&&e>1?e-1:e,n&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`,
          `+l[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(o-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},fK=function(a,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var n=e.shape,r=n[1],i=n[2],s=a.shape,o=s[1],l=s[2],c=[t&&o>1?r-1:r,t&&l>1?i-1:i],d=[t&&o>1?o-1:o,t&&l>1?l-1:l],h=c[0]/d[0],m=c[1]/d[1],v=1/h,A=1/m,E=2*Math.ceil(v)+2,b=2*Math.ceil(A)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+v+`);
        const float invWidthScale = float(`+A+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+o+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+r+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},hK=function(a,e,t,n){this.variableNames=["A"],this.outputShape=[];var r=a[0],i=a[1],s=a[2],o=a[3];this.outputShape=[r,e,t,o];var l=[n&&e>1?i-1:i,n&&t>1?s-1:s],c=[n&&e>1?e-1:e,n&&t>1?t-1:t],d=n?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},pK=function(a,e){this.variableNames=["x"];var t=a.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=a,t!==1){var n=a.map(function(i,s){return function(o){return e.indexOf(o)!==-1&&a[o]!==1?a[o]+" - coords["+o+"] - 1":"coords["+o+"]"}(s)}).join(","),r=Ra(t);this.userCode=`
      void main() {
        `+r+` coords = getOutputCoords();
        setOutput(getX(`+n+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+a[0]+` - coord - 1));
        }
      `},mK=function(a,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=a.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=a;var n=Rs("rc",t),r=n[t-1]+" + 1 < "+this.outputShape[t-1],i=n[t-2]+" + 1 < "+this.outputShape[t-2],s=Ra(t);function o(l){var c=a.map(function(d,h){return function(m,v){return e.indexOf(m)!==-1&&a[m]!==1?a[m]+" - "+v[m]+" - 1":""+v[m]}(h,l)});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+a[0]+` - rc - 1),
            `+a[0]+` - rc - 1);
          if(`+r+`){
              result.g = getChannel(getX(`+a[0]+` - (rc  + 1) - 1),
                `+a[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return o(l)}(n.slice())+`;
          if(`+r+`){
            result.g = `+function(l){return l[t-1]="("+l[t-1]+" + 1)",o(l)}(n.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(l){return l[t-2]="("+l[t-2]+" + 1)",o(l)}(n.slice())+`;
            if(`+r+`) {
              result.a = `+function(l){return l[t-1]="("+l[t-1]+" + 1)",l[t-2]="("+l[t-2]+" + 1)",o(l)}(n.slice())+`;
            }
          }
          setOutput(result);
        }
    `},BN=function(a,e,t,n,r,i,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var o=Ra(r.length),l=Ra(i.length),c="";t===1?c="i":t===2&&(c="i, j");var d="getIndices("+c+")",h="";n===1?h="i":n===2&&(h="i, coords[1]");var m="getUpdates("+h+")",v=e>1?"strides[j]":"strides";this.userCode=`
        `+o+" strides = "+o+"("+r+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+a+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+v+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},gK=function(a,e){this.variableNames=["x","segmentIds"];var t=a.windowSize,n=a.batchSize,r=a.inSize,i=a.numSegments,s=i*Math.ceil(r/t);this.outputShape=[n,s];var o=4*Math.floor(t/4),l=t%4,c=`
        sumValue += dot(values, segFilter);
    `,d="";r%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+r+`) {
          return initializationValue;
        }
      `);var h="";r%t>0&&(h=`
        if (inIdx < 0 || inIdx >= `+r+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+o+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+o+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},vK=function(a,e,t){var n,r;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)r="resRC",n="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],o=[],l=0;l<e.length;l++)o.push(""+i[l]),l<a&&s.push(""+i[l]);n=s.join(),r=o.join()}var c=Ra(t);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+n+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+r+`));
        } else {
          setOutput(getB(`+r+`));
        }
      }
    `},yK=function(){function a(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Ra(this.rank),r="uniform int start["+this.rank+"];",i=function(s){if(s===1)return"sourceLoc";if(s<=6)return LS.slice(0,s).map(function(o){return"sourceLoc."+o}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);t=`
        `+n+` sourceLoc;
        `+n+` coords = getOutputCoords();
        `+e.map(function(s,o){return"sourceLoc."+LS[o]+" = start["+o+"] + coords."+LS[o]+";"}).join(`
`)+`
      `,this.userCode=`
      `+r+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return a.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){t.startLoc==null&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),t.startLoc==null)||n.gl.uniform1iv(t.startLoc,e)}},a}(),LS=["x","y","z","w","u","v"],xK=function(){function a(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Ra(this.rank),n=Rs("coords",this.rank),r=Rs("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+r.slice(-2).join()+")",s="getChannel(getSource("+r.join()+"), "+i+")",o=`
      result.x = `+s+`;
      if (++`+n[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+r[this.rank-1]+`;
        result.y = `+s+`;
        --`+r[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+n[this.rank-1]+`;
      if (++`+n[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+r[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+n[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+r[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(d,h){return"start["+h+"]"}).join()+");":e.map(function(d,h){return r[h]+" = "+n[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+o+`
        `+l+`
        setOutput(result);
      }
    `}return a.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){t.startLoc==null&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),t.startLoc==null)||n.gl.uniform1iv(t.startLoc,e)}},a}(),AK=function(a,e,t){this.variableNames=["x"],this.outputShape=t;var n=t.length,r=Ra(t.length),i=Ra(t.length),s="";if(n===1)s="coords * strides + begin";else{var o=0;s=t.map(function(l,c){return o++,t.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(o-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode=`
      `+r+" begin = "+r+"("+a+`);
      `+r+" strides = "+r+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},_K=function(){function a(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return a.prototype.acquireTexture=function(e,t,n){var r,i=FN(t,n),s=kN(e,i,n);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[s].shift();return this.usedTextures[s].push(o),o}return this.numUsedTextures++,this.log(),i===Qs.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Qs.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Qs.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Qs.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Qs.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(r),r},a.prototype.releaseTexture=function(e,t,n,r){if(this.freeTextures!=null){var i=kN(t,FN(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[i],o=s.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(o,1),this.log()}},a.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},a.prototype.getNumUsedTextures=function(){return this.numUsedTextures},a.prototype.getNumFreeTextures=function(){return this.numFreeTextures},a.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(n){e.gpgpu.deleteMatrixTexture(n)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},a}();function FN(a,e){if(a===$s.UPLOAD)return Qs.PACKED_2X2_FLOAT32;if(a===$s.RENDER||a==null)return function(t){return qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Qs.PACKED_2X2_FLOAT32:Qs.UNPACKED_FLOAT32:t?Qs.PACKED_2X2_FLOAT16:Qs.UNPACKED_FLOAT16}(e);if(a===$s.DOWNLOAD||a===$s.PIXELS)return Qs.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+a)}function kN(a,e,t){return a[0]+"_"+a[1]+"_"+e+"_"+t}var bK=function(a,e){this.variableNames=["A"];for(var t=new Array(a.length),n=0;n<t.length;n++)t[n]=a[n]*e[n];this.outputShape=t,this.rank=t.length;var r=Ra(this.rank),i=function(s){var o=s.length;if(o>5)throw Error("Tile for rank "+o+" is not yet supported");if(o===1)return"imod(resRC, "+s[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],d=0;d<s.length;d++)c.push("imod("+l[d]+", "+s[d]+")");return c.join()}(a);this.userCode=`
      void main() {
        `+r+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},SK=function(a,e){this.variableNames=["A"];for(var t=new Array(a.length),n=0;n<t.length;n++)t[n]=a[e[n]];this.outputShape=t,this.rank=t.length;var r=Ra(this.rank),i=function(s){var o=s.length;if(o>6)throw Error("Transpose for rank "+o+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(o),d=0;d<s.length;d++)c[s[d]]=l[d];return c.join()}(e);this.userCode=`
    void main() {
      `+r+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},EK=function(a,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(a.length),n=0;n<t.length;n++)t[n]=a[e[n]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var r=Ra(this.rank),i=k5("rc",this.rank),s=new Array(this.rank);for(n=0;n<e.length;n++)s[e[n]]=i[n];var o="vec2("+s.slice(-2).join()+")",l="++"+i[this.rank-1]+" < "+t[this.rank-1],c="getChannel(getA("+s.join()+"), "+o+")";this.userCode=`
    void main() {
      `+r+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+l+`) {
        result[1] = `+c+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+l+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},Uw=1.7580993408473768,Bw=1.0507009873554805,Nn=function(a,e){this.variableNames=["A"],this.outputShape=a,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ml="if (isnan(x)) return x;",wK="return x;",HN="return abs(x);",V5=Ml+`
  return (x < 0.0) ? 0.0 : x;
`,W5=Ml+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,K5="return (x >= 0.0) ? x : (exp(x) - 1.0);",RK=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Uw+`;
  float scale = `+Bw+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,jN="return -x;",zN="return ceil(x);",GN="return floor(x);",VN="return exp(x);",WN="return exp(x) - 1.0;",MK=Ml+`
  return sin(x);
`,TK=Ml+`
  return cos(x);
`,NK=Ml+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,CK=Ml+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,IK=Ml+`
  return atan(x);
`,DK=Ml+"return log(x + sqrt(x * x + 1.0));",LK=Ml+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,PK=Ml+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,f2="return x;",OK="return x;",Y5=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,q5=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X5=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,rv=function(a,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},UK=function(a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=a;var e=a.length,t=Rs("rc",e),n=Ra(e),r=function(o,l){if(o===1)return"rc";for(var c="",d=0;d<o;d++)c+=l[d],d<o-1&&(c+=",");return c}(e,t),i=t.slice(-2),s=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+n+` rc = getOutputCoords();
        vec4 packedInput = getA(`+r+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},h2={};function p2(a,e){if(e===void 0&&(e=!1),a==="linear")return e?OK:wK;if(a==="relu")return e?Y5:V5;if(a==="elu")return e?X5:K5;if(a==="relu6")return e?q5:W5;if(a==="prelu")return e?G5:z5;throw new Error("Activation "+a+" has not been implemented for the WebGL backend.")}var BK=600,FK=function(a){function e(t){var n,r=a.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=Ic(qe().getNumber("WEBGL_VERSION"));r.binaryCache=((n=qe().getNumber("WEBGL_VERSION"))in h2||(h2[n]={}),h2[n]),r.gpgpu=new XW(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new _K(r.gpgpu),r.numMBBeforeWarning=qe().global.screen==null?1024:qe().global.screen.height*qe().global.screen.width*window.devicePixelRatio*BK/1024/1024,r.texData=new C5(r,Ae),r}return Rl(e,a),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,n,r){if(qe().getBool("DEBUG")&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:n,dtype:r,values:t,usage:$s.UPLOAD}),i},e.prototype.move=function(t,n,r,i){if(qe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:i,values:n,usage:$s.UPLOAD})},e.prototype.readSync=function(t){var n=this.texData.get(t),r=n.values,i=n.dtype,s=n.complexTensors,o=n.slice,l=n.shape,c=n.isPacked;if(o!=null){var d=void 0;d=c?new rv(l,f2):new Nn(l,f2);var h=this.runWebGLProgram(d,[{dataId:t,shape:l,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeData(h.dataId),m}if(r!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return r;var v,A,E=this.activeTimers!=null;return E&&(v=gc()),i==="complex64"?A=T3(s.real.dataSync(),s.imag.dataSync()):A=this.getValuesFromTexture(t),E&&(this.downloadWaitMs+=gc()-v),this.convertAndCacheOnCPU(t,A)},e.prototype.read=function(t){return Bt(this,void 0,void 0,function(){var n,r,i,s,o,l,c,d,h,m,v,A,E,b,_,R,T,M,I,P,B,F;return Ft(this,function(L){switch(L.label){case 0:if(this.pendingRead.has(t))return n=this.pendingRead.get(t),[2,new Promise(function(U){return n.push(U)})];if(r=this.texData.get(t),i=r.values,s=r.shape,o=r.slice,l=r.dtype,c=r.complexTensors,d=r.isPacked,o!=null)return h=void 0,h=d?new rv(s,f2):new Nn(s,f2),m=this.runWebGLProgram(h,[{dataId:t,shape:s,dtype:l}],l),v=this.read(m.dataId),this.disposeData(m.dataId),[2,v];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&qe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return A=null,l!=="complex64"&&qe().get("WEBGL_BUFFER_SUPPORTED")&&(E=this.decode(t),b=this.texData.get(E.dataId),A=(F=this.gpgpu).createBufferFromTexture.apply(F,[b.texture].concat(Sv(s)))),this.pendingRead.set(t,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:L.sent(),L.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return R=L.sent(),T=R[0],M=R[1],_=T3(T,M),[3,5];case 4:A==null?_=this.getValuesFromTexture(t):(I=Gt(s),_=this.gpgpu.downloadFloat32MatrixFromBuffer(A,I)),L.label=5;case 5:return E!=null&&this.disposeData(E.dataId),P=this.convertAndCacheOnCPU(t,_),B=this.pendingRead.get(t),this.pendingRead.delete(t),B.forEach(function(U){return U(P)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,P]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var n=0;n<t.length;n++){var r=t[n];if(!MG(r))throw qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+r+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+r+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var n,r=this.texData.get(t),i=r.shape,s=r.dtype,o=r.isPacked,l=Gt(i);if(qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(t),d=this.texData.get(c.dataId),h=(n=this.gpgpu).downloadMatrixFromPackedTexture.apply(n,[d.texture].concat(Sv(i))).subarray(0,l);return this.disposeData(c.dataId),h}var m=qe().getBool("WEBGL_PACK")&&o===!0,v=m?RS(i):i,A=m?new wW(v):new EW(v),E=this.runWebGLProgram(A,[{shape:v,dtype:s,dataId:t}],"float32"),b=this.texData.get(E.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,l);return this.disposeData(E.dataId),_},e.prototype.time=function(t){return Bt(this,void 0,void 0,function(){var n,r,i,s,o,l,c;return Ft(this,function(d){switch(d.label){case 0:return n=this.activeTimers,r=[],i=!1,this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t(),s=r0(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),o=r0(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=n,i&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=d.sent(),l.kernelMs=oG(c),l.getExtraProfileInfo=function(){return c.map(function(h,m){return{name:o[m],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:gc(),endMs:null}},e.prototype.endTimer=function(t){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=gc(),t)},e.prototype.getQueryTime=function(t){return Bt(this,void 0,void 0,function(){var n;return Ft(this,function(r){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(n=t).endMs-n.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var n=this.texData.get(t).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var n=this.texData.get(t),r=n.texture,i=n.dtype,s=n.texShape,o=n.usage,l=n.isPacked,c=n.slice,d=c&&c.origDataId||t,h=this.dataRefCount.get(d);h>1?this.dataRefCount.set(d,h-1):(this.dataRefCount.delete(d),r!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(r,s,o,l)));var m=this.texData.get(t);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return qe().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Ae.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,n){var r=this;return n===void 0&&(n=128),this.getCPUBackend()!=null&&t.every(function(i){return r.texData.get(i.dataId).texture==null&&i.size<n})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,n){var r=this.makeOutput(t.shape,"complex64");return this.texData.get(r.dataId).complexTensors={real:Ae.keep(t.clone()),imag:Ae.keep(n.clone())},r},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,n,r);if(Gt(r)===0)return fi([],r,t.dtype);var i=this.texData.get(t.dataId).isPacked,s=T5(t.shape,n,r);if(i||!s){var o=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xK(r):new yK(r),l=o.getCustomSetupFunc(n);return this.compileAndRun(o,[t],null,l)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,n,r)},e.prototype.shallowSlice=function(t,n,r){var i=this.texData.get(t.dataId),s=this.makeOutput(r,t.dtype),o=this.texData.get(s.dataId);Object.assign(o,i),o.shape=r,o.dtype=t.dtype;var l=N5(n,t.strides);i.slice&&(l+=i.slice.flatOffset),o.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||t.dataId};var c=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,c+1),s},e.prototype.stridedSlice=function(t,n,r,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,n,r,i);var s=Cw(n,r,i);if(s.some(function(l){return l===0}))return fi([],s);var o=new AK(n,i,s);return this.compileAndRun(o,[t])},e.prototype.reverse=function(t,n){var r=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mK(t.shape,n):new pK(t.shape,n);return this.compileAndRun(r,[t])},e.prototype.concat=function(t,n){if(t[0].dtype==="complex64"){var r=t.map(function(v){return Po(v)}),i=t.map(function(v){return yc(v)});return ui(this.concat(r,n),this.concat(i,n))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,n);if(t.length===1)return t[0];if(t.length>qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(t.length/2),o=this.concat(t.slice(0,s),n),l=this.concat(t.slice(s),n);return this.concat([o,l],n)}if(qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var c=new uW(t.map(function(v){return v.shape}),n);return this.compileAndRun(c,t)}var d=s0(t.map(function(v){return v.shape}),n),h=t.map(function(v){return v.as2D(-1,Gt(v.shape.slice(n)))}),m=new cW(h.map(function(v){return v.shape}));return this.compileAndRun(m,h).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,jN,t.dtype);var n=new Nn(t.shape,jN);return this.compileAndRun(n,[t])},e.prototype.batchMatMul=function(t,n,r,i){var s=r?t.shape[2]:t.shape[1],o=i?n.shape[1]:n.shape[2],l=r?t.shape[1]:t.shape[2],c=t.shape[0];if((s===1||o===1)&&l>1e3){r&&(t=t.transpose([0,2,1])),i&&(n=n.transpose([0,2,1]));var d=o===1?t:t.as3D(c,l,1),h=o===1?2:1,m=o===1?n.as3D(c,1,l):n;return this.multiply(d,m).sum(h,!0)}var v=di(t.dtype,n.dtype),A=new CS(t.shape,[c,s,o],r,i);return this.compileAndRun(A,[t,n],v)},e.prototype.fusedBatchMatMul=function(t){var n=t.a,r=t.b,i=t.transposeA,s=t.transposeB,o=t.bias,l=t.activation,c=t.preluActivationWeights,d=i?n.shape[2]:n.shape[1],h=s?r.shape[1]:r.shape[2],m=n.shape[0],v=di(n.dtype,r.dtype),A=o!=null,E=c!=null,b=l?p2(l,!0):null,_=new CS(n.shape,[m,d,h],i,s,A,b,E),R=[n,r];return o&&R.push(o),c&&R.push(c),this.compileAndRun(_,R,v)},e.prototype.multiply=function(t,n){if(t.dtype==="complex64"){var r=this.texData.get(t.dataId),i=this.texData.get(n.dataId),s=new NN(rW,t.shape,n.shape),o=new NN(iW,t.shape,n.shape),l=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag),this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],c=this.compileAndRun(s,l),d=this.compileAndRun(o,l),h=this.complex(c,d);return c.dispose(),d.dispose(),h}if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.multiply(t,n);if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,CN,t.dtype);var m=new $a(CN,t.shape,n.shape);return this.compileAndRun(m,[t,n],t.dtype)},e.prototype.batchNormalization=function(t,n,r,i,s,o){var l=[t,n,r],c=null;o!=null&&(c=o.shape,l.push(o));var d=null;if(s!=null&&(d=s.shape,l.push(s)),qe().getBool("WEBGL_PACK_NORMALIZATION")){var h=new aW(t.shape,n.shape,r.shape,c,d,i);return this.compileAndRun(h,l)}var m=new nW(t.shape,n.shape,r.shape,c,d,i);return this.compileAndRun(m,l)},e.prototype.localResponseNormalization4D=function(t,n,r,i,s){var o=qe().getBool("WEBGL_PACK_NORMALIZATION")?new $W(t.shape,n,r,i,s):new ZW(t.shape,n,r,i,s);return this.compileAndRun(o,[t])},e.prototype.LRNGrad=function(t,n,r,i,s,o,l){var c=new QW(n.shape,i,s,o,l);return this.compileAndRun(c,[n,r,t])},e.prototype.tile=function(t,n){if(t.dtype==="string"){var r=this.readSync(t.dataId).map(function(s){return Ux(s)});return B5(xn(t.shape,t.dtype,r),n)}var i=new bK(t.shape,n);return this.compileAndRun(i,[t])},e.prototype.pad=function(t,n,r){var i=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sK(t.shape,n,r):new iK(t.shape,n,r);return this.compileAndRun(i,[t])},e.prototype.transpose=function(t,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,n);var r=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EK(t.shape,n):new SK(t.shape,n);return this.compileAndRun(r,[t])},e.prototype.gather=function(t,n,r){if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.gather(t,n,r);var i=new IW(t.shape,n.size,r);return this.compileAndRun(i,[t,n])},e.prototype.batchToSpaceND=function(t,n,r){oe(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(h,m){return h*m}),s=zx(t.shape,n,i),o=Gx(s.length,n.length),l=Vx(t.shape,n,i),c=E5(r,n.length),d=w5(l,r,n.length);return t.reshape(s).transpose(o).reshape(l).slice(c,d)},e.prototype.spaceToBatchND=function(t,n,r){oe(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(m,v){return m*v}),s=[[0,0]];s.push.apply(s,r);for(var o=1+n.length;o<t.shape.length;++o)s.push([0,0]);var l=t.pad(s),c=zx(l.shape,n,i,!1),d=Gx(c.length,n.length,!1),h=Vx(l.shape,n,i,!1);return l.reshape(c).transpose(d).reshape(h)},e.prototype.reduce=function(t,n,r){var i=t.shape[0],s=t.shape[1],o=MS(s),l=new oK({windowSize:o,inSize:s,batchSize:i},n),c=this.compileAndRun(l,[t],r);return c.shape[1]===1?c:this.reduce(c,n,r)},e.prototype.argReduce=function(t,n,r){r===void 0&&(r=null);var i=t.shape[0],s=t.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);var o=MS(s),l=new YV({windowSize:o,inSize:s,batchSize:i},n,r==null),c=[t];r!=null&&c.push(r);var d=this.compileAndRun(l,c,"int32");return d.shape[1]===1?d:this.argReduce(t,n,d)},e.prototype.argReducePacked=function(t,n,r){r===void 0&&(r=null);var i=r!=null?r.shape:t.shape,s=MS(i[i.length-1]),o=new $V(i,s,n,r==null),l=r==null?[t]:[t,r],c=this.compileAndRun(o,l,"int32");return c.rank===t.rank?this.argReducePacked(t,n,c):c},e.prototype.sum=function(t,n){Zs("sum",n,t.rank);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s),l=xS(t.dtype);return this.reduce(o,"sum",l).reshape(i)},e.prototype.prod=function(t,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,n);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s),l=xS(t.dtype);return this.reduce(o,"prod",l).reshape(i)},e.prototype.unsortedSegmentSum=function(t,n,r){var i=0,s=Dc([i],t.rank),o=t;s!=null&&(o=t.transpose(s),i=Lc(1,t.rank)[0]);var l=function(v,A,E){for(var b=[],_=v.length,R=0;R<_;R++)R!==A?b.push(v[R]):b.push(E);return b}(o.shape,i,r),c=Gt([o.shape[i]]),d=o.as2D(-1,c),h=xS(t.dtype),m=this.segOpCompute(d,"unsortedSegmentSum",n,h,r).reshape(l);return s!=null&&(m=m.transpose(Rw(s))),m},e.prototype.segOpCompute=function(t,n,r,i,s){var o=t.shape[0],l=t.shape[1],c=function(m,v){var A,E=!1;for(m<=M5?(A=m,E=!0):A=x3(m,Math.floor(Math.sqrt(m)));!E;)A>v||A===m?E=!0:A=x3(m,A+1);return A}(l,s),d=new gK({windowSize:c,inSize:l,batchSize:o,numSegments:s}),h=this.compileAndRun(d,[t,r],i);return h.shape[1]===s?h:(r=jx(0,s).tile([l/c]),this.segOpCompute(h,n,r,i,s))},e.prototype.argMinMaxReduce=function(t,n,r){var i=[n];if(Zs("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.rank),!qe().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var s=Ti(t.shape,i),o=s[0],l=Gt(s[1]),c=t.as2D(-1,l);return this.argReduce(c,r).reshape(o)}return this.argReducePacked(t,r)},e.prototype.argMin=function(t,n){return this.argMinMaxReduce(t,n,"min")},e.prototype.argMax=function(t,n){return this.argMinMaxReduce(t,n,"max")},e.prototype.cumsum=function(t,n,r,i){if(n!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+n);var s=new xW(t.shape,r,i);return this.compileAndRun(s,[t])},e.prototype.equal=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(equal(a, b));
`,"bool");var r=new $a("return float(a == b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.notEqual=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(notEqual(a, b));
`,"bool");var r=new $a("return float(a != b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.less=function(t,n){if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.less(t,n);if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(lessThan(a, b));
`,"bool");var r=new $a("return float(a < b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.lessEqual=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(lessThanEqual(a, b));
`,"bool");var r=new $a("return float(a <= b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.greater=function(t,n){if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.greater(t,n);if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(greaterThan(a, b));
`,"bool");var r=new $a("return float(a > b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.greaterEqual=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var r=new $a("return float(a >= b);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.logicalNot=function(t){var n=new Nn(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(n,[t])},e.prototype.logicalAnd=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var r=new $a("return float(a >= 1.0 && b >= 1.0);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.logicalOr=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var r=new $a("return float(a >= 1.0 || b >= 1.0);",t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")},e.prototype.select=function(t,n,r){var i=new vK(t.rank,n.shape,n.rank);return this.compileAndRun(i,[t,n,r],di(n.dtype,r.dtype))},e.prototype.where=function(t){kx("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=t.dataSync();return Pw(t.shape,n)},e.prototype.topk=function(t,n,r){return F5(t.dataSync(),t.shape,t.dtype,n)},e.prototype.min=function(t,n){Zs("min",n,t.rank);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s);return this.reduce(o,"min",o.dtype).reshape(i)},e.prototype.minimum=function(t,n){if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.minimum(t,n);var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,n.shape):new $a(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.mod=function(t,n){var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,n.shape):new $a(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.max=function(t,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,n);Zs("max",n,t.rank);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s);return this.reduce(o,"max",o.dtype).reshape(i)},e.prototype.maximum=function(t,n){if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.maximum(t,n);var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,n.shape):new $a(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.all=function(t,n){Zs("all",n,t.rank);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s);return this.reduce(o,"all",o.dtype).reshape(i)},e.prototype.any=function(t,n){Zs("any",n,t.rank);var r=Ti(t.shape,n),i=r[0],s=Gt(r[1]),o=t.as2D(-1,s);return this.reduce(o,"any",o.dtype).reshape(i)},e.prototype.realDivide=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var r=new $a(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,n.shape);return this.compileAndRun(r,[t,n],"float32")},e.prototype.floorDiv=function(t,n){if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var r=new $a(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,n.shape);return this.compileAndRun(r,[t,n],"int32")},e.prototype.add=function(t,n){if(t.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(t,n,TS);if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.add(t,n);var r=di(t.dtype,n.dtype);if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,TS,r);var i=new $a(TS,t.shape,n.shape);return this.compileAndRun(i,[t,n],r)},e.prototype.packedUnaryOp=function(t,n,r){var i=new rv(t.shape,n);return this.compileAndRun(i,[t],r)},e.prototype.packedBinaryOp=function(t,n,r,i,s){s===void 0&&(s=!1);var o=new hu(r,t.shape,n.shape,s);return this.compileAndRun(o,[t,n],i)},e.prototype.complexSeparableBinaryOp=function(t,n,r){var i=this,s=this.texData.get(t.dataId),o=this.texData.get(n.dataId),l=[[s.complexTensors.real,o.complexTensors.real],[s.complexTensors.imag,o.complexTensors.imag]].map(function(m){var v=m[0],A=m[1],E=i.makeComplexComponentTensorInfo(t,v),b=i.makeComplexComponentTensorInfo(n,A),_=new $a(r,t.shape,n.shape);return i.compileAndRun(_,[E,b],di(v.dtype,A.dtype))}),c=l[0],d=l[1],h=this.complex(c,d);return c.dispose(),d.dispose(),h},e.prototype.makeComplexComponentTensorInfo=function(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>qe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(t.length/2),r=this.addN(t.slice(0,n)),i=this.addN(t.slice(n));return this.addN([r,i])}var s=t.map(function(c){return c.dtype}).reduce(function(c,d){return di(c,d)}),o=t.map(function(c){return c.shape}),l=qe().getBool("WEBGL_PACK")?new KV(t[0].shape,o):new WV(t[0].shape,o);return this.compileAndRun(l,t,s)},e.prototype.subtract=function(t,n){if(t.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(t,n,NS);if(this.shouldExecuteOnCPU([t,n]))return this.cpuBackend.subtract(t,n);var r=di(t.dtype,n.dtype);if(qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,NS,t.dtype);var i=new $a(NS,t.shape,n.shape);return this.compileAndRun(i,[t,n],r)},e.prototype.pow=function(t,n){var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,n.shape):new $a(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,n.shape),i=di(t.dtype,n.dtype);return this.compileAndRun(r,[t,n],i)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,zN,t.dtype);var n=new Nn(t.shape,zN);return this.compileAndRun(n,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,GN,t.dtype);var n=new Nn(t.shape,GN);return this.compileAndRun(n,[t])},e.prototype.sign=function(t){var n=new Nn(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(n,[t])},e.prototype.isNaN=function(t){var n=new Nn(t.shape,"return float(isnan(x));");return this.compileAndRun(n,[t],"bool")},e.prototype.isInf=function(t){var n=new Nn(t.shape,"return float(isinf(x));");return this.compileAndRun(n,[t],"bool")},e.prototype.isFinite=function(t){var n=new Nn(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(n,[t],"bool")},e.prototype.round=function(t){var n=new Nn(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(n,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,VN,t.dtype);var n=new Nn(t.shape,VN);return this.compileAndRun(n,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,WN,t.dtype);var n=new Nn(t.shape,WN);return this.compileAndRun(n,[t])},e.prototype.softmax=function(t,n){var r=zr([n],t.shape),i=this.max(t,r),s=Ls(i.shape,r),o=this.subtract(t,i.reshape(s)),l=this.exp(o),c=this.sum(l,r).reshape(s);return this.realDivide(l,c)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var n=new Nn(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(n,[t])},e.prototype.log1p=function(t){var n=new Nn(t.shape,"return log(1.0 + x);");return this.compileAndRun(n,[t])},e.prototype.sqrt=function(t){var n=new Nn(t.shape,"return sqrt(x);");return this.compileAndRun(n,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var n=new Nn(t.shape,"return inversesqrt(x);");return this.compileAndRun(n,[t])},e.prototype.reciprocal=function(t){var n=new Nn(t.shape,"return 1.0 / x;");return this.compileAndRun(n,[t])},e.prototype.relu=function(t){var n;return n=qe().getBool("WEBGL_PACK")?new rv(t.shape,Y5):new Nn(t.shape,V5),this.compileAndRun(n,[t])},e.prototype.relu6=function(t){var n;return n=qe().getBool("WEBGL_PACK")?new rv(t.shape,q5):new Nn(t.shape,W5),this.compileAndRun(n,[t])},e.prototype.prelu=function(t,n){var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(G5,t.shape,n.shape):new $a(z5,t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.elu=function(t){if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,X5,t.dtype);var n=new Nn(t.shape,K5);return this.compileAndRun(n,[t])},e.prototype.eluDer=function(t,n){var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,n.shape):new $a("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.selu=function(t){var n=new Nn(t.shape,RK);return this.compileAndRun(n,[t])},e.prototype.int=function(t){var n=new Nn(t.shape,"return float(int(x));");return this.compileAndRun(n,[t],"int32")},e.prototype.clip=function(t,n,r){var i,s=(i=qe().getBool("WEBGL_PACK_CLIP")?new oW(t.shape):new sW(t.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(i,[t],null,s)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,HN,t.dtype);var n=new Nn(t.shape,HN);return this.compileAndRun(n,[t])},e.prototype.complexAbs=function(t){var n=this.texData.get(t.dataId),r=new lW(t.shape),i=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)];return this.compileAndRun(r,i)},e.prototype.sigmoid=function(t){var n=new Nn(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(n,[t])},e.prototype.softplus=function(t){var n=new Nn(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(n,[t])},e.prototype.sin=function(t){var n=new Nn(t.shape,MK);return this.compileAndRun(n,[t])},e.prototype.cos=function(t){var n=new Nn(t.shape,TK);return this.compileAndRun(n,[t])},e.prototype.tan=function(t){var n=new Nn(t.shape,"return tan(x);");return this.compileAndRun(n,[t])},e.prototype.asin=function(t){var n=new Nn(t.shape,NK);return this.compileAndRun(n,[t])},e.prototype.acos=function(t){var n=new Nn(t.shape,CK);return this.compileAndRun(n,[t])},e.prototype.atan=function(t){var n=new Nn(t.shape,IK);return this.compileAndRun(n,[t])},e.prototype.atan2=function(t,n){var r=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,n.shape):new $a(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,n.shape);return this.compileAndRun(r,[t,n])},e.prototype.sinh=function(t){var n=new Nn(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[t])},e.prototype.cosh=function(t){var n=new Nn(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[t])},e.prototype.tanh=function(t){var n=new Nn(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(n,[t])},e.prototype.asinh=function(t){var n=new Nn(t.shape,DK);return this.compileAndRun(n,[t])},e.prototype.acosh=function(t){var n=new Nn(t.shape,LK);return this.compileAndRun(n,[t])},e.prototype.atanh=function(t){var n=new Nn(t.shape,PK);return this.compileAndRun(n,[t])},e.prototype.erf=function(t){var n=new Nn(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(n,[t])},e.prototype.step=function(t,n){var r=new Nn(t.shape,function(i){return i===void 0&&(i=0),Ml+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(n));return this.compileAndRun(r,[t])},e.prototype.conv2dByMatMul=function(t,n,r,i,s,o){var l=t.shape,c=this.texData.get(t.dataId),d=r.inChannels,h=l[0]*l[1]*l[2],m=r.outChannels,v=r.dataFormat==="channelsLast",A=(h===1||m===1)&&d>1e3,E=l[2]%2!=0&&!!c.isPacked;if(A||!qe().getBool("WEBGL_LAZILY_UNPACK")||!qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!E){var b=v?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],_=this.reshape(t,[1,b,r.inChannels]),R=this.reshape(n,[1,r.inChannels,r.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:R,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),r.outShape)}var T=v?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),M={dataId:t.dataId,shape:[1,T,r.inChannels],dtype:t.dtype},I=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,oe(u2(c.shape,M.shape),function(){return"packed reshape "+c.shape+" to "+M.shape+" isn't free"});var P=this.reshape(n,[1,r.inChannels,r.outChannels]),B=this.fusedBatchMatMul({a:M,b:P,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),F=this.texData.get(B.dataId);return oe(F.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=I,F.shape=r.outShape,Ae.makeTensorFromDataId(B.dataId,r.outShape,B.dtype)},e.prototype.conv2dWithIm2Row=function(t,n,r,i,s,o){var l=r.filterWidth,c=r.filterHeight,d=r.inChannels,h=r.outWidth,m=r.outHeight,v=r.dataFormat==="channelsLast",A=l*c*d,E=m*h,b=[A,E],_=t.squeeze([0]),R=n.reshape([1,A,-1]),T=new JW(b,_.shape,r),M=this.compileAndRun(T,[_]).reshape([1,b[0],b[1]]),I=i!=null,P=o!=null,B=s?p2(s,!0):null,F=new CS(M.shape,[1,E,r.outChannels],!0,!1,I,B,P),L=[M,R];i&&L.push(i),P&&L.push(o);var U=this.compileAndRun(F,L);return v?U.reshape([1,m,h,r.outChannels]):U.reshape([1,r.outChannels,m,h])},e.prototype.fusedConv2d=function(t){var n=t.input,r=t.filter,i=t.convInfo,s=t.bias,o=t.activation,l=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i,s,o,l);if(qe().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i,s,o,l);var c=s!=null,d=l!=null,h=o?p2(o,!1):null,m=new IN(i,c,h,d),v=[n,r];return s&&v.push(s),l&&v.push(l),this.compileAndRun(m,v)},e.prototype.conv2d=function(t,n,r){if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))return this.conv2dByMatMul(t,n,r);if(qe().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,n,r);var i=new IN(r);return this.compileAndRun(i,[t,n])},e.prototype.conv2dDerInput=function(t,n,r){var i=new fW(r);return this.compileAndRun(i,[t,n])},e.prototype.conv2dDerFilter=function(t,n,r){var i=new dW(r);return this.compileAndRun(i,[t,n])},e.prototype.fusedDepthwiseConv2D=function(t){var n,r=t.input,i=t.filter,s=t.convInfo,o=t.bias,l=t.activation,c=t.preluActivationWeights,d=qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,h=l?p2(l,d):null,m=[r,i],v=o!=null,A=c!=null;return v&&m.push(o),A&&m.push(c),d?(n=new LN(s,v,h,A),this.compileAndRun(n,m)):(n=new DN(s,v,h,A),this.compileAndRun(n,m))},e.prototype.depthwiseConv2D=function(t,n,r){var i;return qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(i=new LN(r),this.compileAndRun(i,[t,n])):(i=new DN(r),this.compileAndRun(i,[t,n]))},e.prototype.depthwiseConv2DDerInput=function(t,n,r){var i=new gW(r);return this.compileAndRun(i,[t,n])},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){var i=new mW(r);return this.compileAndRun(i,[t,n])},e.prototype.conv3d=function(t,n,r){var i=new vW(r);return this.compileAndRun(i,[t,n])},e.prototype.conv3dDerInput=function(t,n,r){var i=new pW(r);return this.compileAndRun(i,[t,n])},e.prototype.conv3dDerFilter=function(t,n,r){var i=new hW(r);return this.compileAndRun(i,[t,n])},e.prototype.maxPool=function(t,n){var r=new IS(n,"max",!1);return this.compileAndRun(r,[t])},e.prototype.avgPool=function(t,n){var r=new IS(n,"avg",!1);return this.compileAndRun(r,[t],"float32")},e.prototype.maxPoolBackprop=function(t,n,r,i){var s=new IS(i,"max",!0),o=this.compileAndRun(s,[n]),l=new eK(i),c=this.compileAndRun(l,[t,o],n.dtype);return o.dispose(),c},e.prototype.avgPoolBackprop=function(t,n,r){var i=new eW(r);return this.compileAndRun(i,[t],n.dtype)},e.prototype.cast=function(t,n){return L5(t,n,this)},e.prototype.unstack=function(t,n){for(var r=t.shape[n],i=new Array(t.rank-1),s=0,o=0;o<t.rank;o++)o!==n&&(i[s++]=t.shape[o]);var l=new Array(t.rank).fill(0),c=t.shape.slice();c[n]=1;var d=new Array(r);for(o=0;o<d.length;o++)l[n]=o,d[o]=this.slice(t,l,c).reshape(i);return d},e.prototype.avgPool3d=function(t,n){var r=new DS(n,"avg",!1);return this.compileAndRun(r,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,n,r){var i=new tW(r);return this.compileAndRun(i,[t],n.dtype)},e.prototype.maxPool3d=function(t,n){var r=new DS(n,"max",!1);return this.compileAndRun(r,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,n,r,i){var s=new DS(i,"max",!0),o=this.compileAndRun(s,[n]),l=new tK(i),c=this.compileAndRun(l,[t,o],n.dtype);return o.dispose(),c},e.prototype.reshape=function(t,n){var r=this.texData.get(t.dataId);if(r.isPacked&&!u2(t.shape,n)&&(r.texture===null||!u2(r.shape,n))){var i=this.packedReshape(t,n);return Ae.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return M3(t,n)},e.prototype.resizeBilinear=function(t,n,r,i){var s=qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new dK(t.shape,n,r,i):new uK(t.shape,n,r,i);return this.compileAndRun(s,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,n,r){var i=new cK(t,n,r);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighbor=function(t,n,r,i){var s=new hK(t.shape,n,r,i);return this.compileAndRun(s,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){var i=new fK(t,n,r);return this.compileAndRun(i,[t])},e.prototype.multinomial=function(t,n,r,i){var s=n?t:Cu(t),o=s.shape[0],l=s.shape[1],c=new nK(o,l,r),d=c.getCustomSetupFunc(i);return this.compileAndRun(c,[s],"int32",d)},e.prototype.oneHot=function(t,n,r,i){var s=new aK(t.size,n,r,i);return this.compileAndRun(s,[t])},e.prototype.diag=function(t){var n=new SW(t.size);return this.compileAndRun(n,[t])},e.prototype.nonMaxSuppression=function(t,n,r,i,s){return kx("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Dw(t.dataSync(),n.dataSync(),r,i,s)},e.prototype.cropAndResize=function(t,n,r,i,s,o){var l=new yW(t.shape,n.shape,i,s,o);return this.compileAndRun(l,[t,n,r],"float32")},e.prototype.depthToSpace=function(t,n,r){oe(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var i=t.shape[0],s=r==="NHWC"?t.shape[1]:t.shape[2],o=r==="NHWC"?t.shape[2]:t.shape[3],l=r==="NHWC"?t.shape[3]:t.shape[1],c=s*n,d=o*n,h=l/(n*n),m=new bW(r==="NHWC"?[i,c,d,h]:[i,h,c,d],n,r);return this.compileAndRun(m,[t])},e.prototype.split=function(t,n,r){return U5(t,n,r)},e.prototype.scatterND=function(t,n,r){var i=Wx(0,t,r),s=i.sliceRank,o=i.numUpdates,l=i.sliceSize,c=i.strides,d=i.outputSize,h=[d/l,l],m=t.reshape([o,s]),v=n.reshape([o,l]);if(d===0)return M3(fi([]),r);var A=Tt(0),E=new BN(o,s,m.rank,v.rank,c,h);return this.compileAndRun(E,[v,m,A]).reshape(r)},e.prototype.sparseToDense=function(t,n,r,i){var s=Wx(0,t,r),o=s.sliceRank,l=s.numUpdates,c=s.strides,d=s.outputSize,h=new BN(l,o,t.rank,n.rank,c,[d,1]);return this.compileAndRun(h,[n,t,i]).reshape(r)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,n){var r=this.texData.get(t.dataId),i=new ON(TW,t.shape,n),s=new ON(NW,t.shape,n),o=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],l=this.compileAndRun(i,o),c=this.compileAndRun(s,o),d=this.complex(l,c).as2D(t.shape[0],t.shape[1]);return l.dispose(),c.dispose(),d},e.prototype.gatherND=function(t,n){var r=n.shape,i=r[r.length-1],s=R5(t,n),o=s[0],l=s[1],c=s[2],d=s[3],h=n.reshape([l,i]),m=t.reshape([t.size/c,c]),v=new DW(i,d,[l,c]);return this.compileAndRun(v,[m,h]).reshape(o)},e.prototype.fill=function(t,n,r){if((r=r||u1(n))==="string"){var i=Ox(r,Gt(t));return i.fill(n),Ae.makeTensor(i,t,r,this)}var s=new CW(t,n),o=s.getCustomSetupFunc(n);return this.compileAndRun(s,[],r,o)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,n,r){return P5(t,n,r)},e.prototype.makeTensorInfo=function(t,n){var r=this.write(null,t,n);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:n}},e.prototype.makeOutput=function(t,n){var r=this.makeTensorInfo(t,n).dataId;return Ae.makeTensorFromDataId(r,t,n,this)},e.prototype.unpackTensor=function(t){var n=new UK(t.shape);return this.runWebGLProgram(n,[t],t.dtype)},e.prototype.packTensor=function(t){var n=new rK(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,n){var r=[Bx(t.shape)].concat(Fx(t.shape)),i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Bx(n)].concat(Fx(n)),o=new lK(s,r),l=this.runWebGLProgram(o,[i],t.dtype,null,!0);return{dataId:l.dataId,shape:n,dtype:l.dtype}},e.prototype.decode=function(t){var n,r=this.texData.get(t),i=r.isPacked,s=r.shape,o=r.dtype,l=RS(s);return n=i?new _W(l):new AW(l),{dtype:o,shape:s,dataId:this.runWebGLProgram(n,[{shape:l,dtype:o,dataId:t}],o,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,n,r,i,s){var o=this;s===void 0&&(s=!1);var l=this.makeTensorInfo(t.outputShape,r),c=this.texData.get(l.dataId);if(t.packedOutput&&(c.isPacked=!0),t.outPackingScheme===Hv.DENSE){var d=Sv(t.outputShape);c.texShape=d.map(function(T){return 2*T})}if(t.outTexUsage!=null&&(c.usage=t.outTexUsage),Gt(l.shape)===0)return c.values=Fv(l.dtype,0),l;var h=[],m=n.map(function(T){if(T.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var M=o.texData.get(T.dataId);if(M.texture==null){if(!t.packedInputs&&Gt(T.shape)<=qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:T.shape,texData:null,isUniform:!0,uniformValues:M.values};t.packedInputs&&(M.isPacked=!0,M.shape=T.shape)}else if(!!M.isPacked!=!!t.packedInputs)T=M.isPacked?o.unpackTensor(T):o.packTensor(T),h.push(T),M=o.texData.get(T.dataId);else if(M.isPacked&&!u2(M.shape,T.shape)){var I=T,P=T.shape;T.shape=M.shape,T=o.packedReshape(T,P),h.push(T),M=o.texData.get(T.dataId),I.shape=P}return o.uploadToGPU(T.dataId),{shape:T.shape,texData:M,isUniform:!1}});this.uploadToGPU(l.dataId);var v,A={shape:l.shape,texData:c,isUniform:!1},E=function(T,M,I){var P="";M.concat(I).forEach(function(L){var U=L.texData!=null&&L.texData.slice!=null&&L.texData.slice.flatOffset>0,j=L.isUniform?"uniform":L.texData.texShape;P+=L.shape+"_"+j+"_"+U});var B=T.userCode,F=T.constructor.name;return F+="_"+P+"_"+B}(t,m,A),b=this.getAndSaveBinary(E,function(){return function(T,M,I,P){var B=M.userCode,F=I.map(function(K,X){var z={logicalShape:K.shape,texShape:K.isUniform?null:K.texData.texShape,isUniform:K.isUniform,isPacked:!K.isUniform&&K.texData.isPacked,flatOffset:null};return K.texData!=null&&K.texData.slice!=null&&K.texData.slice.flatOffset>0&&(z.flatOffset=K.texData.slice.flatOffset),{name:M.variableNames[X],shapeInfo:z}}),L=F.map(function(K){return K.shapeInfo}),U={logicalShape:P.shape,texShape:P.texData.texShape,isUniform:!1,isPacked:P.texData.isPacked,flatOffset:null},j=qV(F,U,B,M.packedInputs),W=T.createProgram(j),Q=null,$=T.getUniformLocation(W,"NAN",!1);qe().getNumber("WEBGL_VERSION")===1&&(Q=T.getUniformLocation(W,"INFINITY",!1));for(var re={},G=0;G<M.variableNames.length;G++){var Y=M.variableNames[G];re[Y]=T.getUniformLocation(W,Y,!1),re["offset"+Y]=T.getUniformLocation(W,"offset"+Y,!1)}return{program:M,source:j,webGLProgram:W,uniformLocations:re,inShapeInfos:L,outShapeInfo:U,infLoc:Q,nanLoc:$}}(o.gpgpu,t,m,A)}),_=this.activeTimers!=null;if(_&&(v=this.startTimer()),function(T,M,I,P,B){UN(M.inShapeInfos,I),UN([M.outShapeInfo],[P]);var F=P.texData.texture,L=P.texData.texShape;P.texData.isPacked?T.setOutputPackedMatrixTexture(F,L[0],L[1]):T.setOutputMatrixTexture(F,L[0],L[1]),T.setProgram(M.webGLProgram),qe().getNumber("WEBGL_VERSION")===1&&M.infLoc!==null&&T.gl.uniform1f(M.infLoc,1/0),M.nanLoc!==null&&T.gl.uniform1f(M.nanLoc,NaN),I.forEach(function(U,j){var W=M.program.variableNames[j],Q=M.uniformLocations[W],$=M.uniformLocations["offset"+W];if(Q!=null)if(U.isUniform)if(Gt(U.shape)<2)T.gl.uniform1f(Q,U.uniformValues[0]);else{var re=U.uniformValues;re instanceof Float32Array||(re=new Float32Array(re)),T.gl.uniform1fv(Q,re)}else U.texData.slice!=null&&$!=null&&T.gl.uniform1i($,U.texData.slice.flatOffset),T.setInputMatrixTexture(U.texData.texture,Q,j)}),B!=null&&B(T,M.webGLProgram),T.executeProgram()}(this.gpgpu,b,m,A,i),h.forEach(function(T){return o.disposeData(T.dataId)}),_&&(v=this.endTimer(v),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(v)})),!qe().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){var R=this.unpackTensor(l);return this.disposeData(l.dataId),R}return l},e.prototype.compileAndRun=function(t,n,r,i,s){s===void 0&&(s=!1),r=r||n[0].dtype;var o=this.runWebGLProgram(t,n,r,i,s);return Ae.makeTensorFromDataId(o.dataId,o.shape,o.dtype)},e.prototype.getAndSaveBinary=function(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(n){t.gpgpu.deleteProgram(t.binaryCache[n].webGLProgram),delete t.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Pt(function(){if(!qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){var n=qe().getBool("DEBUG");qe().set("DEBUG",!1);var r=t.abs(Tt(1e-8)).dataSync()[0];if(qe().set("DEBUG",n),r>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var n,r=this.texData.get(t),i=r.shape,s=r.dtype,o=r.values,l=r.texture,c=r.usage,d=r.isPacked;if(l==null){var h,m=this.activeTimers!=null;m&&(h=gc());var v=r.texShape;if(v==null&&(v=WG(i,d),r.texShape=v),o!=null){var A=RS(i),E=void 0,b=v[1],_=v[0],R=o instanceof Uint8Array;d?(b=(n=f1(v[0],v[1]))[0],_=n[1],E=new MW(A,[_,b],R)):E=new RW(A,[_,b],R);var T=this.makeTensorInfo([_,b],s);this.texData.get(T.dataId).usage=R?$s.PIXELS:$s.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(T.dataId),b,_,o);var M=this.runWebGLProgram(E,[T],s,null,!0),I=this.texData.get(M.dataId);r.texture=I.texture,r.texShape=I.texShape,r.isPacked=I.isPacked,r.usage=I.usage,this.disposeData(T.dataId),this.texData.delete(M.dataId),r.values=null,m&&(this.uploadWaitMs+=gc()-h)}else{var P=this.acquireTexture(v,c,s,d);r.texture=P}}},e.prototype.convertAndCacheOnCPU=function(t,n){var r=this.texData.get(t),i=r.dtype;return this.releaseGPUData(t),n!=null&&(r.values=function(s,o){if(o==="float32"||o==="complex64")return s;if(o==="int32"||o==="bool"){for(var l=o==="int32"?new Int32Array(s.length):new Uint8Array(s.length),c=0;c<l.length;++c)l[c]=Math.round(s[c]);return l}throw new Error("Unknown dtype "+o)}(n,i)),r.values},e.prototype.acquireTexture=function(t,n,r,i){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,n,i)},e.prototype.computeBytes=function(t,n){return t[0]*t[1]*l5(n)},e}(I5);m5()&&Ae.registerBackend("webgl",function(){return new FK},2);var kK=me({square_:function(a){var e=ne(a,"x","square"),t=[e];return Ae.runKernelFunc(function(n,r){return r([e]),n.square(e)},{x:e},null,"Square",{},t,[])}}),zv="SquaredDifference",J5=me({squaredDifference_:function(a,e){var t,n=ne(a,"a","squaredDifference"),r=ne(e,"b","squaredDifference");t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape);var i={a:n,b:r},s=[n,r];return Ae.runKernelFunc(function(o,l){var c=o.squaredDifference(n,r);return l([n,r]),c},i,function(o,l){var c=l[0],d=l[1],h=Tt(2);return{a:function(){return o.mul(c.sub(d).mul(h))},b:function(){return o.mul(d.sub(c).mul(h))}}},zv,{},s,[])}}),HK=me({abs_:function(a){var e=ne(a,"x","abs");return e.dtype==="complex64"?Ae.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):Ae.runKernelFunc(function(t,n){var r=t.abs(e);return n([e]),r},{x:e},function(t,n){var r=n[0];return{x:function(){return t.mul(r.toFloat().step(-1))}}},"Abs")}}),jK=me({acos_:function(a){var e=ne(a,"x","acos");return Ae.runKernelFunc(function(t,n){var r=t.acos(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.divStrict(Tt(1).sub(r.toFloat().square()).sqrt()).neg()}}})}}),zK=me({acosh_:function(a){var e=ne(a,"x","acosh");return Ae.runKernelFunc(function(t,n){var r=t.acosh(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.divStrict(r.toFloat().square().sub(1).sqrt())}}})}}),GK=me({asin_:function(a){var e=ne(a,"x","asin");return Ae.runKernelFunc(function(t,n){var r=t.asin(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.divStrict(Tt(1).sub(r.toFloat().square()).sqrt())}}})}}),VK=me({asinh_:function(a){var e=ne(a,"x","asinh");return Ae.runKernelFunc(function(t,n){var r=t.asinh(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.divStrict(Tt(1).add(r.toFloat().square()).sqrt())}}})}}),WK=me({atan_:function(a){var e=ne(a,"x","atan");return Ae.runKernelFunc(function(t,n){var r=t.atan(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(r.toFloat().square().add(1))}}})}}),KK=me({atanh_:function(a){var e=ne(a,"x","atanh");return Ae.runKernelFunc(function(t,n){var r=t.atanh(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(Tt(1).sub(r.toFloat().square()))}}})}}),YK=me({ceil_:function(a){var e=ne(a,"x","ceil");return Ae.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),Fw=me({clipByValue_:function(a,e,t){var n=ne(a,"x","clipByValue");oe(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var r=[n],i={min:e,max:t};return Ae.runKernelFunc(function(s,o){var l=s.clip(n,e,t);return o([n]),l},{x:n},function(s,o){var l=o[0];return{x:function(){return s.where(l.greaterEqual(e).logicalAnd(l.lessEqual(t)),Xn(s))}}},"ClipByValue",i,r)}}),qK=me({cos_:function(a){var e=ne(a,"x","cos"),t=[e];return Ae.runKernelFunc(function(n,r){var i=n.cos(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return i.toFloat().sin().neg().mul(n)}}},"Cos",{},t)}}),XK=me({cosh_:function(a){var e=ne(a,"x","cosh");return Ae.runKernelFunc(function(t,n){var r=t.cosh(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return r.toFloat().sinh().mulStrict(t)}}})}}),JK=me({erf_:function(a){var e=ne(a,"x","erf");return oe(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),Ae.runKernelFunc(function(t,n){var r=t.erf(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.mul(r.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),N3=me({exp_:function(a){var e=ne(a,"x","exp");return Ae.runKernelFunc(function(t,n){var r=t.exp(e);return n([r]),r},{x:e},function(t,n){return{x:function(){return t.mulStrict(n[0])}}},"Exp",{},[],[!0])}}),ZK=me({expm1_:function(a){var e=ne(a,"x","expm1");return Ae.runKernelFunc(function(t,n){var r=t.expm1(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.mul(r.exp())}}})}}),QK=me({floor_:function(a){var e=ne(a,"x","floor");return Ae.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),$K=me({log_:function(a){var e=ne(a,"x","log"),t=[e];return Ae.runKernelFunc(function(n,r){var i=n.log(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.div(i.toFloat())}}},"Log",{},t)}}),eY=me({log1p_:function(a){var e=ne(a,"x","log1p");return Ae.runKernelFunc(function(t,n){var r=t.log1p(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(r.add(1))}}})}}),tY=me({logSigmoid_:function(a){var e=ne(a,"x","logSigmoid");return Ae.runKernelFunc(function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.mul(r.neg().sigmoid())}}})}}),Xx=me({neg_:function(a){var e=ne(a,"x","neg"),t=[e];return Ae.runKernelFunc(function(n){return n.neg(e)},{x:e},function(n){return{x:function(){return n.neg()}}},"Neg",{},t)}}),nY=me({reciprocal_:function(a){var e=ne(a,"x","reciprocal");return Ae.runKernelFunc(function(t,n){var r=t.reciprocal(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(r.square().neg())}}})}}),aY=me({round_:function(a){var e=ne(a,"x","round");return Ae.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),Z5=me({rsqrt_:function(a){var e=ne(a,"x","rsqrt"),t=[e];return Ae.runKernelFunc(function(n,r){var i=n.rsqrt(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),Q5=me({sigmoid_:function(a){var e=ne(a,"x","sigmoid");return Ae.runKernelFunc(function(t,n){var r=t.sigmoid(e);return n([r]),r},{x:e},function(t,n){var r=n[0];return{x:function(){return t.mul(r.mul(Tt(1).sub(r)))}}},"Sigmoid")}}),rY=me({sign_:function(a){var e=ne(a,"x","sign");return Ae.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),iY=me({isNaN_:function(a){var e=ne(a,"x","isNaN");return Ae.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),sY=me({isInf_:function(a){var e=ne(a,"x","isInf");return Ae.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),oY=me({isFinite_:function(a){var e=ne(a,"x","isFinite");return Ae.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Xn(t)}}})}}),lY=me({sin_:function(a){var e=ne(a,"x","sin"),t=[e];return Ae.runKernelFunc(function(n,r){var i=n.sin(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return i.toFloat().cos().mul(n)}}},"Sin",{},t)}}),cY=me({sinh_:function(a){var e=ne(a,"x","sinh");return Ae.runKernelFunc(function(t,n){var r=t.sinh(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return r.toFloat().cosh().mulStrict(t)}}})}}),uY=me({softplus_:function(a){var e=ne(a,"x","softplus");return Ae.runKernelFunc(function(t,n){var r=t.softplus(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.mul(r.sigmoid())}}})}}),dY=me({sqrt_:function(a){var e=ne(a,"x","sqrt");return Ae.runKernelFunc(function(t,n){var r=t.sqrt(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(r.toFloat().sqrt().mul(2))}}})}}),fY=me({step_:function(a,e){e===void 0&&(e=0);var t=ne(a,"x","step");return Ae.runKernelFunc(function(n){return n.step(t,e)},{$x:t},function(n){return{$x:function(){return Xn(n)}}})}}),hY=me({tan_:function(a){var e=ne(a,"x","tan");return Ae.runKernelFunc(function(t,n){var r=t.tan(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return t.div(r.cos().square())}}})}}),pY=me({tanh_:function(a){var e=ne(a,"x","tanh");return Ae.runKernelFunc(function(t,n){var r=t.tanh(e);return n([r]),r},{x:e},function(t,n){var r=n[0];return{x:function(){return Tt(1).sub(r.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function $5(a,e,t,n,r,i){var s,o,l=ne(a,"x","batchNorm"),c=ne(e,"mean","batchNorm"),d=ne(t,"variance","batchNorm");return r!=null&&(s=ne(r,"scale","batchNorm")),n!=null&&(o=ne(n,"offset","batchNorm")),oe(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),oe(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),oe(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),s!=null&&oe(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),o!=null&&oe(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+o.rank+"."}),p1(l,c,d,o,s,i)}function eL(a,e,t,n,r,i){var s,o,l=ne(a,"x","batchNorm"),c=ne(e,"mean","batchNorm"),d=ne(t,"variance","batchNorm");return r!=null&&(s=ne(r,"scale","batchNorm")),n!=null&&(o=ne(n,"offset","batchNorm")),oe(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),oe(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),oe(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),s!=null&&oe(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),o!=null&&oe(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+o.rank+"."}),p1(l,c,d,o,s,i)}function tL(a,e,t,n,r,i){var s,o,l=ne(a,"x","batchNorm"),c=ne(e,"mean","batchNorm"),d=ne(t,"variance","batchNorm");return r!=null&&(s=ne(r,"scale","batchNorm")),n!=null&&(o=ne(n,"offset","batchNorm")),oe(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),oe(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),oe(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),s!=null&&oe(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),o!=null&&oe(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+o.rank+"."}),p1(l,c,d,o,s,i)}function p1(a,e,t,n,r,i){i==null&&(i=.001);var s,o,l,c=ne(a,"x","batchNorm"),d=ne(e,"mean","batchNorm"),h=ne(t,"variance","batchNorm");r!=null&&(s=ne(r,"scale","batchNorm")),n!=null&&(o=ne(n,"offset","batchNorm")),oe(d.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),oe(o==null||d.rank===o.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),oe(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var m=[c,d,h,s];return Ae.runKernelFunc(function(v,A){var E=v.batchNormalization(l,m2(d),m2(h),i,m2(s),m2(o));return A([c,d,h,s]),E},{x:c,mean:d,variance:h,scale:s,offset:o},function(v,A){var E=A,b=E[0],_=E[1],R=E[2],T=E[3],M=T??Tt(1),I=Fr(_.shape,l.shape),P=[];if(_.rank===1){for(var B=0;B<l.shape.length-1;++B)P.push(l.shape[B]);P.push(1)}var F=b.sub(_),L=v.mul(M),U=Z5(R.add(Tt(i))),j=U.mul(U).mul(U).mul(Tt(-.5));return{x:function(){return _.rank===1?v.mul(Ym(U.as4D(1,1,1,_.shape[0]),P)).mul(M).reshape(b.shape):v.mul(U).mul(M).reshape(b.shape)},mean:function(){var W=U.mul(Tt(-1)).mul(L);return _.rank===1&&(W=W.sum(I)),W.reshape(_.shape)},variance:function(){var W=j.mul(F).mul(L);return _.rank===1&&(W=W.sum(I)),W.reshape(_.shape)},scale:function(){var W=F.mul(U),Q=v.mul(W);return _.rank===1&&(Q=Q.sum(I)),Q.reshape(_.shape)},offset:function(){var W=v;return _.rank===1&&(W=W.sum(I)),W.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(c.shape)}function m2(a){return a==null?null:a.rank===0?a.as1D():a.rank===1?a:a.rank===2?a.as4D(1,1,a.shape[0],a.shape[1]):a.rank===3?a.as4D(1,a.shape[0],a.shape[1],a.shape[2]):a}function s_(){g5("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var mY=me({batchNormalization2d_:function(a,e,t,n,r,i){return n===void 0&&(n=.001),s_(),$5(a,e,t,i,r,n)}}),gY=me({batchNormalization3d_:function(a,e,t,n,r,i){return n===void 0&&(n=.001),s_(),eL(a,e,t,i,r,n)}}),vY=me({batchNormalization4d_:function(a,e,t,n,r,i){return n===void 0&&(n=.001),s_(),tL(a,e,t,i,r,n)}}),yY=me({batchNormalization_:function(a,e,t,n,r,i){return n===void 0&&(n=.001),s_(),p1(a,e,t,i,r,n)}}),nL=me({batchNorm_:p1}),xY=me({batchNorm2d_:$5}),AY=me({batchNorm3d_:eL}),_Y=me({batchNorm4d_:tL}),o_=me({logicalAnd_:function(a,e){var t=ne(a,"a","logicalAnd","bool"),n=ne(e,"b","logicalAnd","bool");return Hn(t.shape,n.shape),Ae.runKernelFunc(function(r){return r.logicalAnd(t,n)},{a:t,b:n},null,"LogicalAnd")}}),bY=me({logicalNot_:function(a){var e=ne(a,"x","logicalNot","bool");return Ae.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),aL=me({logicalOr_:function(a,e){var t=ne(a,"a","logicalOr","bool"),n=ne(e,"b","logicalOr","bool");return Hn(t.shape,n.shape),Ae.runKernelFunc(function(r){return r.logicalOr(t,n)},{$a:t,$b:n})}}),SY=me({logicalXor_:function(a,e){var t=ne(a,"a","logicalXor","bool"),n=ne(e,"b","logicalXor","bool");return Hn(t.shape,n.shape),aL(a,e).logicalAnd(o_(a,e).logicalNot())}}),Gh=me({where_:function(a,e,t){var n=ne(e,"a","where"),r=ne(t,"b","where"),i=ne(a,"condition","where","bool");return oa(n.shape,r.shape,"Error in where: "),i.rank===1?oe(i.shape[0]===n.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):oa(i.shape,r.shape,"Error in where: "),Ae.runKernelFunc(function(s,o){var l=s.select(i,n,r);return o([i]),l},{$condition:i,$a:n,$b:r},function(s,o){var l=o[0];return{$condition:function(){return Xn(l).toFloat()},$a:function(){return s.mul(l.cast(s.dtype))},$b:function(){return s.mul(l.logicalNot().cast(s.dtype))}}})}}),rL=function(a){return Bt(this,void 0,void 0,function(){var e,t,n;return Ft(this,function(r){switch(r.label){case 0:return[4,(e=ne(a,"condition","whereAsync","bool")).data()];case 1:return t=r.sent(),n=Pw(e.shape,t),a!==e&&e.dispose(),[2,n]}})})},Un=me({add_:function(a,e){var t,n=ne(a,"a","add"),r=ne(e,"b","add");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s){return s.add(n,r)},{a:n,b:r},function(s){return{a:function(){var o=s,l=Fr(n.shape,i);return l.length>0&&(o=o.sum(l)),o.reshape(n.shape)},b:function(){var o=s,l=Fr(r.shape,i);return l.length>0&&(o=o.sum(l)),o.reshape(r.shape)}}},"Add")}}),EY=me({addN_:function(a){oe(Array.isArray(a),function(){return"The argument passed to tf.addN() must be a list of tensors"}),oe(a.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+a.length});var e=a.map(function(r,i){return ne(r,"tensors"+i,"addN")}),t=e[0];e.forEach(function(r){if(r.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(r){if(!Zr(r.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=e;return Ae.runKernelFunc(function(r){return r.addN(e)},n,function(r){var i={};return e.forEach(function(s,o){i[o]=function(){return r.clone()}}),i},"AddN")}}),wY=me({addStrict_:function(a,e){var t=ne(a,"a","addStrict"),n=ne(e,"b","addStrict");return oa(t.shape,n.shape,"Error in addStrict: "),t.add(n)}}),RY=me({atan2_:function(a,e){var t,n=ne(a,"a","atan2"),r=ne(e,"b","atan2");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s,o){var l=s.atan2(n,r);return o([n,r]),l},{$a:n,$b:r},function(s,o){var l=o[0],c=o[1];return{$a:function(){var d=Un(l.square(),c.square()),h=s.mul(c.div(d)),m=Fr(l.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(l.shape)},$b:function(){var d=Un(l.square(),c.square()),h=Xx(s.mul(l.div(d))),m=Fr(c.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(c.shape)}}})}}),gl=me({div_:function(a,e){var t,n=ne(a,"a","div"),r=ne(e,"b","div");if(t=Ka(n,r),n=t[0],r=t[1],n.dtype==="int32"&&r.dtype==="int32")return iL(n,r);var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s,o){var l=s.realDivide(n,r);return o([n,r]),l},{a:n,b:r},function(s,o){var l=o[0],c=o[1];return{a:function(){var d=s.div(c.toFloat()),h=Fr(l.shape,i);return h.length>0?d.sum(h).reshape(l.shape):d},b:function(){var d=s.mul(l.toFloat()),h=Fr(c.shape,i);h.length>0&&(d=d.sum(h).reshape(c.shape));var m=c.square();return d.div(m.toFloat()).neg()}}},"Div")}}),MY=me({divNoNan_:function(a,e){var t,n=ne(a,"a","div"),r=ne(e,"b","div");n=(t=Ka(n,r))[0],r=t[1];var i=gl(n,r),s=Xn(i),o=r.equal(s);return Gh(o,s,i)}}),TY=me({divStrict_:function(a,e){var t=ne(a,"a","div"),n=ne(e,"b","div");return oa(t.shape,n.shape,"Error in divideStrict: "),t.div(n)}}),iL=me({floorDiv_:function(a,e){var t,n=ne(a,"a","floorDiv"),r=ne(e,"b","floorDiv");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s,o){var l=s.floorDiv(n,r);return o([n,r]),l},{a:n,b:r},function(s,o){var l=o[0],c=o[1];return{a:function(){var d=s.div(c.toFloat()),h=Fr(l.shape,i);return h.length>0?d.sum(h).reshape(l.shape):d},b:function(){var d=s.mul(l.toFloat()),h=Fr(c.shape,i);h.length>0&&(d=d.sum(h).reshape(c.shape));var m=c.square();return d.div(m.toFloat()).neg()}}},"FloorDiv")}}),kw=me({maximum_:function(a,e){var t,n=ne(a,"a","maximum"),r=ne(e,"b","maximum");return t=Ka(n,r),n=t[0],r=t[1],n.dtype==="bool"&&(n=n.toInt(),r=r.toInt()),Hn(n.shape,r.shape),Ae.runKernelFunc(function(i,s){var o=i.maximum(n,r);return s([n,r]),o},{a:n,b:r},function(i,s){var o=s[0],l=s[1];return{a:function(){return i.mul(o.greaterEqual(l).toFloat())},b:function(){return i.mul(o.less(l).toFloat())}}},"Maximum")}}),NY=me({maximumStrict_:function(a,e){var t=ne(a,"a","maximumStrict"),n=ne(e,"b","maximumStrict");return oa(t.shape,n.shape,"Error in maximumStrict: "),t.maximum(n)}}),sL=me({minimum_:function(a,e){var t,n=ne(a,"a","minimum"),r=ne(e,"b","minimum");return t=Ka(n,r),n=t[0],r=t[1],n.dtype==="bool"&&(n=n.toInt(),r=r.toInt()),Hn(n.shape,r.shape),Ae.runKernelFunc(function(i,s){var o=i.minimum(n,r);return s([n,r]),o},{a:n,b:r},function(i,s){var o=s[0],l=s[1];return{a:function(){return i.mul(o.lessEqual(l).toFloat())},b:function(){return i.mul(o.greater(l).toFloat())}}},"Minimum")}}),CY=me({minimumStrict_:function(a,e){var t=ne(a,"a","minimumStrict"),n=ne(e,"b","minimumStrict");return oa(t.shape,n.shape,"Error in minimumStrict: "),t.minimum(n)}}),IY=me({mod_:function(a,e){var t,n=ne(a,"a","mod"),r=ne(e,"b","mod");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s,o){var l=s.mod(n,r);return o([n,r]),l},{$a:n,$b:r},function(s,o){var l=o[0],c=o[1];return{$a:function(){var d=Fr(l.shape,i);return d.length>0?s.sum(d).reshape(l.shape):s},$b:function(){var d=s.mul(l.div(c).floor().neg()),h=Fr(c.shape,i);return h.length>0?d.sum(h).reshape(c.shape):d}}})}}),DY=me({modStrict_:function(a,e){var t=ne(a,"a","modStrict"),n=ne(e,"b","modStrict");return oa(t.shape,n.shape,"Error in modStrict: "),t.mod(n)}}),Li=me({mul_:function(a,e){var t,n=ne(a,"a","mul"),r=ne(e,"b","mul");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s,o){var l=s.multiply(n,r);return o([n,r]),l},{a:n,b:r},function(s,o){var l=o[0],c=o[1];return{a:function(){var d=s.mul(c.toFloat()),h=Fr(l.shape,i);return h.length>0?d.sum(h).reshape(l.shape):d},b:function(){var d=s.mul(l.toFloat()),h=Fr(c.shape,i);return h.length>0?d.sum(h).reshape(c.shape):d}}},"Mul")}}),LY=me({mulStrict_:function(a,e){var t=ne(a,"a","mul"),n=ne(e,"b","mul");return oa(t.shape,n.shape,"Error in multiplyStrict: "),t.mul(n)}}),Jx=me({pow_:function(a,e){var t,n=ne(a,"base","pow"),r=ne(e,"exp","pow");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape),s=[n,r];return Ae.runKernelFunc(function(o,l){var c=o.pow(n,r);return l([n,r,c]),c},{a:n,b:r},function(o,l){var c=l[0],d=l[1],h=l[2];return{a:function(){var m=d.toFloat(),v=o.mul(m.mul(c.pow(m.sub(Tt(1))))),A=Fr(c.shape,i);return A.length>0&&(v=v.sum(A)),v.reshape(c.shape)},b:function(){var m=c.greater(0),v=c.log().where(m,Xn(c)),A=o.mul(h.mul(v)),E=Fr(d.shape,i);return E.length>0&&(A=A.sum(E)),A.reshape(d.shape)}}},"Pow",{},s,[!0])}}),PY=me({powStrict_:function(a,e){return oa(a.shape,e.shape,"Error in powStrict: "),a.pow(e)}}),OY=me({squaredDifferenceStrict_:function(a,e){var t=ne(a,"a","squaredDifferenceStrict"),n=ne(e,"b","squaredDifferenceStrict");return oa(t.shape,n.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(n)}}),kr=me({sub_:function(a,e){var t,n=ne(a,"a","sub"),r=ne(e,"b","sub");t=Ka(n,r),n=t[0],r=t[1];var i=Hn(n.shape,r.shape);return Ae.runKernelFunc(function(s){return s.subtract(n,r)},{a:n,b:r},function(s){return{a:function(){var o=s,l=Fr(n.shape,i);return l.length>0&&(o=o.sum(l)),o.reshape(n.shape)},b:function(){var o=s,l=Fr(r.shape,i);return l.length>0&&(o=o.sum(l)),o.neg().reshape(r.shape)}}},"Sub")}}),UY=me({subStrict_:function(a,e){var t=ne(a,"a","subStrict"),n=ne(e,"b","subStrict");return oa(t.shape,n.shape,"Error in subStrict: "),t.sub(n)}}),oL=me({equal_:function(a,e){var t,n=ne(a,"a","equal"),r=ne(e,"b","equal");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i){return i.equal(n,r)},{$a:n,$b:r})}}),BY=me({equalStrict_:function(a,e){var t=ne(a,"a","equalStrict"),n=ne(e,"b","equalStrict");return oa(t.shape,n.shape,"Error in equalStrict: "),t.equal(n)}}),FY=me({greater_:function(a,e){var t,n=ne(a,"a","greater"),r=ne(e,"b","greater");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i){return i.greater(n,r)},{a:n,b:r},null,"Greater")}}),lL=me({greaterEqual_:function(a,e){var t,n=ne(a,"a","greaterEqual"),r=ne(e,"b","greaterEqual");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i,s){var o=i.greaterEqual(n,r);return s([n,r]),o},{a:n,b:r},function(i,s){var o=s[0],l=s[1];return{a:function(){return Xn(o)},b:function(){return Xn(l)}}},"GreaterEqual")}}),kY=me({greaterEqualStrict_:function(a,e){var t=ne(a,"a","greaterEqualStrict"),n=ne(e,"b","greaterEqualStrict");return oa(t.shape,n.shape,"Error in greaterEqualStrict: "),t.greaterEqual(n)}}),HY=me({greaterStrict_:function(a,e){var t=ne(a,"a","greaterStrict"),n=ne(e,"b","greaterStrict");return oa(t.shape,n.shape,"Error in greaterStrict: "),t.greater(n)}}),jY=me({less_:function(a,e){var t,n=ne(a,"a","less"),r=ne(e,"b","less");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i){return i.less(n,r)},{a:n,b:r},null,"Less")}}),zY=me({lessEqual_:function(a,e){var t,n=ne(a,"a","lessEqual"),r=ne(e,"b","lessEqual");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i,s){var o=i.lessEqual(n,r);return s([n,r]),o},{a:n,b:r},null,"LessEqual")}}),GY=me({lessEqualStrict_:function(a,e){var t=ne(a,"a","lessEqualStrict"),n=ne(e,"b","lessEqualStrict");return oa(t.shape,n.shape,"Error in lessEqualStrict: "),t.lessEqual(n)}}),VY=me({lessStrict_:function(a,e){var t=ne(a,"a","lessStrict"),n=ne(e,"b","lessStrict");return oa(t.shape,n.shape,"Error in lessStrict: "),t.less(n)}}),WY=me({notEqual_:function(a,e){var t,n=ne(a,"a","notEqual"),r=ne(e,"b","notEqual");return t=Ka(n,r),n=t[0],r=t[1],Hn(n.shape,r.shape),Ae.runKernelFunc(function(i){return i.notEqual(n,r)},{a:n,b:r},null,"NotEqual")}}),KY=me({notEqualStrict_:function(a,e){var t=ne(a,"a","notEqualStrict"),n=ne(e,"b","notEqualStrict");return oa(t.shape,n.shape,"Error in notEqualStrict: "),t.notEqual(n)}});function KN(a,e){for(var t=[],n=a;n<e;++n)t.push(n);return t}function YN(a){for(var e=[],t=0;t<a.length;++t)for(var n=0;n<a[t].length;++n)e.push(a[t][n]);return e}var Hw=me({gather_:function(a,e,t){t===void 0&&(t=0);var n=ne(a,"x","gather"),r=ne(e,"indices","gather","int32");t=zr(t,n.shape)[0];var i=function(s,o,l){for(var c=s.shape[l],d=[],h=1,m=1,v=0;v<l;v++)d.push(s.shape[v]),h*=s.shape[v];for(v=0;v<o.rank;v++)d.push(o.shape[v]);for(v=l+1;v<s.rank;v++)d.push(s.shape[v]),m*=s.shape[v];return{batchSize:h,sliceSize:m,dimSize:c,outputShape:d}}(n,r,t);return Ae.runKernelFunc(function(s,o){var l=s.gather(n,r.flatten(),t);return o([r]),l},{x:n,indices:r},function(s,o){var l=o[0];return{x:function(){var c=n.shape,d=l.size,h=c.slice(0,t),m=h.length,v=c.slice(t,c.length).slice(1),A=v.length,E=KN(0,m),b=KN(m+1,m+1+A),_=YN([h,[d],v]),R=s.reshape(_),T=l.reshape([d]),M=YN([[m],E,b]),I=R.transpose(M),P=cL(I,T,n.shape[t]),B=Rw(M);return P=P.transpose(B)},indices:function(){return l}}},"Gather",{axis:t}).reshape(i.outputShape)}}),cL=me({unsortedSegmentSum_:function(a,e,t){var n=ne(a,"x","unsortedSegmentSum"),r=ne(e,"segmentIds","unsortedSegmentSum","int32");return oe(dr(t),function(){return"numSegments must be of dtype int"}),Ae.runKernelFunc(function(i,s){var o=i.unsortedSegmentSum(n,r,t);return s([r]),o},{$x:n},function(i,s){var o=s[0];return{$x:function(){return function(l,c){for(var d=kw(c,Xn(c)),h=Hw(l,d),m=lL(c,Tt(0,"int32")),v=h.rank-m.rank,A=0;A<v;++A)m=Lo(m,A+1);m=o_(m,M0(h.shape,"bool"));var E=Xn(h);return Gh(m,h,E)}(i,o)}}})}}),YY=function(a,e,t){return Bt(this,void 0,void 0,function(){var n,r,i,s,o,l,c,d,h,m,v,A,E;return Ft(this,function(b){switch(b.label){case 0:for(n=ne(a,"tensor","boolMask"),r=ne(e,"mask","boolMask","bool"),i=t??0,s=r.rank,o=n.shape,oe(s>0,function(){return"mask cannot be scalar"}),oa(o.slice(i,i+s),r.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=i;c<i+s;c++)l*=o[c];return d=o.slice(0,i).concat([l],o.slice(i+s)),h=n.reshape(d),m=r.reshape([-1]),[4,rL(m)];case 1:return v=b.sent(),A=v.squeeze([1]),E=Hw(h,A,i),a!==n&&n.dispose(),e!==r&&r.dispose(),A.dispose(),h.dispose(),m.dispose(),v.dispose(),[2,E]}})})};function uL(a,e,t,n,r,i,s){i===void 0&&(i="NHWC"),oe(a.length===e.rank,function(){return"Length of inShape ("+a.length+") and rank of dy ("+e.rank+") must match"});var o=a,l=e,c=!1;e.rank===3&&(c=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),o=[1,a[0],a[1],a[2]]),oe(o.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+o.length+"."}),oe(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),oe(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var d=i==="NHWC"?o[3]:o[1],h=i==="NHWC"?l.shape[3]:l.shape[1];oe(d===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."}),oe(h===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+t.shape[3]+"."}),s!=null&&oe(dr(r),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var m=Iw(i),v=tp(o,t.shape,n,1,r,s,!1,m),A=Ae.runKernelFunc(function(E,b){var _=E.conv2dDerInput(l,t,v);return b([t,l]),_},{dy4D:l,filter:t},function(E,b){var _=b[0],R=b[1];return{dy4D:function(){return Fo(E,_,n,r,i,1,s)},filter:function(){return jw(E,R,_.shape,n,r,i,s)}}});return c?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}function PS(a){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(a),t=e[0],n=e[1],r=e[2];return t===1&&n===1&&r===1}function dL(a,e,t,n,r){oe(a.length===e.rank,function(){return"Length of inShape ("+a.length+") and rank of dy ("+e.rank+") must match"});var i=a,s=e,o=!1;e.rank===4&&(o=!0,s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,a[0],a[1],a[2],a[3]]);var l=i[4],c=s.shape[4];oe(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),oe(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),oe(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),oe(l===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+t.shape[3]+"."}),oe(c===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+t.shape[4]+"."});var d=Yx(i,t.shape,n,1,r),h=Ae.runKernelFunc(function(m){return m.conv3dDerInput(s,t,d)},{dy5D:s});return o?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var qY=me({conv1d_:function(a,e,t,n,r,i,s){r===void 0&&(r="NWC"),i===void 0&&(i=1);var o=ne(a,"x","conv1d"),l=ne(e,"filter","conv1d"),c=o,d=!1;o.rank===2&&(d=!0,c=o.as3D(1,o.shape[0],o.shape[1])),oe(c.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),oe(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),s!=null&&oe(dr(n),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."}),oe(c.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),oe(Ps(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),oe(r==="NWC",function(){return"Error in conv1d: got dataFormat of "+r+" but only NWC is currently supported."});var h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),m=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),v=Fo(m,h,[1,t],n,"NHWC",[1,i],s);return d?v.as2D(v.shape[2],v.shape[3]):v.as3D(v.shape[0],v.shape[2],v.shape[3])}}),Fo=me({conv2d_:function(a,e,t,n,r,i,s){r===void 0&&(r="NHWC"),i===void 0&&(i=[1,1]);var o=ne(a,"x","conv2d"),l=ne(e,"filter","conv2d"),c=o,d=!1;o.rank===3&&(d=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),oe(c.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),oe(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),s!=null&&oe(dr(n),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var h=r==="NHWC"?c.shape[3]:c.shape[1];oe(h===l.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+l.shape[2]+"."}),oe(Ps(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var m=Iw(r),v=tp(c.shape,l.shape,t,i,n,s,!1,m),A=[l,c],E=Ae.runKernelFunc(function(b,_){var R=b.conv2d(c,l,v);return _([l,c]),R},{x:c,filter:l},function(b,_){var R=_,T=R[0],M=R[1];return oe(o0(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return fL(M.shape,b,T,t,n,r)},filter:function(){return jw(M,b,T.shape,t,n,r)}}},"Conv2D",v,A);return d?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),XY=me({conv3d_:function(a,e,t,n,r,i){r===void 0&&(r="NDHWC"),i===void 0&&(i=[1,1,1]);var s=ne(a,"x","conv3d"),o=ne(e,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),oe(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),oe(o.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+o.rank+"."}),oe(l.shape[4]===o.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+o.shape[3]+"."}),oe(function(m,v){return PS(m)||PS(v)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),oe(r==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+r+" but only NDHWC is currently supported."});var d=Yx(l.shape,o.shape,t,i,n),h=Ae.runKernelFunc(function(m,v){var A=m.conv3d(l,o,d);return v([l,o]),A},{x:l,$filter:o},function(m,v){oe(PS(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var A=v[0],E=v[1];return{x:function(){return dL(A.shape,m,E,t,n)},$filter:function(){return function(b,_,R,T,M){var I=b;b.rank===4&&(I=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var P=_;P.rank===4&&(P=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),oe(I.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+I.shape+"."}),oe(P.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+P.shape+"."}),oe(R.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+R+"."}),oe(I.shape[4]===R[3],function(){return"Error in conv3dDerFilter: depth of input "+I.shape[4]+") must match input depth in filter ("+R[3]+"."}),oe(P.shape[4]===R[4],function(){return"Error in conv3dDerFilter: depth of dy ("+P.shape[4]+") must match output depth for filter ("+R[4]+")."});var B=Yx(I.shape,R,T,1,M);return Ae.runKernelFunc(function(F){return F.conv3dDerFilter(I,P,B)},{x5D:I,dy5D:P})}(A,m,E.shape,t,n)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),jw=me({conv2dDerFilter_:function(a,e,t,n,r,i,s){i===void 0&&(i="NHWC");var o=a;a.rank===3&&(o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var l=e;l.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),oe(o.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+o.shape+"."}),oe(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),oe(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var c=i==="NHWC"?o.shape[3]:o.shape[1],d=i==="NHWC"?l.shape[3]:l.shape[1];oe(c===t[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+t[2]+"."}),oe(d===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."}),s!=null&&oe(dr(r),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var h=Iw(i),m=tp(o.shape,t,n,1,r,s,!1,h);return Ae.runKernelFunc(function(v){return v.conv2dDerFilter(o,l,m)},{x4D:o,dy4D:l})}}),fL=me({conv2dDerInput_:uL}),l_=me({depthwiseConv2d_:function(a,e,t,n,r,i,s){i===void 0&&(i=[1,1]);var o=ne(a,"x","depthwiseConv2d"),l=ne(e,"filter","depthwiseConv2d"),c=o,d=!1;o.rank===3&&(d=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),oe(c.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),oe(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),oe(c.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),i==null&&(i=[1,1]),oe(Ps(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),s!=null&&oe(dr(n),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var h=tp(c.shape,l.shape,t,i,n,s,!0),m=[c,l],v=Ae.runKernelFunc(function(A,E){var b=A.depthwiseConv2D(c,l,h);return E([c,l]),b},{x:c,filter:l},function(A,E){oe(o0(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=E[0],_=E[1];return{x:function(){return hL(b.shape,A,_,h)},filter:function(){return pL(b,A,_.shape,h)}}},"DepthwiseConv2dNative",h,m);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),hL=me({depthwiseConv2dDerInput_:function(a,e,t,n){var r=e,i=!1;e.rank===3&&(i=!0,r=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=Ae.runKernelFunc(function(o){return o.depthwiseConv2DDerInput(r,t,n)},{dy4D:r});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),pL=me({depthwiseConv2dDerFilter_:function(a,e,t,n){var r=a;a.rank===3&&(r=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Ae.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(r,i,n)},{x4D:r,dy4D:i})}}),zw=me({separableConv2d_:function(a,e,t,n,r,i,s){i===void 0&&(i=[1,1]),s===void 0&&(s="NHWC");var o=ne(a,"x","separableConv2d"),l=ne(e,"depthwiseFilter","separableConv2d"),c=ne(t,"pointwiseFilter","separableConv2d"),d=o,h=!1;if(o.rank===3&&(h=!0,d=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");oe(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),oe(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),oe(c.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),oe(c.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),oe(c.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var m=l.shape[2],v=l.shape[3];oe(c.shape[2]===m*v,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*v+", but got "+c.shape[2]+"."});var A=l_(d,l,n,r,s,i),E=Fo(A,c,1,"valid",s);return h?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),JY=me({conv2dTranspose_:function(a,e,t,n,r,i){return uL(t,ne(a,"x","conv2dTranspose"),ne(e,"filter","conv2dTranspose"),n,r,"NHWC",i)}}),ZY=me({conv3dTranspose_:function(a,e,t,n,r){return dL(t,ne(a,"x","conv3dTranspose"),ne(e,"filter","conv3dTranspose"),n,r)}}),c_=me({matMul_:function(a,e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=!1);var i=ne(a,"a","matMul"),s=ne(e,"b","matMul");r=Ka(i,s),i=r[0],s=r[1];var o=t?i.shape[i.rank-2]:i.shape[i.rank-1],l=n?s.shape[s.rank-1]:s.shape[s.rank-2],c=t?i.shape[i.rank-1]:i.shape[i.rank-2],d=n?s.shape[s.rank-2]:s.shape[s.rank-1],h=i.shape.slice(0,-2),m=s.shape.slice(0,-2),v=Gt(h),A=Gt(m);oe(i.rank>=2&&s.rank>=2&&i.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+s.rank+"."}),oe(Zr(h,m),function(){return"Error in matMul: outer dimensions ("+h+") and ("+m+") of Tensors with shapes "+i.shape+" and "+s.shape+" must match."}),oe(o===l,function(){return"Error in matMul: inner shapes ("+o+") and ("+l+") of Tensors with shapes "+i.shape+" and "+s.shape+" and transposeA="+t+" and transposeB="+n+" must match."});var E=i.shape.slice(0,-2).concat([c,d]),b=t?i.as3D(v,o,c):i.as3D(v,c,o),_=n?s.as3D(A,d,l):s.as3D(A,l,d),R={transposeA:t,transposeB:n};return Ae.runKernelFunc(function(T,M){var I=T.batchMatMul(b,_,t,n);return M([b,_]),I},{a:b,b:_},function(T,M){var I=M,P=I[0],B=I[1];return t||n?!t&&n?{a:function(){return T.matMul(B,!1,!1)},b:function(){return T.matMul(P,!0,!1)}}:t&&!n?{a:function(){return B.matMul(T,!1,!0)},b:function(){return P.matMul(T,!1,!1)}}:{a:function(){return B.matMul(T,!0,!0)},b:function(){return T.matMul(P,!0,!0)}}:{a:function(){return T.matMul(B,!1,!0)},b:function(){return P.matMul(T,!0,!1)}}},"BatchMatMul",R).reshape(E)}}),QY=me({dot_:function(a,e){var t=ne(a,"t1","dot"),n=ne(e,"t2","dot");oe(!(t.rank!==1&&t.rank!==2||n.rank!==1&&n.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+n.rank+"."});var r=t.rank===1?t.size:t.shape[1],i=n.rank===1?n.size:n.shape[0];return oe(r===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+r+" and "+i+"."}),t.rank===1&&n.rank===1?t.as2D(1,-1).matMul(n.as2D(-1,1)).asScalar():t.rank===1&&n.rank===2?t.as2D(1,-1).matMul(n.as2D(n.shape[0],n.shape[1])).as1D():t.rank===2&&n.rank===1?t.matMul(n.as2D(-1,1)).as1D():t.matMul(n.as2D(n.shape[0],n.shape[1]))}}),$Y=me({outerProduct_:function(a,e){var t=ne(a,"v1","outerProduct"),n=ne(e,"v2","outerProduct");return oe(t.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+n.rank+"."}),t.as2D(-1,1).matMul(n.as2D(1,-1))}}),m1=me({reverse_:function(a,e){var t=ne(a,"x","reverse");if(t.rank===0)return t.clone();var n=zr(e,t.shape);return Ae.runKernelFunc(function(r){return r.reverse(t,n)},{$x:t},function(r){return{$x:function(){return r.reverse(n)}}}).reshapeAs(t)}}),eq=me({reverse1d_:function(a){var e=ne(a,"x","reverse");return oe(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),m1(e,0)}}),tq=me({reverse2d_:function(a,e){var t=ne(a,"x","reverse");return oe(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),m1(t,e)}}),nq=me({reverse3d_:function(a,e){var t=ne(a,"x","reverse");return oe(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),m1(t,e)}}),aq=me({reverse4d_:function(a,e){var t=ne(a,"x","reverse");return oe(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),m1(t,e)}});function mL(a,e,t,n,r,i){var s=ne(a,"x","maxPool"),o=s,l=!1;s.rank===3&&(l=!0,o=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),oe(o.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."}),oe(Ps(t,n),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+n+"'"}),i!=null&&oe(dr(r),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=jv(o.shape,e,t,n,r,i);if(c.filterWidth===1&&c.filterHeight===1&&Zr(c.inShape,c.outShape))return s.clone();var d=[o],h=Ae.runKernelFunc(function(m,v){var A=m.maxPool(o,c);return v([o,A]),A},{x:o},function(m,v){var A=v[0],E=v[1];return{x:function(){return function(b,_,R,T,M,I,P,B){var F=ne(b,"dy","maxPoolBackprop"),L=ne(_,"input","maxPoolBackprop"),U=ne(R,"output","maxPoolBackprop");oe(L.rank===F.rank,function(){return"Rank of input ("+L.rank+") does not match rank of dy ("+F.rank+")"}),oe(Ps(M,I),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+M+" and dilations '"+I+"'"}),oe(F.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+F.rank+"."}),oe(L.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+L.rank+"."});var j=jv(L.shape,T,M,I,P,B);return Ae.runKernelFunc(function(W){return W.maxPoolBackprop(F,L,U,j)},{$dy:F,$input:L})}(m,A,E,e,t,n,r)}}},"MaxPool",c,d);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function gL(a,e,t,n,r,i){var s=ne(a,"x","avgPool","float32");oe(Ps(t,n),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+n+"'"});var o=s,l=!1;s.rank===3&&(l=!0,o=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),oe(o.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."}),i!=null&&oe(dr(r),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=jv(o.shape,e,t,n,r,i);if(c.filterWidth===1&&c.filterHeight===1&&Zr(c.inShape,c.outShape))return s.clone();var d=Ae.runKernelFunc(function(h){return h.avgPool(o,c)},{x:o},function(h){return{x:function(){return function(m,v,A,E,b,_){var R=ne(m,"dy","avgPoolBackprop"),T=ne(v,"input","avgPoolBackprop");oe(T.rank===R.rank,function(){return"Rank of input ("+T.rank+") does not match rank of dy ("+R.rank+")"}),oe(Ps(E,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+b+"'"});var M=T,I=R,P=!1;T.rank===3&&(P=!0,M=T.as4D(1,T.shape[0],T.shape[1],T.shape[2]),I=R.as4D(1,R.shape[0],R.shape[1],R.shape[2])),oe(I.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."}),oe(M.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+M.rank+"."});var B=jv(M.shape,A,E,b,_),F=Ae.runKernelFunc(function(L){return L.avgPoolBackprop(I,M,B)},{dy4D:I,input4D:M});return P?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}(h,o,e,t,n,r)}}},"AvgPool",c);return d=d.cast(s.dtype),l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Jr=me({maxPool_:function(a,e,t,n,r){return mL(a,e,t,1,n,r)}}),g1=me({avgPool_:function(a,e,t,n,r){return gL(a,e,t,1,n,r)}}),rq=me({pool_:function(a,e,t,n,r,i){r==null&&(r=[1,1]),i==null&&(i=1),n===0&&(n="valid");var s=ne(a,"x","maxPool"),o=s,l=!1;s.rank===3&&(l=!0,o=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),oe(Ps(i,r),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+r+"'"});var c,d=jv(o.shape,e,i,r,n),h=[d.dilationHeight,d.dilationWidth];c=n==="same"?function(M,I){var P=M.map(function(L,U){return L+(L-1)*(I[U]-1)}).map(function(L){return L-1}),B=P.map(function(L){return Math.floor(L/2)}),F=P.map(function(L,U){return L-B[U]});return P.map(function(L,U){return[B[U],F[U]]})}([d.filterHeight,d.filterWidth],h):[[0,0],[0,0]];var m=h[0]===1&&h[1]===1,v=function(M,I,P){var B=P.map(function($){return $[0]}),F=P.map(function($){return $[1]}),L=M.concat(B,F),U=I.map(function($,re){return($-L[re]%$)%$}),j=F.map(function($,re){return $+U[re]}),W=I.map(function($,re){return[B[re],j[re]]}),Q=I.map(function($,re){return[0,U[re]]});return[W,Q]}([d.inHeight,d.inWidth],h,c),A=v[0],E=v[1],b=m?n:"valid",_=m?o:b5(o,h,A),R=(t==="avg"?function(){return gL(_,e,i,1,b)}:function(){return mL(_,e,i,1,b)})(),T=m?R:x5(R,h,E);return l?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),iq=me({maxPool3d_:function(a,e,t,n,r,i,s){i===void 0&&(i="NDHWC");var o=ne(a,"x","maxPool3d"),l=o,c=!1;o.rank===4&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),s==null&&(s=[1,1,1]),oe(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),oe(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),oe(Ps(t,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),r!=null&&oe(dr(n),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+r+" but got pad "+n+"."});var d=Kx(l.shape,e,t,s,n,r,i),h=Ae.runKernelFunc(function(m,v){var A=m.maxPool3d(l,d);return v([l,A]),A},{x:l},function(m,v){var A=v[0],E=v[1];return{x:function(){return function(b,_,R,T,M,I,P,B){var F=ne(b,"dy","maxPool3dBackprop"),L=ne(_,"input","maxPool3dBackprop"),U=ne(R,"output","maxPool3dBackprop"),j=F,W=L,Q=U,$=!1;L.rank===4&&($=!0,j=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3]),W=L.as5D(1,L.shape[0],L.shape[1],L.shape[2],L.shape[3]),Q=U.as5D(1,U.shape[0],U.shape[1],U.shape[2],U.shape[3])),oe(j.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+j.rank+"."}),oe(W.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+W.rank+"."}),oe(Q.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Q.rank+"."}),I==null&&(I=[1,1,1]),oe(Ps(M,I),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+M+" and dilations '"+I+"'"}),B!=null&&oe(dr(P),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+B+" but got pad "+P+"."});var re=Kx(W.shape,T,M,I,P,B),G=Ae.runKernelFunc(function(Y){return Y.maxPool3dBackprop(j,W,Q,re)},{dy5D:j,input5D:W});return $?G.as4D(G.shape[1],G.shape[2],G.shape[3],G.shape[4]):G}(m,A,E,e,t,s,n,r)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),sq=me({avgPool3d_:function(a,e,t,n,r,i,s){i===void 0&&(i="NDHWC");var o=ne(a,"x","avgPool3d","float32"),l=o,c=!1;o.rank===4&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),s==null&&(s=[1,1,1]),oe(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),oe(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),oe(Ps(t,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),r!=null&&oe(dr(n),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+r+" but got pad "+n+"."});var d=Kx(l.shape,e,t,s,n,r,i),h=Ae.runKernelFunc(function(m){return m.avgPool3d(l,d)},{x:l},function(m){return{x:function(){return function(v,A,E,b,_,R,T){var M=ne(v,"dy","avgPool3dBackprop"),I=ne(A,"input","avgPool3dBackprop"),P=M,B=I,F=!1;I.rank===4&&(F=!0,P=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3]),B=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3])),oe(P.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),oe(B.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+B.rank+"."}),_==null&&(_=[1,1,1]),oe(Ps(b,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+_+"'"}),T!=null&&oe(dr(R),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+T+" but got pad "+R+"."});var L=Kx(B.shape,E,b,_,R,T),U=Ae.runKernelFunc(function(j){return j.avgPool3dBackprop(P,B,L)},{dy5D:P,input5D:B});return F?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U}(m,l,e,t,s,n,r)}}});return h=h.cast(l.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Rc=me({slice_:function(a,e,t){var n,r,i=ne(a,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(n=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(l){oe(l!==-1,function(){return"slice() does not support negative begin indexing."})}),r=(r=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(l,c){return l>=0?l:(oe(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+c+"."}),i.shape[c]-n[c])}),OV(i,n,r);var s=i.shape,o={begin:n,size:r};return Ae.runKernelFunc(function(l){return l.slice(i,n,r)},{x:i},function(l){for(var c=[],d=0;d<l.rank;d++)c.push([n[d],s[d]-n[d]-r[d]]);return{x:function(){return l.pad(c)}}},"Slice",o)}}),oq=me({slice1d_:function(a,e,t){var n=ne(a,"x","slice1d");return oe(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),Rc(n,[e],[t])}}),lq=me({slice2d_:function(a,e,t){var n=ne(a,"x","slice2d");return oe(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),Rc(n,e,t)}}),vL=me({slice3d_:function(a,e,t){var n=ne(a,"x","slice3d");return oe(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),Rc(n,e,t)}}),cq=me({slice4d_:function(a,e,t){var n=ne(a,"x","slice4d");return oe(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),Rc(n,e,t)}});function yL(a,e,t,n,r){return e.rank<t.rank&&(e=e.reshape(Ls(e.shape,n))),a.rank<t.rank&&(a=a.reshape(Ls(a.shape,n))),{x:function(){var i=a.mul(t.equal(e).cast(a.dtype));return r==null?i:i.transpose(r)}}}var uq=me({all_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","all","bool"),r=zr(e,n.shape),i=r,s=Dc(i,n.rank);s!=null&&(n=n.transpose(s),i=Lc(i.length,n.rank));var o=Ae.runKernelFunc(function(c){return c.all(n,i)},{$x:n});if(t){var l=Ls(o.shape,r);return o.reshape(l)}return o}}),dq=me({any_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","any","bool"),r=zr(e,n.shape),i=r,s=Dc(i,n.rank);s!=null&&(n=n.transpose(s),i=Lc(i.length,n.rank));var o=Ae.runKernelFunc(function(c){return c.any(n,i)},{$x:n});if(t){var l=Ls(o.shape,r);return o.reshape(l)}return o}}),fq=me({argMax_:function(a,e){e===void 0&&(e=0);var t=ne(a,"x","argMax");e==null&&(e=0);var n=zr(e,t.shape),r=Dc(n,t.rank);r!=null&&(t=t.transpose(r),n=Lc(n.length,t.rank));var i={axis:n[0]},s=[t];return Ae.runKernelFunc(function(o,l){var c=o.argMax(t,n[0]);return l([t]),c},{x:t},function(o,l){var c=l[0];return{x:function(){return Xn(c)}}},"ArgMax",i,s)}}),hq=me({argMin_:function(a,e){e===void 0&&(e=0);var t=ne(a,"x","argMin");e==null&&(e=0);var n=zr(e,t.shape),r=Dc(n,t.rank);return r!=null&&(t=t.transpose(r),n=Lc(n.length,t.rank)),Ae.runKernelFunc(function(i,s){var o=i.argMin(t,n[0]);return s([t]),o},{$x:t},function(i,s){var o=s[0];return{$x:function(){return Xn(o)}}})}}),pq=me({logSumExp_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","logSumExp"),r=zr(e,n.shape),i=n.max(r,!0),s=n.sub(i).exp().sum(r).log(),o=i.reshape(s.shape).add(s);if(t){var l=Ls(o.shape,r);return o.reshape(l)}return o}}),u_=me({max_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","max"),r=n,i=zr(e,n.shape),s=i,o=Dc(s,n.rank);o!=null&&(n=n.transpose(o),s=Lc(s.length,n.rank));var l=[n],c=Ae.runKernelFunc(function(h,m){var v=h.max(n,s);return m([r,v]),v},{x:n},function(h,m){return yL(h,m[1],m[0],i,o)},"Max",{axes:s},l,[!0]);if(t){var d=Ls(c.shape,i);c=c.reshape(d)}return c}}),mq=me({mean_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","mean"),r=zr(e,n.shape),i=Gt(Ti(n.shape,r)[1]);return i_(function(s){var o=Tt(i);return{value:(o.dtype===s.dtype?s:s.cast(o.dtype)).div(o).sum(e,t),gradFunc:function(l){var c=s.shape.slice();return r.forEach(function(d){c[d]=1}),l.reshape(c).mul(M0(s.shape,"float32")).div(i)}}})(n)}}),gq=me({min_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","min"),r=n,i=zr(e,n.shape),s=i,o=Dc(s,n.rank);o!=null&&(n=n.transpose(o),s=Lc(s.length,n.rank));var l=[n],c=Ae.runKernelFunc(function(h,m){var v=h.min(n,s);return m([r,v]),v},{x:n},function(h,m){return yL(h,m[1],m[0],i,o)},"Min",{axes:s},l,[!0]);if(t){var d=Ls(c.shape,i);c=c.reshape(d)}return c}}),vq=me({moments_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=zr(e,(a=ne(a,"x","moments")).shape),r=a.mean(n,t),i=r.shape;t||(i=Ls(r.shape,n));var s=a.toFloat().sub(r.reshape(i)).square();return{mean:r,variance:s.mean(n,t)}}}),xL=me({sum_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","sum");n.dtype==="bool"&&(n=n.toInt());var r=zr(e,n.shape);return i_(function(i){var s=Dc(r,i.rank),o=r,l=i;s!=null&&(l=i.transpose(s),o=Lc(o.length,i.rank));var c=function(v){var A=i.shape.slice();return r.forEach(function(E){A[E]=1}),v.reshape(A).mul(M0(i.shape,"float32"))},d={axes:o},h=Ae.runKernelFunc(function(v){return v.sum(l,o)},{x:l},function(v){return{x:function(){return c(v)}}},"Sum",d);if(t){var m=Ls(h.shape,r);h=h.reshape(m)}return{value:h,gradFunc:c}})(n)}}),yq=me({prod_:function(a,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var n=ne(a,"x","prod");n.dtype==="bool"&&(n=n.toInt());var r=zr(e,n.shape),i=Dc(r,n.rank),s=r,o=n;i!=null&&(o=n.transpose(i),s=Lc(s.length,n.rank));var l=Ae.runKernelFunc(function(d){return d.prod(o,s)},{permutedX:o});if(t){var c=Ls(l.shape,r);l=l.reshape(c)}return l}}),AL=me({elu_:function(a){var e=ne(a,"x","elu");return Ae.runKernelFunc(function(t,n){var r=t.elu(e);return n([r]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){return Ae.runKernelFunc(function(i){return i.eluDer(t,r)},{dy:t,y:r})}}})}}),xq=me({leakyRelu_:function(a,e){e===void 0&&(e=.2);var t=ne(a,"x","leakyRelu");return kw(Tt(e).mul(t),t)}}),_L=me({prelu_:function(a,e){var t=ne(a,"x","prelu"),n=ne(e,"alpha","prelu");return Ae.runKernelFunc(function(r,i){var s=r.prelu(t,n);return i([t,n]),s},{x:t,alpha:n},function(r,i){var s=i[0],o=i[1],l=s.greater(0);return{x:function(){return Gh(l,r,r.mul(o))},alpha:function(){var c=Gh(l,Xn(r),r.mul(s)),d=Fr(o.shape,r.shape);return d.length>0&&(c=c.sum(d)),c.reshape(o.shape)}}},"Prelu")}}),Va=me({relu_:function(a){var e=ne(a,"x","relu");return e.dtype==="bool"?e.toInt():Ae.runKernelFunc(function(t,n){var r=t.relu(e);return n([e]),r},{x:e},function(t,n){var r=n[0];return{x:function(){return t.mulStrict(r.step().toFloat())}}},"Relu")}}),bL=me({relu6_:function(a){var e=ne(a,"x","relu6");return e.dtype==="bool"?e.toInt():Ae.runKernelFunc(function(t,n){var r=t.relu6(e);return n([e]),r},{x:e},function(t,n){var r=n[0],i=r.lessEqual(6).mul(r.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),Aq=me({selu_:function(a){var e=ne(a,"x","selu");return Ae.runKernelFunc(function(t,n){var r=t.selu(e);return n([e]),r},{$x:e},function(t,n){var r=n[0];return{$x:function(){var i=r.greater(Tt(0)),s=Tt(Uw),o=Tt(Bw),l=t.mul(o),c=t.mul(s).mul(r.toFloat().exp());return Gh(i,l,c)}}})}}),$d=me({transpose_:function(a,e){var t=ne(a,"x","transpose");if(e==null&&(e=t.shape.map(function(r,i){return i}).reverse()),oe(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(r){oe(r>=0&&r<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var n={perm:e};return Ae.runKernelFunc(function(r){return r.transpose(t,e)},{x:t},function(r){var i=Rw(e);return{x:function(){return r.transpose(i)}}},"Transpose",n)}}),_q=me({localResponseNormalization_:function(a,e,t,n,r){e===void 0&&(e=5),t===void 0&&(t=1),n===void 0&&(n=1),r===void 0&&(r=.5);var i=ne(a,"x","localResponseNormalization");oe(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),oe(dr(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var s=i,o=!1;i.rank===3&&(o=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var l=Ae.runKernelFunc(function(c,d){var h=c.localResponseNormalization4D(s,e,t,n,r);return d([s,h]),h},{x4D:s},function(c,d){var h=d[0],m=d[1];return{x4D:function(){return Ae.runKernelFunc(function(v){return v.LRNGrad(c,h,m,e,t,n,r)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),SL=me({norm_:function(a,e,t,n){e===void 0&&(e="euclidean"),t===void 0&&(t=null),n===void 0&&(n=!1);var r=function o(l,c,d){if(d===void 0&&(d=null),l.rank===0)return l.abs();if(l.rank!==1&&d===null)return o(l.reshape([-1]),c,d);if(l.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(c===1)return l.abs().sum(d);if(c===1/0)return l.abs().max(d);if(c===-1/0)return l.abs().min(d);if(c==="euclidean"||c===2)return l.abs().pow(Tt(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(d)&&d.length===2){if(c===1)return l.abs().sum(d[0]).max(d[1]-1);if(c===1/0)return l.abs().sum(d[1]).max(d[0]);if(c===-1/0)return l.abs().sum(d[1]).min(d[0]);if(c==="fro"||c==="euclidean")return l.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+d)}(a=ne(a,"x","norm"),e,t),i=r.shape;if(n){var s=zr(t,a.shape);i=Ls(r.shape,s)}return r.reshape(i)}}),bq=me({basicLSTMCell_:function(a,e,t,n,r,i){var s=ne(a,"forgetBias","basicLSTMCell"),o=ne(e,"lstmKernel","basicLSTMCell"),l=ne(t,"lstmBias","basicLSTMCell"),c=ne(n,"data","basicLSTMCell"),d=ne(r,"c","basicLSTMCell"),h=ne(i,"h","basicLSTMCell"),m=c.concat(h,1).matMul(o).add(l),v=m.shape[0],A=m.shape[1]/4,E=[v,A],b=m.slice([0,0],E),_=m.slice([0,A],E),R=m.slice([0,2*A],E),T=m.slice([0,3*A],E),M=b.sigmoid().mulStrict(_.tanh()).addStrict(d.mulStrict(s.add(R).sigmoid())),I=M.tanh().mulStrict(T.sigmoid());return[M,I]}}),Sq=me({multiRNNCell_:function(a,e,t,n){for(var r=ne(e,"data","multiRNNCell"),i=Hx(t,"c","multiRNNCell"),s=Hx(n,"h","multiRNNCell"),o=r,l=[],c=0;c<a.length;c++){var d=a[c](o,i[c],s[c]);l.push(d[0]),l.push(d[1]),o=d[1]}var h=[],m=[];for(c=0;c<l.length;c+=2)h.push(l[c]),m.push(l[c+1]);return[h,m]}}),Eq=me({movingAverage_:function(a,e,t,n,r){r===void 0&&(r=!0);var i=ne(a,"v","movingAverage"),s=ne(e,"x","movingAverage"),o=ne(t,"decay","movingAverage");bG(i,s),oe(Zr(i.shape,s.shape),function(){return"Shape mismatch in v and x"});var l=Tt(1),c=l.sub(o),d=s.sub(i).mul(c);if(r){oe(n!=null,function(){return"When using zeroDebias: true, step is required."});var h=ne(n,"step","movingAverage");d=d.div(l.sub(Jx(o,h)))}return i.add(d)}}),wq=me({stridedSlice_:function(a,e,t,n,r,i,s,o,l){if(r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),l===void 0&&(l=0),n==null&&(n=new Array(e.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var c=ne(a,"x","stridedSlice"),d=RN(o),h=c.shape.slice();d.forEach(function(b){e[b]=0,t[b]=1,h.splice(b,0,1)}),c=c.reshape(h);for(var m=0;m<c.rank;m++)e[m]=UV(r,e,n,c.shape,m),t[m]=BV(i,t,n,c.shape,m),n[m]=n[m]||1;var v=RN(l);v.forEach(function(b){t[b]=e[b]+1,n[b]=1});var A=Cw(e,t,n),E=A.filter(function(b,_){return v.indexOf(_)===-1});return n.every(function(b){return b===1})?Rc(c,e,A).reshape(E):Ae.runKernelFunc(function(b){return b.stridedSlice(c,e,t,n)},{$x:c}).reshape(E)}}),Rq=me({topk_:function(a,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var n=ne(a,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var r=n.shape[n.shape.length-1];if(e>r)throw new Error("'k' passed to topk() must be <= the last dimension ("+r+") but got "+e);var i=Ae.runKernelFunc(function(s){return s.topk(n,e,t)},{$x:n});return{values:i[0],indices:i[1]}}}),Mq=me({scatterND_:function(a,e,t){var n=ne(a,"indices","scatterND","int32"),r=ne(e,"updates","scatterND");return PV(r,n,t),Ae.runKernelFunc(function(i){return i.scatterND(n,r,t)},{indices:n,updates:r},null,"ScatterNd",{shape:t})}}),Gw=me({fft_:function(a){oe(a.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+a.dtype+"."});var e=a.shape[a.shape.length-1],t=a.size/e,n=a.as2D(t,e);return Ae.runKernelFunc(function(r){return r.fft(n)},{input:a}).reshape(a.shape)}}),Zx=me({ifft_:function(a){oe(a.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+a.dtype+"."});var e=a.shape[a.shape.length-1],t=a.size/e,n=a.as2D(t,e);return Ae.runKernelFunc(function(r){return r.ifft(n)},{input:a}).reshape(a.shape)}}),Vw=me({rfft_:function(a,e){oe(a.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+a.dtype});var t,n=a.shape[a.shape.length-1],r=a.size/n;if(e!=null&&e<n){var i=a.shape.map(function(_){return 0}),s=a.shape.map(function(_){return _});s[a.shape.length-1]=e,t=a.slice(i,s),n=e}else if(e!=null&&e>n){var o=a.shape.map(function(_){return _});o[a.shape.length-1]=e-n,t=a.concat(Ca(o),a.shape.length-1),n=e}else t=a;var l=t.zerosLike(),c=ui(t,l).as2D(r,n),d=Gw(c),h=Math.floor(n/2)+1,m=Po(d),v=yc(d),A=m.split([h,n-h],m.shape.length-1),E=v.split([h,n-h],v.shape.length-1),b=t.shape.slice();return b[t.shape.length-1]=h,ui(A[0],E[0]).reshape(b)}}),EL=me({irfft_:function(a){var e=a.shape[a.shape.length-1],t=a.size/e;if(e<=2){var n=a.as2D(t,e),r=Zx(n);return Po(r)}var i=[t,2*(e-1)],s=Po(a).as2D(t,e),o=yc(a).as2D(t,e),l=s.slice([0,1],[t,e-2]).reverse(1),c=o.slice([0,1],[t,e-2]).reverse(1).mul(Tt(-1)),d=s.concat(l,1),h=o.concat(c,1);return n=ui(d,h).as2D(i[0],i[1]),r=Zx(n),Po(r)}}),Tq=Object.freeze({fft:Gw,ifft:Zx,rfft:Vw,irfft:EL}),Nq=me({sparseToDense_:function(a,e,t,n){n===void 0&&(n=0);var r=ne(a,"sparseIndices","sparseToDense","int32"),i=ne(e,"sparseValues","sparseToDense"),s=ne(n,"defaultValue","sparseToDense",i.dtype);return function(o,l,c,d){if(o.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+o.dtype+".");if(o.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+o.shape+".");var h=o.rank>0?o.shape[0]:1,m=o.rank>1?o.shape[1]:1;if(c.length!==m)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+m+".");var v=l.size;if(l.rank!==0&&(l.rank!==1||v!==h))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+h+"]");if(l.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(r,i,t,s),Ae.runKernelFunc(function(o){return o.sparseToDense(r,i,t,s)},{$sparseIndices:r,$sparseValues:i,$defaultValue:s})}}),Cq=me({gatherND_:function(a,e){var t=ne(e,"indices","gatherND","int32"),n=ne(a,"x","gatherND");return Ae.runKernelFunc(function(r){return r.gatherND(n,t)},{x:n,indices:t},null,"GatherNd")}}),Iq=me({diag_:function(a){var e=ne(a,"x","diag").flatten(),t=a.shape.concat(a.shape);return Ae.runKernelFunc(function(n){return n.diag(e)},{$x:e}).reshape(t)}}),Dq=me({dropout_:function(a,e,t,n){var r=ne(a,"x","dropout");if(oe(r.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+r.dtype+" tensor instead."}),oe(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return a instanceof za?r.clone():r;var i=function(l,c){if(c==null)return l.shape.slice();if(Zr(l.shape,c))return c;if(l.shape.length===c.length){for(var d=[],h=0;h<l.shape.length;h++)c[h]==null&&l.shape[h]!=null?d.push(l.shape[h]):d.push(c[h]);return d}return c}(r,t),s=1-e,o=_5(i,0,1,"float32",n).add(s).floor().div(s);return r.mul(o)}});function wL(a,e,t){for(var n=1-a%2,r=new Float32Array(a),i=0;i<a;++i){var s=2*Math.PI*i/(a+n-1);r[i]=e-t*Math.cos(s)}return xr(r,"float32")}var Ww=me({hannWindow_:function(a){return wL(a,.5,.5)}}),RL=me({hammingWindow_:function(a){return wL(a,.54,.46)}}),Kw=me({frame_:function(a,e,t,n,r){n===void 0&&(n=!1),r===void 0&&(r=0);for(var i=0,s=[];i+e<=a.size;)s.push(Rc(a,i,e)),i+=t;if(n)for(;i<a.size;){var o=i+e-a.size,l=Pr([Rc(a,i,e-o),Sc([o],r)]);s.push(l),i+=t}return s.length===0?qd([],[0,e]):Pr(s).as2D(s.length,e)}}),ML=me({stft_:function(a,e,t,n,r){var i;r===void 0&&(r=Ww),n==null&&(i=e,n=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var s=Kw(a,e,t),o=Li(s,r(e)),l=[],c=0;c<s.shape[0];c++)l.push(Vw(o.slice([c,0],[1,e]),n));return Pr(l)}}),Lq=Object.freeze({hannWindow:Ww,hammingWindow:RL,frame:Kw,stft:ML}),Di,Pq=function(a,e,t){return t===void 0&&(t=1),Bt(this,void 0,void 0,function(){var n,r,i,s,o,l,c,d,h,m,v,A,E,b;return Ft(this,function(_){switch(_.label){case 0:return n=ne(a,"predictions","inTopK"),r=ne(e,"targets","inTopK"),oe(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+n.rank}),oe(n.rank-1===r.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+n.rank+" and targets rank "+r.rank}),oa(n.shape.slice(0,n.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=n.shape[n.shape.length-1],oe(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,n.data()];case 1:return s=_.sent(),[4,r.data()];case 2:for(o=_.sent(),l=[s.length/i,i],d=l[1],h=Fv("bool",c=l[0]),m=0;m<c;m++){for(v=m*d,A=s.subarray(v,v+d),E=[],b=0;b<A.length;b++)E.push({value:A[b],index:b});for(E.sort(function(R,T){return T.value-R.value}),h[m]=0,b=0;b<t;b++)if(E[b].index===o[m]){h[m]=1;break}}return a!==n&&n.dispose(),e!==r&&r.dispose(),[2,fi(h,r.shape,"bool")]}})})};(function(a){a[a.NONE=0]="NONE",a[a.MEAN=1]="MEAN",a[a.SUM=2]="SUM",a[a.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Di||(Di={}));var Oq=me({absoluteDifference_:function(a,e,t,n){n===void 0&&(n=Di.SUM_BY_NONZERO_WEIGHTS);var r=ne(a,"labels","absoluteDifference"),i=ne(e,"predictions","absoluteDifference"),s=null;t!=null&&(s=ne(t,"weights","absoluteDifference")),oa(r.shape,i.shape,"Error in absoluteDifference: ");var o=r.sub(i).abs();return Iu(o,s,n)}}),Iu=me({computeWeightedLoss_:function(a,e,t){t===void 0&&(t=Di.SUM_BY_NONZERO_WEIGHTS);var n=ne(a,"losses","computeWeightedLoss"),r=null;e!=null&&(r=ne(e,"weights","computeWeightedLoss"));var i=r==null?n:n.mul(r);if(t===Di.NONE)return i;if(t===Di.SUM)return i.sum();if(t===Di.MEAN){if(r==null)return i.mean();var s=n.size/r.size,o=i.sum().div(r.sum());return s>1?o.div(Tt(s)):o}if(t===Di.SUM_BY_NONZERO_WEIGHTS){if(r==null)return i.sum().div(Tt(n.size));var l=r.mul(M0(n.shape)).notEqual(Tt(0)).sum().toFloat();return i.sum().div(l)}throw Error("Unknown reduction: "+t)}}),Uq=me({cosineDistance_:function(a,e,t,n,r){r===void 0&&(r=Di.SUM_BY_NONZERO_WEIGHTS);var i=ne(a,"labels","cosineDistance"),s=ne(e,"predictions","cosineDistance"),o=null;n!=null&&(o=ne(n,"weights","cosineDistance")),oa(i.shape,s.shape,"Error in cosineDistance: ");var l=Tt(1).sub(i.mul(s).sum(t,!0));return Iu(l,o,r)}}),Bq=me({hingeLoss_:function(a,e,t,n){n===void 0&&(n=Di.SUM_BY_NONZERO_WEIGHTS);var r=ne(a,"labels","hingeLoss"),i=ne(e,"predictions","hingeLoss"),s=null;t!=null&&(s=ne(t,"weights","hingeLoss")),oa(r.shape,i.shape,"Error in hingeLoss: ");var o=Tt(1);r=Tt(2).mul(r).sub(o);var l=o.sub(r.mul(i)).relu();return Iu(l,s,n)}}),Fq=me({huberLoss_:function(a,e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=Di.SUM_BY_NONZERO_WEIGHTS);var i=ne(a,"labels","huberLoss"),s=ne(e,"predictions","huberLoss"),o=null;t!=null&&(o=ne(t,"weights","huberLoss")),oa(i.shape,s.shape,"Error in huberLoss: ");var l=Tt(n),c=s.sub(i).abs(),d=sL(c,l),h=c.sub(d),m=Tt(.5).mul(d.square()).add(l.mul(h));return Iu(m,o,r)}}),kq=me({logLoss_:function(a,e,t,n,r){n===void 0&&(n=1e-7),r===void 0&&(r=Di.SUM_BY_NONZERO_WEIGHTS);var i=ne(a,"labels","logLoss"),s=ne(e,"predictions","logLoss"),o=null;t!=null&&(o=ne(t,"weights","logLoss")),oa(i.shape,s.shape,"Error in logLoss: ");var l=Tt(1),c=Tt(n),d=i.mul(s.add(c).log()).neg().sub(l.sub(i).mul(l.sub(s).add(c).log()));return Iu(d,o,r)}}),Hq=me({meanSquaredError_:function(a,e,t,n){n===void 0&&(n=Di.SUM_BY_NONZERO_WEIGHTS);var r=ne(a,"labels","meanSquaredError"),i=ne(e,"predictions","meanSquaredError"),s=null;t!=null&&(s=ne(t,"weights","meanSquaredError")),oa(r.shape,i.shape,"Error in meanSquaredError: ");var o=r.squaredDifference(i);return Iu(o,s,n)}}),jq=me({sigmoidCrossEntropy_:function(a,e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=Di.SUM_BY_NONZERO_WEIGHTS);var i=ne(a,"multiClassLabels","sigmoidCrossEntropy"),s=ne(e,"logits","sigmoidCrossEntropy"),o=null;if(t!=null&&(o=ne(t,"weights","sigmoidCrossEntropy")),oa(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),n>0){var l=Tt(n),c=Tt(1),d=Tt(.5);i=i.mul(c.sub(l)).add(d.mul(l))}var h=function(m,v){var A=ne(m,"labels","sigmoidCrossEntropyWithLogits"),E=ne(v,"logits","sigmoidCrossEntropyWithLogits");oa(A.shape,E.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=E.relu(),_=E.mul(A),R=E.abs().neg().exp().log1p();return b.sub(_).add(R)}(i,s);return Iu(h,o,r)}}),zq=me({softmaxCrossEntropy_:function(a,e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=Di.SUM_BY_NONZERO_WEIGHTS);var i=ne(a,"onehotLabels","softmaxCrossEntropy"),s=ne(e,"logits","softmaxCrossEntropy"),o=null;if(t!=null&&(o=ne(t,"weights","softmaxCrossEntropy")),oa(i.shape,s.shape,"Error in softmaxCrossEntropy: "),n>0){var l=Tt(n),c=Tt(1),d=Tt(i.shape[1]);i=i.mul(c.sub(l)).add(l.div(d))}var h=function(m,v,A){if(A===void 0&&(A=-1),A===-1&&(A=v.rank-1),A!==v.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+v.rank+" and dim was "+A);return i_(function(E,b,_){var R=b.logSumExp([A],!0),T=b.toFloat().sub(R);return _([E,T]),{value:T.mul(E).neg().sum([A]),gradFunc:function(M,I){var P=I[0],B=I[1],F=Ls(M.shape,[A]);return[M.reshape(F).mul(P.toFloat().sub(B.exp())),M.reshape(F).mul(B.exp().sub(P.toFloat()))]}}})(m,v)}(i,s);return Iu(h,o,r)}}),Gq=Object.freeze({get Reduction(){return Di},absoluteDifference:Oq,computeWeightedLoss:Iu,cosineDistance:Uq,hingeLoss:Bq,huberLoss:Fq,logLoss:kq,meanSquaredError:Hq,sigmoidCrossEntropy:jq,softmaxCrossEntropy:zq});function qN(a,e){return e===void 0&&(e=!1),Ae.tidy(function(){if(a.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+a.shape.length+"D Tensor.");for(var t=a.shape[0],n=a.shape[1],r=A5(t),i=a.clone(),s=qd([[1]],[1,1]),o=s.clone(),l=t>=n?n:t,c=function(h){var m,v=i,A=o,E=r;m=Ae.tidy(function(){var b=i.slice([h,h],[t-h,1]),_=b.norm(),R=i.slice([h,h],[1,1]),T=qd([[-1]]).where(R.greater(0),qd([[1]])),M=R.sub(T.mul(_)),I=b.div(M);o=I.shape[0]===1?s.clone():s.concat(I.slice([1,0],[I.shape[0]-1,I.shape[1]]),0);var P=T.matMul(M).div(_).neg(),B=i.slice([h,0],[t-h,n]),F=P.mul(o);if(h===0)i=B.sub(F.matMul(o.transpose().matMul(B)));else{var L=B.sub(F.matMul(o.transpose().matMul(B)));i=i.slice([0,0],[h,n]).concat(L,0)}var U=r.slice([0,h],[t,r.shape[1]-h]);if(h===0)r=U.sub(U.matMul(o).matMul(F.transpose()));else{var j=U.sub(U.matMul(o).matMul(F.transpose()));r=r.slice([0,0],[t,h]).concat(j,1)}return[o,i,r]}),o=m[0],i=m[1],r=m[2],Ds([v,A,E])},d=0;d<l;++d)c(d);return!e&&t>n&&(r=r.slice([0,0],[t,n]),i=i.slice([0,0],[n,n])),[r,i]})}var Vq=me({bandPart_:function(a,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var n=ne(a,"a","bandPart");if(n.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+n.rank+".");var r=n.shape,i=n.shape.slice(-2),s=i[0],o=i[1];if(!(e<=s))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+s+").");if(!(t<=o))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+o+").");e<0&&(e=s),t<0&&(t=o);var l=jx(0,s,1,"int32").reshape([-1,1]),c=jx(0,o,1,"int32"),d=kr(l,c),h=o_(d.lessEqual(Tt(+e,"int32")),d.greaterEqual(Tt(-t,"int32"))),m=Ca([s,o],n.dtype);return io(Or(n.reshape([-1,s,o])).map(function(v){return Gh(h,v,m)})).reshape(r)}}),Wq=me({gramSchmidt_:function(a){var e;if(Array.isArray(a)){e=!1,oe(a!=null&&a.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=a[0].shape[0],n=function(l){oe(a[l].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+a[l].shape[0]+" vs. "+t+")"})},r=1;r<a.length;++r)n(r)}else e=!0,a=Tw(a,a.shape[0],0).map(function(l){return S5(l,[0])});oe(a.length<=a[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+a.length+") exceeds number of dimensions ("+a[0].shape[0]+")."});var i=[],s=a,o=function(l){i.push(Ae.tidy(function(){var c=s[l];if(l>0)for(var d=0;d<l;++d){var h=xL(i[d].mulStrict(c)).mul(i[d]);c=c.sub(h)}return c.div(SL(c,"euclidean"))}))};for(r=0;r<a.length;++r)o(r);return e?io(i,0):i}}),Kq=me({qr_:function(a,e){if(e===void 0&&(e=!1),a.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+a.rank);if(a.rank===2)return qN(a,e);var t=a.shape.slice(0,a.shape.length-2).reduce(function(s,o){return s*o}),n=Or(a.reshape([t,a.shape[a.shape.length-2],a.shape[a.shape.length-1]]),0),r=[],i=[];return n.forEach(function(s){var o=qN(s,e),l=o[0],c=o[1];r.push(l),i.push(c)}),[io(r,0).reshape(a.shape),io(i,0).reshape(a.shape)]}}),Yq=Object.freeze({bandPart:Vq,gramSchmidt:Wq,qr:Kq});function d_(a,e,t,n,r,i){n==null&&(n=.5),r==null&&(r=Number.NEGATIVE_INFINITY),i==null&&(i=0);var s=a.shape[0];return t=Math.min(t,s),oe(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),oe(a.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+a.rank+"'"}),oe(a.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+a.shape[1]}),oe(e.rank===1,function(){return"scores must be a 1D tensor"}),oe(e.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+e.shape[0]}),oe(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:n,scoreThreshold:r,softNmsSigma:i}}var qq=me({resizeBilinear_:function(a,e,t){t===void 0&&(t=!1);var n=ne(a,"images","resizeBilinear");oe(n.rank===3||n.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+n.rank+"."}),oe(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var r=n,i=!1;n.rank===3&&(i=!0,r=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var s=e[0],o=e[1],l=Ae.runKernelFunc(function(c,d){return d([r]),c.resizeBilinear(r,s,o,t)},{x:r},function(c,d){return{x:function(){return Ae.runKernelFunc(function(h){return h.resizeBilinearBackprop(c,d[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:s,newWidth:o});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Xq=me({resizeNearestNeighbor_:function(a,e,t){t===void 0&&(t=!1);var n=ne(a,"images","resizeNearestNeighbor");oe(n.rank===3||n.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+n.rank+"."}),oe(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),oe(n.dtype==="float32"||n.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var r=n,i=!1;n.rank===3&&(i=!0,r=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var s=e[0],o=e[1],l=Ae.runKernelFunc(function(c,d){return d([r]),c.resizeNearestNeighbor(r,s,o,t)},{batchImages:r},function(c,d){return{batchImages:function(){return Ae.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(c,d[0],t)},{})}}});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Jq=me({nonMaxSuppression_:function(a,e,t,n,r){n===void 0&&(n=.5),r===void 0&&(r=Number.NEGATIVE_INFINITY);var i=ne(a,"boxes","nonMaxSuppression"),s=ne(e,"scores","nonMaxSuppression"),o=d_(i,s,t,n,r);t=o.maxOutputSize,n=o.iouThreshold,r=o.scoreThreshold;var l={maxOutputSize:t,iouThreshold:n,scoreThreshold:r};return Ae.runKernelFunc(function(c){return c.nonMaxSuppression(i,s,t,n,r)},{boxes:i,scores:s},null,"NonMaxSuppressionV3",l)}}),Zq=function(a,e,t,n,r){return n===void 0&&(n=.5),r===void 0&&(r=Number.NEGATIVE_INFINITY),Bt(this,void 0,void 0,function(){var i,s,o,l,c,d,h;return Ft(this,function(m){switch(m.label){case 0:return i=ne(a,"boxes","nonMaxSuppressionAsync"),s=ne(e,"scores","nonMaxSuppressionAsync"),o=d_(i,s,t,n,r),t=o.maxOutputSize,n=o.iouThreshold,r=o.scoreThreshold,[4,Promise.all([i.data(),s.data()])];case 1:return l=m.sent(),c=l[0],d=l[1],h=Dw(c,d,t,n,r),i!==a&&i.dispose(),s!==e&&s.dispose(),[2,h]}})})},Qq=me({nonMaxSuppressionWithScore_:function(a,e,t,n,r,i){n===void 0&&(n=.5),r===void 0&&(r=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var s=ne(a,"boxes","nonMaxSuppression"),o=ne(e,"scores","nonMaxSuppression"),l=d_(s,o,t,n,r,i),c={maxOutputSize:t=l.maxOutputSize,iouThreshold:n=l.iouThreshold,scoreThreshold:r=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},d=Ae.runKernel("NonMaxSuppressionV5",{boxes:s,scores:o},c);return{selectedIndices:d[0],selectedScores:d[1]}}}),$q=function(a,e,t,n,r,i){return n===void 0&&(n=.5),r===void 0&&(r=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Bt(this,void 0,void 0,function(){var s,o,l,c,d,h,m;return Ft(this,function(v){switch(v.label){case 0:return s=ne(a,"boxes","nonMaxSuppressionAsync"),o=ne(e,"scores","nonMaxSuppressionAsync"),l=d_(s,o,t,n,r,i),t=l.maxOutputSize,n=l.iouThreshold,r=l.scoreThreshold,i=l.softNmsSigma,[4,Promise.all([s.data(),o.data()])];case 1:return c=v.sent(),d=c[0],h=c[1],m=Lw(d,h,t,n,r,i),s!==a&&s.dispose(),o!==e&&o.dispose(),[2,m]}})})},eX=me({cropAndResize_:function(a,e,t,n,r,i){var s=ne(a,"image","cropAndResize"),o=ne(e,"boxes","cropAndResize","float32"),l=ne(t,"boxInd","cropAndResize","int32");r=r||"bilinear",i=i||0;var c=o.shape[0];return oe(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),oe(o.rank===2&&o.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+o.shape+"."}),oe(l.rank===1&&l.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+o.shape+"."}),oe(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+n.length+"."}),oe(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),oe(r==="bilinear"||r==="nearest",function(){return"method must be bilinear or nearest, but was "+r}),Ae.runKernelFunc(function(d,h){return d.cropAndResize(s,o,l,n,r,i)},{images:s,boxes:o,boxInd:l},null,"CropAndResize",{method:r,extrapolationValue:i,cropSize:n})}}),Yw=Object.freeze({resizeBilinear:qq,resizeNearestNeighbor:Xq,nonMaxSuppression:Jq,nonMaxSuppressionAsync:Zq,nonMaxSuppressionWithScore:Qq,nonMaxSuppressionWithScoreAsync:$q,cropAndResize:eX}),qw=function(a,e){return!(a>0)||e==="linear"},Xw=function(a,e,t){if(t==null||t==="linear")return a;if(t==="relu")return a.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},Jw=function(a,e){var t=e,n=Fr(a.shape,e.shape);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)},Zw=function(a,e,t){if(e==="linear")return a;if(e==="relu")return Va(a);if(e==="elu")return AL(a);if(e==="relu6")return bL(a);if(e==="prelu")return _L(a,t);throw new Error("Unknown fused activation "+e+".")},tX=me({fusedMatMul_:function(a){var e,t=a.a,n=a.b,r=a.transposeA,i=r!==void 0&&r,s=a.transposeB,o=s!==void 0&&s,l=a.bias,c=a.activation,d=c===void 0?"linear":c,h=a.preluActivationWeights;if(qw(Ae.state.gradientDepth,d)===!1){var m=c_(t,n,i,o);return l!=null&&(m=Un(m,l)),Zw(m,d,h)}var v=ne(t,"a","fused matMul"),A=ne(n,"b","fused matMul");e=Ka(v,A),v=e[0],A=e[1];var E=i?v.shape[v.rank-2]:v.shape[v.rank-1],b=o?A.shape[A.rank-1]:A.shape[A.rank-2],_=i?v.shape[v.rank-1]:v.shape[v.rank-2],R=o?A.shape[A.rank-2]:A.shape[A.rank-1],T=v.shape.slice(0,-2),M=A.shape.slice(0,-2),I=Gt(T),P=Gt(M);oe(v.rank>=2&&A.rank>=2&&v.rank===A.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+v.rank+" and "+A.rank+"."}),oe(Zr(T,M),function(){return"Error in fused matMul: outer dimensions ("+T+") and ("+M+") of Tensors with shapes "+v.shape+" and "+A.shape+" must match."}),oe(E===b,function(){return"Error in fused matMul: inner shapes ("+E+") and ("+b+") of Tensors with shapes "+v.shape+" and "+A.shape+" and transposeA="+i+" and transposeB="+o+" must match."});var B,F,L=v.shape.slice(0,-2).concat([_,R]),U=i?v.as3D(I,E,_):v.as3D(I,_,E),j=o?A.as3D(P,R,b):A.as3D(P,b,R);l!=null&&Hn(L,(B=Ka(B=ne(l,"bias","fused matMul"),v)[0]).shape),h!=null&&(F=ne(h,"prelu weights","fused matMul"));var W={a:U,b:j};l!=null&&(W.bias=B),h!=null&&(W.preluActivationWeights=F);var Q=[U,j];return Ae.runKernelFunc(function($,re){var G=$.fusedBatchMatMul({a:U,b:j,transposeA:i,transposeB:o,bias:B,activation:d,preluActivationWeights:F});return re([U,j,G]),G},W,function($,re){var G=re[0],Y=re[1],K=re[2],X=Xw($,K,d),z={};return l!=null&&(z={bias:function(){return Jw(B,X)}}),Object.assign(i||o?!i&&o?{a:function(){return X.matMul(Y,!1,!1)},b:function(){return X.matMul(G,!0,!1)}}:i&&!o?{a:function(){return Y.matMul(X,!1,!0)},b:function(){return G.matMul(X,!1,!1)}}:{a:function(){return Y.matMul(X,!0,!0)},b:function(){return X.matMul(G,!0,!0)}}:{a:function(){return X.matMul(Y,!1,!0)},b:function(){return G.matMul(X,!0,!1)}},z)},"_FusedMatMul",{transposeA:i,transposeB:o,activation:d},Q,[!0]).reshape(L)}}),nX=me({fusedConv2d_:function(a){var e=a.x,t=a.filter,n=a.strides,r=a.pad,i=a.dataFormat,s=i===void 0?"NHWC":i,o=a.dilations,l=o===void 0?[1,1]:o,c=a.dimRoundingMode,d=a.bias,h=a.activation,m=h===void 0?"linear":h,v=a.preluActivationWeights;if(m=m||"linear",qw(Ae.state.gradientDepth,m)===!1){var A=Fo(e,t,n,r,s,l,c);return d!=null&&(A=Un(A,d)),Zw(A,m,v)}var E=ne(e,"x","conv2d"),b=ne(t,"filter","conv2d"),_=E,R=!1;E.rank===3&&(R=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),oe(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),oe(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),c!=null&&oe(dr(r),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+r+"."}),oe(_.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),oe(Ps(n,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+l+"'"}),oe(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var T,M,I=tp(_.shape,b.shape,n,l,r,c);d!=null&&(T=Ka(T=ne(d,"bias","fused conv2d"),E)[0],Hn(I.outShape,T.shape)),v!=null&&(M=ne(v,"prelu weights","fused conv2d"));var P={x:_,filter:b};d!=null&&(P.bias=T),v!=null&&(P.preluActivationWeights=M);var B=[b,_],F=Ae.runKernelFunc(function(L,U){var j=L.fusedConv2d({input:_,filter:b,convInfo:I,bias:T,activation:m,preluActivationWeights:M});return U([b,_,j]),j},P,function(L,U){var j=U,W=j[0],Q=j[1],$=j[2],re=Xw(L,$,m);oe(o0(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var G={};return d!=null&&(G={bias:function(){return Jw(T,re)}}),Object.assign({x:function(){return fL(Q.shape,re,W,n,r)},filter:function(){return jw(Q,re,W.shape,n,r)}},G)},"FusedConv2D",{convInfo:I,activation:m},B,[!0]);return R?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}}),aX=me({fusedDepthwiseConv2d_:function(a){var e=a.x,t=a.filter,n=a.strides,r=a.pad,i=a.dataFormat,s=i===void 0?"NHWC":i,o=a.dilations,l=o===void 0?[1,1]:o,c=a.dimRoundingMode,d=a.bias,h=a.activation,m=h===void 0?"linear":h,v=a.preluActivationWeights;if(qw(Ae.state.gradientDepth,m)===!1){var A=l_(e,t,n,r,s,l,c);return d!=null&&(A=Un(A,d)),Zw(A,m,v)}var E=ne(e,"x","depthwiseConv2d"),b=ne(t,"filter","depthwiseConv2d"),_=E,R=!1;E.rank===3&&(R=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),oe(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),oe(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),oe(_.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),l==null&&(l=[1,1]),oe(Ps(n,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+l+"'"}),c!=null&&oe(dr(r),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+r+"."});var T,M,I=tp(_.shape,b.shape,n,l,r,c,!0);d!=null&&(T=Ka(T=ne(d,"bias","fused conv2d"),E)[0],Hn(I.outShape,T.shape)),v!=null&&(M=ne(v,"prelu weights","fused depthwiseConv2d"));var P={x:_,filter:b};d!=null&&(P.bias=T),v!=null&&(P.preluActivationWeights=M);var B=[b,_],F=Ae.runKernelFunc(function(L,U){var j=L.fusedDepthwiseConv2D({input:_,filter:b,convInfo:I,bias:T,activation:m,preluActivationWeights:M});return U([b,_,j]),j},P,function(L,U){oe(o0(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var j=U[0],W=U[1],Q=U[2],$=Xw(L,Q,m),re={};return d!=null&&(re={bias:function(){return Jw(T,$)}}),Object.assign({x:function(){return hL(W.shape,$,j,I)},filter:function(){return pL(W,$,j.shape,I)}},re)},"FusedDepthwiseConv2D",{convInfo:I,activation:m},B,[!0]);return R?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}}),rX=Object.freeze({matMul:tX,conv2d:nX,depthwiseConv2d:aX}),iX=Object.freeze({image:Yw,linalg:Yq,losses:Gq,spectral:Tq,fused:rX,signal:Lq,square:kK,squaredDifference:J5,conv1d:qY,conv2d:Fo,conv3d:XY,depthwiseConv2d:l_,separableConv2d:zw,conv2dTranspose:JY,conv3dTranspose:ZY,op:me,batchNormalization2d:mY,batchNormalization3d:gY,batchNormalization4d:vY,batchNormalization:yY,batchNorm:nL,batchNorm2d:xY,batchNorm3d:AY,batchNorm4d:_Y,booleanMaskAsync:YY,complex:ui,real:Po,imag:yc,concat:Pr,concat1d:iV,concat2d:sV,concat3d:oV,concat4d:lV,split:Tw,matMul:c_,dot:QY,outerProduct:$Y,reverse:m1,reverse1d:eq,reverse2d:tq,reverse3d:nq,reverse4d:aq,maxPool:Jr,avgPool:g1,pool:rq,maxPool3d:iq,avgPool3d:sq,slice:Rc,slice1d:oq,slice2d:lq,slice3d:vL,slice4d:cq,abs:HK,acos:jK,acosh:zK,asin:GK,asinh:VK,atan:WK,atanh:KK,ceil:YK,clipByValue:Fw,cos:qK,cosh:XK,erf:JK,exp:N3,expm1:ZK,floor:QK,log:$K,log1p:eY,logSigmoid:tY,neg:Xx,reciprocal:nY,round:aY,rsqrt:Z5,sigmoid:Q5,sign:rY,isNaN:iY,isInf:sY,isFinite:oY,sin:lY,sinh:cY,softplus:uY,sqrt:dY,step:fY,tan:hY,tanh:pY,all:uq,any:dq,argMax:fq,argMin:hq,logSumExp:pq,max:u_,mean:mq,min:gq,moments:vq,sum:xL,prod:yq,equal:oL,equalStrict:BY,greater:FY,greaterEqual:lL,greaterEqualStrict:kY,greaterStrict:HY,less:jY,lessEqual:zY,lessEqualStrict:GY,lessStrict:VY,notEqual:WY,notEqualStrict:KY,add:Un,addN:EY,addStrict:wY,atan2:RY,div:gl,divNoNan:MY,divStrict:TY,floorDiv:iL,maximum:kw,maximumStrict:NY,minimum:sL,minimumStrict:CY,mod:IY,modStrict:DY,mul:Li,mulStrict:LY,pow:Jx,powStrict:PY,squaredDifferenceStrict:OY,sub:kr,subStrict:UY,elu:AL,leakyRelu:xq,prelu:_L,relu:Va,relu6:bL,selu:Aq,logicalAnd:o_,logicalNot:bY,logicalOr:aL,logicalXor:SY,where:Gh,whereAsync:rL,buffer:xn,print:vV,batchToSpaceND:x5,broadcastTo:yV,cast:xV,clone:AV,cumsum:_V,depthToSpace:bV,expandDims:Lo,eye:A5,multinomial:SV,oneHot:w3,pad:ep,pad1d:EV,pad2d:wV,pad3d:RV,pad4d:MV,rand:TV,randomNormal:NV,randomGamma:CV,randomUniform:_5,reshape:xl,spaceToBatchND:b5,squeeze:S5,stack:io,tile:Ym,truncatedNormal:IV,unstack:Or,setdiff1dAsync:DV,fill:Sc,linspace:rV,ones:M0,range:jx,scalar:Tt,tensor:fi,tensor1d:xr,tensor2d:qd,tensor3d:Mw,tensor4d:ws,tensor5d:tV,tensor6d:nV,variable:aV,zeros:Ca,onesLike:y5,zerosLike:Xn,transpose:$d,softmax:Cu,logSoftmax:kV,localResponseNormalization:_q,norm:SL,gather:Hw,unsortedSegmentSum:cL,basicLSTMCell:bq,multiRNNCell:Sq,movingAverage:Eq,stridedSlice:wq,topk:Rq,scatterND:Mq,fft:Gw,ifft:Zx,rfft:Vw,irfft:EL,sparseToDense:Nq,gatherND:Cq,diag:Iq,dropout:Dq,hannWindow:Ww,hammingWindow:RL,frame:Kw,stft:ML,inTopKAsync:Pq});function it(a,e){Array.isArray(a)||(a=[a]),a.forEach(function(t){t!=null&&oe(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function OS(a,e,t,n){if(t==="linear")return a.linear(e);if(t==="relu")return a.relu(e);if(t==="elu")return a.elu(e);if(t==="relu6")return a.relu6(e);if(t==="prelu")return a.prelu(e,n);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var sX=function(a){function e(){var t=a.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new C5(t,Ae),t}return Rl(e,a),e.prototype.write=function(t,n,r){this.firstUse&&(this.firstUse=!1,qe().get("IS_NODE")&&kx(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:r}),i},e.prototype.move=function(t,n,r,i){this.data.set(t,{values:n,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var n=this.data.get(t),r=n.dtype,i=n.complexTensors;return r==="complex64"?T3(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var n=this.readSync(t.dataId),r=n;if(t.dtype==="string")try{r=n.map(function(i){return Ux(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xn(t.shape,t.dtype,r)},e.prototype.makeOutput=function(t,n,r){var i=this.write(t,n,r);return Ae.makeTensorFromDataId(i,n,r,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var n=this.data.get(t).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return Bt(this,void 0,void 0,function(){var n;return Ft(this,function(r){return n=gc(),t(),[2,{kernelMs:gc()-n}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,n){var r=this.makeOutput(null,t.shape,"complex64");return this.data.get(r.dataId).complexTensors={real:Ae.keep(t.clone()),imag:Ae.keep(n.clone())},r},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,n,r){if(it(t,"slice"),T5(t.shape,n,r)){var i=N5(n,t.strides),s=Gt(r);return fi(this.readSync(t.dataId).subarray(i,i+s),r,t.dtype)}for(var o=xn(r,t.dtype),l=this.bufferSync(t),c=0;c<o.size;++c){var d=o.indexToLoc(c).map(function(h,m){return h+n[m]});o.values[c]=l.get.apply(l,d)}return o.toTensor()},e.prototype.stridedSlice=function(t,n,r,i){it(t,"stridedSlice");var s=Cw(n,r,i);if(s.some(function(v){return v===0}))return fi([],s);for(var o=xn(s,t.dtype),l=this.bufferSync(t),c=0;c<o.size;c++){for(var d=o.indexToLoc(c),h=new Array(d.length),m=0;m<h.length;m++)h[m]=d[m]*i[m]+n[m];o.set.apply(o,[l.get.apply(l,h)].concat(d))}return o.toTensor()},e.prototype.diag=function(t){for(var n=this.readSync(t.dataId),r=xn([t.size,t.size],t.dtype),i=r.values,s=0;s<n.length;s++)i[s*t.size+s]=n[s];return r.toTensor()},e.prototype.unstack=function(t,n){for(var r=t.shape[n],i=new Array(t.rank-1),s=0,o=0;o<t.rank;o++)o!==n&&(i[s++]=t.shape[o]);var l=new Array(t.rank).fill(0),c=t.shape.slice();c[n]=1;var d=new Array(r);for(o=0;o<d.length;o++)l[n]=o,d[o]=this.slice(t,l,c).reshape(i);return d},e.prototype.reverse=function(t,n){it(t,"reverse");for(var r=xn(t.shape,t.dtype),i=this.bufferSync(t),s=function(l){var c=r.indexToLoc(l),d=c.slice();n.forEach(function(h){return d[h]=t.shape[h]-1-d[h]}),r.set.apply(r,[i.get.apply(i,d)].concat(c))},o=0;o<r.size;o++)s(o);return r.toTensor()},e.prototype.concat=function(t,n){var r=this;if(t[0].dtype==="complex64"){var i=t.map(function(v){return Po(v)}),s=t.map(function(v){return yc(v)});return ui(this.concat(i,n),this.concat(s,n))}var o=t.map(function(v){var A=Gt(v.shape.slice(n));return v.as2D(-1,A)}),l=s0(o.map(function(v){return v.shape}),1),c=xn(l,t[0].dtype).values;if(o[0].shape[0]===1){var d=0;o.forEach(function(v){c.set(r.readSync(v.dataId),d),d+=v.size})}else{var h=0;o.forEach(function(v){for(var A=r.readSync(v.dataId),E=0,b=0;b<v.shape[0];++b)for(var _=b*l[1]+h,R=0;R<v.shape[1];++R)c[_+R]=A[E++];h+=v.shape[1]})}var m=s0(t.map(function(v){return v.shape}),n);return fi(c,m,t[0].dtype)},e.prototype.neg=function(t){return it(t,"neg"),this.multiply(Tt(-1),t)},e.prototype.add=function(t,n){return t.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),n.cast("complex64"),function(r,i,s,o){return{real:r+s,imag:i+o}}):this.broadcastedBinaryOp(t,n,di(t.dtype,n.dtype),function(r,i){return r+i})},e.prototype.addN=function(t){var n=this;it(t,"addN");for(var r=t.map(function(d){return n.readSync(d.dataId)}),i=xn(t[0].shape,t[0].dtype),s=i.values,o=0;o<t.length;o++)for(var l=r[o],c=0;c<s.length;c++)s[c]+=l[c];return i.toTensor()},e.prototype.softmax=function(t,n){var r=zr([n],t.shape),i=this.max(t,r),s=Ls(i.shape,r),o=this.subtract(t,i.reshape(s)),l=this.exp(o),c=this.sum(l,r).reshape(s);return this.realDivide(l,c)},e.prototype.subtract=function(t,n){return t.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),n.cast("complex64"),function(r,i,s,o){return{real:r-s,imag:i-o}}):this.broadcastedBinaryOp(t,n,di(t.dtype,n.dtype),function(r,i){return r-i})},e.prototype.pow=function(t,n){return it([t,n],"pow"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){return Math.pow(r,i)})},e.prototype.batchMatMul=function(t,n,r,i){it([t,n],"matMul");for(var s=r?t.shape[1]:t.shape[2],o=r?t.shape[2]:t.shape[1],l=i?n.shape[1]:n.shape[2],c=t.shape[0],d=this.readSync(t.dataId),h=this.readSync(n.dataId),m=r?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],v=m[0],A=m[1],E=m[2],b=i?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],_=b[0],R=b[1],T=b[2],M=o*l,I=xn([c,o,l],t.dtype),P=I.values,B=this.blockSize,F=0;F<c;F++)for(var L=0;L<o;L+=B)for(var U=0;U<l;U+=B)for(var j=0;j<s;j+=B)for(var W=Math.min(L+B,o),Q=Math.min(U+B,l),$=Math.min(j+B,s),re=L;re<W;re++)for(var G=U;G<Q;G++){for(var Y=0,K=j;K<$;K++)Y+=d[F*v+re*A+K*E]*h[K*_+G*R+F*T];P[F*M+(re*l+G)]+=Y}return I.toTensor()},e.prototype.fusedBatchMatMul=function(t){var n=t.a,r=t.b,i=t.transposeA,s=t.transposeB,o=t.bias,l=t.activation,c=t.preluActivationWeights,d=this.batchMatMul(n,r,i,s);return o&&(d=this.add(d,o)),l&&(d=OS(this,d,l,c)),d},e.prototype.multiply=function(t,n){return t.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),n.cast("complex64"),function(r,i,s,o){return{real:r*s-i*o,imag:r*o+i*s}}):this.broadcastedBinaryOp(t,n,di(t.dtype,n.dtype),function(r,i){return r*i})},e.prototype.realDivide=function(t,n){return it([t,n],"realDivide"),this.broadcastedBinaryOp(t,n,"float32",function(r,i){return r/i})},e.prototype.floorDiv=function(t,n){return it([t,n],"floorDiv"),this.broadcastedBinaryOp(t,n,"int32",function(r,i){return Math.floor(r/i)})},e.prototype.sum=function(t,n){it(t,"sum"),Zs("sum",n,t.rank);for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,di(t.dtype,"int32")),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=0,A=0;A<l;++A)v+=d[m+A];c[h]=v}return o},e.prototype.prod=function(t,n){it(t,"sum");for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,di(t.dtype,"int32")),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=1,A=0;A<l;++A)v*=d[m+A];c[h]=v}return o},e.prototype.unsortedSegmentSum=function(t,n,r){it(t,"unsortedSegmentSum");for(var i=[],s=t.rank-n.rank,o=0;o<s;++o)n=n.expandDims(o+1);for(o=0;o<r;++o){var l=Tt(o,"int32"),c=oL(l,n).asType("float32").mul(t).sum(0);i.push(c)}return io(i)},e.prototype.argMin=function(t,n){it(t,"argMin");var r=[n];Zs("argMin",r,t.rank);for(var i=Ti(t.shape,r),s=i[0],o=i[1],l=Ca(s,"int32"),c=Gt(o),d=this.readSync(l.dataId),h=this.readSync(t.dataId),m=0;m<d.length;++m){for(var v=m*c,A=h[v],E=0,b=0;b<c;++b){var _=h[v+b];_<A&&(A=_,E=b)}d[m]=E}return l},e.prototype.argMax=function(t,n){it(t,"argMax");var r=[n];Zs("argMax",r,t.rank);for(var i=Ti(t.shape,r),s=i[0],o=i[1],l=Ca(s,"int32"),c=Gt(o),d=this.readSync(l.dataId),h=this.readSync(t.dataId),m=0;m<d.length;++m){for(var v=m*c,A=h[v],E=0,b=0;b<c;++b){var _=h[v+b];_>A&&(A=_,E=b)}d[m]=E}return l},e.prototype.cumsum=function(t,n,r,i){if(it(t,"cumsum"),n!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+n);for(var s=di(t.dtype,"int32"),o=Ca(t.shape,s),l=this.readSync(o.dataId),c=this.readSync(t.dataId),d=t.shape[t.rank-1],h=i?function(b,_){return b+d-_-1}:function(b,_){return b+_},m=0;m<c.length;m+=d)for(var v=0;v<d;v++){var A=h(m,v);if(v===0)l[A]=r?0:c[A];else{var E=h(m,v-1);l[A]=r?c[E]+l[E]:c[A]+l[E]}}return o},e.prototype.equal=function(t,n){return it([t,n],"equal"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r===i?1:0})},e.prototype.notEqual=function(t,n){return it([t,n],"notEqual"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r!==i?1:0})},e.prototype.less=function(t,n){return it([t,n],"less"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r<i?1:0})},e.prototype.lessEqual=function(t,n){return it([t,n],"lessEqual"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r<=i?1:0})},e.prototype.greater=function(t,n){return it([t,n],"greater"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r>i?1:0})},e.prototype.greaterEqual=function(t,n){return it([t,n],"greaterEqual"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r>=i?1:0})},e.prototype.logicalNot=function(t){it(t,"logicalNot");for(var n=this.readSync(t.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n[i]?0:1;return this.makeOutput(r,t.shape,"bool")},e.prototype.logicalAnd=function(t,n){return it([t,n],"logicalAnd"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r&&i})},e.prototype.logicalOr=function(t,n){return it([t,n],"logicalOr"),this.broadcastedBinaryOp(t,n,"bool",function(r,i){return r||i})},e.prototype.select=function(t,n,r){it([t,n,r],"select");for(var i=this.readSync(t.dataId),s=this.readSync(n.dataId),o=this.readSync(r.dataId),l=Ca(n.shape,di(n.dtype,r.dtype)),c=this.readSync(l.dataId),d=0,h=t.rank===0||t.rank>1||n.rank===1?1:Gt(n.shape.slice(1)),m=0;m<i.length;m++)for(var v=0;v<h;v++)i[m]===1?c[d++]=s[m]:c[d++]=o[m];return l},e.prototype.where=function(t){it([t],"where");var n=this.readSync(t.dataId);return Pw(t.shape,n)},e.prototype.topk=function(t,n,r){return it(t,"topk"),F5(this.readSync(t.dataId),t.shape,t.dtype,n)},e.prototype.min=function(t,n){it(t,"min"),Zs("min",n,t.rank);for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,t.dtype),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=d[m],A=0;A<l;++A){var E=d[m+A];E<v&&(v=E)}c[h]=v}return o},e.prototype.minimum=function(t,n){return it([t,n],"minimum"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){return Math.min(r,i)})},e.prototype.mod=function(t,n){return it([t,n],"mod"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){var s=r%i;return r<0&&i<0||r>=0&&i>=0?s:(s+i)%i})},e.prototype.max=function(t,n){it(t,"max"),Zs("max",n,t.rank);for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,t.dtype),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=d[m],A=0;A<l;++A){var E=d[m+A];E>v&&(v=E)}c[h]=v}return o},e.prototype.maximum=function(t,n){return it([t,n],"maximum"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){return Math.max(r,i)})},e.prototype.all=function(t,n){it(t,"all"),Zs("all",n,t.rank);for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,t.dtype),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=d[m],A=0;A<l;++A){var E=d[m+A];v=v&&E}c[h]=v}return o},e.prototype.any=function(t,n){it(t,"any"),Zs("any",n,t.rank);for(var r=Ti(t.shape,n),i=r[0],s=r[1],o=Ca(i,t.dtype),l=Gt(s),c=this.readSync(o.dataId),d=this.readSync(t.dataId),h=0;h<c.length;++h){for(var m=h*l,v=d[m],A=0;A<l;++A){var E=d[m+A];v=v||E}c[h]=v}return o},e.prototype.squaredDifference=function(t,n){return it([t,n],"squaredDifference"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){var s=r-i;return s*s})},e.prototype.ceil=function(t){it(t,"ceil");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.ceil(n[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.floor=function(t){it(t,"floor");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.floor(n[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.sign=function(t){it(t,"x");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)n[i]<0?r[i]=-1:n[i]>0?r[i]=1:r[i]=0;return this.makeOutput(r,t.shape,"float32")},e.prototype.isNaN=function(t){it(t,"x");for(var n=this.readSync(t.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isNaN(n[i])&&(r[i]=1);return this.makeOutput(r,t.shape,"bool")},e.prototype.isInf=function(t){it(t,"x");for(var n=this.readSync(t.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Math.abs(n[i])===1/0&&(r[i]=1);return this.makeOutput(r,t.shape,"bool")},e.prototype.isFinite=function(t){it(t,"x");for(var n=this.readSync(t.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isFinite(n[i])&&(r[i]=1);return this.makeOutput(r,t.shape,"bool")},e.prototype.round=function(t){it(t,"round");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var s=Math.floor(n[i]);n[i]-s<.5?r[i]=Math.floor(n[i]):n[i]-s>.5?r[i]=Math.ceil(n[i]):r[i]=s%2==0?s:s+1}return this.makeOutput(r,t.shape,"float32")},e.prototype.exp=function(t){it(t,"exp");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.exp(n[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.expm1=function(t){it(t,"expm1");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.expm1(n[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.log=function(t){it(t,"log");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var s=n[i];r[i]=Math.log(s)}return this.makeOutput(r,t.shape,"float32")},e.prototype.log1p=function(t){it(t,"log1p");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var s=n[i];r[i]=Math.log1p(s)}return this.makeOutput(r,t.shape,"float32")},e.prototype.sqrt=function(t){it(t,"sqrt");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var s=n[i];r[i]=Math.sqrt(s)}return this.makeOutput(r,t.shape,"float32")},e.prototype.rsqrt=function(t){it(t,"rsqrt");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var s=n[i];r[i]=1/Math.sqrt(s)}return this.makeOutput(r,t.shape,"float32")},e.prototype.reciprocal=function(t){it(t,"reciprocal");for(var n=this.readSync(t.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=1/n[i];return this.makeOutput(r,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){it(t,"relu");for(var n=Ca(t.shape,t.dtype),r=this.readSync(n.dataId),i=this.readSync(t.dataId),s=0;s<i.length;++s)r[s]=Math.max(0,i[s]);return n},e.prototype.relu6=function(t){it(t,"relu");for(var n=Ca(t.shape,t.dtype),r=this.readSync(n.dataId),i=this.readSync(t.dataId),s=0;s<i.length;++s)r[s]=Math.min(Math.max(0,i[s]),6);return n},e.prototype.prelu=function(t,n){return it([t,n],"prelu"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){return r<0?i*r:r})},e.prototype.elu=function(t){it(t,"elu");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var s=r[i];n[i]=s>=0?s:Math.exp(s)-1}return this.makeOutput(n,t.shape,"float32")},e.prototype.eluDer=function(t,n){it([t,n],"eluDer");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),s=this.readSync(t.dataId),o=0;o<i.length;++o){var l=i[o];r[o]=l>=1?s[o]:s[o]*(l+1)}return this.makeOutput(r,n.shape,"float32")},e.prototype.selu=function(t){it(t,"selu");for(var n=Uw,r=Bw,i=new Float32Array(t.size),s=this.readSync(t.dataId),o=0;o<s.length;++o){var l=s[o];i[o]=l>=0?r*l:n*(Math.exp(l)-1)}return this.makeOutput(i,t.shape,"float32")},e.prototype.clip=function(t,n,r){it(t,"clip");for(var i=new Float32Array(t.size),s=this.readSync(t.dataId),o=0;o<s.length;++o){var l=s[o];i[o]=l>r?r:l<n?n:l}return this.makeOutput(i,t.shape,"float32")},e.prototype.abs=function(t){for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.abs(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<t.size;++i){var s=r[2*i],o=r[2*i+1];n[i]=Math.hypot(s,o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.int=function(t){it(t,"int");for(var n=new Int32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=r[i];return this.makeOutput(n,t.shape,"int32")},e.prototype.sigmoid=function(t){it(t,"sigmoid");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=1/(1+Math.exp(-r[i]));return this.makeOutput(n,t.shape,"float32")},e.prototype.softplus=function(t){it(t,"softplus");for(var n=Math.log(11920928955078125e-23)+2,r=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var o=i[s]>-n,l=i[s]<n,c=Math.exp(i[s]),d=void 0;d=l?c:o?i[s]:Math.log(1+c),r[s]=d}return this.makeOutput(r,t.shape,"float32")},e.prototype.sin=function(t){it(t,"sin");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.sin(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.cos=function(t){it(t,"cos");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.cos(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.tan=function(t){it(t,"tan");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.tan(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.asin=function(t){it(t,"asin");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.asin(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.acos=function(t){it(t,"acos");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.acos(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.atan=function(t){it(t,"atan");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.atan(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.atan2=function(t,n){return it([t,n],"atan2"),this.broadcastedBinaryOp(t,n,t.dtype,function(r,i){return Math.atan2(r,i)})},e.prototype.sinh=function(t){it(t,"sinh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.sinh(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.cosh=function(t){it(t,"cosh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.cosh(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.tanh=function(t){it(t,"tanh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=lG(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.asinh=function(t){it(t,"asinh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.asinh(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.acosh=function(t){it(t,"acosh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.acosh(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.atanh=function(t){it(t,"atanh");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.atanh(r[i]);return this.makeOutput(n,t.shape,"float32")},e.prototype.erf=function(t){it(t,"erf");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var s=Math.sign(r[i]),o=Math.abs(r[i]),l=1/(1+.3275911*o);n[i]=s*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-o*o))}return this.makeOutput(n,t.shape,"float32")},e.prototype.step=function(t,n){n===void 0&&(n=0),it(t,"step");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var o=i[s];isNaN(o)?r[s]=NaN:r[s]=o>0?1:n}return this.makeOutput(r,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var n=t.input,r=t.filter,i=t.convInfo,s=t.bias,o=t.activation,l=t.preluActivationWeights,c=this.conv2d(n,r,i);return s&&(c=this.add(c,s)),o&&(c=OS(this,c,o,l)),c},e.prototype.conv2d=function(t,n,r){it([t,n],"conv2d");for(var i=r.filterHeight,s=r.filterWidth,o=r.dilationHeight,l=r.dilationWidth,c=r.padInfo.left,d=r.padInfo.top,h=r.dataFormat==="channelsLast",m=xn(r.outShape,t.dtype),v=t.strides[0],A=h?t.strides[1]:t.strides[2],E=h?t.strides[2]:1,b=h?1:t.strides[1],_=m.strides[0],R=h?m.strides[1]:m.strides[2],T=h?m.strides[2]:1,M=h?1:m.strides[1],I=this.readSync(t.dataId),P=this.readSync(n.dataId),B=m.values,F=0;F<r.batchSize;++F)for(var L=F*v,U=F*_,j=0;j<r.outHeight;++j)for(var W=U+j*R,Q=j*r.strideHeight-d,$=0;$<i;$++){var re=Q+$*o;if(!(re<0||re>=r.inHeight))for(var G=$*n.strides[0],Y=L+re*A,K=0;K<r.outWidth;++K)for(var X=W+K*T,z=K*r.strideWidth-c,J=0;J<s;J++){var le=z+J*l;if(!(le<0||le>=r.inWidth))for(var ce=Y+le*E,xe=G+J*n.strides[1],fe=0;fe<r.inChannels;++fe){for(var _e=I[ce+fe*b],Ie=0;Ie<r.outChannels;++Ie)B[X+Ie*M]+=_e*P[xe+Ie];xe+=r.outChannels}}}return m.toTensor()},e.prototype.conv3d=function(t,n,r){for(var i=r.filterDepth,s=r.filterHeight,o=r.filterWidth,l=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,h=r.padInfo.front,m=r.padInfo.left,v=r.padInfo.top,A=xn(r.outShape,t.dtype),E=this.readSync(t.dataId),b=this.readSync(n.dataId),_=A.values,R=0;R<r.batchSize;++R)for(var T=R*t.strides[0],M=R*A.strides[0],I=0;I<r.outDepth;++I)for(var P=M+I*A.strides[1],B=I*r.strideDepth-h,F=0;F<i;F++){var L=B+F*l;if(!(L<0||L>=r.inDepth))for(var U=F*n.strides[0],j=T+L*t.strides[1],W=0;W<r.outHeight;++W)for(var Q=P+W*A.strides[2],$=W*r.strideHeight-v,re=0;re<s;re++){var G=$+re*c;if(!(G<0||G>=r.inHeight))for(var Y=U+re*n.strides[1],K=j+G*t.strides[2],X=0;X<r.outWidth;++X)for(var z=Q+X*r.outChannels,J=X*r.strideWidth-m,le=0;le<o;le++){var ce=J+le*d;if(!(ce<0||ce>=r.inWidth))for(var xe=Y+le*n.strides[2],fe=K+ce*r.inChannels,_e=xe,Ie=0;Ie<r.inChannels;++Ie){for(var Ge=E[fe+Ie],Ue=0;Ue<r.outChannels;++Ue)_[z+Ue]+=Ge*b[_e+Ue];_e+=r.outChannels}}}}return A.toTensor()},e.prototype.conv2dDerInput=function(t,n,r){it([t,n],"conv2dDerInput");for(var i=xn(r.inShape,"float32"),s=i.values,o=this.readSync(t.dataId),l=this.readSync(n.dataId),c=n.strides,d=c[0],h=c[1],m=c[2],v=r.batchSize,A=r.filterHeight,E=r.filterWidth,b=r.inChannels,_=r.inHeight,R=r.inWidth,T=r.outChannels,M=r.outHeight,I=r.outWidth,P=r.strideHeight,B=r.strideWidth,F=r.dataFormat,L=A-1-r.padInfo.top,U=E-1-r.padInfo.left,j=F==="channelsLast",W=i.strides[0],Q=j?i.strides[1]:i.strides[2],$=j?i.strides[2]:1,re=j?1:i.strides[1],G=t.strides[0],Y=j?t.strides[1]:t.strides[2],K=j?t.strides[2]:1,X=j?1:t.strides[1],z=0;z<v;++z)for(var J=0;J<b;++J)for(var le=0;le<_;++le)for(var ce=le-L,xe=Math.max(0,Math.ceil(ce/P)),fe=Math.min(M,(A+ce)/P),_e=0;_e<R;++_e){for(var Ie=_e-U,Ge=Math.max(0,Math.ceil(Ie/B)),Ue=Math.min(I,(E+Ie)/B),$e=0,dt=xe;dt<fe;++dt)for(var ct=dt*P-ce,se=Ge;se<Ue;++se)for(var Be=G*z+Y*dt+K*se,Le=d*(A-1-ct)+h*(E-1-(se*B-Ie))+m*J,Ke=0;Ke<T;++Ke)$e+=o[Be+X*Ke]*l[Le+Ke];s[W*z+Q*le+$*_e+re*J]=$e}return i.toTensor()},e.prototype.conv3dDerInput=function(t,n,r){for(var i=xn(r.inShape,"float32"),s=i.values,o=i.strides,l=o[0],c=o[1],d=o[2],h=o[3],m=this.readSync(t.dataId),v=t.strides,A=v[0],E=v[1],b=v[2],_=v[3],R=this.readSync(n.dataId),T=n.strides,M=T[0],I=T[1],P=T[2],B=T[3],F=r.batchSize,L=r.filterDepth,U=r.filterHeight,j=r.filterWidth,W=r.inChannels,Q=r.inDepth,$=r.inHeight,re=r.inWidth,G=r.outChannels,Y=r.outDepth,K=r.outHeight,X=r.outWidth,z=r.strideDepth,J=r.strideHeight,le=r.strideWidth,ce=L-1-r.padInfo.front,xe=U-1-r.padInfo.top,fe=j-1-r.padInfo.left,_e=0;_e<F;++_e)for(var Ie=0;Ie<W;++Ie)for(var Ge=0;Ge<Q;++Ge)for(var Ue=Ge-ce,$e=Math.max(0,Math.ceil(Ue/z)),dt=Math.min(Y,(L+Ue)/z),ct=0;ct<$;++ct)for(var se=ct-xe,Be=Math.max(0,Math.ceil(se/J)),Le=Math.min(K,(U+se)/J),Ke=0;Ke<re;++Ke){for(var ze=Ke-fe,ot=Math.max(0,Math.ceil(ze/le)),Qe=Math.min(X,(j+ze)/le),st=0,Ot=$e;Ot<dt;++Ot)for(var zt=Ot*z-Ue,ie=Be;ie<Le;++ie)for(var q=ie*J-se,be=ot;be<Qe;++be)for(var je=A*_e+E*Ot+b*ie+_*be,Ye=M*(L-1-zt)+I*(U-1-q)+P*(j-1-(be*le-ze))+B*Ie,Pe=0;Pe<G;++Pe)st+=m[je+Pe]*R[Ye+Pe];s[l*_e+c*Ge+d*ct+h*Ke+Ie]=st}return i.toTensor()},e.prototype.conv2dDerFilter=function(t,n,r){it([t,n],"conv2dDerFilter");for(var i=r.strideHeight,s=r.strideWidth,o=r.filterHeight,l=r.filterWidth,c=r.dataFormat==="channelsLast",d=xn(r.filterShape,"float32"),h=r.padInfo.left,m=r.padInfo.top,v=this.bufferSync(t),A=this.bufferSync(n),E=0;E<o;++E)for(var b=Math.max(0,Math.ceil((m-E)/i)),_=Math.min(r.outHeight,(r.inHeight+m-E)/i),R=0;R<l;++R)for(var T=Math.max(0,Math.ceil((h-R)/s)),M=Math.min(r.outWidth,(r.inWidth+h-R)/s),I=0;I<r.inChannels;++I)for(var P=0;P<r.outChannels;++P){for(var B=0,F=0;F<r.batchSize;++F)for(var L=b;L<_;++L)for(var U=E+L*i-m,j=T;j<M;++j){var W=R+j*s-h;B+=c?v.get(F,U,W,I)*A.get(F,L,j,P):v.get(F,I,U,W)*A.get(F,P,L,j)}d.set(B,E,R,I,P)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,n,r){for(var i=r.strideDepth,s=r.strideHeight,o=r.strideWidth,l=r.filterDepth,c=r.filterHeight,d=r.filterWidth,h=xn(r.filterShape,"float32"),m=h.values,v=h.strides,A=v[0],E=v[1],b=v[2],_=v[3],R=this.readSync(n.dataId),T=n.strides,M=T[0],I=T[1],P=T[2],B=T[3],F=this.readSync(t.dataId),L=t.strides,U=L[0],j=L[1],W=L[2],Q=L[3],$=r.padInfo.front,re=r.padInfo.left,G=r.padInfo.top,Y=0;Y<l;++Y)for(var K=Math.max(0,Math.ceil(($-Y)/i)),X=Math.min(r.outDepth,(r.inDepth+$-Y)/i),z=Y*A,J=0;J<c;++J)for(var le=Math.max(0,Math.ceil((G-J)/s)),ce=Math.min(r.outHeight,(r.inHeight+G-J)/s),xe=J*E+z,fe=0;fe<d;++fe)for(var _e=Math.max(0,Math.ceil((re-fe)/o)),Ie=Math.min(r.outWidth,(r.inWidth+re-fe)/o),Ge=fe*b+xe,Ue=0;Ue<r.inChannels;++Ue)for(var $e=Ue*_+Ge,dt=0;dt<r.outChannels;++dt){for(var ct=0,se=0;se<r.batchSize;++se)for(var Be=se*U,Le=se*M,Ke=K;Ke<X;++Ke)for(var ze=(Y+Ke*i-$)*j+Be,ot=Ke*I+Le,Qe=le;Qe<ce;++Qe)for(var st=(J+Qe*s-G)*W+ze,Ot=Qe*P+ot,zt=_e;zt<Ie;++zt){var ie=zt*B+Ot;ct+=F[(fe+zt*o-re)*Q+st+Ue]*R[ie+dt]}m[$e+dt]=ct}return h.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var n=t.input,r=t.filter,i=t.convInfo,s=t.bias,o=t.activation,l=t.preluActivationWeights,c=this.depthwiseConv2D(n,r,i);return s&&(c=this.add(c,s)),o&&(c=OS(this,c,o,l)),c},e.prototype.depthwiseConv2D=function(t,n,r){it([t,n],"depthwiseConv2D");for(var i=r.filterHeight,s=r.filterWidth,o=r.dilationHeight,l=r.dilationWidth,c=r.padInfo.left,d=r.padInfo.top,h=r.outChannels/r.inChannels,m=xn(r.outShape,t.dtype),v=this.readSync(t.dataId),A=this.readSync(n.dataId),E=m.values,b=0;b<r.batchSize;++b)for(var _=b*t.strides[0],R=b*m.strides[0],T=0;T<r.outHeight;++T)for(var M=R+T*m.strides[1],I=T*r.strideHeight-c,P=0;P<i;++P){var B=I+P*o;if(!(B<0||B>=r.inHeight))for(var F=P*n.strides[0],L=_+B*t.strides[1],U=0;U<r.outWidth;++U)for(var j=M+U*m.strides[2],W=U*r.strideWidth-d,Q=0;Q<s;++Q){var $=W+Q*l;if(!($<0||$>=r.inWidth))for(var re=F+Q*n.strides[1],G=L+$*r.inChannels,Y=j,K=re,X=0;X<r.inChannels;++X){for(var z=v[G+X],J=0;J<h;++J)E[Y+J]+=z*A[K+J];Y+=h,K+=h}}}return m.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,n,r){it([t,n],"depthwiseConv2DDerInput");for(var i=xn(r.inShape,"float32"),s=i.values,o=i.strides,l=o[0],c=o[1],d=o[2],h=this.readSync(t.dataId),m=t.strides,v=m[0],A=m[1],E=m[2],b=this.readSync(n.dataId),_=n.strides,R=_[0],T=_[1],M=_[2],I=r.batchSize,P=r.filterHeight,B=r.filterWidth,F=r.inChannels,L=r.inHeight,U=r.inWidth,j=r.outChannels,W=r.outHeight,Q=r.outWidth,$=r.strideHeight,re=r.strideWidth,G=P-1-r.padInfo.top,Y=B-1-r.padInfo.left,K=j/F,X=0;X<I;++X)for(var z=0;z<F;++z)for(var J=0;J<L;++J)for(var le=J-G,ce=Math.max(0,Math.ceil(le/$)),xe=Math.min(W,(P+le)/$),fe=0;fe<U;++fe){for(var _e=fe-Y,Ie=Math.max(0,Math.ceil(_e/re)),Ge=Math.min(Q,(B+_e)/re),Ue=0,$e=ce;$e<xe;++$e)for(var dt=$e*$-le,ct=Ie;ct<Ge;++ct)for(var se=v*X+A*$e+E*ct,Be=R*(P-1-dt)+T*(B-1-(ct*re-_e))+M*z,Le=0;Le<K;++Le)Ue+=h[se+(z*K+Le)]*b[Be+Le];s[l*X+c*J+d*fe+z]=Ue}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){it([t,n],"depthwiseConv2DDerFilter");for(var i=r.strideHeight,s=r.strideWidth,o=r.filterHeight,l=r.filterWidth,c=xn(r.filterShape,"float32"),d=r.padInfo.left,h=r.padInfo.top,m=r.outChannels/r.inChannels,v=this.bufferSync(t),A=this.bufferSync(n),E=0;E<o;++E)for(var b=Math.max(0,Math.ceil((h-E)/i)),_=Math.min(r.outHeight,(r.inHeight+h-E)/i),R=0;R<l;++R)for(var T=Math.max(0,Math.ceil((d-R)/s)),M=Math.min(r.outWidth,(r.inWidth+d-R)/s),I=0;I<r.outChannels;++I){for(var P=Math.trunc(I/m),B=I%m,F=0,L=0;L<r.batchSize;++L)for(var U=b;U<_;++U)for(var j=E+U*i-h,W=T;W<M;++W){var Q=R+W*s-d;F+=v.get(L,j,Q,P)*A.get(L,U,W,I)}c.set(F,E,R,P,B)}return c.toTensor()},e.prototype.tile=function(t,n){return it(t,"tile"),B5(this.bufferSync(t),n)},e.prototype.pad=function(t,n,r){it(t,"pad");var i=n.map(function(m,v){return m[0]+t.shape[v]+m[1]}),s=n.map(function(m){return m[0]}),o=this.bufferSync(t),l=xn(i,t.dtype);r!==0&&l.values.fill(r);for(var c=0;c<t.size;c++){var d=o.indexToLoc(c),h=d.map(function(m,v){return m+s[v]});l.set.apply(l,[o.get.apply(o,d)].concat(h))}return l.toTensor()},e.prototype.transpose=function(t,n){it(t,"transpose");for(var r=new Array(t.rank),i=0;i<r.length;i++)r[i]=t.shape[n[i]];var s=this.readSync(t.dataId),o=xn(r,t.dtype),l=this.bufferSync(t);for(i=0;i<t.size;++i){for(var c=l.indexToLoc(i),d=new Array(c.length),h=0;h<d.length;h++)d[h]=c[n[h]];var m=o.locToIndex(d);o.values[m]=s[i]}return o.toTensor()},e.prototype.gather=function(t,n,r){it([t,n],"gather");var i=t.shape.slice(),s=this.readSync(n.dataId);i[r]=s.length;for(var o=xn(i,t.dtype),l=this.bufferSync(t),c=0;c<o.size;++c){var d=o.indexToLoc(c),h=d.slice();h[r]=s[d[r]];var m=l.locToIndex(h);o.values[c]=l.values[m]}return o.toTensor()},e.prototype.batchToSpaceND=function(t,n,r){it([t],"batchToSpaceND");var i=n.reduce(function(h,m){return h*m}),s=zx(t.shape,n,i),o=Gx(s.length,n.length),l=Vx(t.shape,n,i),c=E5(r,n.length),d=w5(l,r,n.length);return t.reshape(s).transpose(o).reshape(l).slice(c,d)},e.prototype.spaceToBatchND=function(t,n,r){it([t],"spaceToBatchND");var i=n.reduce(function(m,v){return m*v}),s=[[0,0]];s.push.apply(s,r);for(var o=1+n.length;o<t.shape.length;++o)s.push([0,0]);var l=t.pad(s),c=zx(l.shape,n,i,!1),d=Gx(c.length,n.length,!1),h=Vx(l.shape,n,i,!1);return l.reshape(c).transpose(d).reshape(h)},e.prototype.pool=function(t,n,r){it(t,"pool");for(var i=n.strideHeight,s=n.strideWidth,o=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,d=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,v=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=this.readSync(t.dataId),E=xn(n.outShape,t.dtype),b=E.values,_=n.outShape[1]*n.outShape[2]*n.outShape[3],R=n.outShape[2]*n.outShape[3],T=n.outShape[3],M=0;M<n.batchSize;++M)for(var I=M*_,P=M*t.strides[0],B=0;B<n.inChannels;++B)for(var F=0;F<n.outHeight;++F)for(var L=F*i-h,U=Math.max(0,L),j=Math.min(n.inHeight,c+L),W=I+F*R,Q=0;Q<n.outWidth;++Q){for(var $=Q*s-m,re=Math.max(0,$),G=Math.min(n.inWidth,d+$),Y=v,K=0,X=0,z=U;z<j;z+=o){for(var J=P+z*t.strides[1],le=re;le<G;le+=l){var ce=A[J+le*t.strides[2]+B];r==="max"&&ce>Y?Y=ce:r==="avg"&&(K+=ce,X++)}if(isNaN(Y))break}b[W+Q*T+B]=r==="avg"?K/X:Y}return E.toTensor()},e.prototype.maxPool=function(t,n){return this.pool(t,n,"max")},e.prototype.maxPoolPositions=function(t,n){for(var r=xn(n.outShape,"int32"),i=n.strideHeight,s=n.strideWidth,o=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,d=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,v=this.bufferSync(t),A=0;A<n.batchSize;++A)for(var E=0;E<n.inChannels;++E)for(var b=0;b<n.outHeight;++b){for(var _=b*i-h,R=_;R<0;)R+=o;for(var T=Math.min(n.inHeight,c+_),M=0;M<n.outWidth;++M){for(var I=M*s-m,P=I;P<0;)P+=l;for(var B=Math.min(n.inWidth,d+I),F=Number.NEGATIVE_INFINITY,L=-1,U=R;U<T;U+=o)for(var j=U-_,W=P;W<B;W+=l){var Q=W-I,$=v.get(A,U,W,E);$>F&&(F=$,L=j*d+Q)}r.set(L,A,b,M,E)}}return r.toTensor()},e.prototype.maxPoolBackprop=function(t,n,r,i){it([n,r],"maxPoolBackprop");for(var s=this.maxPoolPositions(n,i),o=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,v=m-1-i.padInfo.left,A=h-1-i.padInfo.top,E=xn(n.shape,"float32"),b=this.bufferSync(s),_=this.bufferSync(t),R=0;R<i.batchSize;++R)for(var T=0;T<i.inChannels;++T)for(var M=0;M<i.inHeight;++M)for(var I=0;I<i.inWidth;++I){for(var P=M-A,B=I-v,F=0,L=0;L<h;L+=c){var U=(P+L)/o;if(!(U<0||U>=i.outHeight||Math.floor(U)!==U))for(var j=0;j<m;j+=d){var W=(B+j)/l;if(!(W<0||W>=i.outWidth||Math.floor(W)!==W)){var Q=h*m-1-b.get(R,U,W,T)===L*m+j?1:0;Q!==0&&(F+=_.get(R,U,W,T)*Q)}}}E.set(F,R,M,I,T)}return E.toTensor()},e.prototype.avgPoolBackprop=function(t,n,r){it([t,n],"avgPoolBackprop");for(var i=r.strideHeight,s=r.strideWidth,o=r.filterHeight,l=r.filterWidth,c=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterHeight,m=r.effectiveFilterWidth,v=m-1-r.padInfo.left,A=h-1-r.padInfo.top,E=xn(n.shape,"float32"),b=1/(o*l),_=this.bufferSync(t),R=0;R<r.batchSize;++R)for(var T=0;T<r.inChannels;++T)for(var M=0;M<r.inHeight;++M)for(var I=0;I<r.inWidth;++I){for(var P=M-A,B=I-v,F=0,L=0;L<h;L+=c){var U=(P+L)/i;if(!(U<0||U>=r.outHeight||Math.floor(U)!==U))for(var j=0;j<m;j+=d){var W=(B+j)/s;W<0||W>=r.outWidth||Math.floor(W)!==W||(F+=_.get(R,U,W,T))}}E.set(F*b,R,M,I,T)}return E.toTensor()},e.prototype.pool3d=function(t,n,r){it(t,"pool3d");for(var i=n.strideDepth,s=n.strideHeight,o=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,v=n.effectiveFilterWidth,A=n.padInfo.front,E=n.padInfo.top,b=n.padInfo.left,_=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,R=this.readSync(t.dataId),T=xn(n.outShape,t.dtype),M=T.values,I=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],P=n.outShape[2]*n.outShape[3]*n.outShape[4],B=n.outShape[3]*n.outShape[4],F=n.outShape[4],L=0;L<n.batchSize;++L)for(var U=L*I,j=L*t.strides[0],W=0;W<n.inChannels;++W)for(var Q=0;Q<n.outDepth;++Q){for(var $=Q*i-A,re=$;re<0;)re+=l;for(var G=Math.min(n.inDepth,h+$),Y=U+Q*P,K=0;K<n.outHeight;++K){for(var X=K*s-E,z=X;z<0;)z+=c;for(var J=Math.min(n.inHeight,m+X),le=Y+K*B,ce=0;ce<n.outWidth;++ce){for(var xe=ce*o-b,fe=xe;fe<0;)fe+=d;for(var _e=Math.min(n.inWidth,v+xe),Ie=le+ce*F,Ge=_,Ue=0,$e=0,dt=re;dt<G;dt+=l){for(var ct=j+dt*t.strides[1],se=z;se<J;se+=c){for(var Be=ct+se*t.strides[2],Le=fe;Le<_e;Le+=d){var Ke=R[Be+Le*t.strides[3]+W];if(r==="max"&&Ke>Ge?Ge=Ke:r==="avg"&&(Ue+=Ke,$e++),isNaN(Ge))break}if(isNaN(Ge))break}if(isNaN(Ge))break}M[Ie+W]=r==="avg"?Ue/$e:Ge}}}return T.toTensor()},e.prototype.avgPool3d=function(t,n){return it(t,"avgPool3d"),this.pool3d(t,n,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,n,r){it([t,n],"avgPool3dBackprop");for(var i=r.strideDepth,s=r.strideHeight,o=r.strideWidth,l=r.filterDepth,c=r.filterHeight,d=r.filterWidth,h=r.dilationDepth,m=r.dilationHeight,v=r.dilationWidth,A=r.effectiveFilterDepth,E=r.effectiveFilterHeight,b=r.effectiveFilterWidth,_=A-1-r.padInfo.front,R=b-1-r.padInfo.left,T=E-1-r.padInfo.top,M=xn(n.shape,"float32"),I=1/(l*c*d),P=this.bufferSync(t),B=0;B<r.batchSize;++B)for(var F=0;F<r.inChannels;++F)for(var L=0;L<r.inDepth;++L)for(var U=0;U<r.inHeight;++U)for(var j=0;j<r.inWidth;++j){for(var W=L-_,Q=U-T,$=j-R,re=0,G=0;G<A;G+=h){var Y=(W+G)/i;if(!(Y<0||Y>=r.outDepth||Math.floor(Y)!==Y))for(var K=0;K<E;K+=m){var X=(Q+K)/s;if(!(X<0||X>=r.outHeight||Math.floor(X)!==X))for(var z=0;z<b;z+=v){var J=($+z)/o;J<0||J>=r.outWidth||Math.floor(J)!==J||(re+=P.get(B,Y,X,J,F))}}}M.set(re*I,B,L,U,j,F)}return M.toTensor()},e.prototype.maxPool3d=function(t,n){return it(t,"maxPool3d"),this.pool3d(t,n,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,n){for(var r=xn(n.outShape,"int32"),i=n.strideDepth,s=n.strideHeight,o=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,v=n.effectiveFilterWidth,A=n.padInfo.front,E=n.padInfo.top,b=n.padInfo.left,_=this.bufferSync(t),R=0;R<n.batchSize;++R)for(var T=0;T<n.inChannels;++T)for(var M=0;M<n.outDepth;++M){for(var I=M*i-A,P=I;P<0;)P+=l;for(var B=Math.min(n.inDepth,h+I),F=0;F<n.outHeight;++F){for(var L=F*s-E,U=L;U<0;)U+=c;for(var j=Math.min(n.inHeight,m+L),W=0;W<n.outWidth;++W){for(var Q=W*o-b,$=Q;$<0;)$+=d;for(var re=Math.min(n.inWidth,v+Q),G=Number.NEGATIVE_INFINITY,Y=-1,K=P;K<B;K+=l)for(var X=K-I,z=U;z<j;z+=c)for(var J=z-L,le=$;le<re;le+=d){var ce=le-Q,xe=_.get(R,K,z,le,T);xe>=G&&(G=xe,Y=X*m*v+J*m+ce)}r.set(Y,R,M,F,W,T)}}}return r.toTensor()},e.prototype.maxPool3dBackprop=function(t,n,r,i){it([n,r],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(n,i),o=i.strideDepth,l=i.strideHeight,c=i.strideWidth,d=i.dilationDepth,h=i.dilationHeight,m=i.dilationWidth,v=i.effectiveFilterDepth,A=i.effectiveFilterHeight,E=i.effectiveFilterWidth,b=v-1-i.padInfo.front,_=E-1-i.padInfo.left,R=A-1-i.padInfo.top,T=xn(n.shape,"float32"),M=this.bufferSync(s),I=this.bufferSync(t),P=0;P<i.batchSize;++P)for(var B=0;B<i.inChannels;++B)for(var F=0;F<i.inDepth;++F)for(var L=0;L<i.inHeight;++L)for(var U=0;U<i.inWidth;++U){for(var j=F-b,W=L-R,Q=U-_,$=0,re=0;re<v;re+=d){var G=(j+re)/o;if(!(G<0||G>=i.outDepth||Math.floor(G)!==G))for(var Y=0;Y<A;Y+=h){var K=(W+Y)/l;if(!(K<0||K>=i.outHeight||Math.floor(K)!==K))for(var X=0;X<E;X+=m){var z=(Q+X)/c;if(!(z<0||z>=i.outWidth||Math.floor(z)!==z)){var J=v*A*E-1-M.get(P,G,K,z,B)===re*A*E+Y*E+X?1:0;J!==0&&($+=I.get(P,G,K,z,B)*J)}}}}T.set($,P,F,L,U,B)}return T.toTensor()},e.prototype.cast=function(t,n){return L5(t,n,this)},e.prototype.reshape=function(t,n){return M3(t,n)},e.prototype.avgPool=function(t,n){return it(t,"avgPool"),this.pool(t,n,"avg").toFloat()},e.prototype.resizeBilinear=function(t,n,r,i){it(t,"resizeBilinear");for(var s=t.shape,o=s[0],l=s[1],c=s[2],d=s[3],h=this.readSync(t.dataId),m=new Float32Array(Gt([o,n,r,d])),v=[i&&n>1?l-1:l,i&&r>1?c-1:c],A=[i&&n>1?n-1:n,i&&r>1?r-1:r],E=0,b=v[0]/A[0],_=v[1]/A[1],R=0;R<o;R++)for(var T=0;T<n;T++)for(var M=b*T,I=Math.floor(M),P=M-I,B=Math.min(l-1,Math.ceil(M)),F=R*t.strides[0]+I*t.strides[1],L=R*t.strides[0]+B*t.strides[1],U=0;U<r;U++)for(var j=_*U,W=Math.floor(j),Q=j-W,$=Math.min(c-1,Math.ceil(j)),re=F+W*t.strides[2],G=L+W*t.strides[2],Y=F+$*t.strides[2],K=L+$*t.strides[2],X=0;X<d;X++){var z=h[re+X],J=h[G+X],le=z+(h[Y+X]-z)*Q,ce=le+(J+(h[K+X]-J)*Q-le)*P;m[E++]=ce}return fi(m,[o,n,r,d])},e.prototype.resizeBilinearBackprop=function(t,n,r){it([t,n],"resizeBilinearBackprop");for(var i=n.shape,s=i[0],o=i[1],l=i[2],c=i[3],d=t.shape,h=d[1],m=d[2],v=new Float32Array(s*o*l*c),A=[r&&h>1?o-1:o,r&&m>1?l-1:l],E=[r&&h>1?h-1:h,r&&m>1?m-1:m],b=A[0]/E[0],_=A[1]/E[1],R=this.readSync(t.dataId),T=0,M=0;M<s;M++)for(var I=M*n.strides[0],P=0;P<h;P++)for(var B=P*b,F=Math.floor(B),L=Math.min(Math.ceil(B),o-1),U=I+F*n.strides[1],j=I+L*n.strides[1],W=B-F,Q=1-W,$=0;$<m;$++)for(var re=$*_,G=Math.floor(re),Y=Math.min(Math.ceil(re),l-1),K=re-G,X=1-K,z=U+G*n.strides[2],J=U+Y*n.strides[2],le=j+G*n.strides[2],ce=j+Y*n.strides[2],xe=Q*X,fe=Q*K,_e=W*X,Ie=W*K,Ge=0;Ge<c;Ge++){var Ue=R[T++];v[z+Ge]+=Ue*xe,v[J+Ge]+=Ue*fe,v[le+Ge]+=Ue*_e,v[ce+Ge]+=Ue*Ie}return ws(v,[s,l,o,c],n.dtype)},e.prototype.resizeNearestNeighbor=function(t,n,r,i){it(t,"resizeNearestNeighbor");for(var s=t.shape,o=s[0],l=s[1],c=s[2],d=s[3],h=this.readSync(t.dataId),m=new Float32Array(o*n*r*d),v=[i&&n>1?l-1:l,i&&r>1?c-1:c],A=[i&&n>1?n-1:n,i&&r>1?r-1:r],E=v[0]/A[0],b=v[1]/A[1],_=0,R=0;R<o;R++)for(var T=R*t.strides[0],M=0;M<n;M++)for(var I=E*M,P=T+Math.min(l-1,i?Math.round(I):Math.floor(I))*t.strides[1],B=0;B<r;B++)for(var F=b*B,L=P+Math.min(c-1,i?Math.round(F):Math.floor(F))*t.strides[2],U=0;U<d;U++){var j=h[L+U];m[_++]=j}return fi(m,[o,n,r,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){it([t,n],"resizeNearestNeighborBackprop");for(var i=n.shape,s=i[0],o=i[1],l=i[2],c=i[3],d=t.shape,h=d[1],m=d[2],v=new Float32Array(s*o*l*c),A=this.readSync(t.dataId),E=[r&&h>1?o-1:o,r&&m>1?l-1:l],b=[r&&h>1?h-1:h,r&&m>1?m-1:m],_=E[0]/b[0],R=E[1]/b[1],T=1/_,M=1/R,I=2*Math.ceil(T)+2,P=2*Math.ceil(M)+2,B=0;B<s;B++)for(var F=B*n.strides[0],L=0;L<o;L++)for(var U=F+L*n.strides[1],j=Math.floor(L*T),W=Math.floor(j-I/2),Q=0;Q<l;Q++)for(var $=U+Q*n.strides[2],re=Math.floor(Q*M),G=Math.floor(re-P/2),Y=0;Y<c;Y++){for(var K=0,X=0;X<I;X++){var z=X+W;if(!(z<0||z>=h)){var J=F+z*t.strides[1],le=z*_;if(L===Math.min(o-1,r?Math.round(le):Math.floor(le)))for(var ce=0;ce<P;ce++){var xe=ce+G;if(!(xe<0||xe>=m)){var fe=J+xe*t.strides[2],_e=xe*R;Q===Math.min(l-1,r?Math.round(_e):Math.floor(_e))&&(K+=A[fe+Y])}}}}v[$+Y]=K}return ws(v,n.shape,n.dtype)},e.prototype.batchNormalization=function(t,n,r,i,s,o){it([t,n,r,s,o],"batchNorm");for(var l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=this.readSync(r.dataId),h=s?this.readSync(s.dataId):new Float32Array([1]),m=o?this.readSync(o.dataId):new Float32Array([0]),v=new Float32Array(l.length),A=m.length,E=h.length,b=d.length,_=c.length,R=0,T=0,M=0,I=0,P=0;P<l.length;++P)v[P]=m[R++]+(l[P]-c[T++])*h[M++]/Math.sqrt(d[I++]+i),R>=A&&(R=0),T>=_&&(T=0),M>=E&&(M=0),I>=b&&(I=0);return ws(v,t.shape)},e.prototype.localResponseNormalization4D=function(t,n,r,i,s){it(t,"localResponseNormalization4D");var o=t.shape[3],l=o-1,c=this.readSync(t.dataId),d=t.size,h=new Float32Array(d);function m(b){for(var _=b%o,R=b-_+Math.max(0,_-n),T=b-_+Math.min(_+n,l),M=0;R<=T;R++){var I=c[R];M+=I*I}return M}for(var v=0;v<d;v++){var A=m(v),E=c[v]*Math.pow(r+i*A,-s);h[v]=E}return ws(h,t.shape)},e.prototype.LRNGrad=function(t,n,r,i,s,o,l){it(t,"LRNGrad");for(var c=t.shape[3],d=this.readSync(t.dataId),h=this.readSync(n.dataId),m=this.readSync(r.dataId),v=new Float32Array(t.size),A=t.size,E=0;E<A;E++){for(var b=E%c,_=E-b+Math.max(0,b-i),R=E-b+Math.min(c,b+i+1),T=0,M=_;M<R;M++)T+=Math.pow(h[M],2);for(T=o*T+s,M=_;M<R;M++){var I=-2*o*l*h[M]*m[E]/T;E===M&&(I+=Math.pow(T,-l)),I*=d[E],v[M]+=I}}return ws(v,t.shape)},e.prototype.multinomial=function(t,n,r,i){it(t,"multinomial");for(var s=n?t:Cu(t),o=s.shape[0],l=s.shape[1],c=Ca([o,r],"int32"),d=this.readSync(c.dataId),h=this.readSync(s.dataId),m=0;m<o;++m){var v=m*l,A=new Float32Array(l-1);A[0]=h[v];for(var E=1;E<A.length;++E)A[E]=A[E-1]+h[v+E];for(var b=r_(i.toString()),_=m*r,R=0;R<r;++R){var T=b();d[_+R]=A.length;for(var M=0;M<A.length;M++)if(T<A[M]){d[_+R]=M;break}}}return c},e.prototype.oneHot=function(t,n,r,i){it(t,"oneHot");var s=new Float32Array(t.size*n);s.fill(i);for(var o=this.readSync(t.dataId),l=0;l<t.size;++l)o[l]>=0&&o[l]<n&&(s[l*n+o[l]]=r);return qd(s,[t.size,n],"int32")},e.prototype.nonMaxSuppression=function(t,n,r,i,s){return it(t,"nonMaxSuppression"),Dw(this.readSync(t.dataId),this.readSync(n.dataId),r,i,s)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,n){for(var r=t.shape[0],i=t.shape[1],s=xn(t.shape,"float32"),o=xn(t.shape,"float32"),l=Po(t).as2D(r,i),c=yc(t).as2D(r,i),d=0;d<r;d++)for(var h=l.slice([d,0],[1,i]),m=c.slice([d,0],[1,i]),v=ui(h,m),A=this.readSync(this.fftImpl(v,n).dataId),E=0;E<i;E++){var b=MN(A,E);s.values[d*i+E]=b.real,o.values[d*i+E]=b.imag}return ui(s.toTensor(),o.toTensor()).as2D(r,i)},e.prototype.fftImpl=function(t,n){var r=t.as1D(),i=r.size;if(this.isExponentOf2(i)){var s=this.fftRadix2(r,i,n).as2D(t.shape[0],t.shape[1]);return n&&(s=ui(Po(s).div(Tt(i)),yc(s).div(Tt(i)))),s}var o=this.readSync(t.dataId),l=function(c){for(var d=new Float32Array(c.length/2),h=new Float32Array(c.length/2),m=0;m<c.length;m+=2)d[m/2]=c[m],h[m/2]=c[m+1];return{real:d,imag:h}}(this.fourierTransformByMatmul(o,i,n));return ui(l.real,l.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,n,r){if(n===1)return t;var i=this.readSync(t.dataId),s=n/2,o=function(_){for(var R=Math.ceil(_.length/4),T=new Float32Array(R),M=new Float32Array(R),I=0;I<_.length;I+=4)T[Math.floor(I/4)]=_[I],M[Math.floor(I/4)]=_[I+1];return{real:T,imag:M}}(i),l=ui(o.real,o.imag).as1D(),c=function(_){for(var R=Math.floor(_.length/4),T=new Float32Array(R),M=new Float32Array(R),I=2;I<_.length;I+=4)T[Math.floor(I/4)]=_[I],M[Math.floor(I/4)]=_[I+1];return{real:T,imag:M}}(i),d=ui(c.real,c.imag).as1D();l=this.fftRadix2(l,s,r),d=this.fftRadix2(d,s,r);var h=function(_,R){for(var T=new Float32Array(_/2),M=new Float32Array(_/2),I=0;I<Math.ceil(_/2);I++){var P=(R?2:-2)*Math.PI*(I/_);T[I]=Math.cos(P),M[I]=Math.sin(P)}return{real:T,imag:M}}(n,r),m=ui(h.real,h.imag).mul(d),v=l.add(m),A=l.sub(m),E=Po(v).concat(Po(A)),b=yc(v).concat(yc(A));return ui(E,b).as1D()},e.prototype.fourierTransformByMatmul=function(t,n,r){for(var i=new Float32Array(2*n),s=0;s<n;s++){for(var o=0,l=0,c=0;c<n;c++){var d=jV(s*c,n,r),h=MN(t,c);o+=h.real*d.real-h.imag*d.imag,l+=h.real*d.imag+h.imag*d.real}r&&(o/=n,l/=n),HV(i,o,l,s)}return i},e.prototype.depthToSpace=function(t,n,r){oe(r==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+r}),oe(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var i=t.shape[0],s=t.shape[1],o=t.shape[2],l=t.shape[3],c=s*n,d=o*n,h=l/(n*n),m=this.readSync(t.dataId),v=new Float32Array(i*c*d*h),A=0,E=0;E<i;++E)for(var b=0;b<c;++b)for(var _=Math.floor(b/n),R=b%n,T=0;T<d;++T)for(var M=Math.floor(T/n),I=(R*n+T%n)*h,P=0;P<h;++P){var B=P+I+l*(M+o*(_+s*E));v[A++]=m[B]}return ws(v,[i,c,d,h])},e.prototype.broadcastedBinaryOp=function(t,n,r,i){var s=Hn(t.shape,n.shape),o=xn(s,r),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=Gd(t.shape,s),h=Gd(n.shape,s),m=o.values;if(d.length+h.length===0)for(var v=0;v<m.length;++v)m[v]=i(l[v%l.length],c[v%c.length]);else{var A=this.bufferSync(t),E=this.bufferSync(n),b=function(_){var R=o.indexToLoc(_),T=R.slice(-t.rank);d.forEach(function(B){return T[B]=0});var M=A.locToIndex(T),I=R.slice(-n.rank);h.forEach(function(B){return I[B]=0});var P=E.locToIndex(I);m[_]=i(l[M],c[P])};for(v=0;v<m.length;++v)b(v)}return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,n,r){var i=Hn(t.shape,n.shape),s=xn(i,"float32"),o=xn(i,"float32"),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=Gd(t.shape,i),h=Gd(n.shape,i),m=s.values,v=o.values;if(d.length+h.length===0)for(var A=0;A<m.length;A++){var E=A%l.length,b=A%c.length,_=r(l[2*E],l[2*E+1],c[2*b],c[2*b+1]);m[A]=_.real,v[A]=_.imag}else{var R=this.bufferSync(this.data.get(t.dataId).complexTensors.real),T=this.bufferSync(this.data.get(n.dataId).complexTensors.real),M=function(I){var P=s.indexToLoc(I),B=P.slice(-t.rank);d.forEach(function(W){return B[W]=0});var F=R.locToIndex(B),L=P.slice(-n.rank);h.forEach(function(W){return L[W]=0});var U=T.locToIndex(L),j=r(l[2*F],l[2*F+1],c[2*U],c[2*U+1]);m[I]=j.real,v[I]=j.imag};for(A=0;A<m.length;A++)M(A)}return this.complex(s.toTensor(),o.toTensor())},e.prototype.split=function(t,n,r){return U5(t,n,r)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,n,r,i,s,o){for(var l=t.shape,c=l[0],d=l[1],h=l[2],m=l[3],v=n.shape[0],A=i[0],E=i[1],b=xn([v,A,E,m],"float32"),_=this.readSync(n.dataId),R=this.readSync(r.dataId),T=this.readSync(t.dataId),M=t.strides,I=b.strides,P=0;P<v;P++){var B=4*P,F=_[B],L=_[B+1],U=_[B+2],j=_[B+3],W=R[P];if(!(W>=c))for(var Q=A>1?(U-F)*(d-1)/(A-1):0,$=E>1?(j-L)*(h-1)/(E-1):0,re=0;re<A;re++){var G=A>1?F*(d-1)+re*Q:.5*(F+U)*(d-1);if(G<0||G>d-1)for(var Y=0;Y<E;Y++)for(var K=0;K<m;K++){var X=K+Y*I[2]+re*I[1]+P*I[0];b.values[X]=o}else if(s==="bilinear"){var z=Math.floor(G),J=Math.ceil(G),le=G-z;for(Y=0;Y<E;Y++)if((dt=E>1?L*(h-1)+Y*$:.5*(L+j)*(h-1))<0||dt>h-1)for(K=0;K<m;K++)X=K+Y*I[2]+re*I[1]+P*I[0],b.values[X]=o;else{var ce=Math.floor(dt),xe=Math.ceil(dt),fe=dt-ce;for(K=0;K<m;K++){var _e=T[X=K+ce*M[2]+z*M[1]+W*M[0]],Ie=T[X=K+xe*M[2]+z*M[1]+W*M[0]],Ge=T[X=K+ce*M[2]+J*M[1]+W*M[0]],Ue=_e+(Ie-_e)*fe,$e=Ge+(T[X=K+xe*M[2]+J*M[1]+W*M[0]]-Ge)*fe;X=K+Y*I[2]+re*I[1]+P*I[0],b.values[X]=Ue+($e-Ue)*le}}}else for(Y=0;Y<E;++Y){var dt;if((dt=E>1?L*(h-1)+Y*$:.5*(L+j)*(h-1))<0||dt>h-1)for(K=0;K<m;K++)X=K+Y*I[2]+re*I[1]+P*I[0],b.values[X]=o;else{var ct=Math.round(dt),se=Math.round(G);for(K=0;K<m;K++){var Be=K+ct*M[2]+se*M[1]+W*M[0],Le=K+Y*I[2]+re*I[1]+P*I[0];b.values[Le]=T[Be]}}}}}return b.toTensor()},e.prototype.sparseToDense=function(t,n,r,i){var s=Wx(0,t,r),o=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize;return this.scatter(t,n,r,h,c,l,o,d,i,!1)},e.prototype.gatherND=function(t,n){var r=n.shape,i=r[r.length-1],s=R5(t,n),o=s[0],l=s[1],c=s[2],d=s[3];if(l===0)return fi([],o,t.dtype);for(var h=new kv([l,c],t.dtype),m=this.readSync(n.dataId),v=this.readSync(t.dataId),A=0;A<l;A++){for(var E=[],b=0,_=0;_<i;_++){var R=m[A*i+_];b+=R*d[_],E.push(R)}if(b<0||b>=t.size/c)throw new Error("Invalid indices: "+E+" does not index into "+t.shape);for(var T=0;T<c;T++)h.values[A*c+T]=v[b*c+T]}return h.toTensor().reshape(o)},e.prototype.scatterND=function(t,n,r){var i=Wx(0,t,r),s=i.sliceRank,o=i.numUpdates,l=i.sliceSize,c=i.strides,d=i.outputSize,h=Tt(0);return this.scatter(t,n,r,d,l,o,s,c,h,!0)},e.prototype.fill=function(t,n,r){var i=Ox(r=r||u1(n),Gt(t));return i.fill(n),Ae.makeTensor(i,t,r,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var n=Ox(t.dtype,Gt(t.shape));return this.makeOutput(n,t.shape,t.dtype)},e.prototype.linspace=function(t,n,r){return P5(t,n,r)},e.prototype.scatter=function(t,n,r,i,s,o,l,c,d,h){var m=[i/s,s],v=this.readSync(t.dataId),A=this.readSync(n.dataId);if(i===0)return fi([],r,n.dtype);var E=new kv(m,n.dtype);E.values.fill(this.readSync(d.dataId)[0]);for(var b=0;b<o;b++){for(var _=[],R=0,T=0;T<l;T++){var M=v[b*l+T];_.push(M),R+=M*c[T]}if(R<0||R>=i/s)throw new Error("Invalid indices: "+_+" does not index into "+r);for(var I=0;I<s;I++)h?E.values[R*s+I]+=A[b*s+I]:E.values[R*s+I]=n.rank===0?A[0]:A[b*s+I]}return E.toTensor().reshape(r)},e}(I5);Ae.registerBackend("cpu",function(){return new sX},1);for(var US=0,XN=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=a.attrs,r=e,i=r.boxes,s=r.scores,o=n,l=o.maxOutputSize,c=o.iouThreshold,d=o.scoreThreshold,h=o.softNmsSigma,m=t;it(i,"NonMaxSuppressionWithScore");var v=Lw(m.data.get(i.dataId).values,m.data.get(s.dataId).values,l,c,d,h);return[v.selectedIndices,v.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=e.x,r=t;it(n,"square");for(var i=r.data.get(n.dataId).values,s=new Float32Array(i.length),o=0;o<i.length;++o){var l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:zv,backendName:"cpu",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=e,r=n.a,i=n.b,s=t;it([r,i],zv);var o=s.data.get(r.dataId).values,l=s.data.get(i.dataId).values,c=function(m,v,A,E,b,_){var R=Hn(m,v),T=R.length,M=bc(R),I=Fv(b,Gt(R)),P=m.length,B=v.length,F=bc(m),L=bc(v),U=Gd(m,R),j=Gd(v,R);if(U.length+j.length===0)for(var W=0;W<I.length;++W)I[W]=_(A[W%A.length],E[W%E.length]);else{var Q=function($){var re=vG($,T,M),G=re.slice(-P);U.forEach(function(z){return G[z]=0});var Y=yN(G,P,F),K=re.slice(-B);j.forEach(function(z){return K[z]=0});var X=yN(K,B,L);I[$]=_(A[Y],E[X])};for(W=0;W<I.length;++W)Q(W)}return[I,R]}(r.shape,i.shape,o,l,r.dtype,function(m,v){var A=m-v;return A*A}),d=c[0],h=c[1];return{dataId:s.write(d,h,r.dtype),shape:h,dtype:r.dtype}}}];US<XN.length;US++)i5(XN[US]);var fm,oX=function(a){this.variableNames=["A"];var e=Ii(),t=a[0],n=a[1];this.outputShape=a,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+n+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},lX=function(a){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Ii(),t=a[0],n=a[1];this.outputShape=a,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+n+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var BS=0,JN=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=a.attrs,r=e.pixels,i=n.numChannels,s=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,l=s?[r.videoWidth,r.videoHeight]:[r.width,r.height],c=l[0],d=l[1],h=[d,c],m=[d,c,i];(o||s)&&(fm==null&&(fm=document.createElement("canvas").getContext("2d")),fm.canvas.width=c,fm.canvas.height=d,fm.drawImage(r,0,0,c,d),r=fm.canvas);var v=t.makeTensorInfo(h,"int32");t.texData.get(v.dataId).usage=$s.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(v.dataId),r);var A=qe().getBool("WEBGL_PACK")?new lX(m):new oX(m),E=t.runWebGLProgram(A,[v],"int32");return t.disposeData(v.dataId),E}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=a.attrs;kx("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var r=e,i=r.boxes,s=r.scores,o=n,l=o.maxOutputSize,c=o.iouThreshold,d=o.scoreThreshold,h=o.softNmsSigma,m=t,v=Lw(m.readSync(i.dataId),m.readSync(s.dataId),l,c,d,h);return[v.selectedIndices,v.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=e.x,r=t,i=new Nn(n.shape,"return x * x;");return r.runWebGLProgram(i,[n],n.dtype)}},{kernelName:zv,backendName:"webgl",kernelFunc:function(a){var e=a.inputs,t=a.backend,n=e,r=n.a,i=n.b,s=t,o=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hu("return (a - b) * (a - b);",r.shape,i.shape):new $a("return (a - b) * (a - b);",r.shape,i.shape);return s.compileAndRun(o,[r,i])}}];BS<JN.length;BS++)i5(JN[BS]);for(var FS=0,ZN=[{kernelName:"Square",gradFunc:function(a,e){var t=e[0];return{x:function(){return a.mul(t.toFloat().mul(2))}}}},{kernelName:zv,gradFunc:function(a,e){var t=e[0],n=e[1],r=Tt(2);return{a:function(){return Li(a,Li(r,kr(t,n)))},b:function(){return Li(a,Li(r,kr(n,t)))}}}}];FS<ZN.length;FS++)sG(ZN[FS]);var cX=function(){function a(){}return a.prototype.fetch=function(e,t){return fetch(e,t)},a.prototype.now=function(){return performance.now()},a.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},a.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},a}();qe().get("IS_BROWSER")&&qe().setPlatform("browser",new cX);var kS,uX=function(){return require("node-fetch")},dX=function(){function a(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return a.prototype.fetch=function(e,t){return qe().global.fetch!=null?qe().global.fetch(e,t):(kS==null&&(kS=uX()),kS(e,t))},a.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},a.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},a.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},a}();qe().get("IS_NODE")&&qe().setPlatform("node",new dX);var C3={float32:4,int32:4,uint16:2,uint8:1,bool:1},Qx=4;function TL(a,e){for(var t={},n=0,r=function(o){var l=o.name,c=o.dtype,d=o.shape,h=Gt(d),m=void 0;if("quantization"in o){var v=o.quantization;if(v.dtype!=="uint8"&&v.dtype!=="uint16")throw new Error("Weight "+o.name+" has unknown quantization dtype "+v.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var A=C3[v.dtype],E=a.slice(n,n+h*A),b=v.dtype==="uint8"?new Uint8Array(E):new Uint16Array(E);if(c==="float32")m=Float32Array.from(b,function(P){return P*v.scale+v.min});else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+c);m=Int32Array.from(b,function(P){return Math.round(P*v.scale+v.min)})}n+=h*A}else if(c==="string"){var _=Gt(o.shape);m=[];for(var R=0;R<_;R++){var T=new Uint32Array(a.slice(n,n+Qx))[0];n+=Qx;var M=new Uint8Array(a.slice(n,n+T));m.push(M),n+=T}}else{var I=C3[c];if(E=a.slice(n,n+h*I),c==="float32")m=new Float32Array(E);else if(c==="int32")m=new Int32Array(E);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+c);m=new Uint8Array(E)}n+=h*I}t[l]=fi(m,d,c)},i=0,s=e;i<s.length;i++)r(s[i]);return t}function fX(a){if(a===null)throw new Error("Invalid input value: "+JSON.stringify(a));var e=0,t=[];a.forEach(function(i){if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i.buffer),r),r+=i.byteLength}),n.buffer}var I3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function QN(a){return I3?Buffer.byteLength(a):new Blob([a]).size}function Qw(a){var e=0;a.forEach(function(r){e+=r.byteLength});var t=new Uint8Array(e),n=0;return a.forEach(function(r){t.set(new Uint8Array(r),n),n+=r.byteLength}),t.buffer}function $N(a){for(a=a.trim();a.endsWith("/");)a=a.slice(0,a.length-1);var e=a.split("/");return e[e.length-1]}function v1(a){if(a.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:a.modelTopology==null?0:QN(JSON.stringify(a.modelTopology)),weightSpecsBytes:a.weightSpecs==null?0:QN(JSON.stringify(a.weightSpecs)),weightDataBytes:a.weightData==null?0:a.weightData.byteLength}}var eo=function(){function a(){this.saveRouters=[],this.loadRouters=[]}return a.getInstance=function(){return a.instance==null&&(a.instance=new a),a.instance},a.registerSaveRouter=function(e){a.getInstance().saveRouters.push(e)},a.registerLoadRouter=function(e){a.getInstance().loadRouters.push(e)},a.getSaveHandlers=function(e){return a.getHandlers(e,"save")},a.getLoadHandlers=function(e,t){return a.getHandlers(e,"load",t)},a.getHandlers=function(e,t,n){var r=[];return(t==="load"?a.getInstance().loadRouters:a.getInstance().saveRouters).forEach(function(i){var s=i(e,n);s!==null&&r.push(s)}),r},a}(),Xm="://",Xd=function(){function a(){this.managers={}}return a.getInstance=function(){return a.instance==null&&(a.instance=new a),a.instance},a.registerManager=function(e,t){oe(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Xm)&&(e=e.slice(0,e.indexOf(Xm))),oe(e.length>0,function(){return"scheme must not be an empty string."});var n=a.getInstance();oe(n.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),n.managers[e]=t},a.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},a.getSchemes=function(){return Object.keys(this.getInstance().managers)},a}();function Sx(a){if(a.indexOf(Xm)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Xd.getSchemes().join(","));return{scheme:a.split(Xm)[0],path:a.split(Xm)[1]}}function eC(a,e,t){return t===void 0&&(t=!1),Bt(this,void 0,void 0,function(){var n,r,i,s,o,l,c,d,h;return Ft(this,function(m){switch(m.label){case 0:return oe(a!==e,function(){return"Old path and new path are the same: '"+a+"'"}),oe((n=eo.getLoadHandlers(a)).length>0,function(){return"Copying failed because no load handler is found for source URL "+a+"."}),oe(n.length<2,function(){return"Copying failed because more than one ("+n.length+") load handlers for source URL "+a+"."}),r=n[0],oe((i=eo.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),oe(i.length<2,function(){return"Copying failed because more than one ("+n.length+") save handlers for destination URL "+e+"."}),s=i[0],o=Sx(a).scheme,l=Sx(a).path,c=o===Sx(a).scheme,[4,r.load()];case 1:return d=m.sent(),t&&c?[4,Xd.getManager(o).removeModel(l)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,s.save(d)];case 4:return h=m.sent(),!t||c?[3,6]:[4,Xd.getManager(o).removeModel(l)];case 5:m.sent(),m.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var Ch="models_store",Vd="model_info_store";function NL(){if(!qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var a=window||self,e=a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB||a.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function D3(a){var e=a.result;e.createObjectStore(Ch,{keyPath:"modelPath"}),e.createObjectStore(Vd,{keyPath:"modelPath"})}var Jm=function(){function a(e){if(this.indexedDB=NL(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return a.prototype.save=function(e){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},a.prototype.load=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},a.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(r,i){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return D3(s)},s.onsuccess=function(){var o=s.result;if(t==null){var l=o.transaction(Ch,"readonly"),c=l.objectStore(Ch).get(n.modelPath);c.onsuccess=function(){if(c.result==null)return o.close(),i(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));r(c.result.modelArtifacts)},c.onerror=function(E){return o.close(),i(c.error)},l.oncomplete=function(){return o.close()}}else{var d,h=v1(t),m=o.transaction(Vd,"readwrite"),v=m.objectStore(Vd),A=v.put({modelPath:n.modelPath,modelArtifactsInfo:h});A.onsuccess=function(){var E=(d=o.transaction(Ch,"readwrite")).objectStore(Ch).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:h});E.onsuccess=function(){return r({modelArtifactsInfo:h})},E.onerror=function(b){var _=(v=m.objectStore(Vd)).delete(n.modelPath);_.onsuccess=function(){return o.close(),i(E.error)},_.onerror=function(R){return o.close(),i(E.error)}}},A.onerror=function(E){return o.close(),i(A.error)},m.oncomplete=function(){d==null?o.close():d.oncomplete=function(){return o.close()}}}},s.onerror=function(o){return i(s.error)}})},a.URL_SCHEME="indexeddb://",a}(),tC=function(a){return qe().getBool("IS_BROWSER")&&!Array.isArray(a)&&a.startsWith(Jm.URL_SCHEME)?(e=a.slice(Jm.URL_SCHEME.length),new Jm(e)):null;var e};eo.registerSaveRouter(tC),eo.registerLoadRouter(tC);var hX=function(){function a(){this.indexedDB=NL()}return a.prototype.listModels=function(){return Bt(this,void 0,void 0,function(){var e=this;return Ft(this,function(t){return[2,new Promise(function(n,r){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return D3(i)},i.onsuccess=function(){var s=i.result,o=s.transaction(Vd,"readonly"),l=o.objectStore(Vd).getAll();l.onsuccess=function(){for(var c={},d=0,h=l.result;d<h.length;d++){var m=h[d];c[m.modelPath]=m.modelArtifactsInfo}n(c)},l.onerror=function(c){return s.close(),r(l.error)},o.oncomplete=function(){return s.close()}},i.onerror=function(s){return r(i.error)}})]})})},a.prototype.removeModel=function(e){return Bt(this,void 0,void 0,function(){var t=this;return Ft(this,function(n){var r;return e=(r=e).startsWith(Jm.URL_SCHEME)?r.slice(Jm.URL_SCHEME.length):r,[2,new Promise(function(i,s){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return D3(o)},o.onsuccess=function(){var l,c=o.result,d=c.transaction(Vd,"readwrite"),h=d.objectStore(Vd),m=h.get(e);m.onsuccess=function(){if(m.result==null)return c.close(),s(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var v=h.delete(e),A=function(){var E=(l=c.transaction(Ch,"readwrite")).objectStore(Ch).delete(e);E.onsuccess=function(){return i(m.result.modelArtifactsInfo)},E.onerror=function(b){return s(m.error)}};v.onsuccess=A,v.onerror=function(E){return A(),c.close(),s(m.error)}},m.onerror=function(v){return c.close(),s(m.error)},d.oncomplete=function(){l==null?c.close():l.oncomplete=function(){return c.close()}}},o.onerror=function(l){return s(o.error)}})]})})},a}();if(qe().getBool("IS_BROWSER"))try{Xd.registerManager(Jm.URL_SCHEME,new hX)}catch{}var gu="/",Gm="tensorflowjs_models",CL="info",pX="model_topology",mX="weight_specs",gX="weight_data",vX="model_metadata";function IL(a){return{info:[Gm,a,CL].join(gu),topology:[Gm,a,pX].join(gu),weightSpecs:[Gm,a,mX].join(gu),weightData:[Gm,a,gX].join(gu),modelMetadata:[Gm,a,vX].join(gu)}}function yX(a){var e=a.split(gu);if(e.length<3)throw new Error("Invalid key format: "+a);return e.slice(1,e.length-1).join(gu)}var Zm=function(){function a(e){if(!qe().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=IL(this.modelPath)}return a.prototype.save=function(e){return Bt(this,void 0,void 0,function(){var t,n,r;return Ft(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=v1(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(s){if(I3)return Buffer.from(s).toString("base64");for(var o=new Uint8Array(s),l="",c=0,d=o.length;c<d;c++)l+=String.fromCharCode(o[c]);return btoa(l)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},a.prototype.load=function(){return Bt(this,void 0,void 0,function(){var e,t,n,r,i,s,o;return Ft(this,function(l){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(n=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(i),t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,t.userDefinedMetadata=s.userDefinedMetadata),(o=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(c){if(I3){var d=Buffer.from(c,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var h=atob(c),m=new Uint8Array(h.length),v=0;v<h.length;++v)m.set([h.charCodeAt(v)],v);return m.buffer}(o),[2,t]})})},a.URL_SCHEME="localstorage://",a}(),nC=function(a){return qe().getBool("IS_BROWSER")&&!Array.isArray(a)&&a.startsWith(Zm.URL_SCHEME)?(e=a.slice(Zm.URL_SCHEME.length),new Zm(e)):null;var e};eo.registerSaveRouter(nC),eo.registerLoadRouter(nC);var xX=function(){function a(){oe(qe().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),oe(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return a.prototype.listModels=function(){return Bt(this,void 0,void 0,function(){var e,t,n,r,i,s;return Ft(this,function(o){for(e={},t=Gm+gu,n=gu+CL,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(s=yX(i),e[s]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},a.prototype.removeModel=function(e){return Bt(this,void 0,void 0,function(){var t,n;return Ft(this,function(r){var i;if(e=(i=e).startsWith(Zm.URL_SCHEME)?i.slice(Zm.URL_SCHEME.length):i,t=IL(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},a}();if(qe().getBool("IS_BROWSER"))try{Xd.registerManager(Zm.URL_SCHEME,new xX)}catch{}var AX="model",_X=".json",bX=".weights.bin";function aC(a){return new Promise(function(e){return setTimeout(e)}).then(a)}var HS=function(){function a(e){if(!qe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(a.URL_SCHEME)&&(e=e.slice(a.URL_SCHEME.length)),e!=null&&e.length!==0||(e=AX),this.modelTopologyFileName=e+_X,this.weightDataFileName=e+bX}return a.prototype.save=function(e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o;return Ft(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=i,[4,aC(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),e.weightData==null?[3,4]:((o=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,aC(function(){return o.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:v1(e)}]}})})},a.URL_SCHEME="downloads://",a}(),SX=function(){function a(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return a.prototype.load=function(){return Bt(this,void 0,void 0,function(){var e,t,n=this;return Ft(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,s){var o=new FileReader;o.onload=function(l){var c=JSON.parse(l.target.result),d=c.modelTopology;if(d!=null){t.length===0&&i({modelTopology:d});var h=c.weightsManifest;if(h!=null){var m;try{m=n.checkManifestAndWeightFiles(h,t)}catch(b){return void s(b)}var v=[],A=[],E=[];h.forEach(function(b){b.paths.forEach(function(_){A.push(_),E.push(null)}),v.push.apply(v,b.weights)}),h.forEach(function(b){b.paths.forEach(function(_){var R=new FileReader;R.onload=function(T){var M=T.target.result,I=A.indexOf(_);E[I]=M,E.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:v,weightData:Qw(E),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},R.onerror=function(T){return s("Failed to weights data from file of path '"+_+"'.")},R.readAsArrayBuffer(m[_])})})}else s(new Error("weightManifest field is missing from file "+e.name))}else s(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(l){return s("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)})]})})},a.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(l){return $N(l.name)}),i={},s=0,o=e;s<o.length;s++)o[s].paths.forEach(function(l){var c=$N(l);if(n.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(n.push(c),r.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");i[l]=t[r.indexOf(c)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},a}();function rC(a,e,t,n){(function(i){oe(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(a),function(i,s){oe(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),oe(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),oe(s>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+s})}(t=t??0,n=n??1);var r=0;return Promise.all(a.map(function(i){return i.then(function(s){var o=t+ ++r/a.length*(n-t);return e(o),s}),i}))}function DL(a,e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,d;return Ft(this,function(h){switch(h.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?qe().platform.fetch:e.fetchFunc,n=a.map(function(m){return t(m,e.requestInit,{isBinary:!0})}),r=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(n)];case 1:return s=h.sent(),[3,4];case 2:return[4,rC(n,e.onProgress,r,i)];case 3:s=h.sent(),h.label=4;case 4:return o=s.map(function(m){return m.arrayBuffer()}),l=.5,c=1,e.onProgress!=null?[3,6]:[4,Promise.all(o)];case 5:return d=h.sent(),[3,8];case 6:return[4,rC(o,e.onProgress,l,c)];case 7:d=h.sent(),h.label=8;case 8:return[2,d]}})})}function iC(a){var e=this;return function(t,n,r){return n===void 0&&(n=""),Bt(e,void 0,void 0,function(){var i,s,o,l,c,d,h,m,v,A;return Ft(this,function(E){switch(E.label){case 0:if(i=t.map(function(){return!1}),s={},o=r!=null?r.map(function(){return!1}):[],l=[],t.forEach(function(b,_){var R=0;b.weights.forEach(function(T){var M="quantization"in T?T.quantization.dtype:T.dtype,I=C3[M]*Gt(T.shape),P=function(){i[_]=!0,s[_]==null&&(s[_]=[]),s[_].push({manifestEntry:T,groupOffset:R,sizeBytes:I})};r!=null?r.forEach(function(B,F){B===T.name&&(P(),o[F]=!0)}):P(),l.push(T.name),R+=I})}),!o.every(function(b){return b}))throw c=r.filter(function(b,_){return!o[_]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return d=i.reduce(function(b,_,R){return _&&b.push(R),b},[]),h=[],d.forEach(function(b){t[b].paths.forEach(function(_){var R=n+(n.endsWith("/")?"":"/")+_;h.push(R)})}),[4,a(h)];case 1:return m=E.sent(),v={},A=0,d.forEach(function(b){for(var _=t[b].paths.length,R=0,T=0;T<_;T++)R+=m[A+T].byteLength;for(var M=new ArrayBuffer(R),I=new Uint8Array(M),P=0,B=0;B<_;B++){var F=new Uint8Array(m[A+B]);I.set(F,P),P+=F.byteLength}s[b].forEach(function(L){var U=TL(M.slice(L.groupOffset,L.groupOffset+L.sizeBytes),[L.manifestEntry]);for(var j in U)v[j]=U[j]}),A+=_}),[2,v]}})})}}eo.registerSaveRouter(function(a){return qe().getBool("IS_BROWSER")&&!Array.isArray(a)&&a.startsWith(HS.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new HS(e)}(a.slice(HS.URL_SCHEME.length)):null});var LL=function(){function a(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(oe(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=qe().platform.fetch,oe(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&oe(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return a.prototype.save=function(e){return Bt(this,void 0,void 0,function(){var t,n,r,i;return Ft(this,function(s){switch(s.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=s.sent()).ok)return[2,{modelArtifactsInfo:v1(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},a.prototype.load=function(){return Bt(this,void 0,void 0,function(){var e,t,n,r,i,s,o,l,c,d,h,m;return Ft(this,function(v){switch(v.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=v.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");v.label=2;case 2:return v.trys.push([2,4,,5]),[4,e.json()];case 3:return t=v.sent(),[3,5];case 4:throw v.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,s=t.generatedBy,o=t.convertedBy,l=t.format,c=t.userDefinedMetadata,r==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=v.sent(),d=m[0],h=m[1],v.label=7;case 7:return[2,{modelTopology:r,weightSpecs:d,weightData:h,userDefinedMetadata:c,generatedBy:s,convertedBy:o,format:l}]}})})},a.prototype.loadWeights=function(e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,d,h,m;return Ft(this,function(v){switch(v.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(A){var E=A.lastIndexOf("/"),b=A.lastIndexOf("?"),_=A.substring(0,E),R=b>E?A.substring(b):"";return[_+"/",R]}(t),r=n[0],i=n[1],s=this.weightPathPrefix||r,o=[],l=0,c=e;l<c.length;l++)d=c[l],o.push.apply(o,d.weights);return h=[],e.forEach(function(A){A.paths.forEach(function(E){h.push(s+E+i)})}),[4,DL(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=v.sent(),[2,[o,Qw(m)]]}})})},a.URL_SCHEME_REGEX=/^https?:\/\//,a}();function L3(a){return a.match(LL.URL_SCHEME_REGEX)!=null}var sC=function(a,e){return typeof fetch>"u"?null:(Array.isArray(a)?a.every(function(t){return L3(t)}):L3(a))?P3(a,{onProgress:e}):null};function P3(a,e){return new LL(a,e)}eo.registerSaveRouter(sC),eo.registerLoadRouter(sC);var jS=function(){function a(e){this.modelArtifacts=e}return a.prototype.load=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(e){return[2,this.modelArtifacts]})})},a}(),EX=function(){function a(e){this.saveHandler=e}return a.prototype.save=function(e){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){return[2,this.saveHandler(e)]})})},a}(),PL=Object.freeze({browserFiles:function(a){return new SX(a)},browserHTTPRequest:function(a,e){return P3(a,e)},concatenateArrayBuffers:Qw,decodeWeights:TL,encodeWeights:function(a,e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o=this;return Ft(this,function(l){switch(l.label){case 0:for(t=[],n=[],r=Array.isArray(a)?a.map(function(c){return c.name}):Object.keys(a),i=function(c){var d=r[c],h=Array.isArray(a)?a[c].tensor:a[d];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+h.dtype);var m={name:d,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var v=new Promise(function(A){return Bt(o,void 0,void 0,function(){var E,b,_,R,T,M,I;return Ft(this,function(P){switch(P.label){case 0:return[4,h.bytes()];case 1:for(E=P.sent(),b=E.reduce(function(B,F){return B+F.length},0)+Qx*E.length,_=new Uint8Array(b),R=0,T=0;T<E.length;T++)M=E[T],I=new Uint8Array(new Uint32Array([M.length]).buffer),_.set(I,R),R+=Qx,_.set(M,R),R+=M.length;return A(_),[2]}})})});n.push(v)}else n.push(h.data());e!=null&&(m.group=e),t.push(m)},s=0;s<r.length;++s)i(s);return[4,Promise.all(n)];case 1:return[2,{data:fX(l.sent()),specs:t}]}})})},fromMemory:function(a,e,t,n){return arguments.length===1?a.modelTopology!=null||a.weightSpecs!=null?new jS(a):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jS({modelTopology:a})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jS({modelTopology:a,weightSpecs:e,weightData:t,trainingConfig:n}))},getLoadHandlers:function(a,e){return eo.getLoadHandlers(a,e)},getModelArtifactsInfoForJSON:v1,getSaveHandlers:function(a){return eo.getSaveHandlers(a)},http:P3,isHTTPScheme:L3,loadWeights:function(a,e,t,n){return e===void 0&&(e=""),Bt(this,void 0,void 0,function(){return Ft(this,function(r){return[2,iC(function(i){return DL(i,{requestInit:n})})(a,e,t)]})})},registerLoadRouter:function(a){return eo.registerLoadRouter(a)},registerSaveRouter:function(a){return eo.registerSaveRouter(a)},weightsLoaderFactory:iC,withSaveHandler:function(a){return new EX(a)},copyModel:function(a,e){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){return[2,eC(a,e,!1)]})})},listModels:function(){return Bt(this,void 0,void 0,function(){var a,e,t,n,r,i,s;return Ft(this,function(o){switch(o.label){case 0:a=Xd.getSchemes(),e={},t=0,n=a,o.label=1;case 1:return t<n.length?(r=n[t],[4,Xd.getManager(r).listModels()]):[3,4];case 2:for(s in i=o.sent())e[r+Xm+s]=i[s];o.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(a,e){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){return[2,eC(a,e,!0)]})})},removeModel:function(a){return Bt(this,void 0,void 0,function(){var e;return Ft(this,function(t){return e=Sx(a),[2,Xd.getManager(e.scheme).removeModel(e.path)]})})}}),hm;me({confusionMatrix_:function(a,e,t){var n=ne(a,"labels","confusionMatrix"),r=ne(e,"predictions","confusionMatrix");oe(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),oe(n.rank===1,function(){return"Expected the rank of labels to be 1, but got "+n.rank}),oe(r.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+r.rank}),oe(n.shape[0]===r.shape[0],function(){return"Mismatch in the number of examples: "+n.shape[0]+" vs. "+r.shape[0]+". Labels and predictions should have the same number of elements."}),oe(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=w3(n.asType("int32"),t),s=w3(r.asType("int32"),t);return i.transpose().matMul(s).asType("int32")}});var wX=me({fromPixels_:function(a,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(a==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,n=!1,r=!1,i=!1,s=!1;if(a.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&a instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement)i=!0;else{if(a.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+a.constructor.name);s=!0}if(r&&r&&a.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(r5("FromPixels",Ae.backendName)!=null)return Ae.runKernel("FromPixels",{pixels:a},{numChannels:e});var o,l,c=r?[a.videoWidth,a.videoHeight]:[a.width,a.height],d=c[0],h=c[1];if(s?o=a.getContext("2d").getImageData(0,0,d,h).data:n||t?o=a.data:(i||r)&&(hm==null&&(hm=document.createElement("canvas").getContext("2d")),hm.canvas.width=d,hm.canvas.height=h,hm.drawImage(a,0,0,d,h),o=hm.getImageData(0,0,d,h).data),e===4)l=new Int32Array(o);else{var m=d*h;l=new Int32Array(m*e);for(var v=0;v<m;v++)for(var A=0;A<e;++A)l[v*e+A]=o[4*v+A]}return Mw(l,[h,d,e],"int32")}}),$w=Object.freeze({toPixels:function(a,e){return Bt(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,d,h,m,v,A,E,b,_,R,T,M,I,P,B,F;return Ft(this,function(L){switch(L.label){case 0:if(t=ne(a,"img","toPixels"),a instanceof za||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(n=t.shape.slice(0,2),r=n[0],i=n[1],(s=t.rank===2?1:t.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,t.data()];case 1:return o=L.sent(),l=t.min(),c=t.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(d=L.sent(),h=d[0],m=d[1],v=h[0],A=m[0],l.dispose(),c.dispose(),t.dtype==="float32"){if(v<0||A>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+v+" - "+A+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(v<0||A>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+v+" - "+A+"].")}for(E=t.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*r*4),_=0;_<r*i;++_)R=void 0,T=void 0,M=void 0,I=void 0,s===1?(R=o[_]*E,T=o[_]*E,M=o[_]*E,I=255):s===3?(R=o[3*_]*E,T=o[3*_+1]*E,M=o[3*_+2]*E,I=255):s===4&&(R=o[4*_]*E,T=o[4*_+1]*E,M=o[4*_+2]*E,I=o[4*_+3]*E),b[(P=4*_)+0]=Math.round(R),b[P+1]=Math.round(T),b[P+2]=Math.round(M),b[P+3]=Math.round(I);return e!=null&&(e.width=i,e.height=r,B=e.getContext("2d"),F=new ImageData(b,i,r),B.putImageData(F,0,0)),t!==a&&t.dispose(),[2,b]}})})},fromPixels:wX}),RX=function(){function a(){}return a.prototype.getClassName=function(){return this.constructor.className},a.fromConfig=function(e,t){return new e(t)},a}(),MX=function(){function a(){this.classNameMap={}}return a.getMap=function(){return a.instance==null&&(a.instance=new a),a.instance},a.register=function(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]},a}();function np(a){oe(a.className!=null,function(){return"Class being registered does not have the static className property defined."}),oe(typeof a.className=="string",function(){return"className is required to be a string, but got type "+typeof a.className}),oe(a.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),MX.register(a)}var ap=function(a){function e(){return a!==null&&a.apply(this,arguments)||this}return Rl(e,a),e.prototype.minimize=function(t,n,r){n===void 0&&(n=!1);var i=this.computeGradients(t,r),s=i.value,o=i.grads;if(r!=null){var l=r.map(function(c){return{name:c.name,tensor:o[c.name]}});this.applyGradients(l)}else this.applyGradients(o);return Ds(o),n?s:(s.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,n){return FV(t,n)},e.prototype.dispose=function(){this.iterations_!=null&&Ds(this.iterations_)},e.prototype.saveIterations=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Tt(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return Bt(this,void 0,void 0,function(){var n;return Ft(this,function(r){switch(r.label){case 0:return n=this,[4,t[0].tensor.data()];case 1:return n.iterations_=r.sent()[0],[2,t.slice(1)]}})})},e}(RX);Object.defineProperty(ap,Symbol.hasInstance,{value:function(a){return a.minimize!=null&&a.computeGradients!=null&&a.applyGradients!=null}});var TX=function(a){function e(t,n,r){r===void 0&&(r=null);var i=a.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],r==null&&(i.epsilon=Ae.backend.epsilon()),i}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this;(Array.isArray(t)?t.map(function(r){return r.name}):Object.keys(t)).forEach(function(r,i){var s=Ae.registeredVariables[r];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:r+"/accum_grad",variable:Pt(function(){return Xn(s).variable(!1)})}),n.accumulatedUpdates[i]==null&&(n.accumulatedUpdates[i]={originalName:r+"/accum_var",variable:Pt(function(){return Xn(s).variable(!1)})});var o=Array.isArray(t)?t[i].tensor:t[r];if(o!=null){var l=n.accumulatedGrads[i].variable,c=n.accumulatedUpdates[i].variable;Pt(function(){var d=l.mul(n.rho).add(o.square().mul(1-n.rho)),h=c.add(n.epsilon).sqrt().div(l.add(n.epsilon).sqrt()).mul(o),m=c.mul(n.rho).add(h.square().mul(1-n.rho));l.assign(d),c.assign(m);var v=h.mul(-n.learningRate).add(s);s.assign(v)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Ds(this.accumulatedGrads.map(function(t){return t.variable})),Ds(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){var t;return Ft(this,function(n){switch(n.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(t.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){var n;return Ft(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),n=t.length/2,this.accumulatedGrads=t.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,n){return new t(n.learningRate,n.rho,n.epsilon)},e.className="Adadelta",e}(ap);np(TX);var NX=function(a){function e(t,n){n===void 0&&(n=.1);var r=a.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this;(Array.isArray(t)?t.map(function(r){return r.name}):Object.keys(t)).forEach(function(r,i){var s=Ae.registeredVariables[r];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:r+"/accumulator",variable:Pt(function(){return Sc(s.shape,n.initialAccumulatorValue).variable(!1)})});var o=Array.isArray(t)?t[i].tensor:t[r];if(o!=null){var l=n.accumulatedGrads[i].variable;Pt(function(){var c=l.add(o.square());l.assign(c);var d=o.div(c.add(Ae.backend.epsilon()).sqrt()).mul(-n.learningRate).add(s);s.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Ds(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulatedGrads=t.map(function(r){return{originalName:r.name,variable:r.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,n){return new t(n.learningRate,n.initialAccumulatorValue)},e.className="Adagrad",e}(ap);np(NX);var CX=function(a){function e(t,n,r,i){i===void 0&&(i=null);var s=a.call(this)||this;return s.learningRate=t,s.beta1=n,s.beta2=r,s.epsilon=i,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Pt(function(){s.accBeta1=Tt(n).variable(),s.accBeta2=Tt(r).variable()}),i==null&&(s.epsilon=Ae.backend.epsilon()),s}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this,r=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Pt(function(){var i=kr(1,n.accBeta1),s=kr(1,n.accBeta2);r.forEach(function(o,l){var c=Ae.registeredVariables[o];n.accumulatedFirstMoment[l]==null&&(n.accumulatedFirstMoment[l]={originalName:o+"/m",variable:Pt(function(){return Xn(c).variable(!1)})}),n.accumulatedSecondMoment[l]==null&&(n.accumulatedSecondMoment[l]={originalName:o+"/v",variable:Pt(function(){return Xn(c).variable(!1)})});var d=Array.isArray(t)?t[l].tensor:t[o];if(d!=null){var h=n.accumulatedFirstMoment[l].variable,m=n.accumulatedSecondMoment[l].variable,v=h.mul(n.beta1).add(d.mul(1-n.beta1)),A=m.mul(n.beta2).add(d.square().mul(1-n.beta2)),E=v.div(i),b=A.div(s);h.assign(v),m.assign(A);var _=E.div(b.sqrt().add(n.epsilon)).mul(-n.learningRate).add(c);c.assign(_)}}),n.accBeta1.assign(n.accBeta1.mul(n.beta1)),n.accBeta2.assign(n.accBeta2.mul(n.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ds(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&Ds(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){var t;return Ft(this,function(n){switch(n.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(t.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){var n,r=this;return Ft(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),Pt(function(){r.accBeta1.assign(Jx(r.beta1,r.iterations_+1)),r.accBeta2.assign(Jx(r.beta2,r.iterations_+1))}),n=t.length/2,this.accumulatedFirstMoment=t.slice(0,n).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(n,2*n).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)},e.className="Adam",e}(ap);np(CX);var IX=function(a){function e(t,n,r,i,s){i===void 0&&(i=null),s===void 0&&(s=0);var o=a.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],Pt(function(){o.iteration=Tt(0).variable(),o.accBeta1=Tt(n).variable()}),i==null&&(o.epsilon=Ae.backend.epsilon()),o}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this,r=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Pt(function(){var i=kr(1,n.accBeta1),s=gl(-n.learningRate,n.iteration.mul(n.decay).add(1));r.forEach(function(o,l){var c=Ae.registeredVariables[o];n.accumulatedFirstMoment[l]==null&&(n.accumulatedFirstMoment[l]={originalName:o+"/m",variable:Xn(c).variable(!1)}),n.accumulatedWeightedInfNorm[l]==null&&(n.accumulatedWeightedInfNorm[l]={originalName:o+"/v",variable:Xn(c).variable(!1)});var d=Array.isArray(t)?t[l].tensor:t[o];if(d!=null){var h=n.accumulatedFirstMoment[l].variable,m=n.accumulatedWeightedInfNorm[l].variable,v=h.mul(n.beta1).add(d.mul(1-n.beta1)),A=m.mul(n.beta2),E=d.abs(),b=A.maximum(E);h.assign(v),m.assign(b);var _=s.div(i).mul(v.div(b.add(n.epsilon))).add(c);c.assign(_)}}),n.iteration.assign(n.iteration.add(1)),n.accBeta1.assign(n.accBeta1.mul(n.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ds(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&Ds(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)},e.className="Adamax",e}(ap);np(IX);var OL=function(a){function e(t){var n=a.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this;(Array.isArray(t)?t.map(function(r){return r.name}):Object.keys(t)).forEach(function(r,i){var s=Array.isArray(t)?t[i].tensor:t[r];if(s!=null){var o=Ae.registeredVariables[r];Pt(function(){var l=n.c.mul(s).add(o);o.assign(l)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=QG(Tt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=n.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,n){return new t(n.learningRate)},e.className="SGD",e}(ap);np(OL);var DX=function(a){function e(t,n,r){r===void 0&&(r=!1);var i=a.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Tt(i.momentum),i}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this;(Array.isArray(t)?t.map(function(r){return r.name}):Object.keys(t)).forEach(function(r,i){var s=Ae.registeredVariables[r];n.accumulations[i]==null&&(n.accumulations[i]={originalName:r+"/momentum",variable:Pt(function(){return Xn(s).variable(!1)})});var o=n.accumulations[i].variable,l=Array.isArray(t)?t[i].tensor:t[r];l!=null&&Pt(function(){var c,d=n.m.mul(o).add(l);c=n.useNesterov?n.c.mul(l.add(d.mul(n.m))).add(s):n.c.mul(d).add(s),o.assign(d),s.assign(c)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Ds(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){return Ft(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){return Ft(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),this.accumulations=t.map(function(r){return{originalName:r.name,variable:r.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)},e.className="Momentum",e}(OL);np(DX);var LX=function(a){function e(t,n,r,i,s){n===void 0&&(n=.9),r===void 0&&(r=0),i===void 0&&(i=null),s===void 0&&(s=!1);var o=a.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=s,i==null&&(o.epsilon=Ae.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return Rl(e,a),e.prototype.applyGradients=function(t){var n=this;(Array.isArray(t)?t.map(function(r){return r.name}):Object.keys(t)).forEach(function(r,i){var s=Ae.registeredVariables[r];n.accumulatedMeanSquares[i]==null&&(n.accumulatedMeanSquares[i]={originalName:r+"/rms",variable:Pt(function(){return Xn(s).variable(!1)})}),n.accumulatedMoments[i]==null&&(n.accumulatedMoments[i]={originalName:r+"/momentum",variable:Pt(function(){return Xn(s).variable(!1)})}),n.accumulatedMeanGrads[i]==null&&n.centered&&(n.accumulatedMeanGrads[i]={originalName:r+"/mg",variable:Pt(function(){return Xn(s).variable(!1)})});var o=Array.isArray(t)?t[i].tensor:t[r];if(o!=null){var l=n.accumulatedMeanSquares[i].variable,c=n.accumulatedMoments[i].variable;Pt(function(){var d=l.mul(n.decay).add(o.square().mul(1-n.decay));if(n.centered){var h=n.accumulatedMeanGrads[i].variable,m=h.mul(n.decay).add(o.mul(1-n.decay)),v=c.mul(n.momentum).add(o.mul(n.learningRate).div(d.sub(m.square().add(n.epsilon)).sqrt()));l.assign(d),h.assign(m),c.assign(v);var A=s.sub(v);s.assign(A)}else{var E=l.mul(n.decay).add(o.square().mul(1-n.decay));v=c.mul(n.momentum).add(o.mul(n.learningRate).div(E.add(n.epsilon).sqrt())),l.assign(E),c.assign(v),A=s.sub(v),s.assign(A)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Ds(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Ds(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&Ds(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Bt(this,void 0,void 0,function(){var t;return Ft(this,function(n){switch(n.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(t.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Bt(this,void 0,void 0,function(){var n;return Ft(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),n=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)},e.className="RMSProp",e}(ap);np(LX);za.prototype.squaredDifference=function(a){return J5(this,a)},Ve=iX;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O3=function(a,e){return O3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},O3(a,e)};function pn(a,e){O3(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ni=function(){return Ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ni.apply(this,arguments)};function Wt(a,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(d){try{c(n.next(d))}catch(h){s(h)}}function l(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(a,[])).next())})}function Kt(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(i=c[0]&2?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(a,t)}catch(d){c=[6,d],r=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function wv(){for(var a=0,e=0,t=arguments.length;e<t;e++)a+=arguments[e].length;for(var n=Array(a),r=0,e=0;e<t;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,r++)n[r]=i[s];return n}var Bh=function(){function a(e,t){if(!Fh(e)||!Fh(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),a.prototype.reverse=function(){return new a(1/this.width,1/this.height)},a}();function f_(a,e){return a instanceof za&&a.shape.length===e}function PX(a){return f_(a,2)}function h_(a){return f_(a,3)}function Jd(a){return f_(a,4)}function OX(a){return a%1!==0}function oC(a){return a%2===0}function UL(a,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(a*t)/t}function lC(a){return a&&a.width&&a.height}function UX(a,e){var t=a.width,n=a.height,r=e/Math.max(n,t);return new Bh(Math.round(t*r),Math.round(n*r))}function eR(a){return a.reduce(function(e,t){return e.add(t)},new aa(0,0)).div(new aa(a.length,a.length))}function Gv(a,e,t){return Array(a).fill(0).map(function(n,r){return e+r*t})}function Fh(a){return!!a&&a!==1/0&&a!==-1/0&&!isNaN(a)||a===0}function cC(a){return Fh(a)&&0<=a&&a<=1}var aa=function(){function a(e,t){this._x=e,this._y=t}return Object.defineProperty(a.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),a.prototype.add=function(e){return new a(this.x+e.x,this.y+e.y)},a.prototype.sub=function(e){return new a(this.x-e.x,this.y-e.y)},a.prototype.mul=function(e){return new a(this.x*e.x,this.y*e.y)},a.prototype.div=function(e){return new a(this.x/e.x,this.y/e.y)},a.prototype.abs=function(){return new a(Math.abs(this.x),Math.abs(this.y))},a.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a.prototype.floor=function(){return new a(Math.floor(this.x),Math.floor(this.y))},a}(),Mc=function(){function a(e,t){t===void 0&&(t=!0);var n=e||{},r=[n.left,n.top,n.right,n.bottom].every(Fh),i=[n.x,n.y,n.width,n.height].every(Fh);if(!i&&!r)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));var s=i?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],o=s[0],l=s[1],c=s[2],d=s[3];a.assertIsValidBox({x:o,y:l,width:c,height:d},"Box.constructor",t),this._x=o,this._y=l,this._width=c,this._height=d}return a.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Fh)},a.assertIsValidBox=function(e,t,n){if(n===void 0&&(n=!1),!a.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!n&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topLeft",{get:function(){return new aa(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topRight",{get:function(){return new aa(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomLeft",{get:function(){return new aa(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomRight",{get:function(){return new aa(this.right,this.bottom)},enumerable:!0,configurable:!0}),a.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),t=e[0],n=e[1],r=e[2],i=e[3];return new a({x:t,y:n,width:r,height:i})},a.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),t=e[0],n=e[1],r=e[2],i=e[3];return new a({x:t,y:n,width:r,height:i})},a.prototype.toSquare=function(){var e=this,t=e.x,n=e.y,r=e.width,i=e.height,s=Math.abs(r-i);return r<i&&(t-=s/2,r+=s),i<r&&(n-=s/2,i+=s),new a({x:t,y:n,width:r,height:i})},a.prototype.rescale=function(e){var t=lC(e)?e.width:e,n=lC(e)?e.height:e;return new a({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})},a.prototype.pad=function(e,t){var n=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],r=n[0],i=n[1],s=n[2],o=n[3];return new a({x:r,y:i,width:s,height:o})},a.prototype.clipAtImageBorders=function(e,t){var n=this,r=n.x,i=n.y,s=n.right,o=n.bottom,l=Math.max(r,0),c=Math.max(i,0),d=s-l,h=o-c,m=Math.min(d,e-l),v=Math.min(h,t-c);return new a({x:l,y:c,width:m,height:v}).floor()},a.prototype.shift=function(e,t){var n=this,r=n.width,i=n.height,s=this.x+e,o=this.y+t;return new a({x:s,y:o,width:r,height:i})},a.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,i=1,s=1,o=n,l=r,c=this.left,d=this.top,h=this.right,m=this.bottom;return h>t&&(o=-h+t+n,h=t),m>e&&(l=-m+e+r,m=e),c<1&&(l=2-c,c=1),d<1&&(l=2-d,d=1),{dy:s,edy:l,dx:i,edx:o,y:d,ey:m,x:c,ex:h,w:n,h:r}},a.prototype.calibrate=function(e){return new a({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},a}(),p_=function(a){pn(e,a);function e(t,n,r,i,s){return s===void 0&&(s=!1),a.call(this,{left:t,top:n,right:r,bottom:i},s)||this}return e}(Mc),BL=function(){function a(e,t,n,r,i){this._imageDims=new Bh(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new Mc(r).rescale(this._imageDims)}return Object.defineProperty(a.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeBox",{get:function(){return new Mc(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),a.prototype.forSize=function(e,t){return new a(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},a}(),oo=function(a){pn(e,a);function e(t,n,r){return a.call(this,t,t,"",n,r)||this}return e.prototype.forSize=function(t,n){var r=a.prototype.forSize.call(this,t,n),i=r.score,s=r.relativeBox,o=r.imageDims;return new e(i,s,o)},e}(BL);function BX(a,e,t){t===void 0&&(t=!0);var n=Math.max(0,Math.min(a.right,e.right)-Math.max(a.left,e.left)),r=Math.max(0,Math.min(a.bottom,e.bottom)-Math.max(a.top,e.top)),i=n*r;return t?i/(a.area+e.area-i):i/Math.min(a.area,e.area)}function FX(a){var e=a.map(function(o){return o.x}),t=a.map(function(o){return o.y}),n=e.reduce(function(o,l){return l<o?l:o},1/0),r=t.reduce(function(o,l){return l<o?l:o},1/0),i=e.reduce(function(o,l){return o<l?l:o},0),s=t.reduce(function(o,l){return o<l?l:o},0);return new p_(n,r,i,s)}function Vv(a,e,t,n){n===void 0&&(n=!0);for(var r=e.map(function(o,l){return{score:o,boxIndex:l}}).sort(function(o,l){return o.score-l.score}).map(function(o){return o.boxIndex}),i=[],s=function(){var o=r.pop();i.push(o);for(var l=r,c=[],d=0;d<l.length;d++){var h=l[d],m=a[o],v=a[h];c.push(BX(m,v,n))}r=r.filter(function(A,E){return c[E]<=t})};r.length>0;)s();return i}function y1(a,e){return Pt(function(){var t=e[0],n=e[1],r=e[2],i=Sc(wv(a.shape.slice(0,3),[1]),t),s=Sc(wv(a.shape.slice(0,3),[1]),n),o=Sc(wv(a.shape.slice(0,3),[1]),r),l=Pr([i,s,o],3);return kr(a,l)})}function kX(a,e){return e===void 0&&(e=!1),Pt(function(){var t=a.shape.slice(1),n=t[0],r=t[1];if(n===r)return a;var i=Math.abs(n-r),s=Math.round(i*(e?.5:1)),o=n>r?2:1,l=function(v){var A=a.shape.slice();return A[o]=v,Sc(A,0)},c=l(s),d=i-c.shape[o],h=e&&d?l(d):null,m=[h,a,c].filter(function(v){return!!v}).map(function(v){return v.toFloat()});return Pr(m,o)})}function zS(a){return 1/(1+Math.exp(-a))}var tR=function(a){pn(e,a);function e(t,n,r,i,s){return s===void 0&&(s=!1),a.call(this,{x:t,y:n,width:r,height:i},s)||this}return e}(Mc),HX=.5,jX=.43,zX=.45,Wv=function(){function a(e,t,n){n===void 0&&(n=new aa(0,0));var r=t.width,i=t.height;this._imgDims=new Bh(r,i),this._shift=n,this._positions=e.map(function(s){return s.mul(new aa(r,i)).add(n)})}return Object.defineProperty(a.prototype,"shift",{get:function(){return new aa(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new aa(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),a.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},a.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new aa(e,t))},a.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},a.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var n=e instanceof oo?e.box.floor():new Mc(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=r.useDlibAlignment,s=r.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(s)},a.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],i=function(h){return r.sub(h).magnitude()},s=(i(t)+i(n))/2,o=Math.floor(s/zX),l=eR(e),c=Math.floor(Math.max(0,l.x-HX*o)),d=Math.floor(Math.max(0,l.y-jX*o));return new tR(c,d,Math.min(o,this.imageWidth+c),Math.min(o,this.imageHeight+d))},a.prototype.alignMinBbox=function(e){var t=FX(this.positions);return t.pad(t.width*e,t.height*e)},a.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},a}(),GX=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],eR([t[3],t[4]])]},e}(Wv),VX=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(eR)},e}(Wv),uC=function(){function a(e,t){this._label=e,this._distance=t}return Object.defineProperty(a.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),a.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+UL(this.distance)+")":"")},a}(),dC=function(a){pn(e,a);function e(t,n){var r=a.call(this,t)||this;return r._label=n,r}return e.assertIsValidLabeledBox=function(t,n){if(Mc.assertIsValidBox(t,n),!Fh(t.label))throw new Error(n+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Mc),g2=function(){function a(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(n){return!(n instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(a.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),a.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},a.fromJSON=function(e){var t=e.descriptors.map(function(n){return new Float32Array(n)});return new a(e.label,t)},a}();(function(a){pn(e,a);function e(t,n,r,i){var s=a.call(this,t,n)||this;return s._score=r,s._classScore=i,s}return e.assertIsValidPredictedBox=function(t,n){if(dC.assertIsValidLabeledBox(t,n),!cC(t.score)||!cC(t.classScore))throw new Error(n+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(dC);function $x(a){return a.detection instanceof oo}function Kv(a,e){var t={detection:e};return Object.assign({},a,t)}function FL(){var a=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:a,readFile:e}}function kL(a){var e="";if(!a)try{a=require("fs")}catch(n){e=n.toString()}var t=a?function(n){return new Promise(function(r,i){a.readFile(n,function(s,o){return s?i(s):r(o)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function HL(){var a=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(a)return new a;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},n=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},r=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=kL();return Ni({Canvas:a||function(){function s(){}return s}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function s(){}return s}(),Image:e||function(){function s(){}return s}(),ImageData:global.ImageData||function(){function s(){}return s}(),Video:global.HTMLVideoElement||function(){function s(){}return s}(),createCanvasElement:t,createImageElement:n,fetch:r},i)}function jL(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function zL(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var Dr;function WX(){if(!Dr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Dr}function U3(a){Dr=a}function nR(){jL()&&U3(FL()),zL()&&U3(HL())}function KX(a){if(Dr||nR(),!Dr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=a.Canvas,t=e===void 0?Dr.Canvas:e,n=a.Image,r=n===void 0?Dr.Image:n;Dr.Canvas=t,Dr.Image=r,Dr.createCanvasElement=a.createCanvasElement||function(){return new t},Dr.createImageElement=a.createImageElement||function(){return new r},Dr.ImageData=a.ImageData||Dr.ImageData,Dr.Video=a.Video||Dr.Video,Dr.fetch=a.fetch||Dr.fetch,Dr.readFile=a.readFile||Dr.readFile}var Oi={getEnv:WX,setEnv:U3,initialize:nR,createBrowserEnv:FL,createFileSystem:kL,createNodejsEnv:HL,monkeyPatch:KX,isBrowser:jL,isNodejs:zL};nR();function aR(a){return!Oi.isNodejs()&&typeof a=="string"?document.getElementById(a):a}function Eu(a){var e=Oi.getEnv(),t=e.Canvas,n=e.CanvasRenderingContext2D;if(a instanceof n)return a;var r=aR(a);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Wd;(function(a){a.TOP_LEFT="TOP_LEFT",a.TOP_RIGHT="TOP_RIGHT",a.BOTTOM_LEFT="BOTTOM_LEFT",a.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Wd||(Wd={}));var GL=function(){function a(e){e===void 0&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,i=e.fontSize,s=e.fontStyle,o=e.padding;this.anchorPosition=t||Wd.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=s||"Georgia",this.padding=o||4}return a}(),YX=function(){function a(e,t,n){n===void 0&&(n={}),this.text=typeof e=="string"?[e]:e instanceof a?e.text:e,this.anchor=t,this.options=new GL(n)}return a.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(n){return e.measureText(n).width}).reduce(function(n,r){return n<r?r:n},0)+2*t},a.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},a.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Wd.BOTTOM_RIGHT||n===Wd.TOP_RIGHT,i=n===Wd.BOTTOM_LEFT||n===Wd.BOTTOM_RIGHT,s=this.measureWidth(e),o=this.measureHeight(),l=r?this.anchor.x-s:this.anchor.x,c=i?this.anchor.y-o:this.anchor.y;if(t){var d=t.width,h=t.height,m=Math.max(Math.min(l,d-s),0),v=Math.max(Math.min(c,h-o),0);return{x:m,y:v}}return{x:l,y:c}},a.prototype.draw=function(e){var t=aR(e),n=Eu(t),r=this.options,i=r.backgroundColor,s=r.fontColor,o=r.fontSize,l=r.fontStyle,c=r.padding;n.font=o+"px "+l;var d=this.measureWidth(n),h=this.measureHeight();n.fillStyle=i;var m=this.getUpperLeft(n,t);n.fillRect(m.x,m.y,d,h),n.fillStyle=s,this.text.forEach(function(v,A){var E=c+m.x,b=c+m.y+(A+1)*o;n.fillText(v,E,b)})},a}(),qX=function(){function a(e){e===void 0&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var s={anchorPosition:Wd.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new GL(Object.assign({},s,i))}return a}(),XX=function(){function a(e,t){t===void 0&&(t={}),this.box=new Mc(e),this.options=new qX(t)}return a.prototype.draw=function(e){var t=Eu(e),n=this.options,r=n.boxColor,i=n.lineWidth,s=this.box,o=s.x,l=s.y,c=s.width,d=s.height;t.strokeStyle=r,t.lineWidth=i,t.strokeRect(o,l,c,d);var h=this.options.label;h&&new YX([h],{x:o-i/2,y:l},this.options.drawLabelOptions).draw(e)},a}();function VL(a,e){var t=Array.isArray(e)?e:[e];t.forEach(function(n){var r=n instanceof oo?n.score:$x(n)?n.detection.score:void 0,i=n instanceof oo?n.box:$x(n)?n.detection.box:new Mc(n),s=r?""+UL(r):void 0;new XX(i,{label:s}).draw(a)})}function WL(a){var e=Oi.getEnv(),t=e.Image,n=e.Video;return a instanceof t&&a.complete||a instanceof n&&a.readyState>=3}function JX(a){return new Promise(function(e,t){if(a instanceof Oi.getEnv().Canvas||WL(a))return e();function n(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",r),e(i))}function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",r),t(i))}a.addEventListener("load",n),a.addEventListener("error",r)})}function KL(a){var e=Oi.getEnv(),t=e.Image,n=e.Video;return a instanceof t?new Bh(a.naturalWidth,a.naturalHeight):a instanceof n?new Bh(a.videoWidth,a.videoHeight):new Bh(a.width,a.height)}function m_(a){var e=a.width,t=a.height,n=Oi.getEnv().createCanvasElement,r=n();return r.width=e,r.height=t,r}function rR(a,e){var t=Oi.getEnv().ImageData;if(!(a instanceof t)&&!WL(a))throw new Error("createCanvasFromMedia - media has not finished loading yet");var n=KL(a),r=n.width,i=n.height,s=m_({width:r,height:i});return a instanceof t?Eu(s).putImageData(a,0,0):Eu(s).drawImage(a,0,0,r,i),s}function ZX(a,e){return Wt(this,void 0,void 0,function(){var t,n,r,i,s,o;return Kt(this,function(l){switch(l.label){case 0:return t=Oi.getEnv().createCanvasElement(),n=a.shape.slice(Jd(a)?1:0),r=n[0],i=n[1],s=n[2],o=Pt(function(){return a.as3D(r,i,s).toInt()}),[4,$w.toPixels(o,t)];case 1:return l.sent(),o.dispose(),[2,t]}})})}function fC(a){var e=Oi.getEnv(),t=e.Image,n=e.Canvas,r=e.Video;return a instanceof t||a instanceof n||a instanceof r}function QX(a,e,t){t===void 0&&(t=!1);var n=Oi.getEnv(),r=n.Image,i=n.Canvas;if(!(a instanceof r||a instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=KL(a),o=e/Math.max(s.height,s.width),l=o*s.width,c=o*s.height,d=m_({width:e,height:e}),h=a instanceof i?a:rR(a),m=Math.abs(l-c)/2,v=t&&l<c?m:0,A=t&&c<l?m:0;return Eu(d).drawImage(h,v,A,l,c),d}var eA=function(){function a(e,t){var n=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(r,i){if(h_(r)){n._imageTensors[i]=r,n._inputDimensions[i]=r.shape;return}if(Jd(r)){var s=r.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");n._imageTensors[i]=r,n._inputDimensions[i]=r.shape.slice(1);return}var o=r instanceof Oi.getEnv().Canvas?r:rR(r);n._canvases[i]=o,n._inputDimensions[i]=[o.height,o.width,3]})}return Object.defineProperty(a.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Gv(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),a.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},a.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},a.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},a.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},a.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),n=this.getInputHeight(e);return UX({width:t,height:n},this.inputSize)},a.prototype.toBatchTensor=function(e,t){var n=this;return t===void 0&&(t=!0),this._inputSize=e,Pt(function(){var r=Gv(n.batchSize,0,1).map(function(s){var o=n.getInput(s);if(o instanceof za){var l=Jd(o)?o:o.expandDims();return l=kX(l,t),(l.shape[1]!==e||l.shape[2]!==e)&&(l=Yw.resizeBilinear(l,[e,e])),l.as3D(e,e,3)}if(o instanceof Oi.getEnv().Canvas)return $w.fromPixels(QX(o,e,t));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)}),i=io(r.map(function(s){return s.toFloat()})).as4D(n.batchSize,e,e,3);return i})},a}();function ei(a){return Wt(this,void 0,void 0,function(){var e,t,n;return Kt(this,function(r){switch(r.label){case 0:if(a instanceof eA)return[2,a];if(e=Array.isArray(a)?a:[a],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(a)?" at input index "+i+":":""},n=e.map(aR),n.forEach(function(i,s){if(!fC(i)&&!h_(i)&&!Jd(i))throw typeof e[s]=="string"?new Error("toNetInput -"+t(s)+" string passed, but could not resolve HTMLElement for element id "+e[s]):new Error("toNetInput -"+t(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Jd(i)){var o=i.shape[0];if(o!==1)throw new Error("toNetInput -"+t(s)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}}),[4,Promise.all(n.map(function(i){return fC(i)&&JX(i)}))];case 1:return r.sent(),[2,new eA(n,Array.isArray(a))]}})})}function iR(a,e){return Wt(this,void 0,void 0,function(){var t,n,r,i,s,o,l;return Kt(this,function(c){switch(c.label){case 0:return t=Oi.getEnv().Canvas,n=a,a instanceof t?[3,5]:[4,ei(a)];case 1:if(r=c.sent(),r.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=r.getInput(0),i instanceof t?(s=i,[3,4]):[3,2];case 2:return[4,ZX(i)];case 3:s=c.sent(),c.label=4;case 4:n=s,c.label=5;case 5:return o=Eu(n),l=e.map(function(d){return d instanceof oo?d.forSize(n.width,n.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(n.width,n.height)}),[2,l.map(function(d){var h=d.x,m=d.y,v=d.width,A=d.height,E=m_({width:v,height:A});return Eu(E).putImageData(o.getImageData(h,m,v,A),0,0),E})]}})})}function sR(a,e){return Wt(this,void 0,void 0,function(){return Kt(this,function(t){if(!h_(a)&&!Jd(a))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Jd(a)&&a.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Pt(function(){var n=a.shape.slice(Jd(a)?1:0),r=n[0],i=n[1],s=n[2],o=e.map(function(c){return c instanceof oo?c.forSize(i,r).box:c}).map(function(c){return c.clipAtImageBorders(i,r)}),l=o.map(function(c){var d=c.x,h=c.y,m=c.width,v=c.height;return vL(a.as3D(r,i,s),[h,d,0],[v,m,s])});return l})]})})}function $X(a,e){return Wt(this,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:return t=Oi.getEnv().fetch,[4,t(a,e)];case 1:if(n=r.sent(),!(n.status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function eJ(a){return Wt(this,void 0,void 0,function(){return Kt(this,function(e){switch(e.label){case 0:return[4,$X(a)];case 1:return[2,e.sent().json()]}})})}function YL(a,e){var t=e+"-weights_manifest.json";if(!a)return{modelBaseUri:"",manifestUri:t};if(a==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var n=a.startsWith("http://")?"http://":a.startsWith("https://")?"https://":"";a=a.replace(n,"");var r=a.split("/").filter(function(o){return o}),i=a.endsWith(".json")?r[r.length-1]:t,s=n+(a.endsWith(".json")?r.slice(0,r.length-1):r).join("/");return s=a.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+i:s+"/"+i}}function tJ(a,e){return Wt(this,void 0,void 0,function(){var t,n,r,i;return Kt(this,function(s){switch(s.label){case 0:return t=YL(a,e),n=t.manifestUri,r=t.modelBaseUri,[4,eJ(n)];case 1:return i=s.sent(),[2,PL.loadWeights(i,r)]}})})}var Du=function(){function a(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(a.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),a.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),n=t.obj,r=t.objProp;return n[r]},a.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=t},a.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},a.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof i0})},a.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof i0)})},a.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())})},a.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,r=t.tensor,i=fi(r.dataSync());r.dispose(),e.reassignParamFromPath(n,i)})},a.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},a.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},a.prototype.load=function(e){return Wt(this,void 0,void 0,function(){return Kt(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},a.prototype.loadFromUri=function(e){return Wt(this,void 0,void 0,function(){var t;return Kt(this,function(n){switch(n.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,tJ(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},a.prototype.loadFromDisk=function(e){return Wt(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,d,h;return Kt(this,function(m){switch(m.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=Oi.getEnv().readFile,n=YL(e,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,s=function(v){return Promise.all(v.map(function(A){return t(A).then(function(E){return E.buffer})}))},o=PL.weightsLoaderFactory(s),d=(c=JSON).parse,[4,t(r)];case 1:return l=d.apply(c,[m.sent().toString()]),[4,o(l,i)];case 2:return h=m.sent(),this.loadFromWeightMap(h),[2]}})})},a.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},a.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},a.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(i,s){if(!i.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+e);return{obj:i.nextObj,objProp:s,nextObj:i.nextObj[s]}},{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof za))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},a}();function to(a,e,t){return Pt(function(){var n=zw(a,e.depthwise_filter,e.pointwise_filter,t,"same");return n=Un(n,e.bias),n})}function GS(a,e,t){return t===void 0&&(t=!1),Pt(function(){var n=Va(t?Un(Fo(a,e.conv0.filters,[2,2],"same"),e.conv0.bias):to(a,e.conv0,[2,2])),r=to(n,e.conv1,[1,1]),i=Va(Un(n,r)),s=to(i,e.conv2,[1,1]);return Va(Un(n,Un(r,s)))})}function v2(a,e,t,n){return t===void 0&&(t=!1),n===void 0&&(n=!0),Pt(function(){var r=Va(t?Un(Fo(a,e.conv0.filters,n?[2,2]:[1,1],"same"),e.conv0.bias):to(a,e.conv0,n?[2,2]:[1,1])),i=to(r,e.conv1,[1,1]),s=Va(Un(r,i)),o=to(s,e.conv2,[1,1]),l=Va(Un(r,Un(i,o))),c=to(l,e.conv3,[1,1]);return Va(Un(r,Un(i,Un(o,c))))})}function _l(a,e,t,n){return t===void 0&&(t="same"),n===void 0&&(n=!1),Pt(function(){var r=Un(Fo(a,e.filters,[1,1],t),e.bias);return n?Va(r):r})}function Lu(a,e){Object.keys(a).forEach(function(t){e.some(function(n){return n.originalPath===t})||a[t].dispose()})}function g_(a,e){return function(t,n,r,i){var s=ws(a(t*n*r*r),[r,r,t,n]),o=xr(a(n));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:s,bias:o}}}function oR(a,e){return function(t,n,r){var i=qd(a(t*n),[t,n]),s=xr(a(n));return e.push({paramPath:r+"/weights"},{paramPath:r+"/bias"}),{weights:i,bias:s}}}var qL=function(){function a(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}return a}();function lR(a,e){return function(t,n,r){var i=ws(a(9*t),[3,3,t,1]),s=ws(a(t*n),[1,1,t,n]),o=xr(a(n));return e.push({paramPath:r+"/depthwise_filter"},{paramPath:r+"/pointwise_filter"},{paramPath:r+"/bias"}),new qL(i,s,o)}}function cR(a){return function(e){var t=a(e+"/depthwise_filter",4),n=a(e+"/pointwise_filter",4),r=a(e+"/bias",1);return new qL(t,n,r)}}function sf(a,e){return function(t,n,r){var i=a[t];if(!f_(i,n))throw new Error("expected weightMap["+t+"] to be a Tensor"+n+"D, instead have "+i);return e.push({originalPath:t,paramPath:r||t}),i}}function Pu(a){var e=a;function t(r){var i=e.slice(0,r);return e=e.slice(r),i}function n(){return e}return{extractWeights:t,getRemainingWeights:n}}function XL(a,e){var t=g_(a,e),n=lR(a,e);function r(s,o,l,c){c===void 0&&(c=!1);var d=c?t(s,o,3,l+"/conv0"):n(s,o,l+"/conv0"),h=n(o,o,l+"/conv1"),m=n(o,o,l+"/conv2");return{conv0:d,conv1:h,conv2:m}}function i(s,o,l,c){c===void 0&&(c=!1);var d=r(s,o,l,c),h=d.conv0,m=d.conv1,v=d.conv2,A=n(o,o,l+"/conv3");return{conv0:h,conv1:m,conv2:v,conv3:A}}return{extractDenseBlock3Params:r,extractDenseBlock4Params:i}}function nJ(a){var e=[],t=Pu(a),n=t.extractWeights,r=t.getRemainingWeights,i=XL(n,e).extractDenseBlock4Params,s=i(3,32,"dense0",!0),o=i(32,64,"dense1"),l=i(64,128,"dense2"),c=i(128,256,"dense3");if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:s,dense1:o,dense2:l,dense3:c}}}function JL(a){return function(e){var t=a(e+"/filters",4),n=a(e+"/bias",1);return{filters:t,bias:n}}}function ZL(a,e){var t=sf(a,e),n=JL(t),r=cR(t);function i(o,l){l===void 0&&(l=!1);var c=l?n(o+"/conv0"):r(o+"/conv0"),d=r(o+"/conv1"),h=r(o+"/conv2");return{conv0:c,conv1:d,conv2:h}}function s(o,l){l===void 0&&(l=!1);var c=l?n(o+"/conv0"):r(o+"/conv0"),d=r(o+"/conv1"),h=r(o+"/conv2"),m=r(o+"/conv3");return{conv0:c,conv1:d,conv2:h,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:s}}function aJ(a){var e=[],t=ZL(a,e).extractDenseBlock4Params,n={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Lu(a,e),{params:n,paramMappings:e}}var QL=function(a){pn(e,a);function e(){return a.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var n=this.params;if(!n)throw new Error("FaceFeatureExtractor - load model before inference");return Pt(function(){var r=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=y1(r,i).div(Tt(255)),o=v2(s,n.dense0,!0);return o=v2(o,n.dense1),o=v2(o,n.dense2),o=v2(o,n.dense3),o=g1(o,[7,7],[2,2],"valid"),o})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return aJ(t)},e.prototype.extractParams=function(t){return nJ(t)},e}(Du);function xc(a,e){return Pt(function(){return Un(c_(a,e.weights),e.bias)})}function rJ(a,e,t){var n=[],r=Pu(a),i=r.extractWeights,s=r.getRemainingWeights,o=oR(i,n),l=o(e,t,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:n,params:{fc:l}}}function iJ(a){var e=[],t=sf(a,e);function n(i){var s=t(i+"/weights",2),o=t(i+"/bias",1);return{weights:s,bias:o}}var r={fc:n("fc")};return Lu(a,e),{params:r,paramMappings:e}}function $L(a){var e={},t={};return Object.keys(a).forEach(function(n){var r=n.startsWith("fc")?t:e;r[n]=a[n]}),{featureExtractorMap:e,classifierMap:t}}var eP=function(a){pn(e,a);function e(t,n){var r=a.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var n=this,r=this.params;if(!r)throw new Error(this._name+" - load model before inference");return Pt(function(){var i=t instanceof eA?n.faceFeatureExtractor.forwardInput(t):t;return xc(i.as2D(i.shape[0],-1),r.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),a.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var n=this.extractClassifierParams(t),r=n.params,i=n.paramMappings;this._params=r,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return rJ(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var n=$L(t),r=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r),iJ(i)},e.prototype.extractParams=function(t){var n=this.getClassifierChannelsIn(),r=this.getClassifierChannelsOut(),i=r*n+r,s=t.slice(0,t.length-i),o=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(o)},e}(Du),hC=["neutral","happy","sad","angry","fearful","disgusted","surprised"],sJ=function(){function a(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);hC.forEach(function(n,r){t[n]=e[r]})}return a.prototype.asSortedArray=function(){var e=this;return hC.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,n){return n.probability-t.probability})},a}(),oJ=function(a){pn(e,a);function e(t){return t===void 0&&(t=new QL),a.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var n=this;return Pt(function(){return Cu(n.runNet(t))})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.predictExpressions=function(t){return Wt(this,void 0,void 0,function(){var n,r,i,s,o=this;return Kt(this,function(l){switch(l.label){case 0:return[4,ei(t)];case 1:return n=l.sent(),[4,this.forwardInput(n)];case 2:return r=l.sent(),[4,Promise.all(Or(r).map(function(c){return Wt(o,void 0,void 0,function(){var d;return Kt(this,function(h){switch(h.label){case 0:return[4,c.data()];case 1:return d=h.sent(),c.dispose(),[2,d]}})})}))];case 3:return i=l.sent(),r.dispose(),s=i.map(function(c){return new sJ(c)}),[2,n.isBatchInput?s:s[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(eP);function tP(a,e){var t={expressions:e};return Object.assign({},a,t)}function nP(a){return $x(a)&&a.landmarks instanceof Wv&&a.unshiftedLandmarks instanceof Wv&&a.alignedRect instanceof oo}function v_(a,e){var t=a.detection.box,n=e.shiftBy(t.x,t.y),r=n.align(),i=a.detection.imageDims,s=new oo(a.detection.score,r.rescale(i.reverse()),i),o={landmarks:n,unshiftedLandmarks:e,alignedRect:s};return Object.assign({},a,o)}function lJ(a,e){var t=g_(a,e),n=lR(a,e);function r(s,o,l){var c=n(s,o,l+"/separable_conv0"),d=n(o,o,l+"/separable_conv1"),h=t(s,o,1,l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:h}}function i(s,o){var l=n(s,s,o+"/separable_conv0"),c=n(s,s,o+"/separable_conv1"),d=n(s,s,o+"/separable_conv2");return{separable_conv0:l,separable_conv1:c,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:n,extractReductionBlockParams:r,extractMainBlockParams:i}}function cJ(a,e){var t=[],n=Pu(a),r=n.extractWeights,i=n.getRemainingWeights,s=lJ(r,t),o=s.extractConvParams,l=s.extractSeparableConvParams,c=s.extractReductionBlockParams,d=s.extractMainBlockParams,h=o(3,32,3,"entry_flow/conv_in"),m=c(32,64,"entry_flow/reduction_block_0"),v=c(64,128,"entry_flow/reduction_block_1"),A={conv_in:h,reduction_block_0:m,reduction_block_1:v},E={};Gv(e,0,1).forEach(function(T){E["main_block_"+T]=d(128,"middle_flow/main_block_"+T)});var b=c(128,256,"exit_flow/reduction_block"),_=l(256,512,"exit_flow/separable_conv"),R={reduction_block:b,separable_conv:_};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:A,middle_flow:E,exit_flow:R}}}function uJ(a,e){var t=sf(a,e),n=JL(t),r=cR(t);function i(o){var l=r(o+"/separable_conv0"),c=r(o+"/separable_conv1"),d=n(o+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:d}}function s(o){var l=r(o+"/separable_conv0"),c=r(o+"/separable_conv1"),d=r(o+"/separable_conv2");return{separable_conv0:l,separable_conv1:c,separable_conv2:d}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:s}}function dJ(a,e){var t=[],n=uJ(a,t),r=n.extractConvParams,i=n.extractSeparableConvParams,s=n.extractReductionBlockParams,o=n.extractMainBlockParams,l=r("entry_flow/conv_in"),c=s("entry_flow/reduction_block_0"),d=s("entry_flow/reduction_block_1"),h={conv_in:l,reduction_block_0:c,reduction_block_1:d},m={};Gv(e,0,1).forEach(function(b){m["main_block_"+b]=o("middle_flow/main_block_"+b)});var v=s("exit_flow/reduction_block"),A=i("exit_flow/separable_conv"),E={reduction_block:v,separable_conv:A};return Lu(a,t),{params:{entry_flow:h,middle_flow:m,exit_flow:E},paramMappings:t}}function aP(a,e,t){return Un(Fo(a,e.filters,t,"same"),e.bias)}function VS(a,e,t){t===void 0&&(t=!0);var n=t?Va(a):a;return n=to(n,e.separable_conv0,[1,1]),n=to(Va(n),e.separable_conv1,[1,1]),n=Jr(n,[3,3],[2,2],"same"),n=Un(n,aP(a,e.expansion_conv,[2,2])),n}function fJ(a,e){var t=to(Va(a),e.separable_conv0,[1,1]);return t=to(Va(t),e.separable_conv1,[1,1]),t=to(Va(t),e.separable_conv2,[1,1]),t=Un(t,a),t}var hJ=function(a){pn(e,a);function e(t){var n=a.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return e.prototype.forwardInput=function(t){var n=this,r=this.params;if(!r)throw new Error("TinyXception - load model before inference");return Pt(function(){var i=t.toBatchTensor(112,!0),s=[122.782,117.001,104.298],o=y1(i,s).div(Tt(256)),l=Va(aP(o,r.entry_flow.conv_in,[2,2]));return l=VS(l,r.entry_flow.reduction_block_0,!1),l=VS(l,r.entry_flow.reduction_block_1),Gv(n._numMainBlocks,0,1).forEach(function(c){l=fJ(l,r.middle_flow["main_block_"+c])}),l=VS(l,r.exit_flow.reduction_block),l=Va(to(l,r.exit_flow.separable_conv,[1,1])),l})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return dJ(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return cJ(t,this._numMainBlocks)},e}(Du);function pJ(a){var e=[],t=Pu(a),n=t.extractWeights,r=t.getRemainingWeights,i=oR(n,e),s=i(512,1,"fc/age"),o=i(512,2,"fc/gender");if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{fc:{age:s,gender:o}}}}function mJ(a){var e=[],t=sf(a,e);function n(i){var s=t(i+"/weights",2),o=t(i+"/bias",1);return{weights:s,bias:o}}var r={fc:{age:n("fc/age"),gender:n("fc/gender")}};return Lu(a,e),{params:r,paramMappings:e}}var tA;(function(a){a.FEMALE="female",a.MALE="male"})(tA||(tA={}));var gJ=function(a){pn(e,a);function e(t){t===void 0&&(t=new hJ(2));var n=a.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var n=this,r=this.params;if(!r)throw new Error(this._name+" - load model before inference");return Pt(function(){var i=t instanceof eA?n.faceFeatureExtractor.forwardInput(t):t,s=g1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),o=xc(s,r.fc.age).as1D(),l=xc(s,r.fc.gender);return{age:o,gender:l}})},e.prototype.forwardInput=function(t){var n=this;return Pt(function(){var r=n.runNet(t),i=r.age,s=r.gender;return{age:i,gender:Cu(s)}})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Wt(this,void 0,void 0,function(){var n,r,i,s,o,l,c=this;return Kt(this,function(d){switch(d.label){case 0:return[4,ei(t)];case 1:return n=d.sent(),[4,this.forwardInput(n)];case 2:return r=d.sent(),i=Or(r.age),s=Or(r.gender),o=i.map(function(h,m){return{ageTensor:h,genderTensor:s[m]}}),[4,Promise.all(o.map(function(h){var m=h.ageTensor,v=h.genderTensor;return Wt(c,void 0,void 0,function(){var A,E,b,_,R;return Kt(this,function(T){switch(T.label){case 0:return[4,m.data()];case 1:return A=T.sent()[0],[4,v.data()];case 2:return E=T.sent()[0],b=E>.5,_=b?tA.MALE:tA.FEMALE,R=b?E:1-E,m.dispose(),v.dispose(),[2,{age:A,gender:_,genderProbability:R}]}})})}))];case 3:return l=d.sent(),r.age.dispose(),r.gender.dispose(),[2,n.isBatchInput?l:l[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),a.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var n=this.extractClassifierParams(t),r=n.params,i=n.paramMappings;this._params=r,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return pJ(t)},e.prototype.extractParamsFromWeigthMap=function(t){var n=$L(t),r=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r),mJ(i)},e.prototype.extractParams=function(t){var n=1539,r=t.slice(0,t.length-n),i=t.slice(t.length-n);return this.faceFeatureExtractor.extractWeights(r),this.extractClassifierParams(i)},e}(Du),rP=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.postProcess=function(t,n,r){var i=r.map(function(o){var l=o.width,c=o.height,d=n/Math.max(c,l);return{width:l*d,height:c*d}}),s=i.length;return Pt(function(){var o=function(m,v){return io([Sc([68],m),Sc([68],v)],1).as2D(1,136).as1D()},l=function(m,v){var A=i[m],E=A.width,b=A.height;return v(E,b)?Math.abs(E-b)/2:0},c=function(m){return l(m,function(v,A){return v<A})},d=function(m){return l(m,function(v,A){return A<v})},h=t.mul(Sc([s,136],n)).sub(io(Array.from(Array(s),function(m,v){return o(c(v),d(v))}))).div(io(Array.from(Array(s),function(m,v){return o(i[v].width,i[v].height)})));return h})},e.prototype.forwardInput=function(t){var n=this;return Pt(function(){var r=n.runNet(t);return n.postProcess(r,t.inputSize,t.inputDimensions.map(function(i){var s=i[0],o=i[1];return{height:s,width:o}}))})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Wt(this,void 0,void 0,function(){var n,r,i,s=this;return Kt(this,function(o){switch(o.label){case 0:return[4,ei(t)];case 1:return n=o.sent(),r=Pt(function(){return Or(s.forwardInput(n))}),[4,Promise.all(r.map(function(l,c){return Wt(s,void 0,void 0,function(){var d,h,m,v,A;return Kt(this,function(E){switch(E.label){case 0:return m=(h=Array).from,[4,l.data()];case 1:return d=m.apply(h,[E.sent()]),v=d.filter(function(b,_){return oC(_)}),A=d.filter(function(b,_){return!oC(_)}),[2,new VX(Array(68).fill(0).map(function(b,_){return new aa(v[_],A[_])}),{height:n.getInputHeight(c),width:n.getInputWidth(c)})]}})})}))];case 2:return i=o.sent(),r.forEach(function(l){return l.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(eP),iP=function(a){pn(e,a);function e(t){return t===void 0&&(t=new QL),a.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(rP);function vJ(a){var e=[],t=ZL(a,e).extractDenseBlock3Params,n={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Lu(a,e),{params:n,paramMappings:e}}function yJ(a){var e=[],t=Pu(a),n=t.extractWeights,r=t.getRemainingWeights,i=XL(n,e).extractDenseBlock3Params,s=i(3,32,"dense0",!0),o=i(32,64,"dense1"),l=i(64,128,"dense2");if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:e,params:{dense0:s,dense1:o,dense2:l}}}var xJ=function(a){pn(e,a);function e(){return a.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var n=this.params;if(!n)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Pt(function(){var r=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=y1(r,i).div(Tt(255)),o=GS(s,n.dense0,!0);return o=GS(o,n.dense1),o=GS(o,n.dense2),o=g1(o,[14,14],[2,2],"valid"),o})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return vJ(t)},e.prototype.extractParams=function(t){return yJ(t)},e}(Du),AJ=function(a){pn(e,a);function e(t){return t===void 0&&(t=new xJ),a.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(rP);(function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(iP);function _J(a,e){return Un(Li(a,e.weights),e.biases)}function uR(a,e,t,n,r){r===void 0&&(r="same");var i=e.conv,s=i.filters,o=i.bias,l=Fo(a,s,t,r);return l=Un(l,o),l=_J(l,e.scale),n?Va(l):l}function bJ(a,e){return uR(a,e,[1,1],!0)}function sP(a,e){return uR(a,e,[1,1],!1)}function oP(a,e){return uR(a,e,[2,2],!0,"valid")}function SJ(a,e){function t(o,l,c){var d=a(o),h=d.length/(l*c*c);if(OX(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+d.length+", numFilters: "+l+", filterSize: "+c);return Pt(function(){return $d(ws(d,[l,h,c,c]),[2,3,1,0])})}function n(o,l,c,d){var h=t(o,l,c),m=xr(a(l));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:h,bias:m}}function r(o,l){var c=xr(a(o)),d=xr(a(o));return e.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:c,biases:d}}function i(o,l,c,d){var h=n(o,l,c,d+"/conv"),m=r(l,d+"/scale");return{conv:h,scale:m}}function s(o,l,c,d,h){h===void 0&&(h=!1);var m=i((h?.5:1)*o,l,c,d+"/conv1"),v=i(o,l,c,d+"/conv2");return{conv1:m,conv2:v}}return{extractConvLayerParams:i,extractResidualLayerParams:s}}function EJ(a){var e=Pu(a),t=e.extractWeights,n=e.getRemainingWeights,r=[],i=SJ(t,r),s=i.extractConvLayerParams,o=i.extractResidualLayerParams,l=s(4704,32,7,"conv32_down"),c=o(9216,32,3,"conv32_1"),d=o(9216,32,3,"conv32_2"),h=o(9216,32,3,"conv32_3"),m=o(36864,64,3,"conv64_down",!0),v=o(36864,64,3,"conv64_1"),A=o(36864,64,3,"conv64_2"),E=o(36864,64,3,"conv64_3"),b=o(147456,128,3,"conv128_down",!0),_=o(147456,128,3,"conv128_1"),R=o(147456,128,3,"conv128_2"),T=o(589824,256,3,"conv256_down",!0),M=o(589824,256,3,"conv256_1"),I=o(589824,256,3,"conv256_2"),P=o(589824,256,3,"conv256_down_out"),B=Pt(function(){return $d(qd(t(256*128),[128,256]),[1,0])});if(r.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: "+n().length);var F={conv32_down:l,conv32_1:c,conv32_2:d,conv32_3:h,conv64_down:m,conv64_1:v,conv64_2:A,conv64_3:E,conv128_down:b,conv128_1:_,conv128_2:R,conv256_down:T,conv256_1:M,conv256_2:I,conv256_down_out:P,fc:B};return{params:F,paramMappings:r}}function wJ(a,e){var t=sf(a,e);function n(s){var o=t(s+"/scale/weights",1),l=t(s+"/scale/biases",1);return{weights:o,biases:l}}function r(s){var o=t(s+"/conv/filters",4),l=t(s+"/conv/bias",1),c=n(s);return{conv:{filters:o,bias:l},scale:c}}function i(s){return{conv1:r(s+"/conv1"),conv2:r(s+"/conv2")}}return{extractConvLayerParams:r,extractResidualLayerParams:i}}function RJ(a){var e=[],t=wJ(a,e),n=t.extractConvLayerParams,r=t.extractResidualLayerParams,i=n("conv32_down"),s=r("conv32_1"),o=r("conv32_2"),l=r("conv32_3"),c=r("conv64_down"),d=r("conv64_1"),h=r("conv64_2"),m=r("conv64_3"),v=r("conv128_down"),A=r("conv128_1"),E=r("conv128_2"),b=r("conv256_down"),_=r("conv256_1"),R=r("conv256_2"),T=r("conv256_down_out"),M=a.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!PX(M))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+M);var I={conv32_down:i,conv32_1:s,conv32_2:o,conv32_3:l,conv64_down:c,conv64_1:d,conv64_2:h,conv64_3:m,conv128_down:v,conv128_1:A,conv128_2:E,conv256_down:b,conv256_1:_,conv256_2:R,conv256_down_out:T,fc:M};return Lu(a,e),{params:I,paramMappings:e}}function fc(a,e){var t=bJ(a,e.conv1);return t=sP(t,e.conv2),t=Un(t,a),t=Va(t),t}function y2(a,e){var t=oP(a,e.conv1);t=sP(t,e.conv2);var n=g1(a,2,2,"valid"),r=Ca(n.shape),i=n.shape[3]!==t.shape[3],s=n.shape[1]!==t.shape[1]||n.shape[2]!==t.shape[2];if(s){var o=wv(t.shape);o[1]=1;var l=Ca(o);t=Pr([t,l],1);var c=wv(t.shape);c[2]=1;var d=Ca(c);t=Pr([t,d],2)}return n=i?Pr([n,r],3):n,t=Un(n,t),t=Va(t),t}var MJ=function(a){pn(e,a);function e(){return a.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var n=this.params;if(!n)throw new Error("FaceRecognitionNet - load model before inference");return Pt(function(){var r=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],s=y1(r,i).div(Tt(256)),o=oP(s,n.conv32_down);o=Jr(o,3,2,"valid"),o=fc(o,n.conv32_1),o=fc(o,n.conv32_2),o=fc(o,n.conv32_3),o=y2(o,n.conv64_down),o=fc(o,n.conv64_1),o=fc(o,n.conv64_2),o=fc(o,n.conv64_3),o=y2(o,n.conv128_down),o=fc(o,n.conv128_1),o=fc(o,n.conv128_2),o=y2(o,n.conv256_down),o=fc(o,n.conv256_1),o=fc(o,n.conv256_2),o=y2(o,n.conv256_down_out);var l=o.mean([1,2]),c=c_(l,n.fc);return c})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Wt(this,void 0,void 0,function(){var n,r,i,s=this;return Kt(this,function(o){switch(o.label){case 0:return[4,ei(t)];case 1:return n=o.sent(),r=Pt(function(){return Or(s.forwardInput(n))}),[4,Promise.all(r.map(function(l){return l.data()}))];case 2:return i=o.sent(),r.forEach(function(l){return l.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return RJ(t)},e.prototype.extractParams=function(t){return EJ(t)},e}(Du);function lP(a,e){var t={descriptor:e};return Object.assign({},a,t)}function cP(a,e){var t={age:e};return Object.assign({},a,t)}function uP(a,e,t){var n={gender:e,genderProbability:t};return Object.assign({},a,n)}var y_=function(){function a(e){var t=e===void 0?{}:e,n=t.minFaceSize,r=t.scaleFactor,i=t.maxNumScales,s=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=o,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(a.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),a}();function TJ(a,e){function t(l,c){var d=ws(a(9*l),[3,3,l,1]),h=xr(a(l)),m=xr(a(l)),v=xr(a(l)),A=xr(a(l));return e.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:d,batch_norm_scale:h,batch_norm_offset:m,batch_norm_mean:v,batch_norm_variance:A}}function n(l,c,d,h,m){var v=ws(a(l*c*d*d),[d,d,l,c]),A=xr(a(c));return e.push({paramPath:h+"/filters"},{paramPath:h+"/"+(m?"batch_norm_offset":"bias")}),{filters:v,bias:A}}function r(l,c,d,h){var m=n(l,c,d,h,!0),v=m.filters,A=m.bias;return{filters:v,batch_norm_offset:A}}function i(l,c,d){var h=t(l,d+"/depthwise_conv"),m=r(l,c,1,d+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:m}}function s(){var l=r(3,32,3,"mobilenetv1/conv_0"),c=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),v=i(256,256,"mobilenetv1/conv_5"),A=i(256,512,"mobilenetv1/conv_6"),E=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),_=i(512,512,"mobilenetv1/conv_9"),R=i(512,512,"mobilenetv1/conv_10"),T=i(512,512,"mobilenetv1/conv_11"),M=i(512,1024,"mobilenetv1/conv_12"),I=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:c,conv_2:d,conv_3:h,conv_4:m,conv_5:v,conv_6:A,conv_7:E,conv_8:b,conv_9:_,conv_10:R,conv_11:T,conv_12:M,conv_13:I}}function o(){var l=r(1024,256,1,"prediction_layer/conv_0"),c=r(256,512,3,"prediction_layer/conv_1"),d=r(512,128,1,"prediction_layer/conv_2"),h=r(128,256,3,"prediction_layer/conv_3"),m=r(256,128,1,"prediction_layer/conv_4"),v=r(128,256,3,"prediction_layer/conv_5"),A=r(256,64,1,"prediction_layer/conv_6"),E=r(64,128,3,"prediction_layer/conv_7"),b=n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=n(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),R=n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),T=n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),M=n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),I=n(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),P=n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),B=n(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),F=n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),L=n(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),U=n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),j=n(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),W={box_encoding_predictor:b,class_predictor:_},Q={box_encoding_predictor:R,class_predictor:T},$={box_encoding_predictor:M,class_predictor:I},re={box_encoding_predictor:P,class_predictor:B},G={box_encoding_predictor:F,class_predictor:L},Y={box_encoding_predictor:U,class_predictor:j};return{conv_0:l,conv_1:c,conv_2:d,conv_3:h,conv_4:m,conv_5:v,conv_6:A,conv_7:E,box_predictor_0:W,box_predictor_1:Q,box_predictor_2:$,box_predictor_3:re,box_predictor_4:G,box_predictor_5:Y}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:o}}function NJ(a){var e=[],t=Pu(a),n=t.extractWeights,r=t.getRemainingWeights,i=TJ(n,e),s=i.extractMobilenetV1Params,o=i.extractPredictionLayerParams,l=s(),c=o(),d=Mw(n(5118*4),[1,5118,4]),h={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{mobilenetv1:l,prediction_layer:c,output_layer:h},paramMappings:e}}function CJ(a,e){var t=sf(a,e);function n(c,d,h){var m=t(c+"/Conv2d_"+d+"_pointwise/weights",4,h+"/filters"),v=t(c+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:m,batch_norm_offset:v}}function r(c){var d="mobilenetv1/conv_"+c,h="MobilenetV1/Conv2d_"+c+"_depthwise",m=d+"/depthwise_conv",v=d+"/pointwise_conv",A=t(h+"/depthwise_weights",4,m+"/filters"),E=t(h+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),b=t(h+"/BatchNorm/beta",1,m+"/batch_norm_offset"),_=t(h+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),R=t(h+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:A,batch_norm_scale:E,batch_norm_offset:b,batch_norm_mean:_,batch_norm_variance:R},pointwise_conv:n("MobilenetV1",c,v)}}function i(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:r(1),conv_2:r(2),conv_3:r(3),conv_4:r(4),conv_5:r(5),conv_6:r(6),conv_7:r(7),conv_8:r(8),conv_9:r(9),conv_10:r(10),conv_11:r(11),conv_12:r(12),conv_13:r(13)}}function s(c,d){var h=t(c+"/weights",4,d+"/filters"),m=t(c+"/biases",1,d+"/bias");return{filters:h,bias:m}}function o(c){var d=s("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),h=s("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:d,class_predictor:h}}function l(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function IJ(a){var e=[],t=CJ(a,e),n=t.extractMobilenetV1Params,r=t.extractPredictionLayerParams,i=a["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!h_(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var s={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:i}};return Lu(a,e),{params:s,paramMappings:e}}function mc(a,e,t){return Pt(function(){var n=Fo(a,e.filters,t,"same");return n=Un(n,e.batch_norm_offset),Fw(n,0,6)})}var DJ=.0010000000474974513;function LJ(a,e,t){return Pt(function(){var n=l_(a,e.filters,t,"same");return n=nL(n,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,DJ),Fw(n,0,6)})}function PJ(a){return[2,4,6,12].some(function(e){return e===a})?[2,2]:[1,1]}function OJ(a,e){return Pt(function(){var t=null,n=mc(a,e.conv_0,[2,2]),r=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(r.forEach(function(i,s){var o=s+1,l=PJ(o);n=LJ(n,i.depthwise_conv,l),n=mc(n,i.pointwise_conv,[1,1]),o===11&&(t=n)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:n,conv11:t}})}function UJ(a,e,t,n,r){var i=a.shape[0],s=Math.min(t,i),o=e.map(function(d,h){return{score:d,boxIndex:h}}).filter(function(d){return d.score>r}).sort(function(d,h){return h.score-d.score}),l=function(d){return d<=n?1:0},c=[];return o.forEach(function(d){if(!(c.length>=s)){for(var h=d.score,m=c.length-1;m>=0;--m){var v=BJ(a,d.boxIndex,c[m]);if(v!==0&&(d.score*=l(v),d.score<=r))break}h===d.score&&c.push(d.boxIndex)}}),c}function BJ(a,e,t){var n=a.arraySync(),r=Math.min(n[e][0],n[e][2]),i=Math.min(n[e][1],n[e][3]),s=Math.max(n[e][0],n[e][2]),o=Math.max(n[e][1],n[e][3]),l=Math.min(n[t][0],n[t][2]),c=Math.min(n[t][1],n[t][3]),d=Math.max(n[t][0],n[t][2]),h=Math.max(n[t][1],n[t][3]),m=(s-r)*(o-i),v=(d-l)*(h-c);if(m<=0||v<=0)return 0;var A=Math.max(r,l),E=Math.max(i,c),b=Math.min(s,d),_=Math.min(o,h),R=Math.max(b-A,0)*Math.max(_-E,0);return R/(m+v-R)}function FJ(a){var e=Or($d(a,[1,0])),t=[kr(e[2],e[0]),kr(e[3],e[1])],n=[Un(e[0],gl(t[0],Tt(2))),Un(e[1],gl(t[1],Tt(2)))];return{sizes:t,centers:n}}function kJ(a,e){var t=FJ(a),n=t.sizes,r=t.centers,i=Or($d(e,[1,0])),s=gl(Li(N3(gl(i[2],Tt(5))),n[0]),Tt(2)),o=Un(Li(gl(i[0],Tt(10)),n[0]),r[0]),l=gl(Li(N3(gl(i[3],Tt(5))),n[1]),Tt(2)),c=Un(Li(gl(i[1],Tt(10)),n[1]),r[1]);return $d(io([kr(o,s),kr(c,l),Un(o,s),Un(c,l)]),[1,0])}function HJ(a,e,t){return Pt(function(){var n=a.shape[0],r=kJ(xl(Ym(t.extra_dim,[n,1,1]),[-1,4]),xl(a,[-1,4]));r=xl(r,[n,r.shape[0]/n,4]);var i=Q5(Rc(e,[0,0,1],[-1,-1,-1])),s=Rc(i,[0,0,0],[-1,-1,1]);s=xl(s,[n,s.shape[1]]);var o=Or(r),l=Or(s);return{boxes:o,scores:l}})}function pm(a,e){return Pt(function(){var t=a.shape[0],n=xl(_l(a,e.box_encoding_predictor),[t,-1,1,4]),r=xl(_l(a,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:n,classPrediction:r}})}function jJ(a,e,t){return Pt(function(){var n=mc(a,t.conv_0,[1,1]),r=mc(n,t.conv_1,[2,2]),i=mc(r,t.conv_2,[1,1]),s=mc(i,t.conv_3,[2,2]),o=mc(s,t.conv_4,[1,1]),l=mc(o,t.conv_5,[2,2]),c=mc(l,t.conv_6,[1,1]),d=mc(c,t.conv_7,[2,2]),h=pm(e,t.box_predictor_0),m=pm(a,t.box_predictor_1),v=pm(r,t.box_predictor_2),A=pm(s,t.box_predictor_3),E=pm(l,t.box_predictor_4),b=pm(d,t.box_predictor_5),_=Pr([h.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding,A.boxPredictionEncoding,E.boxPredictionEncoding,b.boxPredictionEncoding],1),R=Pr([h.classPrediction,m.classPrediction,v.classPrediction,A.classPrediction,E.classPrediction,b.classPrediction],1);return{boxPredictions:_,classPredictions:R}})}var T0=function(){function a(e){var t=e===void 0?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(a.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),a}(),dP=function(a){pn(e,a);function e(){return a.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var n=this.params;if(!n)throw new Error("SsdMobilenetv1 - load model before inference");return Pt(function(){var r=t.toBatchTensor(512,!1).toFloat(),i=kr(Li(r,Tt(.007843137718737125)),Tt(1)),s=OJ(i,n.mobilenetv1),o=jJ(s.out,s.conv11,n.prediction_layer),l=o.boxPredictions,c=o.classPredictions;return HJ(l,c,n.output_layer)})},e.prototype.forward=function(t){return Wt(this,void 0,void 0,function(){var n;return Kt(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ei(t)];case 1:return[2,n.apply(this,[r.sent()])]}})})},e.prototype.locateFaces=function(t,n){return n===void 0&&(n={}),Wt(this,void 0,void 0,function(){var r,i,s,o,l,c,d,h,m,v,A,E,b,_,R,T,M,I,P,B,F;return Kt(this,function(L){switch(L.label){case 0:return r=new T0(n),i=r.maxResults,s=r.minConfidence,[4,ei(t)];case 1:for(o=L.sent(),l=this.forwardInput(o),c=l.boxes,d=l.scores,h=c[0],m=d[0],v=1;v<c.length;v++)c[v].dispose(),d[v].dispose();return b=(E=Array).from,[4,m.data()];case 2:return A=b.apply(E,[L.sent()]),_=.5,R=UJ(h,A,i,_,s),T=o.getReshapedInputDimensions(0),M=o.inputSize,I=M/T.width,P=M/T.height,B=h.arraySync(),F=R.map(function(U){var j=[Math.max(0,B[U][0]),Math.min(1,B[U][2])].map(function(Y){return Y*P}),W=j[0],Q=j[1],$=[Math.max(0,B[U][1]),Math.min(1,B[U][3])].map(function(Y){return Y*I}),re=$[0],G=$[1];return new oo(A[U],new tR(re,W,G-re,Q-W),{height:o.getInputHeight(0),width:o.getInputWidth(0)})}),h.dispose(),m.dispose(),[2,F]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return IJ(t)},e.prototype.extractParams=function(t){return NJ(t)},e}(Du);(function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(dP);var zJ=.4,GJ=[new aa(.738768,.874946),new aa(2.42204,2.65704),new aa(4.30971,7.04493),new aa(10.246,4.59428),new aa(12.6868,11.8741)],VJ=[new aa(1.603231,2.094468),new aa(6.041143,7.080126),new aa(2.882459,3.518061),new aa(4.266906,5.178857),new aa(9.041765,10.66308)],WJ=[117.001,114.697,97.404],KJ="tiny_yolov2_model",YJ="tiny_yolov2_separable_conv_model",x2=function(a){return typeof a=="number"};function qJ(a){if(!a)throw new Error("invalid config: "+a);if(typeof a.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+a.withSeparableConvs);if(!x2(a.iouThreshold)||a.iouThreshold<0||a.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+a.iouThreshold);if(!Array.isArray(a.classes)||!a.classes.length||!a.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(a.classes));if(!Array.isArray(a.anchors)||!a.anchors.length||!a.anchors.map(function(e){return e||{}}).every(function(e){return x2(e.x)&&x2(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(a.anchors));if(a.meanRgb&&(!Array.isArray(a.meanRgb)||a.meanRgb.length!==3||!a.meanRgb.every(x2)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(a.meanRgb))}function dR(a){return Pt(function(){var e=Li(a,Tt(.10000000149011612));return Un(Va(kr(a,e)),e)})}function Td(a,e){return Pt(function(){var t=ep(a,[[0,0],[1,1],[1,1],[0,0]]);return t=Fo(t,e.conv.filters,[1,1],"valid"),t=kr(t,e.bn.sub),t=Li(t,e.bn.truediv),t=Un(t,e.conv.bias),dR(t)})}function Nd(a,e){return Pt(function(){var t=ep(a,[[0,0],[1,1],[1,1],[0,0]]);return t=zw(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=Un(t,e.bias),dR(t)})}function XJ(a,e){var t=g_(a,e);function n(s,o){var l=xr(a(s)),c=xr(a(s));return e.push({paramPath:o+"/sub"},{paramPath:o+"/truediv"}),{sub:l,truediv:c}}function r(s,o,l){var c=t(s,o,3,l+"/conv"),d=n(o,l+"/bn");return{conv:c,bn:d}}var i=lR(a,e);return{extractConvParams:t,extractConvWithBatchNormParams:r,extractSeparableConvParams:i}}function JJ(a,e,t,n){var r=Pu(a),i=r.extractWeights,s=r.getRemainingWeights,o=[],l=XJ(i,o),c=l.extractConvParams,d=l.extractConvWithBatchNormParams,h=l.extractSeparableConvParams,m;if(e.withSeparableConvs){var v=n[0],A=n[1],E=n[2],b=n[3],_=n[4],R=n[5],T=n[6],M=n[7],I=n[8],P=e.isFirstLayerConv2d?c(v,A,3,"conv0"):h(v,A,"conv0"),B=h(A,E,"conv1"),F=h(E,b,"conv2"),L=h(b,_,"conv3"),U=h(_,R,"conv4"),j=h(R,T,"conv5"),W=M?h(T,M,"conv6"):void 0,Q=I?h(M,I,"conv7"):void 0,$=c(I||M||T,5*t,1,"conv8");m={conv0:P,conv1:B,conv2:F,conv3:L,conv4:U,conv5:j,conv6:W,conv7:Q,conv8:$}}else{var v=n[0],A=n[1],E=n[2],b=n[3],_=n[4],R=n[5],T=n[6],M=n[7],I=n[8],P=d(v,A,"conv0"),B=d(A,E,"conv1"),F=d(E,b,"conv2"),L=d(b,_,"conv3"),U=d(_,R,"conv4"),j=d(R,T,"conv5"),W=d(T,M,"conv6"),Q=d(M,I,"conv7"),$=c(I,5*t,1,"conv8");m={conv0:P,conv1:B,conv2:F,conv3:L,conv4:U,conv5:j,conv6:W,conv7:Q,conv8:$}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:m,paramMappings:o}}function ZJ(a,e){var t=sf(a,e);function n(o){var l=t(o+"/sub",1),c=t(o+"/truediv",1);return{sub:l,truediv:c}}function r(o){var l=t(o+"/filters",4),c=t(o+"/bias",1);return{filters:l,bias:c}}function i(o){var l=r(o+"/conv"),c=n(o+"/bn");return{conv:l,bn:c}}var s=cR(t);return{extractConvParams:r,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}}function QJ(a,e){var t=[],n=ZJ(a,t),r=n.extractConvParams,i=n.extractConvWithBatchNormParams,s=n.extractSeparableConvParams,o;if(e.withSeparableConvs){var l=e.filterSizes&&e.filterSizes.length||9;o={conv0:e.isFirstLayerConv2d?r("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:l>7?s("conv6"):void 0,conv7:l>8?s("conv7"):void 0,conv8:r("conv8")}}else o={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:r("conv8")};return Lu(a,t),{params:o,paramMappings:t}}var pC;(function(a){a[a.XS=224]="XS",a[a.SM=320]="SM",a[a.MD=416]="MD",a[a.LG=608]="LG"})(pC||(pC={}));var fR=function(){function a(e){var t=e===void 0?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(a.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),a}(),fP=function(a){pn(e,a);function e(t){var n=a.call(this,"TinyYolov2")||this;return qJ(t),n._config=t,n}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,n){var r=Td(t,n.conv0);return r=Jr(r,[2,2],[2,2],"same"),r=Td(r,n.conv1),r=Jr(r,[2,2],[2,2],"same"),r=Td(r,n.conv2),r=Jr(r,[2,2],[2,2],"same"),r=Td(r,n.conv3),r=Jr(r,[2,2],[2,2],"same"),r=Td(r,n.conv4),r=Jr(r,[2,2],[2,2],"same"),r=Td(r,n.conv5),r=Jr(r,[2,2],[1,1],"same"),r=Td(r,n.conv6),r=Td(r,n.conv7),_l(r,n.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,n){var r=this.config.isFirstLayerConv2d?dR(_l(t,n.conv0,"valid",!1)):Nd(t,n.conv0);return r=Jr(r,[2,2],[2,2],"same"),r=Nd(r,n.conv1),r=Jr(r,[2,2],[2,2],"same"),r=Nd(r,n.conv2),r=Jr(r,[2,2],[2,2],"same"),r=Nd(r,n.conv3),r=Jr(r,[2,2],[2,2],"same"),r=Nd(r,n.conv4),r=Jr(r,[2,2],[2,2],"same"),r=Nd(r,n.conv5),r=Jr(r,[2,2],[1,1],"same"),r=n.conv6?Nd(r,n.conv6):r,r=n.conv7?Nd(r,n.conv7):r,_l(r,n.conv8,"valid",!1)},e.prototype.forwardInput=function(t,n){var r=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Pt(function(){var s=t.toBatchTensor(n,!1).toFloat();return s=r.config.meanRgb?y1(s,r.config.meanRgb):s,s=s.div(Tt(256)),r.config.withSeparableConvs?r.runMobilenet(s,i):r.runTinyYolov2(s,i)})},e.prototype.forward=function(t,n){return Wt(this,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ei(t)];case 1:return[4,r.apply(this,[i.sent(),n])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(t,n){return n===void 0&&(n={}),Wt(this,void 0,void 0,function(){var r,i,s,o,l,c,d,h,m,v,A,E,b,_,R=this;return Kt(this,function(T){switch(T.label){case 0:return r=new fR(n),i=r.inputSize,s=r.scoreThreshold,[4,ei(t)];case 1:return o=T.sent(),[4,this.forwardInput(o,i)];case 2:return l=T.sent(),c=Pt(function(){return Or(l)[0].expandDims()}),d={width:o.getInputWidth(0),height:o.getInputHeight(0)},[4,this.extractBoxes(c,o.getReshapedInputDimensions(0),s)];case 3:return h=T.sent(),l.dispose(),c.dispose(),m=h.map(function(M){return M.box}),v=h.map(function(M){return M.score}),A=h.map(function(M){return M.classScore}),E=h.map(function(M){return R.config.classes[M.label]}),b=Vv(m.map(function(M){return M.rescale(i)}),v,this.config.iouThreshold,!0),_=b.map(function(M){return new BL(v[M],A[M],E[M],m[M],d)}),[2,_]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return QJ(t,this.config)},e.prototype.extractParams=function(t){var n=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(r!==7&&r!==8&&r!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return JJ(t,this.config,this.boxEncodingSize,n)},e.prototype.extractBoxes=function(t,n,r){return Wt(this,void 0,void 0,function(){var i,s,o,l,c,d,h,m,v,A,E,b,_,R,T,M,I,P,B,F,L,U,j,W,Q,$,re,G,Y,K=this;return Kt(this,function(X){switch(X.label){case 0:return i=n.width,s=n.height,o=Math.max(i,s),l=o/i,c=o/s,d=t.shape[1],h=this.config.anchors.length,m=Pt(function(){var z=t.reshape([d,d,h,K.boxEncodingSize]),J=z.slice([0,0,0,0],[d,d,h,4]),le=z.slice([0,0,0,4],[d,d,h,1]),ce=K.withClassScores?Cu(z.slice([0,0,0,5],[d,d,h,K.config.classes.length]),3):Tt(0);return[J,le,ce]}),v=m[0],A=m[1],E=m[2],b=[],[4,A.array()];case 1:return _=X.sent(),[4,v.array()];case 2:R=X.sent(),T=0,X.label=3;case 3:if(!(T<d))return[3,12];M=0,X.label=4;case 4:if(!(M<d))return[3,11];I=0,X.label=5;case 5:return I<h?(P=zS(_[T][M][I][0]),!r||P>r?(B=(M+zS(R[T][M][I][0]))/d*l,F=(T+zS(R[T][M][I][1]))/d*c,L=Math.exp(R[T][M][I][2])*this.config.anchors[I].x/d*l,U=Math.exp(R[T][M][I][3])*this.config.anchors[I].y/d*c,j=B-L/2,W=F-U/2,Q={row:T,col:M,anchor:I},this.withClassScores?[4,this.extractPredictedClass(E,Q)]:[3,7]):[3,9]):[3,10];case 6:return Y=X.sent(),[3,8];case 7:Y={classScore:1,label:0},X.label=8;case 8:$=Y,re=$.classScore,G=$.label,b.push(Ni({box:new p_(j,W,j+L,W+U),score:P,classScore:P*re,label:G},Q)),X.label=9;case 9:return I++,[3,5];case 10:return M++,[3,4];case 11:return T++,[3,3];case 12:return v.dispose(),A.dispose(),E.dispose(),[2,b]}})})},e.prototype.extractPredictedClass=function(t,n){return Wt(this,void 0,void 0,function(){var r,i,s,o;return Kt(this,function(l){switch(l.label){case 0:return r=n.row,i=n.col,s=n.anchor,[4,t.array()];case 1:return o=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,d){return o[r][i][s][d]}).map(function(c,d){return{classScore:c,label:d}}).reduce(function(c,d){return c.classScore>d.classScore?c:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Du),$J=function(a){pn(e,a);function e(t){t===void 0&&(t=!0);var n=this,r=Object.assign({},{withSeparableConvs:t,iouThreshold:zJ,classes:["face"]},t?{anchors:VJ,meanRgb:WJ}:{anchors:GJ,withClassScores:!0});return n=a.call(this,r)||this,n}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,n){return Wt(this,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return[4,this.detect(t,n)];case 1:return r=i.sent(),[2,r.map(function(s){return new oo(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?YJ:KJ},e.prototype.extractParamsFromWeigthMap=function(t){return a.prototype.extractParamsFromWeigthMap.call(this,t)},e}(fP),hR=function(a){pn(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}(fR),x1=function(){function a(){}return a.prototype.then=function(e){return Wt(this,void 0,void 0,function(){var t;return Kt(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},a.prototype.run=function(){return Wt(this,void 0,void 0,function(){return Kt(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},a}();function x_(a,e,t,n,r){return r===void 0&&(r=function(i){var s=i.alignedRect;return s}),Wt(this,void 0,void 0,function(){var i,s,o,l,c;return Kt(this,function(d){switch(d.label){case 0:return i=a.map(function(h){return nP(h)?r(h):h.detection}),o=n,o?[3,5]:e instanceof za?[4,sR(e,i)]:[3,2];case 1:return l=d.sent(),[3,4];case 2:return[4,iR(e,i)];case 3:l=d.sent(),d.label=4;case 4:o=l,d.label=5;case 5:return s=o,[4,t(s)];case 6:return c=d.sent(),s.forEach(function(h){return h instanceof za&&h.dispose()}),[2,c]}})})}function pR(a,e,t,n,r){return Wt(this,void 0,void 0,function(){var i=this;return Kt(this,function(s){return[2,x_([a],e,function(o){return Wt(i,void 0,void 0,function(){return Kt(this,function(l){return[2,t(o[0])]})})},n,r)]})})}function eZ(a){return Pt(function(){return io(Or(a,3).reverse(),3)})}var A2=2,nA=12;function tZ(a,e){var t=g_(a,e),n=oR(a,e);function r(c,d){var h=xr(a(c));return e.push({paramPath:d}),h}function i(c,d,h){h===void 0&&(h=!1);var m=t(c[0],c[1],3,d+"/conv1"),v=r(c[1],d+"/prelu1_alpha"),A=t(c[1],c[2],3,d+"/conv2"),E=r(c[2],d+"/prelu2_alpha"),b=t(c[2],c[3],h?2:3,d+"/conv3"),_=r(c[3],d+"/prelu3_alpha");return{conv1:m,prelu1_alpha:v,conv2:A,prelu2_alpha:E,conv3:b,prelu3_alpha:_}}function s(){var c=i([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),h=t(32,4,1,"pnet/conv4_2");return Ni(Ni({},c),{conv4_1:d,conv4_2:h})}function o(){var c=i([3,28,48,64],"rnet",!0),d=n(576,128,"rnet/fc1"),h=r(128,"rnet/prelu4_alpha"),m=n(128,2,"rnet/fc2_1"),v=n(128,4,"rnet/fc2_2");return Ni(Ni({},c),{fc1:d,prelu4_alpha:h,fc2_1:m,fc2_2:v})}function l(){var c=i([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),h=r(128,"onet/prelu4_alpha"),m=n(1152,256,"onet/fc1"),v=r(256,"onet/prelu5_alpha"),A=n(256,2,"onet/fc2_1"),E=n(256,4,"onet/fc2_2"),b=n(256,10,"onet/fc2_3");return Ni(Ni({},c),{conv4:d,prelu4_alpha:h,fc1:m,prelu5_alpha:v,fc2_1:A,fc2_2:E,fc2_3:b})}return{extractPNetParams:s,extractRNetParams:o,extractONetParams:l}}function nZ(a){var e=Pu(a),t=e.extractWeights,n=e.getRemainingWeights,r=[],i=tZ(t,r),s=i.extractPNetParams,o=i.extractRNetParams,l=i.extractONetParams,c=s(),d=o(),h=l();if(n().length!==0)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:c,rnet:d,onet:h},paramMappings:r}}function aZ(a,e){var t=sf(a,e);function n(d){var h=t(d+"/weights",4,d+"/filters"),m=t(d+"/bias",1);return{filters:h,bias:m}}function r(d){var h=t(d+"/weights",2),m=t(d+"/bias",1);return{weights:h,bias:m}}function i(d){return t(d,1)}function s(d){var h=n(d+"/conv1"),m=i(d+"/prelu1_alpha"),v=n(d+"/conv2"),A=i(d+"/prelu2_alpha"),E=n(d+"/conv3"),b=i(d+"/prelu3_alpha");return{conv1:h,prelu1_alpha:m,conv2:v,prelu2_alpha:A,conv3:E,prelu3_alpha:b}}function o(){var d=s("pnet"),h=n("pnet/conv4_1"),m=n("pnet/conv4_2");return Ni(Ni({},d),{conv4_1:h,conv4_2:m})}function l(){var d=s("rnet"),h=r("rnet/fc1"),m=i("rnet/prelu4_alpha"),v=r("rnet/fc2_1"),A=r("rnet/fc2_2");return Ni(Ni({},d),{fc1:h,prelu4_alpha:m,fc2_1:v,fc2_2:A})}function c(){var d=s("onet"),h=n("onet/conv4"),m=i("onet/prelu4_alpha"),v=r("onet/fc1"),A=i("onet/prelu5_alpha"),E=r("onet/fc2_1"),b=r("onet/fc2_2"),_=r("onet/fc2_3");return Ni(Ni({},d),{conv4:h,prelu4_alpha:m,fc1:v,prelu5_alpha:A,fc2_1:E,fc2_2:b,fc2_3:_})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function rZ(a){var e=[],t=aZ(a,e),n=t.extractPNetParams,r=t.extractRNetParams,i=t.extractONetParams,s=n(),o=r(),l=i();return Lu(a,e),{params:{pnet:s,rnet:o,onet:l},paramMappings:e}}function B3(a,e){var t=e[0],n=e[1];return{height:Math.floor(t*a),width:Math.floor(n*a)}}function iZ(a,e,t){for(var n=t[0],r=t[1],i=nA/a,s=[],o=Math.min(n,r)*i,l=0;o>=12;)s.push(i*Math.pow(e,l)),o=o*e,l+=1;return s}var mR=function(a){pn(e,a);function e(t,n,r,i){return a.call(this,{left:t,top:n,right:r,bottom:i},!0)||this}return e}(Mc);function hP(a){return Pt(function(){return Li(kr(a,Tt(127.5)),Tt(.0078125))})}function Qm(a,e){return Pt(function(){return Un(Va(a),Li(e,Xx(Va(Xx(a)))))})}function gR(a,e,t){return t===void 0&&(t=!1),Pt(function(){var n=_l(a,e.conv1,"valid");return n=Qm(n,e.prelu1_alpha),n=Jr(n,t?[2,2]:[3,3],[2,2],"same"),n=_l(n,e.conv2,"valid"),n=Qm(n,e.prelu2_alpha),n=t?n:Jr(n,[3,3],[2,2],"valid"),n=_l(n,e.conv3,"valid"),n=Qm(n,e.prelu3_alpha),n})}function sZ(a,e){return Pt(function(){var t=gR(a,e,!0),n=_l(t,e.conv4_1,"valid"),r=Lo(u_(n,3),3),i=Cu(kr(n,r),3),s=_l(t,e.conv4_2,"valid");return{prob:i,regions:s}})}function oZ(a,e){return Pt(function(){var t=B3(e,a.shape.slice(1)),n=t.height,r=t.width,i=Yw.resizeBilinear(a,[n,r]),s=hP(i);return $d(s,[0,2,1,3])})}function lZ(a,e,t,n){for(var r=[],i=a.arraySync(),s=0;s<a.shape[0];s++)for(var o=0;o<a.shape[1];o++)i[s][o]>=n&&r.push(new aa(o,s));var l=r.map(function(c){var d=new p_(Math.round((c.y*A2+1)/t),Math.round((c.x*A2+1)/t),Math.round((c.y*A2+nA)/t),Math.round((c.x*A2+nA)/t)),h=i[c.y][c.x],m=e.arraySync(),v=new mR(m[c.y][c.x][0],m[c.y][c.x][1],m[c.y][c.x][2],m[c.y][c.x][3]);return{cell:d,score:h,region:v}});return l}function cZ(a,e,t,n,r){r.stage1=[];var i=e.map(function(m){return Pt(function(){var v={scale:m},A=oZ(a,m),E=Date.now(),b=sZ(A,n),_=b.prob,R=b.regions;v.pnet=Date.now()-E;var T=Or(Or(_,3)[1])[0],M=Or(R)[0];return{scoresTensor:T,regionsTensor:M,scale:m,statsForScale:v}})}),s=i.map(function(m){var v=m.scoresTensor,A=m.regionsTensor,E=m.scale,b=m.statsForScale,_=lZ(v,A,E,t);if(v.dispose(),A.dispose(),!_.length)return r.stage1.push(b),[];var R=Date.now(),T=Vv(_.map(function(M){return M.cell}),_.map(function(M){return M.score}),.5);return b.nms=Date.now()-R,b.numBoxes=T.length,r.stage1.push(b),T.map(function(M){return _[M]})}),o=s.reduce(function(m,v){return m.concat(v)},[]),l=[],c=[];if(o.length>0){var d=Date.now(),h=Vv(o.map(function(m){return m.cell}),o.map(function(m){return m.score}),.7);r.stage1_nms=Date.now()-d,c=h.map(function(m){return o[m].score}),l=h.map(function(m){return o[m]}).map(function(m){var v=m.cell,A=m.region;return new p_(v.left+A.left*v.width,v.top+A.top*v.height,v.right+A.right*v.width,v.bottom+A.bottom*v.height).toSquare().round()})}return{boxes:l,scores:c}}function pP(a,e,t){var n=t.width,r=t.height;return Wt(this,void 0,void 0,function(){var i,s,o,l=this;return Kt(this,function(c){switch(c.label){case 0:return i=Eu(a),[4,Promise.all(e.map(function(d){return Wt(l,void 0,void 0,function(){var h,m,v,A,E,b,_,R;return Kt(this,function(T){return h=d.padAtBorders(a.height,a.width),m=h.y,v=h.ey,A=h.x,E=h.ex,b=A-1,_=m-1,R=i.getImageData(b,_,E-b,v-_),[2,Oi.isNodejs()?rR(R):createImageBitmap(R)]})})}))];case 1:return s=c.sent(),o=[],s.forEach(function(d){var h=m_({width:n,height:r}),m=Eu(h);m.drawImage(d,0,0,n,r);for(var v=m.getImageData(0,0,n,r).data,A=[],E=0;E<v.length;E+=4)A.push(v[E+2]),A.push(v[E+1]),A.push(v[E]);o.push(A)}),[2,o.map(function(d){var h=Pt(function(){var m=$d(ws(d,[1,n,r,3]),[0,2,1,3]).toFloat();return hP(m)});return h})]}})})}function uZ(a,e){return Pt(function(){var t=gR(a,e),n=xl(t,[t.shape[0],e.fc1.weights.shape[0]]),r=xc(n,e.fc1),i=Qm(r,e.prelu4_alpha),s=xc(i,e.fc2_1),o=Lo(u_(s,1),1),l=Cu(kr(s,o),1),c=xc(i,e.fc2_2),d=Or(l,1)[1];return{scores:d,regions:c}})}function dZ(a,e,t,n,r){return Wt(this,void 0,void 0,function(){var i,s,o,l,c,d,h,m,v,A,E,b,_,R;return Kt(this,function(T){switch(T.label){case 0:return i=Date.now(),[4,pP(a,e,{width:24,height:24})];case 1:return s=T.sent(),r.stage2_extractImagePatches=Date.now()-i,i=Date.now(),o=s.map(function(M){var I=uZ(M,n);return M.dispose(),I}),r.stage2_rnet=Date.now()-i,l=o.length>1?Pr(o.map(function(M){return M.scores})):o[0].scores,h=(d=Array).from,[4,l.data()];case 2:return c=h.apply(d,[T.sent()]),l.dispose(),m=c.map(function(M,I){return{score:M,idx:I}}).filter(function(M){return M.score>t}).map(function(M){var I=M.idx;return I}),v=m.map(function(M){return e[M]}),A=m.map(function(M){return c[M]}),E=[],b=[],v.length>0&&(i=Date.now(),_=Vv(v,A,.7),r.stage2_nms=Date.now()-i,R=_.map(function(M){var I=o[m[M]].regions.arraySync();return new mR(I[0][0],I[0][1],I[0][2],I[0][3])}),b=_.map(function(M){return A[M]}),E=_.map(function(M,I){return v[M].calibrate(R[I])})),o.forEach(function(M){M.regions.dispose(),M.scores.dispose()}),[2,{boxes:E,scores:b}]}})})}function fZ(a,e){return Pt(function(){var t=gR(a,e);t=Jr(t,[2,2],[2,2],"same"),t=_l(t,e.conv4,"valid"),t=Qm(t,e.prelu4_alpha);var n=xl(t,[t.shape[0],e.fc1.weights.shape[0]]),r=xc(n,e.fc1),i=Qm(r,e.prelu5_alpha),s=xc(i,e.fc2_1),o=Lo(u_(s,1),1),l=Cu(kr(s,o),1),c=xc(i,e.fc2_2),d=xc(i,e.fc2_3),h=Or(l,1)[1];return{scores:h,regions:c,points:d}})}function hZ(a,e,t,n,r){return Wt(this,void 0,void 0,function(){var i,s,o,l,c,d,h,m,v,A,E,b,_,R,T;return Kt(this,function(M){switch(M.label){case 0:return i=Date.now(),[4,pP(a,e,{width:48,height:48})];case 1:return s=M.sent(),r.stage3_extractImagePatches=Date.now()-i,i=Date.now(),o=s.map(function(I){var P=fZ(I,n);return I.dispose(),P}),r.stage3_onet=Date.now()-i,l=o.length>1?Pr(o.map(function(I){return I.scores})):o[0].scores,h=(d=Array).from,[4,l.data()];case 2:return c=h.apply(d,[M.sent()]),l.dispose(),m=c.map(function(I,P){return{score:I,idx:P}}).filter(function(I){return I.score>t}).map(function(I){var P=I.idx;return P}),v=m.map(function(I){var P=o[I].regions.arraySync();return new mR(P[0][0],P[0][1],P[0][2],P[0][3])}),A=m.map(function(I,P){return e[I].calibrate(v[P])}),E=m.map(function(I){return c[I]}),b=[],_=[],R=[],A.length>0&&(i=Date.now(),T=Vv(A,E,.7,!1),r.stage3_nms=Date.now()-i,b=T.map(function(I){return A[I]}),_=T.map(function(I){return E[I]}),R=T.map(function(I,P){return Array(5).fill(0).map(function(B,F){var L=o[I].points.arraySync();return new aa(L[0][F]*(b[P].width+1)+b[P].left,L[0][F+5]*(b[P].height+1)+b[P].top)})})),o.forEach(function(I){I.regions.dispose(),I.scores.dispose(),I.points.dispose()}),[2,{boxes:b,scores:_,points:R}]}})})}var pZ=function(a){pn(e,a);function e(){return a.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Wt(this,void 0,void 0,function(){return Kt(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,a.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Wt(this,void 0,void 0,function(){return Kt(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,a.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,n){return n===void 0&&(n={}),Wt(this,void 0,void 0,function(){var r,i,s,o,l,c,d,h,m,v,A,E,b,_,R,T,M,I,P,B,F;return Kt(this,function(L){switch(L.label){case 0:if(r=this.params,!r)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},o=Date.now(),l=Pt(function(){return eZ(Lo($w.fromPixels(i)).toFloat())}),c=function(U){return l.dispose(),s.total=Date.now()-o,U},d=l.shape.slice(1),h=d[0],m=d[1],v=new y_(n),A=v.minFaceSize,E=v.scaleFactor,b=v.maxNumScales,_=v.scoreThresholds,R=v.scaleSteps,T=(R||iZ(A,E,[h,m])).filter(function(U){var j=B3(U,[h,m]);return Math.min(j.width,j.height)>nA}).slice(0,b),s.scales=T,s.pyramid=T.map(function(U){return B3(U,[h,m])}),M=Date.now(),[4,cZ(l,T,_[0],r.pnet,s)];case 1:return I=L.sent(),s.total_stage1=Date.now()-M,I.boxes.length?(s.stage2_numInputBoxes=I.boxes.length,M=Date.now(),[4,dZ(i,I.boxes,_[1],r.rnet,s)]):[2,c({results:[],stats:s})];case 2:return P=L.sent(),s.total_stage2=Date.now()-M,P.boxes.length?(s.stage3_numInputBoxes=P.boxes.length,M=Date.now(),[4,hZ(i,P.boxes,_[2],r.onet,s)]):[2,c({results:[],stats:s})];case 3:return B=L.sent(),s.total_stage3=Date.now()-M,F=B.boxes.map(function(U,j){return v_(Kv({},new oo(B.scores[j],new tR(U.left/m,U.top/h,U.width/m,U.height/h),{height:h,width:m})),new GX(B.points[j].map(function(W){return W.sub(new aa(U.left,U.top)).div(new aa(U.width,U.height))}),{width:U.width,height:U.height}))}),[2,c({results:F,stats:s})]}})})},e.prototype.forward=function(t,n){return n===void 0&&(n={}),Wt(this,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ei(t)];case 1:return[4,r.apply(this,[i.sent(),n])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(t,n){return n===void 0&&(n={}),Wt(this,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ei(t)];case 1:return[2,r.apply(this,[i.sent(),n])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return rZ(t)},e.prototype.extractParams=function(t){return nZ(t)},e}(Du),mZ=.4,gZ=[new aa(1.603231,2.094468),new aa(6.041143,7.080126),new aa(2.882459,3.518061),new aa(4.266906,5.178857),new aa(9.041765,10.66308)],vZ=[117.001,114.697,97.404],yZ=function(a){pn(e,a);function e(){var t=this,n={withSeparableConvs:!0,iouThreshold:mZ,classes:["face"],anchors:gZ,meanRgb:vZ,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=a.call(this,n)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,n){return Wt(this,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return[4,this.detect(t,n)];case 1:return r=i.sent(),[2,r.map(function(s){return new oo(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return a.prototype.extractParamsFromWeigthMap.call(this,t)},e}(fP),Lr={ssdMobilenetv1:new dP,tinyFaceDetector:new yZ,tinyYolov2:new $J,mtcnn:new pZ,faceLandmark68Net:new iP,faceLandmark68TinyNet:new AJ,faceRecognitionNet:new MJ,faceExpressionNet:new oJ,ageGenderNet:new gJ},mP=function(a){pn(e,a);function e(t,n,r){var i=a.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return e}(x1),vR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r=this;return Kt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,x_(t,this.input,function(s){return Wt(r,void 0,void 0,function(){return Kt(this,function(o){switch(o.label){case 0:return[4,Promise.all(s.map(function(l){return Lr.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,o.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,t.map(function(s,o){return tP(s,n[o])})]}})})},e.prototype.withAgeAndGender=function(){return new _R(this,this.input)},e}(mP),yR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return t=r.sent(),t?[4,pR(t,this.input,function(i){return Lr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return n=r.sent(),[2,tP(t,n)]}})})},e.prototype.withAgeAndGender=function(){return new bR(this,this.input)},e}(mP),xR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new SR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new wR(this,this.input)},e}(vR),AR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new ER(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RR(this,this.input)},e}(yR),gP=function(a){pn(e,a);function e(t,n,r){var i=a.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return e}(x1),_R=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r=this;return Kt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,x_(t,this.input,function(s){return Wt(r,void 0,void 0,function(){return Kt(this,function(o){switch(o.label){case 0:return[4,Promise.all(s.map(function(l){return Lr.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,o.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,t.map(function(s,o){var l=n[o],c=l.age,d=l.gender,h=l.genderProbability;return cP(uP(s,d,h),c)})]}})})},e.prototype.withFaceExpressions=function(){return new vR(this,this.input)},e}(gP),bR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r,i,s;return Kt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),t?[4,pR(t,this.input,function(l){return Lr.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return n=o.sent(),r=n.age,i=n.gender,s=n.genderProbability,[2,cP(uP(t,i,s),r)]}})})},e.prototype.withFaceExpressions=function(){return new yR(this,this.input)},e}(gP),SR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new xR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new wR(this,this.input)},e}(_R),ER=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new AR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RR(this,this.input)},e}(bR),vP=function(a){pn(e,a);function e(t,n){var r=a.call(this)||this;return r.parentTask=t,r.input=n,r}return e}(x1),wR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return t=r.sent(),[4,x_(t,this.input,function(i){return Promise.all(i.map(function(s){return Lr.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return n=r.sent(),[2,n.map(function(i,s){return lP(t[s],i)})]}})})},e.prototype.withFaceExpressions=function(){return new xR(this,this.input)},e.prototype.withAgeAndGender=function(){return new SR(this,this.input)},e}(vP),RR=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return t=r.sent(),t?[4,pR(t,this.input,function(i){return Lr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return n=r.sent(),[2,lP(t,n)]}})})},e.prototype.withFaceExpressions=function(){return new AR(this,this.input)},e.prototype.withAgeAndGender=function(){return new ER(this,this.input)},e}(vP),yP=function(a){pn(e,a);function e(t,n,r){var i=a.call(this)||this;return i.parentTask=t,i.input=n,i.useTinyLandmarkNet=r,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Lr.faceLandmark68TinyNet:Lr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(x1),xZ=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r,i,s,o=this;return Kt(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),n=t.map(function(c){return c.detection}),this.input instanceof za?[4,sR(this.input,n)]:[3,3];case 2:return i=l.sent(),[3,5];case 3:return[4,iR(this.input,n)];case 4:i=l.sent(),l.label=5;case 5:return r=i,[4,Promise.all(r.map(function(c){return o.landmarkNet.detectLandmarks(c)}))];case 6:return s=l.sent(),r.forEach(function(c){return c instanceof za&&c.dispose()}),[2,t.map(function(c,d){return v_(c,s[d])})]}})})},e.prototype.withFaceExpressions=function(){return new xR(this,this.input)},e.prototype.withAgeAndGender=function(){return new SR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new wR(this,this.input)},e}(yP),AZ=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r,i,s;return Kt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),t?(n=t.detection,this.input instanceof za?[4,sR(this.input,[n])]:[3,3]):[2];case 2:return i=o.sent(),[3,5];case 3:return[4,iR(this.input,[n])];case 4:i=o.sent(),o.label=5;case 5:return r=i,[4,this.landmarkNet.detectLandmarks(r[0])];case 6:return s=o.sent(),r.forEach(function(l){return l instanceof za&&l.dispose()}),[2,v_(t,s)]}})})},e.prototype.withFaceExpressions=function(){return new AR(this,this.input)},e.prototype.withAgeAndGender=function(){return new ER(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RR(this,this.input)},e}(yP),xP=function(a){pn(e,a);function e(t,n){n===void 0&&(n=new T0);var r=a.call(this)||this;return r.input=t,r.options=n,r}return e}(x1),AP=function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n,r,i;return Kt(this,function(s){switch(s.label){case 0:return t=this,n=t.input,r=t.options,r instanceof y_?[4,Lr.mtcnn.forward(n,r)]:[3,2];case 1:return[2,s.sent().map(function(o){return o.detection})];case 2:if(i=r instanceof hR?function(o){return Lr.tinyFaceDetector.locateFaces(o,r)}:r instanceof T0?function(o){return Lr.ssdMobilenetv1.locateFaces(o,r)}:r instanceof fR?function(o){return Lr.tinyYolov2.locateFaces(o,r)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(n)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(n){return Wt(t,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return r=i.sent(),[2,n(r.map(function(s){return Kv({},s)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new xZ(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new vR(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new _R(this.runAndExtendWithFaceDetections(),this.input)},e}(xP);(function(a){pn(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.run=function(){return Wt(this,void 0,void 0,function(){var t,n;return Kt(this,function(r){switch(r.label){case 0:return[4,new AP(this.input,this.options)];case 1:return t=r.sent(),n=t[0],t.forEach(function(i){i.score>n.score&&(n=i)}),[2,n]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(n){return Wt(t,void 0,void 0,function(){var r;return Kt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return r=i.sent(),[2,n(r?Kv({},r):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new AZ(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new yR(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new bR(this.runAndExtendWithFaceDetection(),this.input)},e})(xP);function $m(a,e){return e===void 0&&(e=new T0),new AP(a,e)}function _Z(a,e){if(a.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(a),n=Array.from(e);return Math.sqrt(t.map(function(r,i){return r-n[i]}).reduce(function(r,i){return r+Math.pow(i,2)},0))}(function(){function a(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map(function(s){if(s instanceof g2)return s;if(s instanceof Float32Array)return new g2(i(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new g2(i(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(a.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),a.prototype.computeMeanDistance=function(e,t){return t.map(function(n){return _Z(n,e)}).reduce(function(n,r){return n+r},0)/(t.length||1)},a.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors,i=n.label;return new uC(i,t.computeMeanDistance(e,r))}).reduce(function(n,r){return n.distance<r.distance?n:r})},a.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new uC("unknown",t.distance)},a.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},a.fromJSON=function(e){var t=e.labeledDescriptors.map(function(n){return g2.fromJSON(n)});return new a(t,e.distanceThreshold)},a})();function MR(a,e){var t=new Bh(e.width,e.height),n=t.width,r=t.height;if(n<=0||r<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:n,height:r}));if(Array.isArray(a))return a.map(function(o){return MR(o,{width:n,height:r})});if(nP(a)){var i=a.detection.forSize(n,r),s=a.unshiftedLandmarks.forSize(i.box.width,i.box.height);return v_(Kv(a,i),s)}return $x(a)?Kv(a,a.detection.forSize(n,r)):a instanceof Wv||a instanceof oo?a.forSize(n,r):a}const WS="./models";function bZ(){const[a,e]=H.useState(""),[t,n]=H.useState(!1),[r,i]=H.useState(null),s=[{label:"SSD Mobilenet V1",value:"ssdMobilenetv1"},{label:"Tiny Face Detector",value:"tinyFaceDetector"},{label:"MTCNN",value:"mtcnn"}],o=()=>{const d=document.createElement("input");d.type="file",d.accept="image/*",d.onchange=h=>{const m=h.target.files[0];if(m){i(m),e("");const v=document.getElementById("canvas"),A=v.getContext("2d"),E=new Image;E.onload=()=>{v.width=E.width,v.height=E.height,A.clearRect(0,0,v.width,v.height),A.drawImage(E,0,0)},E.src=URL.createObjectURL(m)}},d.click()},l=d=>{e(d.target.value)},c=async()=>{if(!r||!a)return;n(!0),a==="ssdMobilenetv1"?await Lr.ssdMobilenetv1.loadFromUri(WS):a==="tinyFaceDetector"?await Lr.tinyFaceDetector.loadFromUri(WS):a==="mtcnn"&&await Lr.mtcnn.loadFromUri(WS);const d=document.getElementById("canvas"),h=d.getContext("2d"),m=new Image;m.onload=async()=>{d.width=m.width,d.height=m.height,h.clearRect(0,0,d.width,d.height),h.drawImage(m,0,0);let v=[];a==="ssdMobilenetv1"?v=await $m(d,new T0):a==="tinyFaceDetector"?v=await $m(d,new hR):a==="mtcnn"&&(v=await $m(d,new y_)),console.log("Detections: ",v);const A=MR(v,{width:d.width,height:d.height});VL(d,A),n(!1)},m.src=URL.createObjectURL(r)};return x.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[x.jsx("h2",{children:"Face Detection App"}),x.jsx("div",{children:x.jsx("button",{onClick:o,children:"Upload Image With Faces"})}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("canvas",{id:"canvas"})}),x.jsx("br",{}),x.jsx("div",{children:x.jsxs("select",{value:a,onChange:l,disabled:!r,children:[x.jsx("option",{value:"",children:"Select Model"}),s.map(d=>x.jsx("option",{value:d.value,children:d.label},d.value))]})}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("button",{onClick:c,disabled:!a||t,children:t?"Detecting Faces...":"Detect Faces"})})]})}function SZ(){const[a,e]=H.useState(0),[t,n]=H.useState(0),[r,i]=H.useState(0),[s,o]=H.useState(0);return H.useEffect(()=>{const l=c=>{const d=c.clientX,h=c.clientY,m=window.innerWidth,v=window.innerHeight,A=(d/m-.5)*2,E=(h/v-.5)*2;n(A*30),e(-E*30),i(A*50),o(E*50)};return window.addEventListener("mousemove",l),()=>{window.removeEventListener("mousemove",l)}},[]),x.jsx("div",{className:"background",children:x.jsx("div",{className:"card",style:{transform:`perspective(650px) rotateX(${a}deg) rotateY(${t}deg) translateX(${r}px) translateY(${s}px)`}})})}function EZ(){const[a,e]=H.useState({left:0,top:0}),[t,n]=H.useState(!1),[r,i]=H.useState({x:0,y:0}),s=c=>{if(c.target.className==="drag-box"){n(!0);const d=c.target.getBoundingClientRect();i({x:c.clientX-d.left,y:c.clientY-d.top})}},o=c=>{if(t){const d=c.clientX-r.x,h=c.clientY-r.y;e({left:d,top:h})}},l=()=>{n(!1)};return H.useEffect(()=>(window.addEventListener("mousemove",o),window.addEventListener("mouseup",l),()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l)}),[t,r]),x.jsx("div",{className:"drag-container",children:x.jsx("div",{className:"drag-box",onMouseDown:s,style:{left:`${a.left}px`,top:`${a.top}px`},children:"DRAG ME!"})})}const _2="./models",mC="./images/faces.png",gC="./images/sunglasses.png";function Ah(){let a=0;return Array.from(arguments).forEach((e,t,n)=>{if(n[t+1]){const r=n[t+1];a+=Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}}),a}const wZ=28,RZ=30,MZ=58,TZ=9,NZ=40,iv=37,CZ=43,sv=46,IZ=(a,e)=>{const t=(e.right+e.left)/2,n=(e.bottom+e.top)/2,r=0,i=Ah(a[RZ],a[wZ]),s=Ah(a[MZ],a[TZ]),o=Math.asin((.5-s/(i+s))*2),l=Ah(a[iv],a[NZ]),c=Ah(a[CZ],a[sv]),d=Math.asin((.5-c/(l+c))*2)*2.5,h=a[iv].y-a[sv].y,m=Ah(a[iv],a[sv]),v=a[iv].x<a[sv].x?Math.asin(h/m):1-Math.asin(h/m)+Math.PI*.68,A=Ah(a[iv],a[sv])*.7;return d>.7||d<-.7?null:{position:{x:t,y:n,z:r},rotation:{x:o,y:d,z:v},scale:{x:A,y:A,z:A}}};function DZ(){const[a,e]=H.useState(""),[t,n]=H.useState(!1),[r,i]=H.useState([]),s=[{label:"SSD Mobilenet V1",value:"ssdMobilenetv1"},{label:"Tiny Face Detector",value:"tinyFaceDetector"},{label:"MTCNN",value:"mtcnn"}],o=c=>{e(c.target.value)},l=async()=>{if(!a)return;n(!0),await Lr.faceLandmark68Net.loadFromUri(_2),a==="ssdMobilenetv1"?await Lr.ssdMobilenetv1.loadFromUri(_2):a==="tinyFaceDetector"?await Lr.tinyFaceDetector.loadFromUri(_2):a==="mtcnn"&&await Lr.mtcnn.loadFromUri(_2);const c=document.getElementById("canvas"),d=c.getContext("2d"),h=new Image;h.src=mC,h.onload=async()=>{c.width=h.naturalWidth,c.height=h.naturalHeight,d.clearRect(0,0,c.width,c.height),d.drawImage(h,0,0,c.width,c.height);let m=[];a==="ssdMobilenetv1"?m=await $m(c,new T0).withFaceLandmarks():a==="tinyFaceDetector"?m=await $m(c,new hR).withFaceLandmarks():a==="mtcnn"&&(m=await $m(c,new y_).withFaceLandmarks());const v=MR(m,{width:c.width,height:c.height});VL(c,v);const A=[],E=new Image;E.src=gC,await new Promise(b=>{E.onload=b}),v.forEach(b=>{const _=b.landmarks.positions,R=b.detection.box,T=IZ(_,R);if(T){const M=_[36],I=_[45],P=(M.x+I.x)/2,B=(M.y+I.y)/2,F=Ah(M,I)*1.1,L=F*(E.height/E.width);A.push({x:P-F/2,y:B-L/2,width:F,height:L,rotation:T.rotation.z})}}),i(A),n(!1)}};return H.useEffect(()=>{const c=document.getElementById("canvas");if(c){const d=c.getContext("2d"),h=new Image;h.src=mC,h.onload=()=>{c.width=h.naturalWidth,c.height=h.naturalHeight,d.drawImage(h,0,0,h.width,h.height)}}},[]),x.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[x.jsx("h2",{children:"Face Detection"}),x.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[x.jsx("canvas",{id:"canvas",style:{position:"relative"}}),r.map((c,d)=>x.jsx("img",{src:gC,alt:"sunglasses",style:{position:"absolute",left:`${c.x/document.getElementById("canvas").width*100}%`,top:`${c.y/document.getElementById("canvas").height*100}%`,width:`${c.width/document.getElementById("canvas").width*100}%`,height:`${c.height/document.getElementById("canvas").height*100}%`,transform:`rotate(${c.rotation}rad)`}},d))]}),x.jsx("div",{children:x.jsxs("select",{value:a,onChange:o,children:[x.jsx("option",{value:"",children:"Select Model"}),s.map(c=>x.jsx("option",{value:c.value,children:c.label},c.value))]})}),x.jsx("div",{children:x.jsx("button",{onClick:l,disabled:!a||t,children:t?"Detecting Faces...":"Detect Faces"})})]})}function LZ(){const a=H.useRef(null),[e,t]=H.useState(!1),[n,r]=H.useState(0),[i,s]=H.useState(0),o=()=>{e?(a.current.pause(),t(!1)):(a.current.play(),t(!0))},l=()=>{r(a.current.duration)},c=()=>{s(a.current.currentTime)},d=n>0?i/n*100:0,h=v=>{const A=v.currentTarget.getBoundingClientRect(),E=v.clientX-A.left,b=A.width,_=E/b*n;a.current.currentTime=_,s(_)},m=v=>{const A=Math.floor(v/60),E=Math.floor(v%60);return`${A}:${E<10?"0":""}${E}`};return x.jsxs("div",{className:"video-container",children:[x.jsx("video",{ref:a,onLoadedMetadata:l,onTimeUpdate:c,onEnded:()=>t(!1),children:x.jsx("source",{src:"./videos/video1.mp4",type:"video/mp4"})}),x.jsxs("div",{className:"controls",children:[x.jsx("button",{onClick:o,children:e?"⏸️":"▶️"}),x.jsx("div",{className:"seeker",onClick:h,children:x.jsx("div",{className:"seeker-value",style:{width:`${d}%`}})})]}),x.jsxs("div",{className:"time-display",children:[m(i)," / ",m(n)]})]})}function PZ(){const[a,e]=H.useState([{id:1,text:"Item #1",color:"rgba(181, 156, 96, 1)"},{id:2,text:"Item #2",color:"rgba(216, 23, 88, 1)"},{id:3,text:"Item #3",color:"rgba(22, 0, 165, 1)"},{id:4,text:"Item #4",color:"rgb(255, 150, 0)"},{id:5,text:"Item #5",color:"rgba(45, 202, 162, 1)"}]),[t,n]=H.useState(null),r=(o,l)=>{if(o.preventDefault(),t===null||t===l)return;const c=[...a],[d]=c.splice(t,1);c.splice(l,0,d),e(c),n(l)},i=o=>{n(o)},s=()=>{n(null)};return x.jsxs("div",{className:"item-container",children:[x.jsx("h2",{children:"Drag and Drop Elements to Reorder Them"}),x.jsx("div",{className:"items",children:a.map((o,l)=>x.jsx("div",{className:"item-box",onDragOver:c=>r(c,l),children:x.jsx("div",{className:"item",draggable:"true",style:{backgroundColor:o.color},onDragStart:()=>i(l),onDragEnd:s,children:o.text})},o.id))})]})}function OZ(){const a=H.useRef(null),e=H.useRef(null),t=H.useRef(null),n=H.useRef(null),r=H.useRef(null),i=H.useRef(null),[s,o]=H.useState(!1);return H.useEffect(()=>{e.current=new AudioContext,t.current=e.current.createAnalyser(),t.current.fftSize=64;const l=t.current.frequencyBinCount;r.current=new Uint8Array(l),n.current=e.current.createMediaElementSource(a.current),n.current.connect(t.current),t.current.connect(e.current.destination);const c=()=>{o(!1),document.querySelectorAll(".bar").forEach(h=>{h.style.height="0px"})};return a.current.addEventListener("ended",c),()=>{cancelAnimationFrame(i.current),e.current&&e.current.close(),a.current.removeEventListener("ended",c)}},[]),H.useEffect(()=>{const l=()=>{if(!t.current)return;t.current.getByteFrequencyData(r.current),document.querySelectorAll(".bar").forEach((d,h)=>{const v=(r.current[h]||0)/255*150;d.style.height=`${v}px`}),i.current=requestAnimationFrame(l)};return s&&l(),()=>cancelAnimationFrame(i.current)},[s]),x.jsxs("div",{className:"player",children:[x.jsx("div",{className:"animation",children:Array.from({length:32}).map((l,c)=>x.jsx("div",{className:"bar",style:{height:"0px"}},`${c}`))}),x.jsx("audio",{ref:a,src:"./videos/audio-wave-animation.mp3",controls:!0,onPlay:()=>{e.current.state==="suspended"&&e.current.resume(),o(!0)},onPause:()=>o(!1)})]})}function UZ(){const a=H.useRef(null),e=H.useRef(null),[t,n]=H.useState(null),r=d=>{d.preventDefault();const h=d.dataTransfer.files[0];if(h&&h.type.startsWith("image/")){const m=URL.createObjectURL(h);n(m)}},i=d=>{d.preventDefault()},s=d=>{const h=d.clipboardData.items;for(const m of h)if(m.type.startsWith("image/")){const v=m.getAsFile(),A=URL.createObjectURL(v);n(A);break}},o=d=>{const h=d.target.files[0];if(h&&h.type.startsWith("image/")){const m=URL.createObjectURL(h);n(m)}},l=()=>{e.current.click()},c=()=>{t&&(URL.revokeObjectURL(t),n(null))};return x.jsxs("div",{ref:a,onDrop:r,onDragOver:i,onPaste:s,className:"drop",children:[x.jsx("input",{type:"file",accept:"image/*",ref:e,style:{display:"none"},onChange:o}),!t&&x.jsxs("div",{className:"upload-container",children:[x.jsx("h2",{children:"Drag and Drop or Paste Your Image Here..."}),x.jsx("button",{onClick:l,className:"upload-button",children:"Upload an Image"})]}),t&&x.jsxs("div",{className:"preview",children:[x.jsx("img",{src:t,alt:"Uploaded preview"}),x.jsx("button",{onClick:c,className:"close-button",children:"Close Image"})]})]})}function BZ(){const a=H.useRef(null),[e,t]=H.useState("60"),[n,r]=H.useState(null),[i,s]=H.useState("target"),[o,l]=H.useState({x:0,y:0}),[c,d]=H.useState(!1),h=b=>{const _=new Image;_.addEventListener("load",()=>{const R=a.current;if(!R)return;R.width=_.width,R.height=_.height,R.getContext("2d").drawImage(_,0,0)}),_.src=b},m=()=>{r(null),s("target")},v=b=>{const _=b.nativeEvent.offsetX-e/2,R=b.nativeEvent.offsetY-e/2;if(i==="target")r({x:_,y:R}),s("clone");else{const T=a.current;if(!T)return;const M=T.getContext("2d"),I=M.getImageData(n.x,n.y,e,e);M.putImageData(I,_,R)}},A=b=>{d(!0),l({x:b.nativeEvent.offsetX-e/2,y:b.nativeEvent.offsetY-e/2})},E=()=>{d(!1)};return H.useEffect(()=>{h("./images/flower.jpg")},[]),x.jsxs("div",{className:"clone-container",children:[x.jsxs("div",{className:"options",children:[x.jsx("input",{type:"range",min:"40",max:"120",value:e,onChange:b=>t(b.target.value),className:"size"}),x.jsx("button",{"data-active":i==="target",onClick:m,className:`reset-button ${i==="clone"?"disabled":""}`,children:"Reset Origin"})]}),x.jsxs("div",{className:"workspace",children:[x.jsx("canvas",{ref:a,onClick:v,onMouseMove:A,onMouseOut:E,onMouseLeave:E,className:"canvas"}),c&&x.jsx("div",{"data-mode":i,style:{width:e+"px",height:e+"px",left:o.x+"px",top:o.y+"px"},className:`square-tool ${i==="clone"?"clone-mode":"target-mode"}`}),n&&x.jsx("div",{style:{width:e+"px",height:e+"px",left:n.x+"px",top:n.y+"px"},className:"square-origin"})]})]})}function FZ(){const a=H.useRef(null),e=H.useRef({x:250,y:250,dx:3,dy:-3,radius:10}),t=H.useRef({x:200,y:250,width:100,height:1}),[n,r]=H.useState(0),i=s=>{const o=a.current,l=o.getBoundingClientRect(),c=s.clientX-l.left-t.current.width/2;t.current.x=Math.max(0,Math.min(c,500-t.current.width)),o.querySelector(".controls").style.left=`${t.current.x}px`};return H.useEffect(()=>{const s=a.current,o=()=>{const c=e.current,d=t.current;c.x+=c.dx,c.y+=c.dy,(c.x+c.radius>500||c.x-c.radius<0)&&(c.dx=-c.dx),(c.y+c.radius>500||c.y-c.radius<0)&&(c.dy=-c.dy),c.y+c.radius>d.y&&c.y-c.radius<d.y+d.height&&c.x>d.x&&c.x<d.x+d.width&&(c.dy=-c.dy);const h=s.querySelector(".object");h.style.left=`${c.x-c.radius}px`,h.style.top=`${c.y-c.radius}px`,r(m=>m+1),requestAnimationFrame(o)},l=requestAnimationFrame(o);return s.addEventListener("mousemove",i),()=>{cancelAnimationFrame(l),s.removeEventListener("mousemove",i)}},[]),x.jsx("div",{className:"game-container",children:x.jsxs("div",{ref:a,"data-counter":n,className:"square-container",children:[x.jsx("div",{style:{left:`${e.current.x-e.current.radius}px`,top:`${e.current.y-e.current.radius}px`},className:"object"}),x.jsx("div",{style:{left:`${t.current.x}px`},className:"controls"})]})})}function kZ(){const a=H.useRef(null),[e,t]=H.useState(0),[n,r]=H.useState(!1),[i,s]=H.useState(0),[o,l]=H.useState(0),c=8,d=360/c,h=300,m=225,v=h*Math.sin(d*Math.PI/180),A=Math.round(o/v)*v,E=e-A/v*d,b=()=>t(R=>R-d),_=()=>t(R=>R+d);return H.useEffect(()=>{const R=M=>{if(!n)return;const I=M.pageX-i;l(Math.round(I/v)*v)},T=()=>{if(!n)return;const M=Math.round(o/v);t(I=>I-M*d),r(!1),l(0)};return n&&(document.addEventListener("mousemove",R),document.addEventListener("mouseup",T)),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",T)}},[n,i,o,d,v]),x.jsxs("div",{className:"slider-container",children:[x.jsx("button",{className:"back-button",onClick:b,children:"←"}),x.jsx("div",{className:"items",ref:a,style:{cursor:n?"grabbing":"grab"},onMouseDown:R=>{R.preventDefault(),r(!0),s(R.pageX),l(0)},children:Array.from({length:c}).map((R,T)=>{const M=T;let P=(M*d-E+360)%360;P>180&&(P-=360);const B=P*Math.PI/180,F=Math.sin(B),L=m+h*F,U=Math.abs(P)<=45+d/2?1:0,j=Math.abs(P)<=d/2?1.2:.9;return x.jsxs("div",{className:"item",style:{position:"absolute",left:`${L}px`,top:"50%",transform:`translateY(-50%) scale(${j})`,opacity:U,transitionProperty:"left, opacity, transform",transitionDuration:"0.5s"},children:["Item ",M+1]},M)})}),x.jsx("button",{className:"next-button",onClick:_,children:"→"})]})}function HZ(){const[a,e]=H.useState(!1),[t,n]=H.useState({x:0,y:0}),[r,i]=H.useState("white"),s=c=>{c.preventDefault();let d=c.clientX,h=c.clientY;const m=115,v=160,A=10;d+m+A>window.innerWidth&&(d=window.innerWidth-m-A),h+v+A>window.innerHeight&&(h=window.innerHeight-v-A),d<A&&(d=A),h<A&&(h=A),n({x:d,y:h}),e(!0)},o=()=>{e(!1)},l=c=>{i(c),e(!1)};return x.jsxs("div",{className:"bg-container",onContextMenu:s,onClick:o,style:{backgroundColor:r},children:[x.jsx("div",{className:"text",children:"Right Click to Open Context Menu"}),a&&x.jsx("div",{className:"context-menu",style:{left:`${t.x}px`,top:`${t.y}px`},onClick:c=>c.stopPropagation(),children:x.jsxs("ul",{children:[x.jsx("li",{onClick:()=>l("white"),children:"Default"}),x.jsx("li",{onClick:()=>l("red"),children:"Red"}),x.jsx("li",{onClick:()=>l("green"),children:"Green"}),x.jsx("li",{onClick:()=>l("blue"),children:"Blue"})]})})]})}function jZ(){const a=H.useRef(null),[e,t]=H.useState(1),[n,r]=H.useState(!1),i=10,s=1e3,o=()=>{const l=window.scrollY;r(l>20);const c=Math.min(i,Math.floor(l/s)+1);t(c);const d=a.current;if(d&&d.duration){const h=s*(i-1),m=Math.min(l/h,1);d.currentTime=m*d.duration}};return H.useEffect(()=>(window.scrollTo(0,0),window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)),[]),x.jsxs("div",{className:"scroll-container",children:[x.jsx("div",{className:"video-scroll-background",children:x.jsx("video",{className:"scroll-video",ref:a,src:"./videos/video2.mp4",muted:!0})}),!n&&x.jsx("div",{className:"fixed-text",children:"Section #1"}),x.jsx("div",{className:"content",children:[...Array(i)].map((l,c)=>c===0&&!n?null:x.jsxs("div",{className:"text",style:{top:`${c*s}px`},children:["Section #",c+1]},c))})]})}function zZ(){const a=H.useRef(null),e=H.useRef(null),t=H.useRef(null),[n,r]=H.useState(!1),[i,s]=H.useState(12),[o,l]=H.useState(!1),c=()=>{o||e.current.click()},d=A=>{const E=a.current,b=E.getContext("2d");b.clearRect(0,0,E.width,E.height),b.drawImage(A,0,0,E.width,E.height)},h=A=>{const E=new FileReader;E.onload=b=>{const _=new Image;_.onload=()=>{d(_),r(!0),v()},_.src=b.target.result},E.readAsDataURL(A)},m=()=>{if(o)return;const A=document.createElement("a");A.download="filtered_image.png",A.href=t.current.toDataURL(),A.click()},v=async()=>{l(!0);const A=a.current,E=t.current,b=A.getContext("2d"),_=E.getContext("2d"),{width:R,height:T}=A,M=b.getImageData(0,0,R,T);_.clearRect(0,0,R,T),_.drawImage(A,0,0);const I=document.createElement("canvas");I.width=R,I.height=T;const P=I.getContext("2d");for(let B=0;B<R;B+=i){await new Promise(F=>setTimeout(F,50));for(let F=0;F<T;F+=i){let L=0,U=0,j=0,W=0;for(let Y=0;Y<i;Y++)for(let K=0;K<i;K++){const X=B+K,z=F+Y;if(X>=R||z>=T)continue;const J=(z*R+X)*4;L+=M.data[J],U+=M.data[J+1],j+=M.data[J+2],W++}const Q=Math.round(L/W),$=Math.round(U/W),re=Math.round(j/W),G=`rgb(${Q}, ${$}, ${re})`;_.fillStyle=G,_.fillRect(B,F,i,i),P.fillStyle=G,P.fillRect(B,F,i,i)}}_.clearRect(0,0,R,T),_.drawImage(I,0,0),l(!1)};return H.useEffect(()=>{const A=new Image;A.src="./images/image1.png",A.onload=()=>{d(A),r(!0),v()}},[]),x.jsxs("div",{className:"filter-container",children:[x.jsxs("div",{className:"filter-canvases",children:[x.jsxs("div",{className:"filter-canvas",children:[x.jsx("canvas",{className:"source",ref:a,width:252,height:380}),x.jsx("button",{onClick:c,disabled:o,children:"Upload"}),x.jsx("input",{type:"file",accept:"image/*",ref:e,style:{display:"none"},onChange:A=>h(A.target.files[0])})]}),x.jsxs("div",{className:"filter-canvas",children:[x.jsx("canvas",{className:"target",ref:t,width:252,height:380}),x.jsx("button",{onClick:m,disabled:o,children:"Download"})]})]}),x.jsxs("div",{className:"filter-options",children:[x.jsx("input",{className:"size",type:"range",min:"10",max:"50",value:i,onChange:A=>s(parseInt(A.target.value)),disabled:o}),x.jsx("button",{onClick:v,disabled:o,children:"Apply Filter"})]})]})}function GZ(){const a=H.useRef(null),[e,t]=H.useState({x:100,y:100}),[n,r]=H.useState("IDLE-DOWN"),[i,s]=H.useState(!1);return H.useEffect(()=>{const o=l=>{var b;const{clientX:c,clientY:d,movementX:h,movementY:m}=l;t({x:c,y:d});const v=Math.abs(h),A=Math.abs(m);let E=n;v>A?E=h>0?"RIGHT":"LEFT":A>v&&(E=m>0?"DOWN":"UP"),r(E),s(v>0||A>0),clearTimeout((b=a.current)==null?void 0:b.timeout),a.current.timeout=setTimeout(()=>s(!1),150)};return window.addEventListener("mousemove",o),()=>window.removeEventListener("mousemove",o)},[n]),x.jsxs("div",{className:"animation-container",children:[x.jsx("div",{className:"sprite",ref:a,"data-animating":i,"data-direction":n,style:{left:`${e.x}px`,top:`${e.y}px`}}),x.jsx("div",{className:"animation-text",children:"MOVE YOUR CURSOR TO WALK"})]})}function VZ(){const a=H.useRef(0),e=H.useRef(1),t=H.useRef(null),n=H.useRef(!1),r=H.useRef([]),i=H.useRef(0),[s,o]=H.useState(0),l=()=>{a.current+=3.5*e.current,a.current=(a.current+360)%360,o(d=>d+1),t.current=requestAnimationFrame(l)},c=()=>{n.current||(n.current=!0,o(d=>d+1),setTimeout(()=>{const d=a.current;if(r.current.some(m=>{const v=(m-d+360)%360;return v<20||360-v<20})){r.current=[],i.current=0,e.current=1,n.current=!1,o(m=>m+1);return}r.current.push(d),i.current+=1,e.current*=-1,n.current=!1,o(m=>m+1)},100))};return H.useEffect(()=>(t.current=requestAnimationFrame(l),()=>cancelAnimationFrame(t.current)),[]),x.jsxs("div",{className:"target-container","data-counter":s,onClick:c,children:[x.jsx("div",{className:"score",children:i.current}),x.jsxs("div",{className:"target-base",style:{transform:`rotate(${a.current}deg)`},children:[r.current.map((d,h)=>x.jsx("div",{className:"knife-hit",style:{transform:`rotate(${(-d+360)%360}deg)`}},h)),x.jsx("div",{className:"target"})]}),x.jsx("div",{className:`knife ${n.current?"throwing":""}`})]})}function WZ(){const a=H.useRef(null),e=H.useRef(new Image),t=H.useRef(null),[n,r]=H.useState({width:0,height:0}),[i,s]=H.useState(!1),[o,l]=H.useState(null),[c,d]=H.useState(null),[h,m]=H.useState(null),[v,A]=H.useState(!1),[E,b]=H.useState(!1),_=F=>{const L=a.current,U=L.getContext("2d");U.clearRect(0,0,L.width,L.height),U.drawImage(F,0,0,L.width,L.height)},R=F=>{if(!v)return;const L=F.target.getBoundingClientRect();m({x:F.clientX-L.left,y:F.clientY-L.top}),s(!0),b(!0)},T=F=>{if(!i||!h)return;const L=F.target.getBoundingClientRect(),U=F.clientX-L.left,j=F.clientY-L.top;if(U<h.x||j<h.y)return;const W=h.x,Q=h.y,$=U-h.x,re=j-h.y;l({x:W,y:Q,width:$,height:re})},M=()=>{o&&d(o),s(!1),m(null)},I=F=>{const L=F.target.files[0];if(!L)return;const U=new FileReader;U.onload=function(j){const W=e.current;W.src=j.target.result,W.onload=()=>{r({width:W.naturalWidth,height:W.naturalHeight}),A(!0),_(W),l(null),d(null),b(!1)}},U.readAsDataURL(L)},P=()=>{if(!c)return;const F=document.createElement("canvas"),L=n.width/600,U=n.height/600,j=c.x*L,W=c.y*U,Q=c.width*L,$=c.height*U;F.width=Q,F.height=$,F.getContext("2d").drawImage(e.current,j,W,Q,$,0,0,Q,$);const G=document.createElement("a");G.download="cropped-image.png",G.href=F.toDataURL(),G.click()},B=()=>{const U=i?o:c;if(!U)return null;const{x:j,y:W,width:Q,height:$}=U;return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"darken",style:{width:600,height:W}}),x.jsx("div",{className:"darken",style:{width:j,height:$,top:W,left:0}}),x.jsx("div",{className:"darken",style:{width:600-j-Q,height:$,top:W,left:j+Q}}),x.jsx("div",{className:"darken",style:{width:600,height:600-W-$,top:W+$}}),x.jsx("div",{className:"crop-box",style:{left:(o==null?void 0:o.x)??j,top:(o==null?void 0:o.y)??W,width:(o==null?void 0:o.width)??Q,height:(o==null?void 0:o.height)??$}})]})};return H.useEffect(()=>{const F=e.current;F.src="./images/image-crop-tool.jpg",F.onload=()=>{r({width:F.naturalWidth,height:F.naturalHeight}),A(!0),_(F)}},[]),x.jsxs("div",{className:"crop-container",children:[x.jsx("div",{className:"description",children:"Drag and draw on the image to set a cropping area"}),x.jsxs("div",{className:"crop-workspace",style:{width:600,height:600},onMouseDown:R,onMouseMove:T,onMouseUp:M,children:[x.jsx("canvas",{className:"crop-canvas",ref:a,width:"600",height:"600"}),B()]}),x.jsxs("div",{className:"crop-options",children:[x.jsxs(x.Fragment,{children:[x.jsx("input",{type:"file",accept:"image/*",ref:t,style:{display:"none"},onChange:I}),x.jsx("button",{className:"crop-upload-button",onClick:()=>t.current.click(),children:"Upload an Image"})]}),x.jsx("button",{className:"crop-button",onClick:P,disabled:!E,children:"Crop and Download"})]})]})}function KZ(){const[a,e]=H.useState(0),t=H.useRef(null),n=H.useRef(0),r=H.useRef(0),i=H.useRef([]),s=H.useRef(null),o=H.useRef(null),l=H.useRef(!1),c=.1,d=()=>{l.current||(l.current=!0,o.current&&o.current.setAttribute("data-jumping","true"),setTimeout(()=>{l.current=!1,o.current&&o.current.setAttribute("data-jumping","false")},500))},h=v=>{v.code==="Space"&&d()},m=(v=0)=>({id:Date.now()+Math.random(),left:100+v,heightOffset:Math.random()*2});return H.useEffect(()=>{i.current=[m(0),m(40),m(40*2)],document.addEventListener("keydown",h);const A=()=>{var b;if(n.current+=c,r.current+=c*11,i.current=i.current.map(_=>({..._,left:_.left-c*9})).filter(_=>_.left>-10),i.current.length<3){const _=Math.max(...i.current.map(R=>R.left),0);i.current.push(m(_+40))}s.current&&(s.current.style.backgroundPositionX=`${-n.current}vh`,s.current.setAttribute("data-counter",a));const E=(b=s.current)==null?void 0:b.querySelector(".ground");E&&(E.style.backgroundPositionX=`${-r.current}vh`),e(_=>_+1),t.current=requestAnimationFrame(A)};return t.current=requestAnimationFrame(A),()=>{document.removeEventListener("keydown",h),cancelAnimationFrame(t.current)}},[]),x.jsx("div",{className:"game-wrapper",children:x.jsxs("div",{className:"dino-run-container",ref:s,"data-counter":a,children:[i.current.map(v=>x.jsx("div",{className:"tree",style:{left:`${v.left}vh`}},v.id)),x.jsx("div",{className:"dino",ref:o,"data-jumping":"false"}),x.jsx("div",{className:"ground"})]})})}const F3=13,k3=13,vC=()=>Array.from({length:F3},()=>Array(k3).fill(0)),YZ=Array.from({length:6},(a,e)=>({x:6-e,y:6}));function qZ(){const a=H.useRef(YZ),e=H.useRef({x:1,y:0}),t=H.useRef(0),[n,r]=H.useState(vC),i=()=>{const o=[...a.current],l=o[0],c=e.current,d={x:(l.x+c.x+k3)%k3,y:(l.y+c.y+F3)%F3};o.unshift(d),o.pop(),a.current=o,t.current++,s()},s=()=>{const o=vC();a.current.forEach(l=>{o[l.y][l.x]=1}),r(o)};return H.useEffect(()=>{const o=l=>{(l.key==="ArrowUp"||l.key.toLowerCase()==="w")&&(e.current={x:0,y:-1}),(l.key==="ArrowDown"||l.key.toLowerCase()==="s")&&(e.current={x:0,y:1}),(l.key==="ArrowLeft"||l.key.toLowerCase()==="a")&&(e.current={x:-1,y:0}),(l.key==="ArrowRight"||l.key.toLowerCase()==="d")&&(e.current={x:1,y:0})};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),H.useEffect(()=>{const o=setInterval(i,100);return()=>clearInterval(o)},[]),x.jsx("div",{className:"snake-container-wrapper",children:x.jsxs("div",{className:"snake-container","data-counter":t.current,children:[x.jsx("div",{className:"board",children:n.map((o,l)=>x.jsx("div",{className:"board-row",children:o.map((c,d)=>x.jsx("div",{className:"board-cell","data-snake":c},d))},l))}),x.jsx("div",{className:"hint",children:"Use W, A, S, D or Arrow Keys"})]})})}const yC=[{label:"Nature",items:["☘️","🏕️","🌿","🌲","🌳","🌾","🌴","🍃"]},{label:"Foods",items:["🍔","🥤","🥗","🍗","🍟","🥓","🥞","🍲"]},{label:"Animals",items:["🐹","🦊","🦁","🦓","🐱","🐶","🐯","🐼"]},{label:"Dessert",items:["🍧","🍨","🧁","🍰","🍫","🍩","🍦","🍹"]}];function XZ(){const[a,e]=H.useState(0),[t,n]=H.useState([]),[r,i]=H.useState([]),s=d=>[...d].sort(()=>Math.random()-.5),o=d=>{const h=yC[d].items,v=s(Array(2).fill(h).flat()).map((A,E)=>({id:E,symbol:A,flipped:!1,done:!1}));n(v),i([])},l=d=>{e(d),o(d)},c=d=>{const h=t.find(A=>A.id===d);if(h.flipped||h.done||r.length===2)return;const m=t.map(A=>A.id===d?{...A,flipped:!0}:A),v=[...r,{...h,flipped:!0}];if(n(m),i(v),v.length===2){const[A,E]=v;A.symbol===E.symbol?setTimeout(()=>{n(b=>b.map(_=>_.symbol===A.symbol?{..._,done:!0}:_)),i([])},100):setTimeout(()=>{n(b=>b.map(_=>_.id===A.id||_.id===E.id?{..._,flipped:!1}:_)),i([])},500)}};return H.useEffect(()=>{o(a)},[a]),x.jsx("div",{className:"flip-container-wrapper",children:x.jsxs("div",{className:"flip-container",children:[x.jsx("div",{className:"flip-options",children:yC.map((d,h)=>x.jsxs("button",{className:"flip-option","data-selected":h===a,onClick:()=>l(h),children:[d.items[0]," ",d.label]},d.label))}),x.jsx("div",{className:"flip-board",children:t.map(d=>x.jsxs("div",{className:"flip-card","data-flipped":d.flipped,"data-done":d.done,onClick:()=>c(d.id),children:[x.jsx("div",{className:"flip-card-back"}),x.jsx("div",{className:"flip-card-front",children:d.symbol})]},d.id))})]})})}const b2=[{title:"Artificial Intelligence",reversed:!1,paragraphs:["Artificial Intelligence (AI) refers to the development of computer systems capable of performing tasks that usually require human intelligence, such as visual perception, speech recognition, and decision-making.","Machine learning, a subset of AI, enables systems to learn and improve from experience without being explicitly programmed, making it the driving force behind many modern AI applications.","AI is used in diverse areas like healthcare for disease diagnosis, finance for fraud detection, and transportation for self-driving vehicles, revolutionizing industries and improving efficiency.","While AI brings numerous benefits, it also raises ethical concerns regarding data privacy, bias in algorithms, and the potential displacement of human jobs in certain sectors."]},{title:"Blockchain Technology",reversed:!0,paragraphs:["Blockchain is a distributed and immutable ledger technology that records transactions across a network of computers, ensuring transparency and security without relying on a central authority.","Each block contains a list of transactions, and once added to the chain, the data cannot be altered, making it highly resistant to fraud and hacking.","Although best known for powering cryptocurrencies like Bitcoin and Ethereum, blockchain applications extend to supply chain management, secure identity verification, and voting systems.","The technology still faces challenges such as high energy consumption in some consensus mechanisms and scalability issues that limit its widespread adoption."]},{title:"Internet of Things",reversed:!1,paragraphs:["The Internet of Things (IoT) is a network of physical devices embedded with sensors, software, and connectivity features that allow them to collect and exchange data.","IoT devices range from household appliances like smart refrigerators and thermostats to industrial machines and environmental monitoring systems.","By enabling real-time data collection and analysis, IoT improves efficiency, enhances user convenience, and supports automation in various sectors including healthcare, agriculture, and manufacturing.","Despite its benefits, IoT raises concerns over cybersecurity, data privacy, and the management of the vast amounts of information generated by connected devices."]}];function JZ(){const[a,e]=H.useState(0),[t,n]=H.useState(!1),r=H.useRef(null),i=H.useRef(0),s=H.useRef(!1),o=H.useRef(null),l=h=>{e(m=>{const v=m+h;return v<0||v>=b2.length?m:(n(b2[v].reversed),v)})},c=()=>{s.current=!0,o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{s.current=!1},700)},d=h=>{const{deltaY:m,deltaMode:v}=h;return v===1?m*16:v===2?m*window.innerHeight:m};return H.useEffect(()=>{const h=r.current;if(!h)return;const m=v=>{if(v.preventDefault(),s.current)return;const A=d(v);if(i.current+=A,Math.abs(i.current)>=80){const E=i.current>0?1:-1;i.current=0,l(E),c()}};return h.addEventListener("wheel",m),()=>{h.removeEventListener("wheel",m),o.current&&clearTimeout(o.current)}},[]),x.jsx("div",{className:"step-scroll-animation-body",children:x.jsxs("div",{className:"step-scroll-animation-container",ref:r,children:[x.jsx("div",{className:"step-scroll-animation-hint",children:"Use Mouse Wheel or Touchpad to scroll through sections"}),x.jsx("div",{className:"step-scroll-animation-arrow step-scroll-animation-arrow-up","data-hidden":a===0,onClick:()=>l(-1)}),x.jsx("div",{className:"step-scroll-animation-arrow step-scroll-animation-arrow-down","data-hidden":a===b2.length-1,onClick:()=>l(1)}),x.jsx("div",{className:"step-scroll-animation-mobile","data-reversed":t}),x.jsx("div",{className:"step-scroll-animation-sections","data-section":a,children:b2.map((h,m)=>x.jsx("div",{className:"step-scroll-animation-section","data-reversed":h.reversed,children:x.jsxs("div",{className:"step-scroll-animation-section-content",children:[x.jsx("div",{className:"step-scroll-animation-section-title",children:h.title}),x.jsx("div",{className:"step-scroll-animation-section-description",children:h.paragraphs.map((v,A)=>x.jsx("div",{className:"step-scroll-animation-section-paragraph",children:v},A))})]})},m))})]})})}const _P=10,KS=360/_P,ZZ=50,QZ=60,xC=()=>{const a=new Date,e=a.getHours().toString().padStart(2,"0"),t=a.getMinutes().toString().padStart(2,"0"),n=a.getSeconds().toString().padStart(2,"0");return[...e,":",...t,":",...n]};function $Z(){const[a,e]=H.useState(xC());return H.useEffect(()=>{const t=setInterval(()=>{e(xC())},1e3);return()=>clearInterval(t)},[]),x.jsx("div",{className:"clock-container-wrapper",children:x.jsx("div",{className:"clock-container",children:a.map((t,n)=>t===":"?x.jsx("div",{className:"colon",children:":"},n):x.jsx("div",{className:"digit",children:Array.from({length:_P}).map((r,i)=>{const s=parseInt(t,10)*KS,o=(i*KS-s+360)%360,l=o>180?o-360:o,c=l*Math.PI/180,d=QZ-ZZ*Math.sin(c),h=Math.abs(l)<=KS/2;return x.jsx("div",{className:"digit-item",style:{top:`${d}px`,opacity:h?1:0,transitionProperty:"top"},children:i},i)})},n))})})}const eQ=["APPLE","HOUSE","TABLE","CHAIR","WATER","LIGHT","WORLD","MUSIC","PHONE","PAPER","BREAD","HEART","SMILE","DREAM","RIVER","TRAIN","CLOUD","GREEN","STONE","HAPPY","SLEEP","NIGHT","SUNNY","PLANT","CLOCK","SWEET","PEACE","BLUE","BIRD","WIND","TREE","ROAD","STAR","GAME","FIRE","LOVE","FISH","BOOK","MILK","HAND","BALL","SONG","FACE","RAIN","SHOE","CAR","CUP","PEN","BAG","MAP","RING","TOY","BOX","CAT","DOG","COW","PIG","HEN","FOX","BEE","ANT","OWL","BAT","EGG","ICE","SEA","SUN","SKY","AIR","OIL","JAM","TEA","INK","HAT","KEY","BED","RUN","WALK","JUMP","READ","SING","COOK","PLAY","WORK","HELP","WASH","DRAW","OPEN","CLOSE","PUSH","PULL","MAKE","GIVE","TAKE","FIND","KEEP","CALL","LOOK","TIME","YEAR","DAY","WEEK","MONTH","LIFE","CHILD","MAN","WOMAN","FRIEND","FAMILY","SCHOOL","CITY","TOWN","VILLAGE","COUNTRY","PLACE","SHOP","MARKET","STREET","ROOM","DOOR","WINDOW","WALL","FLOOR","ROOF","GARDEN","PARK","TREE","FLOWER","GRASS","LEAF","BRANCH","ROOT","FRUIT","SEED","WATER","RIVER","LAKE","SEA","OCEAN","BEACH","SAND","STONE","ROCK","HILL","MOUNTAIN","VALLEY","ISLAND","FOREST","DESERT","FIELD","FARM","ROAD","BRIDGE","TRAIN","BUS","CAR","BIKE","BOAT","SHIP","PLANE","HOTEL","BANK","MONEY","COIN","NOTE","PRICE","COST","BUY","SELL","PAY","FOOD","MEAT","RICE","SOUP","CAKE","SUGAR","SALT","TEA","COFFEE","DRINK","EAT","PLATE","BOWL","GLASS","FORK","SPOON","KNIFE","POT","FIRE","SMOKE","LIGHT","DARK","HOT","COLD","WARM","COOL","DRY","WET","CLEAN","DIRTY","BIG","SMALL","LONG","SHORT","TALL","HIGH","LOW","FAST","SLOW","OLD","NEW","YOUNG","GOOD","BAD","HAPPY","SAD","ANGRY","KIND","NICE","FUN","HARD","SOFT","STRONG","WEAK","EARLY","LATE","SUNSET","SUNRISE","MORNING","EVENING","DINNER","LUNCH","BREAK","SNACK","FRUIT","LEMON","MANGO","GRAPE","BERRY","MELON","PEACH","PLUM","OLIVE","ONION","TOMATO","POTATO","CARROT","BEANS","WHEAT","BREAD","CHEESE","BUTTER","HONEY","SYRUP","SPICE","CHILI","PEPPER","MINT","SAUCE","SUGAR","SWEET","CANDY","COOKIE","BROWN","BLACK","WHITE","GREEN","YELLOW","ORANGE","PURPLE","SILVER","GOLD","METAL","GLASS","PAPER","CLOTH","WOOL","SILK","STONE","BRICK","STEEL","ROPE","CHAIN","NAILS","SCREW","BOLT","GLOVE","SHIRT","PANTS","DRESS","SKIRT","SHOES","BOOTS","SOCKS","BELT","WATCH","CLOCK","RADIO","VIDEO","MOVIE","MUSIC","PHOTO","IMAGE","PAINT","DRAW","WRITE","READ","STORY","NOVEL","POEM","WORDS","LINES","PAGES","COVER","TITLE","LIGHT","DARK","SHADE","COLOR","CLEAR","CLOUD","RAINY","STORM","WINDY","SNOWY","FROST","ICE","HAIL","HEAT","COLD","COOL","WARM","HUMID","DRY","MOIST","SOIL","SAND","DUST","MUD","PATH","ROAD","TRACK","TRAIL","LANE","ROUTE","SIGN","MARK","GATE","FENCE","WALL","DOOR","LOCK","KEY","LAMP","BULB","WIRE","PLUG","TOOL","DRILL","SAW","HAMMER","TAPE","GLUE","NAIL","IRON","PIPE","HOSE","PUMP","SINK","BATH","SOAP","COMB","HAIR","FACE","EYES","NOSE","EARS","LIPS","SKIN","NECK","ARMS","HAND","LEGS","FEET","TOES","FINGERS","SMILE","LAUGH","CRY","SNEEZE","COUGH","SICK","HURT","HEAL","REST","MOVE","JUMP","RUN","WALK","SWIM","DIVE","RIDE","DRIVE","FLY","SAIL","CLIMB","PUSH","PULL","LIFT","DROP","THROW","CATCH"],Cd=8,tQ=10,YS=3;function nQ(){const[a,e]=H.useState([]),[t,n]=H.useState([]),[r,i]=H.useState([]),[s,o]=H.useState([]),[l,c]=H.useState(!1),d=()=>{let A=[...eQ],E=[],b=Array(Cd).fill(null).map(()=>Array(Cd).fill(null)),_="horizontal";for(;E.length<tQ&&A.length>0;){let T,M;_==="horizontal"?(T=Math.floor(Math.random()*Cd),M=Math.floor(Math.random()*Math.ceil(Cd/2))):(T=Math.floor(Math.random()*Math.ceil(Cd/2)),M=Math.floor(Math.random()*Cd));let I=_==="horizontal"?Cd-M:Cd-T;I<YS&&(_=_==="horizontal"?"vertical":"horizontal");let P=YS+Math.floor(Math.random()*(I-YS+1)),B=[];for(let L=0;L<P;L++){let U=_==="horizontal"?T:T+L,j=_==="horizontal"?M+L:M,W=b[U][j];W&&B.push({letterIndex:L,letter:W})}let F=A.filter(L=>L.length!==P?!1:B.every(U=>L[U.letterIndex]===U.letter));if(F.length>0){let L=F[Math.floor(Math.random()*F.length)];for(let U=0;U<L.length;U++){let j=_==="horizontal"?T:T+U,W=_==="horizontal"?M+U:M;b[j][W]=L[U]}E.push(L),A=A.filter(U=>U!==L)}_=_==="horizontal"?"vertical":"horizontal"}const R="ABCDEFGHIJKLMNOPQRSTUVWXYZ";b=b.map(T=>T.map(M=>M||R[Math.floor(Math.random()*26)])),e(b),n(E),i([]),o([])},h=(A,E,b)=>{c(!0),i([{r:A,c:E,letter:b}])},m=(A,E,b)=>{l&&i(_=>_.find(T=>T.r===A&&T.c===E)?_:[..._,{r:A,c:E,letter:b}])},v=()=>{if(r.length>0){const A=r.map(E=>E.letter).join("");t.includes(A)&&o([...s,r])}i([]),c(!1)};return H.useEffect(()=>{d()},[]),x.jsx("div",{className:"word-jumble-wrapper",children:x.jsxs("div",{className:"word-jumble-container",onMouseUp:v,children:[x.jsx("div",{className:"puzzle",children:a.map((A,E)=>x.jsx("div",{className:"puzzle-row",children:A.map((b,_)=>{const R=!!r.find(M=>M.r===E&&M.c===_),T=!!s.flat().find(M=>M.r===E&&M.c===_);return x.jsx("div",{className:"puzzle-letter","data-filling":R,"data-filled":T,onMouseDown:()=>h(E,_,b),onMouseEnter:()=>m(E,_,b),children:b},_)})},E))}),x.jsxs("div",{className:"word-jumble-options",children:[x.jsx("div",{className:"answers",children:t.map((A,E)=>x.jsx("div",{className:"answer-item","data-found":!!s.find(b=>b.map(_=>_.letter).join("")===A),children:A},E))}),x.jsx("button",{className:"shuffle-button",onClick:d,children:"Shuffle Words"})]})]})})}function aQ(){const[a,e]=H.useState([]),[t,n]=H.useState(""),[r,i]=H.useState(-1),s=H.useRef(null),o=(d,h,m,v)=>{e(A=>[...A,{command:d,output:h,type:m,dataType:v}])},l=()=>{if(!t.trim())return;let d,h="log",m="undefined";try{const v=Function(`"use strict"; return (${t})`)();if(m=typeof v,m==="object"&&v!==null)try{d=JSON.stringify(v)}catch{d=String(v)}else d=String(v)}catch(v){h="error",m="error",d=v.message}o(t,d,h,m),n(""),i(-1)},c=d=>{if(d.key==="Enter")l();else if(d.key==="ArrowUp"){if(d.preventDefault(),a.length>0){const h=r===-1?a.length-1:Math.max(0,r-1);i(h),n(a[h].command)}}else if(d.key==="ArrowDown"&&(d.preventDefault(),a.length>0)){if(r===-1)return;const h=r===a.length-1?-1:r+1;i(h),n(h===-1?"":a[h].command)}};return H.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[a]),x.jsx("div",{className:"custom-console-wrapper",children:x.jsxs("div",{className:"custom-console-container",children:[x.jsx("div",{className:"custom-console-outputs",children:a.length===0?x.jsx("div",{className:"custom-console-center-text",children:"Outputs will be displayed here"}):x.jsx("div",{className:"custom-console-listing",ref:s,children:a.map((d,h)=>x.jsxs("div",{className:"custom-console-item",children:[x.jsxs("div",{className:"custom-console-item-command",children:[x.jsx("div",{className:"custom-console-item-command-icon"}),x.jsx("div",{className:"custom-console-item-command-text",children:d.command})]}),x.jsx("div",{className:"custom-console-item-output","data-type":d.type,"data-data-type":d.dataType,children:d.output})]},h))})}),x.jsx("input",{type:"text",className:"custom-console-input",spellCheck:"false",placeholder:"Input your JavaScript command and hit enter",value:t,onChange:d=>n(d.target.value),onKeyDown:c})]})})}const rQ=[[{key:"`",label:"~"},{key:"1",label:"!"},{key:"2",label:"@"},{key:"3",label:"#"},{key:"4",label:"$"},{key:"5",label:"%"},{key:"6",label:"^"},{key:"7",label:"&"},{key:"8",label:"*"},{key:"9",label:"("},{key:"0",label:")"},{key:"-",label:"_"},{key:"=",label:"+"},{key:"Backspace",label:"Backspace"}],[{key:"Tab",label:"Tab"},{key:"q",label:"Q"},{key:"w",label:"W"},{key:"e",label:"E"},{key:"r",label:"R"},{key:"t",label:"T"},{key:"y",label:"Y"},{key:"u",label:"U"},{key:"i",label:"I"},{key:"o",label:"O"},{key:"p",label:"P"},{key:"[",label:"{"},{key:"]",label:"}"},{key:"\\",label:"|"}],[{key:"CapsLock",label:"CapsLock"},{key:"a",label:"A"},{key:"s",label:"S"},{key:"d",label:"D"},{key:"f",label:"F"},{key:"g",label:"G"},{key:"h",label:"H"},{key:"j",label:"J"},{key:"k",label:"K"},{key:"l",label:"L"},{key:";",label:":"},{key:"'",label:'"'},{key:"Enter",label:"Enter"}],[{key:"ShiftLeft",label:"Shift"},{key:"z",label:"Z"},{key:"x",label:"X"},{key:"c",label:"C"},{key:"v",label:"V"},{key:"b",label:"B"},{key:"n",label:"N"},{key:"m",label:"M"},{key:",",label:"<"},{key:".",label:">"},{key:"/",label:"?"},{key:"ShiftRight",label:"Shift"}],[{key:"ControlLeft",label:"Ctrl"},{key:"AltLeft",label:"Alt"},{key:" ",label:" "},{key:"AltRight",label:"Alt"},{key:"ControlRight",label:"Ctrl"}]],iQ={Backquote:"`",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",BracketLeft:"[",BracketRight:"]",Backslash:"\\",CapsLock:"CapsLock",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",Semicolon:";",Quote:"'",Enter:"Enter",ShiftLeft:"ShiftLeft",ShiftRight:"ShiftRight",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m",Comma:",",Period:".",Slash:"/",ControlLeft:"ControlLeft",ControlRight:"ControlRight",AltLeft:"AltLeft",AltRight:"AltRight",Space:" "},sQ={keyboardRows:rQ,codeMap:iQ};function oQ(){const{keyboardRows:a,codeMap:e}=sQ,[t,n]=H.useState([]),r=H.useRef(null);return H.useEffect(()=>{const i=o=>{const l=e[o.code];n(c=>c.includes(l)?c:[...c,l])},s=o=>{const l=e[o.code];n(c=>c.filter(d=>d!==l))};return window.addEventListener("keydown",i),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",s)}},[e]),x.jsx("div",{className:"keyboard-wrapper",children:x.jsxs("div",{className:"keyboard-container",children:[x.jsx("textarea",{className:"keyboard-textarea",ref:r,placeholder:"Type your text here...",spellCheck:"false"}),x.jsx("div",{className:"keyboard",children:a.map((i,s)=>x.jsx("div",{className:"keyboard-row",children:i.map((o,l)=>x.jsx("div",{className:"keyboard-key","data-active":t.includes(o.key),"data-key":o.key,children:o.label},l))},s))})]})})}const Mi=3,lQ=[{direction:"left",keys:["KeyA","ArrowLeft"]},{direction:"right",keys:["KeyD","ArrowRight"]},{direction:"up",keys:["KeyW","ArrowUp"]},{direction:"down",keys:["KeyS","ArrowDown"]}],cQ=a=>{if(a===null)return{visibility:"hidden"};const e=(a-1)%Mi,t=Math.floor((a-1)/Mi);return{backgroundPositionX:-e*(400/Mi),backgroundPositionY:-t*(400/Mi)}};function uQ(){const[a,e]=H.useState([]),[t,n]=H.useState({row:Mi-1,col:Mi-1}),[r,i]=H.useState(!1),s=()=>{let c=[];for(let m=1;m<Mi*Mi;m++)c.push(m);for(let m=c.length-1;m>0;m--){const v=Math.floor(Math.random()*(m+1));[c[m],c[v]]=[c[v],c[m]]}c.push(null);let d=[],h=0;for(let m=0;m<Mi;m++){d.push([]);for(let v=0;v<Mi;v++)d[m][v]=c[h++]}e(d),n({row:Mi-1,col:Mi-1}),i(!1)},o=c=>{let d=1;for(let h=0;h<Mi;h++)for(let m=0;m<Mi;m++)if(c[h][m]!==d++)return!1;return!0},l=(c,d)=>{if(Math.abs(c-t.row)===1&&d===t.col||Math.abs(d-t.col)===1&&c===t.row){const h=a.map(m=>[...m]);h[t.row][t.col]=h[c][d],h[c][d]=null,e(h),n({row:c,col:d}),o(h)&&i(!0)}};return H.useEffect(()=>{const c=d=>{const h=lQ.find(A=>A.keys.includes(d.code));if(!h)return;let{row:m,col:v}=t;h.direction==="up"&&m<Mi-1&&l(m+1,v),h.direction==="down"&&m>0&&l(m-1,v),h.direction==="left"&&v<Mi-1&&l(m,v+1),h.direction==="right"&&v>0&&l(m,v-1)};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,a]),H.useEffect(()=>{s()},[]),x.jsx("div",{className:"sliding-puzzle-wrapper",children:x.jsxs("div",{className:"sliding-puzzle-container",children:[x.jsx("div",{className:"sliding-puzzle-hint",children:"Use Arrow Keys or W, A, S, D to move puzzle tiles"}),x.jsx("div",{className:"sliding-puzzle","data-solved":r,children:a.map((c,d)=>x.jsx("div",{className:"sliding-puzzle-row",children:c.map((h,m)=>x.jsx("div",{className:`sliding-puzzle-tile ${h===null?"empty":""}`,style:cQ(h)},m))},d))}),r&&x.jsx("div",{className:"sliding-puzzle-options",children:x.jsx("button",{className:"sliding-puzzle-button",onClick:s,children:"Restart Puzzle"})})]})})}const Id=["rgb(51, 102, 204)","rgb(204, 0, 68)","rgb(45, 134, 89)","rgb(219, 94, 10)","rgb(138, 0, 230)"],dQ=[{key:"instant",label:"Instant"},{key:"fade",label:"Fade"},{key:"up",label:"Up"},{key:"down",label:"Down"},{key:"blur",label:"Blur"},{key:"rotate",label:"Rotate"}],qS=500;function mm(){return Math.random().toString(36).slice(2,9)}function fQ(){const[a,e]=H.useState(()=>[{id:mm(),text:"THIS IS",bg:Id[0],anim:"up"},{id:mm(),text:"A SLIDE SHOW",bg:Id[1],anim:"fade"},{id:mm(),text:"ONLINE EDITOR",bg:Id[2],anim:"down"},{id:mm(),text:"CREATED FROM",bg:Id[3],anim:"blur"},{id:mm(),text:"REACT JS",bg:Id[4],anim:"rotate"}]),[t,n]=H.useState(0),[r,i]=H.useState(!1),[s,o]=H.useState(0),[l,c]=H.useState(null),[d,h]=H.useState(null),[m,v]=H.useState("init"),A=a[t]??null,E=()=>{if(!a.length)return;const P=0;o(P);const B=a[P];c(null),h({...B}),v("init"),requestAnimationFrame(()=>{requestAnimationFrame(()=>v("in"))}),i(!0),setTimeout(()=>{c(B),h(null)},qS)},b=()=>{i(!1),h(null)},_=()=>{const P=(s+1)%a.length,B=a[P];if(B.anim==="instant"){c(B),o(P),h(null);return}h({...B}),v("init"),requestAnimationFrame(()=>{requestAnimationFrame(()=>v("in"))}),setTimeout(()=>{c(B),o(P),h(null)},qS)},R=()=>{const P={id:mm(),text:"Sample Text",bg:Id[a.length%Id.length],anim:"instant"};e(B=>[...B,P]),n(a.length)},T=()=>{if(!a.length)return;const P=a.slice();P.splice(t,1);const B=Math.max(0,t-1);e(P),n(Math.min(B,P.length-1))},M=P=>{e(B=>B.map((F,L)=>L===t?{...F,...P}:F))},I=P=>({background:P,backgroundSize:"cover",backgroundPosition:"center"});return x.jsx("div",{className:"slide-show-editor-wrapper",children:x.jsxs("div",{className:"slide-show-editor-container",children:[x.jsxs("div",{className:"slide-show-editor",children:[x.jsxs("div",{className:"slide-show-editor-listing",children:[a.map((P,B)=>x.jsx("div",{className:"slide-show-editor-listing-item","data-active":B===t,style:I(P.bg),onClick:()=>n(B),children:(P.text||"").slice(0,1)},P.id)),x.jsx("div",{className:"slide-show-editor-listing-item add",onClick:R})]}),x.jsxs("div",{className:"slide-show-editor-slide",style:I(A.bg),children:[x.jsx("input",{spellCheck:"false",value:A.text??"",onChange:P=>M({text:P.target.value})}),x.jsx("div",{className:"slide-show-editor-backgrounds",children:Id.map((P,B)=>x.jsx("div",{className:"slide-show-editor-background-item","data-active":A.bg===P,style:I(P),onClick:()=>M({bg:P})},B))}),x.jsx("div",{className:"slide-show-editor-animations",children:dQ.map(P=>x.jsx("div",{className:"slide-show-editor-animation-item","data-active":A.anim===P.key,onClick:()=>M({anim:P.key}),children:P.label},P.key))}),x.jsx("div",{className:"slide-show-editor-start",onClick:E}),x.jsx("div",{className:"slide-show-editor-delete",onClick:T})]})]}),r&&x.jsxs("div",{className:"slide-show-editor-show",children:[x.jsxs("div",{className:"slide-show-editor-show-slide-idle",style:I(l==null?void 0:l.bg),children:[x.jsx("div",{className:"slide-show-editor-show-text",children:l==null?void 0:l.text}),x.jsx("div",{className:"slide-show-editor-show-exit",onClick:b}),s<a.length-1&&x.jsx("div",{className:"slide-show-editor-show-next",onClick:_})]}),d&&x.jsx("div",{className:"slide-show-editor-show-slide",style:{...I(d.bg),transitionDuration:`${qS}ms`},"data-anim":d.anim,"data-phase":m,children:x.jsx("div",{className:"slide-show-editor-show-text",children:d.text})})]})]})})}const S2=a=>{const e=new Uint8Array(a);let t="";for(let n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},AC=async(a,e)=>{const t=new TextEncoder,n=t.encode(a),r=t.encode(e),i=await window.crypto.subtle.importKey("raw",n,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),s=await window.crypto.subtle.sign("HMAC",i,r);return new Uint8Array(s)};function hQ(){const[a,e]=H.useState("generator"),[t,n]=H.useState("MY_SERVER_SECRET"),[r,i]=H.useState(60),[s,o]=H.useState(`{
  "id": "1234",
  "email": "user@example.com",
  "role": "admin"
}`),[l,c]=H.useState(""),[d,h]=H.useState("MY_SERVER_SECRET"),[m,v]=H.useState(""),[A,E]=H.useState(""),b=async(M,I,P)=>{const B={alg:"HS256",typ:"JWT"},F=Math.floor(Date.now()/1e3),L={iat:F,...P?{exp:F+Number(P)}:{},obj:I},U=new TextEncoder,j=S2(U.encode(JSON.stringify(B))),W=S2(U.encode(JSON.stringify(L))),Q=`${j}.${W}`,$=await AC(M,Q),re=S2($);return`${Q}.${re}`},_=async(M,I)=>{try{const P=I.split("."),[B,F,L]=P,U=`${B}.${F}`,j=await AC(M,U),W=S2(j);if(L!==W)return{ok:!1,message:"TOKEN_INVALID"};const Q=atob(F.replace(/-/g,"+").replace(/_/g,"/")),$=JSON.parse(Q),re=Math.floor(Date.now()/1e3);return $.exp&&re>=$.exp?{ok:!1,message:"TOKEN_EXPIRED",payload:$}:{ok:!0,payload:$}}catch{return{ok:!1,message:"TOKEN_INVALID"}}},R=async()=>{let M;try{M=JSON.parse(s)}catch{return}const I=await b(t,M,Number(r));c(I)},T=async()=>{const M=await _(d,m);E(M.ok?JSON.stringify(M.payload,null,2):M.message)};return x.jsx("div",{className:"web-token-generator-wrapper",children:x.jsxs("div",{className:"web-token-generator-container",children:[x.jsxs("div",{className:"web-token-generator-tabs",children:[x.jsx("div",{className:"web-token-generator-tab","data-active":a==="generator",onClick:()=>e("generator"),children:"Generator"}),x.jsx("div",{className:"web-token-generator-tab","data-active":a==="validator",onClick:()=>e("validator"),children:"Validator"})]}),a==="generator"?x.jsxs("div",{className:"web-token-generator-section",children:[x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Secret"}),x.jsx("input",{className:"web-token-generator-input",type:"text",placeholder:"Type your server secret here",value:t,onChange:M=>n(M.target.value)})]}),x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Token Duration (Seconds)"}),x.jsx("input",{className:"web-token-generator-input",type:"number",placeholder:"Type token duration in seconds",value:r,onChange:M=>i(M.target.value)})]}),x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Token Payload (JSON)"}),x.jsx("textarea",{className:"web-token-generator-textarea",placeholder:"Type your token payload here",value:s,onChange:M=>o(M.target.value)})]}),x.jsx("button",{className:"web-token-generator-button",onClick:R,children:"Generate Token"}),x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Token Output"}),x.jsx("textarea",{className:"web-token-generator-textarea",placeholder:"Token will be displayed here",readOnly:!0,value:l})]})]}):x.jsxs("div",{className:"web-token-generator-section",children:[x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Secret"}),x.jsx("input",{className:"web-token-generator-input",type:"text",placeholder:"Type your server secret here",value:d,onChange:M=>h(M.target.value)})]}),x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Token"}),x.jsx("textarea",{className:"web-token-generator-textarea",placeholder:"Place your token here",value:m,onChange:M=>v(M.target.value)})]}),x.jsx("button",{className:"web-token-generator-button",onClick:T,children:"Validate Token"}),x.jsxs("fieldset",{className:"web-token-generator-fieldset",children:[x.jsx("legend",{className:"web-token-generator-legend",children:"Output"}),x.jsx("textarea",{className:"web-token-generator-textarea",placeholder:"Result will be displayed here",readOnly:!0,value:A})]})]})]})})}const _C=["#FB2C36","#FF692A","#FE9A37","#F0B13B","#7CCF35","#31C950","#37BC7D","#36BBA7","#3BB8DB","#34A6F4","#2B7FFF","#615FFF","#8E51FF","#AD46FF","#E12AFB","#F6339A","#FF2056","#FB2C36","#FF692A","#FE9A37","#F0B13B","#7CCF35","#31C950","#37BC7D","#36BBA7","#3BB8DB","#34A6F4","#2B7FFF","#615FFF","#8E51FF","#AD46FF","#E12AFB","#F6339A","#FF2056","#FB2C36","#FF692A","#FE9A37","#F0B13B","#7CCF35","#31C950","#37BC7D","#36BBA7","#3BB8DB","#34A6F4","#2B7FFF","#615FFF","#8E51FF","#AD46FF","#E12AFB","#F6339A","#FF2056","#FB2C36","#FF692A","#FE9A37","#F0B13B","#7CCF35","#31C950","#37BC7D","#36BBA7","#3BB8DB","#34A6F4","#2B7FFF","#615FFF","#8E51FF"];function pQ(){const[a,e]=H.useState(null),[t,n]=H.useState(null),[r,i]=H.useState(!1),s=H.useRef(null),o=(c,d)=>{const h=d.currentTarget.getBoundingClientRect(),m=s.current.getBoundingClientRect();n({left:h.left-m.left,top:h.top-m.top,width:h.width,height:h.height}),e(c)},l=()=>{i(!1),setTimeout(()=>{e(null),n(null)},300)};return H.useEffect(()=>{a!==null&&t&&i(!0)},[a,t]),x.jsx("div",{className:"zoom-in-list-wrapper",children:x.jsxs("div",{className:"zoom-in-list-container",ref:s,children:[x.jsx("div",{className:"zoom-in-list",children:_C.map((c,d)=>x.jsx("div",{className:"zoom-in-list-item",style:{background:c},onClick:h=>o(d,h),children:d+1},d))}),a!==null&&t&&x.jsxs("div",{className:`zoom-in-list-overlay ${r?"expanded":""}`,style:{left:t.left,top:t.top,width:t.width,height:t.height,background:_C[a]},children:[x.jsx("div",{className:"zoom-in-list-close",onClick:l}),a+1]})]})})}const bC=["rgb(251, 44, 54)","rgb(255, 105, 42)","rgb(254, 154, 55)","rgb(240, 177, 59)","rgb(124, 207, 53)","rgb(49, 201, 80)","rgb(55, 188, 125)","rgb(54, 187, 167)","rgb(59, 184, 219)","rgb(52, 166, 244)","rgb(43, 127, 255)","rgb(97, 95, 255)","rgb(142, 81, 255)","rgb(173, 70, 255)","rgb(225, 42, 251)","rgb(246, 51, 154)","rgb(255, 32, 86)"];function mQ(){const a=H.useRef(null),e=H.useRef(null),t=H.useRef(null),n=H.useRef([]),[r,i]=H.useState(bC[0]),[s,o]=H.useState(12),[l,c]=H.useState(!1),[d,h]=H.useState(!1),m=_=>{if(!e.current)return;c(!0);const{offsetX:R,offsetY:T}=_.nativeEvent;e.current.beginPath(),e.current.moveTo(R,T)},v=_=>{if(!l||!e.current)return;const{offsetX:R,offsetY:T}=_.nativeEvent,M=e.current;M.fillStyle=r,M.beginPath(),M.arc(R,T,s/2,0,2*Math.PI),M.fill()},A=()=>{e.current&&(c(!1),e.current.closePath())},E=()=>{if(!a.current||!e.current)return;const _=a.current;e.current.clearRect(0,0,_.width,_.height)},b=()=>{if(!a.current)return;if(d&&t.current){t.current.stop(),h(!1);return}const _=a.current.captureStream(),R=new MediaRecorder(_,{mimeType:"video/webm"});t.current=R,n.current=[],R.ondataavailable=T=>{T.data.size>0&&n.current.push(T.data)},R.onstop=()=>{if(!n.current.length)return;const T=new Blob(n.current,{type:"video/webm"}),M=URL.createObjectURL(T),I=document.createElement("a");document.body.appendChild(I),I.href=M,I.download="canvas-recording.webm",I.click(),URL.revokeObjectURL(M)},R.start(),h(!0)};return H.useEffect(()=>{if(!a.current)return;const _=a.current;_.width=560,_.height=500;const R=_.getContext("2d");R.strokeStyle=r,R.lineWidth=s,e.current=R},[]),x.jsx("div",{className:"canvas-video-recorder-wrapper",children:x.jsxs("div",{className:"canvas-video-recorder-container",children:[x.jsx("canvas",{className:"canvas-video-recorder-canvas",ref:a,onMouseDown:m,onMouseMove:v,onMouseUp:A,onMouseLeave:A}),x.jsxs("div",{className:"canvas-video-recorder-options",children:[x.jsxs("div",{className:"canvas-video-recorder-style",children:[x.jsx("div",{className:"canvas-video-recorder-colors",children:bC.map((_,R)=>x.jsx("div",{className:"canvas-video-recorder-color",style:{background:_},"data-active":_===r,onClick:()=>i(_)},R))}),x.jsx("input",{className:"canvas-video-recorder-size",type:"range",min:"10",max:"20",value:s,onChange:_=>o(Number(_.target.value))})]}),x.jsx("button",{className:"canvas-video-recorder-record","data-active":d,onClick:b}),x.jsx("button",{className:"canvas-video-recorder-reset-reset",onClick:E})]})]})})}function H3(){return H3=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},H3.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const A_="179",_h={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bP=0,j3=1,SP=2,gQ=3,EP=0,__=1,Rv=2,ml=3,Tc=0,ss=1,yl=2,_u=0,kh=1,z3=2,G3=3,V3=4,wP=5,jd=100,RP=101,MP=102,TP=103,NP=104,CP=200,IP=201,DP=202,LP=203,aA=204,rA=205,PP=206,OP=207,UP=208,BP=209,FP=210,kP=211,HP=212,jP=213,zP=214,iA=0,sA=1,oA=2,Vh=3,lA=4,cA=5,uA=6,dA=7,A1=0,GP=1,VP=2,Ec=0,WP=1,KP=2,YP=3,TR=4,qP=5,XP=6,JP=7,W3="attached",ZP="detached",b_=300,wu=301,ef=302,Yv=303,qv=304,N0=306,tf=1e3,no=1001,l0=1002,Ur=1003,S_=1004,vQ=1004,Ih=1005,yQ=1005,tr=1006,e0=1007,xQ=1007,Uo=1008,AQ=1008,Bo=1009,NR=1010,CR=1011,c0=1012,E_=1013,Ru=1014,Ts=1015,C0=1016,w_=1017,R_=1018,u0=1020,IR=35902,DR=1021,LR=1022,Pi=1023,d0=1026,f0=1027,M_=1028,_1=1029,PR=1030,T_=1031,_Q=1032,N_=1033,Mv=33776,Tv=33777,Nv=33778,Cv=33779,fA=35840,hA=35841,pA=35842,mA=35843,gA=36196,vA=37492,yA=37496,xA=37808,AA=37809,_A=37810,bA=37811,SA=37812,EA=37813,wA=37814,RA=37815,MA=37816,TA=37817,NA=37818,CA=37819,IA=37820,DA=37821,Iv=36492,LA=36494,PA=36495,OR=36283,OA=36284,UA=36285,BA=36286,QP=2200,$P=2201,eO=2202,h0=2300,p0=2301,Ex=2302,Dh=2400,Lh=2401,Xv=2402,C_=2500,UR=2501,tO=0,BR=1,FA=2,nO=3200,aO=3201,bQ=3202,SQ=3203,of=0,rO=1,vu="",cr="srgb",pi="srgb-linear",Jv="linear",fa="srgb",EQ=0,Sh=7680,wQ=7681,RQ=7682,MQ=7683,TQ=34055,NQ=34056,CQ=5386,IQ=512,DQ=513,LQ=514,PQ=515,OQ=516,UQ=517,BQ=518,K3=519,iO=512,sO=513,oO=514,FR=515,lO=516,cO=517,uO=518,dO=519,Zv=35044,FQ=35048,kQ=35040,HQ=35045,jQ=35049,zQ=35041,GQ=35046,VQ=35050,WQ=35042,KQ="100",Y3="300 es",ao=2e3,m0=2001,YQ={COMPUTE:"compute",RENDER:"render"},qQ={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},XQ={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Pc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,e);e.target=null}}};const Ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let SC=1234567;const Hh=Math.PI/180,g0=180/Math.PI;function so(){const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ei[a&255]+Ei[a>>8&255]+Ei[a>>16&255]+Ei[a>>24&255]+"-"+Ei[e&255]+Ei[e>>8&255]+"-"+Ei[e>>16&15|64]+Ei[e>>24&255]+"-"+Ei[t&63|128]+Ei[t>>8&255]+"-"+Ei[t>>16&255]+Ei[t>>24&255]+Ei[n&255]+Ei[n>>8&255]+Ei[n>>16&255]+Ei[n>>24&255]).toLowerCase()}function ln(a,e,t){return Math.max(e,Math.min(t,a))}function kR(a,e){return(a%e+e)%e}function JQ(a,e,t,n,r){return n+(a-e)*(r-n)/(t-e)}function ZQ(a,e,t){return a!==e?(t-a)/(e-a):0}function Dv(a,e,t){return(1-t)*a+t*e}function QQ(a,e,t,n){return Dv(a,e,1-Math.exp(-t*n))}function $Q(a,e=1){return e-Math.abs(kR(a,e*2)-e)}function e$(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*(3-2*a))}function t$(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*a*(a*(a*6-15)+10))}function n$(a,e){return a+Math.floor(Math.random()*(e-a+1))}function a$(a,e){return a+Math.random()*(e-a)}function r$(a){return a*(.5-Math.random())}function i$(a){a!==void 0&&(SC=a);let e=SC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function s$(a){return a*Hh}function o$(a){return a*g0}function l$(a){return(a&a-1)===0&&a!==0}function c$(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function u$(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function d$(a,e,t,n,r){const i=Math.cos,s=Math.sin,o=i(t/2),l=s(t/2),c=i((e+n)/2),d=s((e+n)/2),h=i((e-n)/2),m=s((e-n)/2),v=i((n-e)/2),A=s((n-e)/2);switch(r){case"XYX":a.set(o*d,l*h,l*m,o*c);break;case"YZY":a.set(l*m,o*d,l*h,o*c);break;case"ZXZ":a.set(l*h,l*m,o*d,o*c);break;case"XZX":a.set(o*d,l*A,l*v,o*c);break;case"YXY":a.set(l*v,o*d,l*A,o*c);break;case"ZYZ":a.set(l*A,l*v,o*d,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function is(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function Rn(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const fO={DEG2RAD:Hh,RAD2DEG:g0,generateUUID:so,clamp:ln,euclideanModulo:kR,mapLinear:JQ,inverseLerp:ZQ,lerp:Dv,damp:QQ,pingpong:$Q,smoothstep:e$,smootherstep:t$,randInt:n$,randFloat:a$,randFloatSpread:r$,seededRandom:i$,degToRad:s$,radToDeg:o$,isPowerOfTwo:l$,ceilPowerOfTwo:c$,floorPowerOfTwo:u$,setQuaternionFromProperEuler:d$,normalize:Rn,denormalize:is};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ln(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ln(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qr{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,o){let l=n[r+0],c=n[r+1],d=n[r+2],h=n[r+3];const m=i[s+0],v=i[s+1],A=i[s+2],E=i[s+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(o===1){e[t+0]=m,e[t+1]=v,e[t+2]=A,e[t+3]=E;return}if(h!==E||l!==m||c!==v||d!==A){let b=1-o;const _=l*m+c*v+d*A+h*E,R=_>=0?1:-1,T=1-_*_;if(T>Number.EPSILON){const I=Math.sqrt(T),P=Math.atan2(I,_*R);b=Math.sin(b*P)/I,o=Math.sin(o*P)/I}const M=o*R;if(l=l*b+m*M,c=c*b+v*M,d=d*b+A*M,h=h*b+E*M,b===1-o){const I=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=I,c*=I,d*=I,h*=I}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],l=n[r+1],c=n[r+2],d=n[r+3],h=i[s],m=i[s+1],v=i[s+2],A=i[s+3];return e[t]=o*A+d*h+l*v-c*m,e[t+1]=l*A+d*m+c*h-o*v,e[t+2]=c*A+d*v+o*m-l*h,e[t+3]=d*A-o*h-l*m-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,l=Math.sin,c=o(n/2),d=o(r/2),h=o(i/2),m=l(n/2),v=l(r/2),A=l(i/2);switch(s){case"XYZ":this._x=m*d*h+c*v*A,this._y=c*v*h-m*d*A,this._z=c*d*A+m*v*h,this._w=c*d*h-m*v*A;break;case"YXZ":this._x=m*d*h+c*v*A,this._y=c*v*h-m*d*A,this._z=c*d*A-m*v*h,this._w=c*d*h+m*v*A;break;case"ZXY":this._x=m*d*h-c*v*A,this._y=c*v*h+m*d*A,this._z=c*d*A+m*v*h,this._w=c*d*h-m*v*A;break;case"ZYX":this._x=m*d*h-c*v*A,this._y=c*v*h+m*d*A,this._z=c*d*A-m*v*h,this._w=c*d*h+m*v*A;break;case"YZX":this._x=m*d*h+c*v*A,this._y=c*v*h+m*d*A,this._z=c*d*A-m*v*h,this._w=c*d*h-m*v*A;break;case"XZY":this._x=m*d*h-c*v*A,this._y=c*v*h-m*d*A,this._z=c*d*A+m*v*h,this._w=c*d*h+m*v*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],l=t[9],c=t[2],d=t[6],h=t[10],m=n+o+h;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(d-l)*v,this._y=(i-c)*v,this._z=(s-r)*v}else if(n>o&&n>h){const v=2*Math.sqrt(1+n-o-h);this._w=(d-l)/v,this._x=.25*v,this._y=(r+s)/v,this._z=(i+c)/v}else if(o>h){const v=2*Math.sqrt(1+o-n-h);this._w=(i-c)/v,this._x=(r+s)/v,this._y=.25*v,this._z=(l+d)/v}else{const v=2*Math.sqrt(1+h-n-o);this._w=(s-r)/v,this._x=(i+c)/v,this._y=(l+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ln(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+s*o+r*c-i*l,this._y=r*d+s*l+i*o-n*c,this._z=i*d+s*c+n*l-r*o,this._w=s*d-n*o-r*l-i*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const l=1-o*o;if(l<=Number.EPSILON){const v=1-t;return this._w=v*s+t*this._w,this._x=v*n+t*this._x,this._y=v*r+t*this._y,this._z=v*i+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,o),h=Math.sin((1-t)*d)/c,m=Math.sin(t*d)/c;return this._w=s*h+this._w*m,this._x=n*h+this._x*m,this._y=r*h+this._y*m,this._z=i*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,n=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(EC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(EC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,l=e.w,c=2*(s*r-o*n),d=2*(o*t-i*r),h=2*(i*n-s*t);return this.x=t+l*c+s*h-o*d,this.y=n+l*d+o*c-i*h,this.z=r+l*h+i*d-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this.z=ln(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this.z=ln(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ln(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,l=t.z;return this.x=r*l-i*o,this.y=i*s-n*l,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return XS.copy(this).projectOnVector(e),this.sub(XS)}reflect(e){return this.sub(XS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ln(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const XS=new ae,EC=new Qr;class bn{constructor(e,t,n,r,i,s,o,l,c){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,i,s,o,l,c)}set(e,t,n,r,i,s,o,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=i,d[5]=l,d[6]=n,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],l=n[6],c=n[1],d=n[4],h=n[7],m=n[2],v=n[5],A=n[8],E=r[0],b=r[3],_=r[6],R=r[1],T=r[4],M=r[7],I=r[2],P=r[5],B=r[8];return i[0]=s*E+o*R+l*I,i[3]=s*b+o*T+l*P,i[6]=s*_+o*M+l*B,i[1]=c*E+d*R+h*I,i[4]=c*b+d*T+h*P,i[7]=c*_+d*M+h*B,i[2]=m*E+v*R+A*I,i[5]=m*b+v*T+A*P,i[8]=m*_+v*M+A*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*o*c-n*i*d+n*o*l+r*i*c-r*s*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=d*s-o*c,m=o*l-d*i,v=c*i-s*l,A=t*h+n*m+r*v;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=h*E,e[1]=(r*c-d*n)*E,e[2]=(o*n-r*s)*E,e[3]=m*E,e[4]=(d*t-r*l)*E,e[5]=(r*i-o*t)*E,e[6]=v*E,e[7]=(n*l-c*t)*E,e[8]=(s*t-n*i)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const l=Math.cos(i),c=Math.sin(i);return this.set(n*l,n*c,-n*(l*s+c*o)+s+e,-r*c,r*l,-r*(-c*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(JS.makeScale(e,t)),this}rotate(e){return this.premultiply(JS.makeRotation(-e)),this}translate(e,t){return this.premultiply(JS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const JS=new bn;function hO(a){for(let e=a.length-1;e>=0;--e)if(a[e]>=65535)return!0;return!1}const f$={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Vm(a,e){return new f$[a](e)}function Qv(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function pO(){const a=Qv("canvas");return a.style.display="block",a}const wC={};function t0(a){a in wC||(wC[a]=!0,console.warn(a))}function h$(a,e,t){return new Promise(function(n,r){function i(){switch(a.clientWaitSync(e,a.SYNC_FLUSH_COMMANDS_BIT,0)){case a.WAIT_FAILED:r();break;case a.TIMEOUT_EXPIRED:setTimeout(i,t);break;default:n()}}setTimeout(i,t)})}const RC=new bn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),MC=new bn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function p$(){const a={enabled:!0,workingColorSpace:pi,spaces:{},convert:function(r,i,s){return this.enabled===!1||i===s||!i||!s||(this.spaces[i].transfer===fa&&(r.r=bu(r.r),r.g=bu(r.g),r.b=bu(r.b)),this.spaces[i].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[i].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===fa&&(r.r=n0(r.r),r.g=n0(r.g),r.b=n0(r.b))),r},workingToColorSpace:function(r,i){return this.convert(r,this.workingColorSpace,i)},colorSpaceToWorking:function(r,i){return this.convert(r,i,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===vu?Jv:this.spaces[r].transfer},getLuminanceCoefficients:function(r,i=this.workingColorSpace){return r.fromArray(this.spaces[i].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,i,s){return r.copy(this.spaces[i].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,i){return t0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),a.workingToColorSpace(r,i)},toWorkingColorSpace:function(r,i){return t0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),a.colorSpaceToWorking(r,i)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return a.define({[pi]:{primaries:e,whitePoint:n,transfer:Jv,toXYZ:RC,fromXYZ:MC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:cr},outputColorSpaceConfig:{drawingBufferColorSpace:cr}},[cr]:{primaries:e,whitePoint:n,transfer:fa,toXYZ:RC,fromXYZ:MC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:cr}}}),a}const Fn=p$();function bu(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function n0(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let gm;class mO{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{gm===void 0&&(gm=Qv("canvas")),gm.width=e.width,gm.height=e.height;const r=gm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=gm}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let s=0;s<i.length;s++)i[s]=bu(i[s]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(bu(t[n]/255)*255):t[n]=bu(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let m$=0;class Kd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:m$++}),this.uuid=so(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let i;if(Array.isArray(r)){i=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?i.push(ZS(r[s].image)):i.push(ZS(r[s]))}else i=ZS(r);n.url=i}return t||(e.images[this.uuid]=n),n}}function ZS(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?mO.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let g$=0;const QS=new ae;class Ua extends Pc{constructor(e=Ua.DEFAULT_IMAGE,t=Ua.DEFAULT_MAPPING,n=no,r=no,i=tr,s=Uo,o=Pi,l=Bo,c=Ua.DEFAULT_ANISOTROPY,d=vu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:g$++}),this.uuid=so(),this.name="",this.source=new Kd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(QS).x}get height(){return this.source.getSize(QS).y}get depth(){return this.source.getSize(QS).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==b_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case tf:e.x=e.x-Math.floor(e.x);break;case no:e.x=e.x<0?0:1;break;case l0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case tf:e.y=e.y-Math.floor(e.y);break;case no:e.y=e.y<0?0:1;break;case l0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ua.DEFAULT_IMAGE=null;Ua.DEFAULT_MAPPING=b_;Ua.DEFAULT_ANISOTROPY=1;class Jn{constructor(e=0,t=0,n=0,r=1){Jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const l=e.elements,c=l[0],d=l[4],h=l[8],m=l[1],v=l[5],A=l[9],E=l[2],b=l[6],_=l[10];if(Math.abs(d-m)<.01&&Math.abs(h-E)<.01&&Math.abs(A-b)<.01){if(Math.abs(d+m)<.1&&Math.abs(h+E)<.1&&Math.abs(A+b)<.1&&Math.abs(c+v+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(c+1)/2,M=(v+1)/2,I=(_+1)/2,P=(d+m)/4,B=(h+E)/4,F=(A+b)/4;return T>M&&T>I?T<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(T),r=P/n,i=B/n):M>I?M<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(M),n=P/r,i=F/r):I<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(I),n=B/i,r=F/i),this.set(n,r,i,t),this}let R=Math.sqrt((b-A)*(b-A)+(h-E)*(h-E)+(m-d)*(m-d));return Math.abs(R)<.001&&(R=1),this.x=(b-A)/R,this.y=(h-E)/R,this.z=(m-d)/R,this.w=Math.acos((c+v+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this.z=ln(this.z,e.z,t.z),this.w=ln(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this.z=ln(this.z,e,t),this.w=ln(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ln(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class HR extends Pc{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:tr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t);const r={width:e,height:t,depth:n.depth},i=new Ua(r);this.textures=[];const s=n.count;for(let o=0;o<s;o++)this.textures[o]=i.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:tr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Kd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Nc extends HR{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class I_ extends Ua{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=no,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class v$ extends Nc{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new I_(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class D_ extends Ua{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=no,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class y$ extends Nc{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new D_(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class hi{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(fl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(fl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=fl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const i=n.getAttribute("position");if(t===!0&&i!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=i.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,fl):fl.fromBufferAttribute(i,s),fl.applyMatrix4(e.matrixWorld),this.expandByPoint(fl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),E2.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),E2.copy(n.boundingBox)),E2.applyMatrix4(e.matrixWorld),this.union(E2)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,fl),fl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ov),w2.subVectors(this.max,ov),vm.subVectors(e.a,ov),ym.subVectors(e.b,ov),xm.subVectors(e.c,ov),Dd.subVectors(ym,vm),Ld.subVectors(xm,ym),ah.subVectors(vm,xm);let t=[0,-Dd.z,Dd.y,0,-Ld.z,Ld.y,0,-ah.z,ah.y,Dd.z,0,-Dd.x,Ld.z,0,-Ld.x,ah.z,0,-ah.x,-Dd.y,Dd.x,0,-Ld.y,Ld.x,0,-ah.y,ah.x,0];return!$S(t,vm,ym,xm,w2)||(t=[1,0,0,0,1,0,0,0,1],!$S(t,vm,ym,xm,w2))?!1:(R2.crossVectors(Dd,Ld),t=[R2.x,R2.y,R2.z],$S(t,vm,ym,xm,w2))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(su),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const su=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],fl=new ae,E2=new hi,vm=new ae,ym=new ae,xm=new ae,Dd=new ae,Ld=new ae,ah=new ae,ov=new ae,w2=new ae,R2=new ae,rh=new ae;function $S(a,e,t,n,r){for(let i=0,s=a.length-3;i<=s;i+=3){rh.fromArray(a,i);const o=r.x*Math.abs(rh.x)+r.y*Math.abs(rh.y)+r.z*Math.abs(rh.z),l=e.dot(rh),c=t.dot(rh),d=n.dot(rh);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>o)return!1}return!0}const x$=new hi,lv=new ae,eE=new ae;class $r{constructor(e=new ae,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):x$.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lv.subVectors(e,this.center);const t=lv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(lv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(eE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lv.copy(e.center).add(eE)),this.expandByPoint(lv.copy(e.center).sub(eE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ou=new ae,tE=new ae,M2=new ae,Pd=new ae,nE=new ae,T2=new ae,aE=new ae;class rp{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ou)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ou.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ou.copy(this.origin).addScaledVector(this.direction,t),ou.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){tE.copy(e).add(t).multiplyScalar(.5),M2.copy(t).sub(e).normalize(),Pd.copy(this.origin).sub(tE);const i=e.distanceTo(t)*.5,s=-this.direction.dot(M2),o=Pd.dot(this.direction),l=-Pd.dot(M2),c=Pd.lengthSq(),d=Math.abs(1-s*s);let h,m,v,A;if(d>0)if(h=s*l-o,m=s*o-l,A=i*d,h>=0)if(m>=-A)if(m<=A){const E=1/d;h*=E,m*=E,v=h*(h+s*m+2*o)+m*(s*h+m+2*l)+c}else m=i,h=Math.max(0,-(s*m+o)),v=-h*h+m*(m+2*l)+c;else m=-i,h=Math.max(0,-(s*m+o)),v=-h*h+m*(m+2*l)+c;else m<=-A?(h=Math.max(0,-(-s*i+o)),m=h>0?-i:Math.min(Math.max(-i,-l),i),v=-h*h+m*(m+2*l)+c):m<=A?(h=0,m=Math.min(Math.max(-i,-l),i),v=m*(m+2*l)+c):(h=Math.max(0,-(s*i+o)),m=h>0?i:Math.min(Math.max(-i,-l),i),v=-h*h+m*(m+2*l)+c);else m=s>0?-i:i,h=Math.max(0,-(s*m+o)),v=-h*h+m*(m+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(tE).addScaledVector(M2,m),v}intersectSphere(e,t){ou.subVectors(e.center,this.origin);const n=ou.dot(this.direction),r=ou.dot(ou)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,l=n+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,o,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,m=this.origin;return c>=0?(n=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(n=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),d>=0?(i=(e.min.y-m.y)*d,s=(e.max.y-m.y)*d):(i=(e.max.y-m.y)*d,s=(e.min.y-m.y)*d),n>s||i>r||((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),h>=0?(o=(e.min.z-m.z)*h,l=(e.max.z-m.z)*h):(o=(e.max.z-m.z)*h,l=(e.min.z-m.z)*h),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,ou)!==null}intersectTriangle(e,t,n,r,i){nE.subVectors(t,e),T2.subVectors(n,e),aE.crossVectors(nE,T2);let s=this.direction.dot(aE),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Pd.subVectors(this.origin,e);const l=o*this.direction.dot(T2.crossVectors(Pd,T2));if(l<0)return null;const c=o*this.direction.dot(nE.cross(Pd));if(c<0||l+c>s)return null;const d=-o*Pd.dot(aE);return d<0?null:this.at(d/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nn{constructor(e,t,n,r,i,s,o,l,c,d,h,m,v,A,E,b){nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,i,s,o,l,c,d,h,m,v,A,E,b)}set(e,t,n,r,i,s,o,l,c,d,h,m,v,A,E,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=i,_[5]=s,_[9]=o,_[13]=l,_[2]=c,_[6]=d,_[10]=h,_[14]=m,_[3]=v,_[7]=A,_[11]=E,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Am.setFromMatrixColumn(e,0).length(),i=1/Am.setFromMatrixColumn(e,1).length(),s=1/Am.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(i),h=Math.sin(i);if(e.order==="XYZ"){const m=s*d,v=s*h,A=o*d,E=o*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=v+A*c,t[5]=m-E*c,t[9]=-o*l,t[2]=E-m*c,t[6]=A+v*c,t[10]=s*l}else if(e.order==="YXZ"){const m=l*d,v=l*h,A=c*d,E=c*h;t[0]=m+E*o,t[4]=A*o-v,t[8]=s*c,t[1]=s*h,t[5]=s*d,t[9]=-o,t[2]=v*o-A,t[6]=E+m*o,t[10]=s*l}else if(e.order==="ZXY"){const m=l*d,v=l*h,A=c*d,E=c*h;t[0]=m-E*o,t[4]=-s*h,t[8]=A+v*o,t[1]=v+A*o,t[5]=s*d,t[9]=E-m*o,t[2]=-s*c,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const m=s*d,v=s*h,A=o*d,E=o*h;t[0]=l*d,t[4]=A*c-v,t[8]=m*c+E,t[1]=l*h,t[5]=E*c+m,t[9]=v*c-A,t[2]=-c,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const m=s*l,v=s*c,A=o*l,E=o*c;t[0]=l*d,t[4]=E-m*h,t[8]=A*h+v,t[1]=h,t[5]=s*d,t[9]=-o*d,t[2]=-c*d,t[6]=v*h+A,t[10]=m-E*h}else if(e.order==="XZY"){const m=s*l,v=s*c,A=o*l,E=o*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=m*h+E,t[5]=s*d,t[9]=v*h-A,t[2]=A*h-v,t[6]=o*d,t[10]=E*h+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(A$,e,_$)}lookAt(e,t,n){const r=this.elements;return Xs.subVectors(e,t),Xs.lengthSq()===0&&(Xs.z=1),Xs.normalize(),Od.crossVectors(n,Xs),Od.lengthSq()===0&&(Math.abs(n.z)===1?Xs.x+=1e-4:Xs.z+=1e-4,Xs.normalize(),Od.crossVectors(n,Xs)),Od.normalize(),N2.crossVectors(Xs,Od),r[0]=Od.x,r[4]=N2.x,r[8]=Xs.x,r[1]=Od.y,r[5]=N2.y,r[9]=Xs.y,r[2]=Od.z,r[6]=N2.z,r[10]=Xs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],l=n[8],c=n[12],d=n[1],h=n[5],m=n[9],v=n[13],A=n[2],E=n[6],b=n[10],_=n[14],R=n[3],T=n[7],M=n[11],I=n[15],P=r[0],B=r[4],F=r[8],L=r[12],U=r[1],j=r[5],W=r[9],Q=r[13],$=r[2],re=r[6],G=r[10],Y=r[14],K=r[3],X=r[7],z=r[11],J=r[15];return i[0]=s*P+o*U+l*$+c*K,i[4]=s*B+o*j+l*re+c*X,i[8]=s*F+o*W+l*G+c*z,i[12]=s*L+o*Q+l*Y+c*J,i[1]=d*P+h*U+m*$+v*K,i[5]=d*B+h*j+m*re+v*X,i[9]=d*F+h*W+m*G+v*z,i[13]=d*L+h*Q+m*Y+v*J,i[2]=A*P+E*U+b*$+_*K,i[6]=A*B+E*j+b*re+_*X,i[10]=A*F+E*W+b*G+_*z,i[14]=A*L+E*Q+b*Y+_*J,i[3]=R*P+T*U+M*$+I*K,i[7]=R*B+T*j+M*re+I*X,i[11]=R*F+T*W+M*G+I*z,i[15]=R*L+T*Q+M*Y+I*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],l=e[9],c=e[13],d=e[2],h=e[6],m=e[10],v=e[14],A=e[3],E=e[7],b=e[11],_=e[15];return A*(+i*l*h-r*c*h-i*o*m+n*c*m+r*o*v-n*l*v)+E*(+t*l*v-t*c*m+i*s*m-r*s*v+r*c*d-i*l*d)+b*(+t*c*h-t*o*v-i*s*h+n*s*v+i*o*d-n*c*d)+_*(-r*o*d-t*l*h+t*o*m+r*s*h-n*s*m+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],m=e[10],v=e[11],A=e[12],E=e[13],b=e[14],_=e[15],R=h*b*c-E*m*c+E*l*v-o*b*v-h*l*_+o*m*_,T=A*m*c-d*b*c-A*l*v+s*b*v+d*l*_-s*m*_,M=d*E*c-A*h*c+A*o*v-s*E*v-d*o*_+s*h*_,I=A*h*l-d*E*l-A*o*m+s*E*m+d*o*b-s*h*b,P=t*R+n*T+r*M+i*I;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/P;return e[0]=R*B,e[1]=(E*m*i-h*b*i-E*r*v+n*b*v+h*r*_-n*m*_)*B,e[2]=(o*b*i-E*l*i+E*r*c-n*b*c-o*r*_+n*l*_)*B,e[3]=(h*l*i-o*m*i-h*r*c+n*m*c+o*r*v-n*l*v)*B,e[4]=T*B,e[5]=(d*b*i-A*m*i+A*r*v-t*b*v-d*r*_+t*m*_)*B,e[6]=(A*l*i-s*b*i-A*r*c+t*b*c+s*r*_-t*l*_)*B,e[7]=(s*m*i-d*l*i+d*r*c-t*m*c-s*r*v+t*l*v)*B,e[8]=M*B,e[9]=(A*h*i-d*E*i-A*n*v+t*E*v+d*n*_-t*h*_)*B,e[10]=(s*E*i-A*o*i+A*n*c-t*E*c-s*n*_+t*o*_)*B,e[11]=(d*o*i-s*h*i-d*n*c+t*h*c+s*n*v-t*o*v)*B,e[12]=I*B,e[13]=(d*E*r-A*h*r+A*n*m-t*E*m-d*n*b+t*h*b)*B,e[14]=(A*o*r-s*E*r-A*n*l+t*E*l+s*n*b-t*o*b)*B,e[15]=(s*h*r-d*o*r+d*n*l-t*h*l-s*n*m+t*o*m)*B,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,l=e.z,c=i*s,d=i*o;return this.set(c*s+n,c*o-r*l,c*l+r*o,0,c*o+r*l,d*o+n,d*l-r*s,0,c*l-r*o,d*l+r*s,i*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,l=t._w,c=i+i,d=s+s,h=o+o,m=i*c,v=i*d,A=i*h,E=s*d,b=s*h,_=o*h,R=l*c,T=l*d,M=l*h,I=n.x,P=n.y,B=n.z;return r[0]=(1-(E+_))*I,r[1]=(v+M)*I,r[2]=(A-T)*I,r[3]=0,r[4]=(v-M)*P,r[5]=(1-(m+_))*P,r[6]=(b+R)*P,r[7]=0,r[8]=(A+T)*B,r[9]=(b-R)*B,r[10]=(1-(m+E))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Am.set(r[0],r[1],r[2]).length();const s=Am.set(r[4],r[5],r[6]).length(),o=Am.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],hl.copy(this);const c=1/i,d=1/s,h=1/o;return hl.elements[0]*=c,hl.elements[1]*=c,hl.elements[2]*=c,hl.elements[4]*=d,hl.elements[5]*=d,hl.elements[6]*=d,hl.elements[8]*=h,hl.elements[9]*=h,hl.elements[10]*=h,t.setFromRotationMatrix(hl),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s,o=ao,l=!1){const c=this.elements,d=2*i/(t-e),h=2*i/(n-r),m=(t+e)/(t-e),v=(n+r)/(n-r);let A,E;if(l)A=i/(s-i),E=s*i/(s-i);else if(o===ao)A=-(s+i)/(s-i),E=-2*s*i/(s-i);else if(o===m0)A=-s/(s-i),E=-s*i/(s-i);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=d,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=h,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=A,c[14]=E,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,i,s,o=ao,l=!1){const c=this.elements,d=2/(t-e),h=2/(n-r),m=-(t+e)/(t-e),v=-(n+r)/(n-r);let A,E;if(l)A=1/(s-i),E=s/(s-i);else if(o===ao)A=-2/(s-i),E=-(s+i)/(s-i);else if(o===m0)A=-1/(s-i),E=-i/(s-i);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=d,c[4]=0,c[8]=0,c[12]=m,c[1]=0,c[5]=h,c[9]=0,c[13]=v,c[2]=0,c[6]=0,c[10]=A,c[14]=E,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Am=new ae,hl=new nn,A$=new ae(0,0,0),_$=new ae(1,1,1),Od=new ae,N2=new ae,Xs=new ae,TC=new nn,NC=new Qr;class lo{constructor(e=0,t=0,n=0,r=lo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],o=r[8],l=r[1],c=r[5],d=r[9],h=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ln(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,i),this._z=0);break;case"ZXY":this._x=Math.asin(ln(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,i));break;case"ZYX":this._y=Math.asin(-ln(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(l,i)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(ln(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,i)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-ln(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return TC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TC,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return NC.setFromEuler(this),this.setFromQuaternion(NC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}lo.DEFAULT_ORDER="XYZ";class v0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let b$=0;const CC=new ae,_m=new Qr,lu=new nn,C2=new ae,cv=new ae,S$=new ae,E$=new Qr,IC=new ae(1,0,0),DC=new ae(0,1,0),LC=new ae(0,0,1),PC={type:"added"},w$={type:"removed"},bm={type:"childadded",child:null},rE={type:"childremoved",child:null};class Wn extends Pc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:b$++}),this.uuid=so(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wn.DEFAULT_UP.clone();const e=new ae,t=new lo,n=new Qr,r=new ae(1,1,1);function i(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new nn},normalMatrix:{value:new bn}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=Wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new v0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _m.setFromAxisAngle(e,t),this.quaternion.multiply(_m),this}rotateOnWorldAxis(e,t){return _m.setFromAxisAngle(e,t),this.quaternion.premultiply(_m),this}rotateX(e){return this.rotateOnAxis(IC,e)}rotateY(e){return this.rotateOnAxis(DC,e)}rotateZ(e){return this.rotateOnAxis(LC,e)}translateOnAxis(e,t){return CC.copy(e).applyQuaternion(this.quaternion),this.position.add(CC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(IC,e)}translateY(e){return this.translateOnAxis(DC,e)}translateZ(e){return this.translateOnAxis(LC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?C2.copy(e):C2.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),cv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lu.lookAt(cv,C2,this.up):lu.lookAt(C2,cv,this.up),this.quaternion.setFromRotationMatrix(lu),r&&(lu.extractRotation(r.matrixWorld),_m.setFromRotationMatrix(lu),this.quaternion.premultiply(_m.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(PC),bm.child=e,this.dispatchEvent(bm),bm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(w$),rE.child=e,this.dispatchEvent(rE),rE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lu.multiply(e.parent.matrixWorld)),e.applyMatrix4(lu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(PC),bm.child=e,this.dispatchEvent(bm),bm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cv,e,S$),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cv,E$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function i(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];i(e.shapes,h)}else i(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(i(e.materials,this.material[l]));r.material=o}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(i(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),c=s(e.textures),d=s(e.images),h=s(e.shapes),m=s(e.skeletons),v=s(e.animations),A=s(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),d.length>0&&(n.images=d),h.length>0&&(n.shapes=h),m.length>0&&(n.skeletons=m),v.length>0&&(n.animations=v),A.length>0&&(n.nodes=A)}return n.object=r,n;function s(o){const l=[];for(const c in o){const d=o[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Wn.DEFAULT_UP=new ae(0,1,0);Wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pl=new ae,cu=new ae,iE=new ae,uu=new ae,Sm=new ae,Em=new ae,OC=new ae,sE=new ae,oE=new ae,lE=new ae,cE=new Jn,uE=new Jn,dE=new Jn;class Ms{constructor(e=new ae,t=new ae,n=new ae){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),pl.subVectors(e,t),r.cross(pl);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){pl.subVectors(r,t),cu.subVectors(n,t),iE.subVectors(e,t);const s=pl.dot(pl),o=pl.dot(cu),l=pl.dot(iE),c=cu.dot(cu),d=cu.dot(iE),h=s*c-o*o;if(h===0)return i.set(0,0,0),null;const m=1/h,v=(c*l-o*d)*m,A=(s*d-o*l)*m;return i.set(1-v-A,A,v)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,uu)===null?!1:uu.x>=0&&uu.y>=0&&uu.x+uu.y<=1}static getInterpolation(e,t,n,r,i,s,o,l){return this.getBarycoord(e,t,n,r,uu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(i,uu.x),l.addScaledVector(s,uu.y),l.addScaledVector(o,uu.z),l)}static getInterpolatedAttribute(e,t,n,r,i,s){return cE.setScalar(0),uE.setScalar(0),dE.setScalar(0),cE.fromBufferAttribute(e,t),uE.fromBufferAttribute(e,n),dE.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(cE,i.x),s.addScaledVector(uE,i.y),s.addScaledVector(dE,i.z),s}static isFrontFacing(e,t,n,r){return pl.subVectors(n,t),cu.subVectors(e,t),pl.cross(cu).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pl.subVectors(this.c,this.b),cu.subVectors(this.a,this.b),pl.cross(cu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ms.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ms.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return Ms.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Ms.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ms.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,o;Sm.subVectors(r,n),Em.subVectors(i,n),sE.subVectors(e,n);const l=Sm.dot(sE),c=Em.dot(sE);if(l<=0&&c<=0)return t.copy(n);oE.subVectors(e,r);const d=Sm.dot(oE),h=Em.dot(oE);if(d>=0&&h<=d)return t.copy(r);const m=l*h-d*c;if(m<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(n).addScaledVector(Sm,s);lE.subVectors(e,i);const v=Sm.dot(lE),A=Em.dot(lE);if(A>=0&&v<=A)return t.copy(i);const E=v*c-l*A;if(E<=0&&c>=0&&A<=0)return o=c/(c-A),t.copy(n).addScaledVector(Em,o);const b=d*A-v*h;if(b<=0&&h-d>=0&&v-A>=0)return OC.subVectors(i,r),o=(h-d)/(h-d+(v-A)),t.copy(r).addScaledVector(OC,o);const _=1/(b+E+m);return s=E*_,o=m*_,t.copy(n).addScaledVector(Sm,s).addScaledVector(Em,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const gO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ud={h:0,s:0,l:0},I2={h:0,s:0,l:0};function fE(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(e-a)*6*t:t<1/2?e:t<2/3?a+(e-a)*6*(2/3-t):a}class Et{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=cr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=Fn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Fn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=Fn.workingColorSpace){if(e=kR(e,1),t=ln(t,0,1),n=ln(n,0,1),t===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,s=2*n-i;this.r=fE(s,i,e+1/3),this.g=fE(s,i,e),this.b=fE(s,i,e-1/3)}return Fn.colorSpaceToWorking(this,r),this}setStyle(e,t=cr){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(i,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=cr){const n=gO[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bu(e.r),this.g=bu(e.g),this.b=bu(e.b),this}copyLinearToSRGB(e){return this.r=n0(e.r),this.g=n0(e.g),this.b=n0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=cr){return Fn.workingToColorSpace(wi.copy(this),e),Math.round(ln(wi.r*255,0,255))*65536+Math.round(ln(wi.g*255,0,255))*256+Math.round(ln(wi.b*255,0,255))}getHexString(e=cr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Fn.workingColorSpace){Fn.workingToColorSpace(wi.copy(this),t);const n=wi.r,r=wi.g,i=wi.b,s=Math.max(n,r,i),o=Math.min(n,r,i);let l,c;const d=(o+s)/2;if(o===s)l=0,c=0;else{const h=s-o;switch(c=d<=.5?h/(s+o):h/(2-s-o),s){case n:l=(r-i)/h+(r<i?6:0);break;case r:l=(i-n)/h+2;break;case i:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=Fn.workingColorSpace){return Fn.workingToColorSpace(wi.copy(this),t),e.r=wi.r,e.g=wi.g,e.b=wi.b,e}getStyle(e=cr){Fn.workingToColorSpace(wi.copy(this),e);const t=wi.r,n=wi.g,r=wi.b;return e!==cr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Ud),this.setHSL(Ud.h+e,Ud.s+t,Ud.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ud),e.getHSL(I2);const n=Dv(Ud.h,I2.h,t),r=Dv(Ud.s,I2.s,t),i=Dv(Ud.l,I2.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const wi=new Et;Et.NAMES=gO;let R$=0;class Br extends Pc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:R$++}),this.uuid=so(),this.name="",this.type="Material",this.blending=kh,this.side=Tc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=aA,this.blendDst=rA,this.blendEquation=jd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=Vh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sh,this.stencilZFail=Sh,this.stencilZPass=Sh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==kh&&(n.blending=this.blending),this.side!==Tc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==aA&&(n.blendSrc=this.blendSrc),this.blendDst!==rA&&(n.blendDst=this.blendDst),this.blendEquation!==jd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Vh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K3&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Sh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Sh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(i){const s=[];for(const o in i){const l=i[o];delete l.metadata,s.push(l)}return s}if(t){const i=r(e.textures),s=r(e.images);i.length>0&&(n.textures=i),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ro extends Br{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lo,this.combine=A1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yu=M$();function M$(){const a=new ArrayBuffer(4),e=new Float32Array(a),t=new Uint32Array(a),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const i=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,i[l]=c|d}for(let l=1024;l<2048;++l)i[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:i,exponentTable:s,offsetTable:o}}function Es(a){Math.abs(a)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),a=ln(a,-65504,65504),yu.floatView[0]=a;const e=yu.uint32View[0],t=e>>23&511;return yu.baseTable[t]+((e&8388607)>>yu.shiftTable[t])}function Av(a){const e=a>>10;return yu.uint32View[0]=yu.mantissaTable[yu.offsetTable[e]+(a&1023)]+yu.exponentTable[e],yu.floatView[0]}class T${static toHalfFloat(e){return Es(e)}static fromHalfFloat(e){return Av(e)}}const yr=new ae,D2=new Ze;let N$=0;class ra{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:N$++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Zv,this.updateRanges=[],this.gpuType=Ts,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)D2.fromBufferAttribute(this,t),D2.applyMatrix3(e),this.setXY(t,D2.x,D2.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix3(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=is(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Rn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=is(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=is(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=is(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array),i=Rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zv&&(e.usage=this.usage),e}}class C$ extends ra{constructor(e,t,n){super(new Int8Array(e),t,n)}}class I$ extends ra{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class D$ extends ra{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class L$ extends ra{constructor(e,t,n){super(new Int16Array(e),t,n)}}class jR extends ra{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class P$ extends ra{constructor(e,t,n){super(new Int32Array(e),t,n)}}class zR extends ra{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class O$ extends ra{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Av(this.array[e*this.itemSize]);return this.normalized&&(t=is(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=Es(t),this}getY(e){let t=Av(this.array[e*this.itemSize+1]);return this.normalized&&(t=is(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=Es(t),this}getZ(e){let t=Av(this.array[e*this.itemSize+2]);return this.normalized&&(t=is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=Es(t),this}getW(e){let t=Av(this.array[e*this.itemSize+3]);return this.normalized&&(t=is(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=Es(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(n),this.array[e+2]=Es(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array),i=Rn(i,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(n),this.array[e+2]=Es(r),this.array[e+3]=Es(i),this}}class kt extends ra{constructor(e,t,n){super(new Float32Array(e),t,n)}}let U$=0;const Io=new nn,hE=new Wn,wm=new ae,Js=new hi,uv=new hi,Xr=new ae;class Sn extends Pc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U$++}),this.uuid=so(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hO(e)?zR:jR)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const i=new bn().getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Io.makeRotationFromQuaternion(e),this.applyMatrix4(Io),this}rotateX(e){return Io.makeRotationX(e),this.applyMatrix4(Io),this}rotateY(e){return Io.makeRotationY(e),this.applyMatrix4(Io),this}rotateZ(e){return Io.makeRotationZ(e),this.applyMatrix4(Io),this}translate(e,t,n){return Io.makeTranslation(e,t,n),this.applyMatrix4(Io),this}scale(e,t,n){return Io.makeScale(e,t,n),this.applyMatrix4(Io),this}lookAt(e){return hE.lookAt(e),hE.updateMatrix(),this.applyMatrix4(hE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wm).negate(),this.translate(wm.x,wm.y,wm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new kt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const i=e[r];t.setXYZ(r,i.x,i.y,i.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const i=t[n];Js.setFromBufferAttribute(i),this.morphTargetsRelative?(Xr.addVectors(this.boundingBox.min,Js.min),this.boundingBox.expandByPoint(Xr),Xr.addVectors(this.boundingBox.max,Js.max),this.boundingBox.expandByPoint(Xr)):(this.boundingBox.expandByPoint(Js.min),this.boundingBox.expandByPoint(Js.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $r);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const n=this.boundingSphere.center;if(Js.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];uv.setFromBufferAttribute(o),this.morphTargetsRelative?(Xr.addVectors(Js.min,uv.min),Js.expandByPoint(Xr),Xr.addVectors(Js.max,uv.max),Js.expandByPoint(Xr)):(Js.expandByPoint(uv.min),Js.expandByPoint(uv.max))}Js.getCenter(n);let r=0;for(let i=0,s=e.count;i<s;i++)Xr.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Xr));if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i],l=this.morphTargetsRelative;for(let c=0,d=o.count;c<d;c++)Xr.fromBufferAttribute(o,c),l&&(wm.fromBufferAttribute(e,c),Xr.add(wm)),r=Math.max(r,n.distanceToSquared(Xr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,i=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ra(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let F=0;F<n.count;F++)o[F]=new ae,l[F]=new ae;const c=new ae,d=new ae,h=new ae,m=new Ze,v=new Ze,A=new Ze,E=new ae,b=new ae;function _(F,L,U){c.fromBufferAttribute(n,F),d.fromBufferAttribute(n,L),h.fromBufferAttribute(n,U),m.fromBufferAttribute(i,F),v.fromBufferAttribute(i,L),A.fromBufferAttribute(i,U),d.sub(c),h.sub(c),v.sub(m),A.sub(m);const j=1/(v.x*A.y-A.x*v.y);isFinite(j)&&(E.copy(d).multiplyScalar(A.y).addScaledVector(h,-v.y).multiplyScalar(j),b.copy(h).multiplyScalar(v.x).addScaledVector(d,-A.x).multiplyScalar(j),o[F].add(E),o[L].add(E),o[U].add(E),l[F].add(b),l[L].add(b),l[U].add(b))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let F=0,L=R.length;F<L;++F){const U=R[F],j=U.start,W=U.count;for(let Q=j,$=j+W;Q<$;Q+=3)_(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const T=new ae,M=new ae,I=new ae,P=new ae;function B(F){I.fromBufferAttribute(r,F),P.copy(I);const L=o[F];T.copy(L),T.sub(I.multiplyScalar(I.dot(L))).normalize(),M.crossVectors(P,L);const j=M.dot(l[F])<0?-1:1;s.setXYZW(F,T.x,T.y,T.z,j)}for(let F=0,L=R.length;F<L;++F){const U=R[F],j=U.start,W=U.count;for(let Q=j,$=j+W;Q<$;Q+=3)B(e.getX(Q+0)),B(e.getX(Q+1)),B(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ra(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,v=n.count;m<v;m++)n.setXYZ(m,0,0,0);const r=new ae,i=new ae,s=new ae,o=new ae,l=new ae,c=new ae,d=new ae,h=new ae;if(e)for(let m=0,v=e.count;m<v;m+=3){const A=e.getX(m+0),E=e.getX(m+1),b=e.getX(m+2);r.fromBufferAttribute(t,A),i.fromBufferAttribute(t,E),s.fromBufferAttribute(t,b),d.subVectors(s,i),h.subVectors(r,i),d.cross(h),o.fromBufferAttribute(n,A),l.fromBufferAttribute(n,E),c.fromBufferAttribute(n,b),o.add(d),l.add(d),c.add(d),n.setXYZ(A,o.x,o.y,o.z),n.setXYZ(E,l.x,l.y,l.z),n.setXYZ(b,c.x,c.y,c.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),i.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),d.subVectors(s,i),h.subVectors(r,i),d.cross(h),n.setXYZ(m+0,d.x,d.y,d.z),n.setXYZ(m+1,d.x,d.y,d.z),n.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Xr.fromBufferAttribute(e,t),Xr.normalize(),e.setXYZ(t,Xr.x,Xr.y,Xr.z)}toNonIndexed(){function e(o,l){const c=o.array,d=o.itemSize,h=o.normalized,m=new c.constructor(l.length*d);let v=0,A=0;for(let E=0,b=l.length;E<b;E++){o.isInterleavedBufferAttribute?v=l[E]*o.data.stride+o.offset:v=l[E]*d;for(let _=0;_<d;_++)m[A++]=c[v++]}return new ra(m,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Sn,n=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,n);t.setAttribute(o,c)}const i=this.morphAttributes;for(const o in i){const l=[],c=i[o];for(let d=0,h=c.length;d<h;d++){const m=c[d],v=e(m,n);l.push(v)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const c=s[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let i=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,m=c.length;h<m;h++){const v=c[h];d.push(v.toJSON(e.data))}d.length>0&&(r[l]=d,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const i=e.morphAttributes;for(const c in i){const d=[],h=i[c];for(let m=0,v=h.length;m<v;m++)d.push(h[m].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,d=s.length;c<d;c++){const h=s[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UC=new nn,ih=new rp,L2=new $r,BC=new ae,P2=new ae,O2=new ae,U2=new ae,pE=new ae,B2=new ae,FC=new ae,F2=new ae;class ur extends Wn{constructor(e=new Sn,t=new ro){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){B2.set(0,0,0);for(let l=0,c=i.length;l<c;l++){const d=o[l],h=i[l];d!==0&&(pE.fromBufferAttribute(h,e),s?B2.addScaledVector(pE,d):B2.addScaledVector(pE.sub(t),d))}t.add(B2)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),L2.copy(n.boundingSphere),L2.applyMatrix4(i),ih.copy(e.ray).recast(e.near),!(L2.containsPoint(ih.origin)===!1&&(ih.intersectSphere(L2,BC)===null||ih.origin.distanceToSquared(BC)>(e.far-e.near)**2))&&(UC.copy(i).invert(),ih.copy(e.ray).applyMatrix4(UC),!(n.boundingBox!==null&&ih.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,ih)))}_computeIntersections(e,t,n){let r;const i=this.geometry,s=this.material,o=i.index,l=i.attributes.position,c=i.attributes.uv,d=i.attributes.uv1,h=i.attributes.normal,m=i.groups,v=i.drawRange;if(o!==null)if(Array.isArray(s))for(let A=0,E=m.length;A<E;A++){const b=m[A],_=s[b.materialIndex],R=Math.max(b.start,v.start),T=Math.min(o.count,Math.min(b.start+b.count,v.start+v.count));for(let M=R,I=T;M<I;M+=3){const P=o.getX(M),B=o.getX(M+1),F=o.getX(M+2);r=k2(this,_,e,n,c,d,h,P,B,F),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const A=Math.max(0,v.start),E=Math.min(o.count,v.start+v.count);for(let b=A,_=E;b<_;b+=3){const R=o.getX(b),T=o.getX(b+1),M=o.getX(b+2);r=k2(this,s,e,n,c,d,h,R,T,M),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let A=0,E=m.length;A<E;A++){const b=m[A],_=s[b.materialIndex],R=Math.max(b.start,v.start),T=Math.min(l.count,Math.min(b.start+b.count,v.start+v.count));for(let M=R,I=T;M<I;M+=3){const P=M,B=M+1,F=M+2;r=k2(this,_,e,n,c,d,h,P,B,F),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const A=Math.max(0,v.start),E=Math.min(l.count,v.start+v.count);for(let b=A,_=E;b<_;b+=3){const R=b,T=b+1,M=b+2;r=k2(this,s,e,n,c,d,h,R,T,M),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}}function B$(a,e,t,n,r,i,s,o){let l;if(e.side===ss?l=n.intersectTriangle(s,i,r,!0,o):l=n.intersectTriangle(r,i,s,e.side===Tc,o),l===null)return null;F2.copy(o),F2.applyMatrix4(a.matrixWorld);const c=t.ray.origin.distanceTo(F2);return c<t.near||c>t.far?null:{distance:c,point:F2.clone(),object:a}}function k2(a,e,t,n,r,i,s,o,l,c){a.getVertexPosition(o,P2),a.getVertexPosition(l,O2),a.getVertexPosition(c,U2);const d=B$(a,e,t,n,P2,O2,U2,FC);if(d){const h=new ae;Ms.getBarycoord(FC,P2,O2,U2,h),r&&(d.uv=Ms.getInterpolatedAttribute(r,o,l,c,h,new Ze)),i&&(d.uv1=Ms.getInterpolatedAttribute(i,o,l,c,h,new Ze)),s&&(d.normal=Ms.getInterpolatedAttribute(s,o,l,c,h,new ae),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const m={a:o,b:l,c,normal:new ae,materialIndex:0};Ms.getNormal(P2,O2,U2,m.normal),d.face=m,d.barycoord=h}return d}class ip extends Sn{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const l=[],c=[],d=[],h=[];let m=0,v=0;A("z","y","x",-1,-1,n,t,e,s,i,0),A("z","y","x",1,-1,n,t,-e,s,i,1),A("x","z","y",1,1,e,n,t,r,s,2),A("x","z","y",1,-1,e,n,-t,r,s,3),A("x","y","z",1,-1,e,t,n,r,i,4),A("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(l),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(d,3)),this.setAttribute("uv",new kt(h,2));function A(E,b,_,R,T,M,I,P,B,F,L){const U=M/B,j=I/F,W=M/2,Q=I/2,$=P/2,re=B+1,G=F+1;let Y=0,K=0;const X=new ae;for(let z=0;z<G;z++){const J=z*j-Q;for(let le=0;le<re;le++){const ce=le*U-W;X[E]=ce*R,X[b]=J*T,X[_]=$,c.push(X.x,X.y,X.z),X[E]=0,X[b]=0,X[_]=P>0?1:-1,d.push(X.x,X.y,X.z),h.push(le/B),h.push(1-z/F),Y+=1}}for(let z=0;z<F;z++)for(let J=0;J<B;J++){const le=m+J+re*z,ce=m+J+re*(z+1),xe=m+(J+1)+re*(z+1),fe=m+(J+1)+re*z;l.push(le,ce,fe),l.push(ce,xe,fe),K+=6}o.addGroup(v,K,L),v+=K,m+=Y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ip(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function y0(a){const e={};for(const t in a){e[t]={};for(const n in a[t]){const r=a[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function as(a){const e={};for(let t=0;t<a.length;t++){const n=y0(a[t]);for(const r in n)e[r]=n[r]}return e}function F$(a){const e=[];for(let t=0;t<a.length;t++)e.push(a[t].clone());return e}function vO(a){const e=a.getRenderTarget();return e===null?a.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Fn.workingColorSpace}const yO={clone:y0,merge:as};var k$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,H$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Sl extends Br{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=k$,this.fragmentShader=H$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=y0(e.uniforms),this.uniformsGroups=F$(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class L_ extends Wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn,this.coordinateSystem=ao,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Bd=new ae,kC=new Ze,HC=new Ze;class er extends L_{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=g0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Hh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return g0*2*Math.atan(Math.tan(Hh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Bd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Bd.x,Bd.y).multiplyScalar(-e/Bd.z),Bd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Bd.x,Bd.y).multiplyScalar(-e/Bd.z)}getViewSize(e,t){return this.getViewBounds(e,kC,HC),t.subVectors(HC,kC)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Hh*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;i+=s.offsetX*r/l,t-=s.offsetY*n/c,r*=s.width/l,n*=s.height/c}const o=this.filmOffset;o!==0&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rm=-90,Mm=1;class xO extends Wn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new er(Rm,Mm,e,t);r.layers=this.layers,this.add(r);const i=new er(Rm,Mm,e,t);i.layers=this.layers,this.add(i);const s=new er(Rm,Mm,e,t);s.layers=this.layers,this.add(s);const o=new er(Rm,Mm,e,t);o.layers=this.layers,this.add(o);const l=new er(Rm,Mm,e,t);l.layers=this.layers,this.add(l);const c=new er(Rm,Mm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,s,o,l]=t;for(const c of t)this.remove(c);if(e===ao)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===m0)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,l,c,d]=this.children,h=e.getRenderTarget(),m=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,r),e.render(t,d),e.setRenderTarget(h,m,v),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class b1 extends Ua{constructor(e=[],t=wu,n,r,i,s,o,l,c,d){super(e,t,n,r,i,s,o,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class AO extends Nc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new b1(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ip(5,5,5),i=new Sl({name:"CubemapFromEquirect",uniforms:y0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ss,blending:_u});i.uniforms.tEquirect.value=t;const s=new ur(r,i),o=t.minFilter;return t.minFilter===Uo&&(t.minFilter=tr),new xO(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}class xu extends Wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const j$={type:"move"};class wx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const E of e.hand.values()){const b=t.getJointPose(E,n),_=this._getHandJoint(c,E);b!==null&&(_.matrix.fromArray(b.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=b.radius),_.visible=b!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],m=d.position.distanceTo(h.position),v=.02,A=.005;c.inputState.pinching&&m>v+A?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=v-A&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&i!==null&&(r=i),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(j$)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new xu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class P_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Et(e),this.density=t}clone(){return new P_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class O_{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Et(e),this.near=t,this.far=n}clone(){return new O_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class GR extends Wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new lo,this.environmentIntensity=1,this.environmentRotation=new lo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class S1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Zv,this.updateRanges=[],this.version=0,this.uuid=so()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=so()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=so()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ns=new ae;class nf{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ns.fromBufferAttribute(this,t),ns.applyMatrix4(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ns.fromBufferAttribute(this,t),ns.applyNormalMatrix(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ns.fromBufferAttribute(this,t),ns.transformDirection(e),this.setXYZ(t,ns.x,ns.y,ns.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=is(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Rn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=is(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=is(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=is(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=is(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),n=Rn(n,this.array),r=Rn(r,this.array),i=Rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new ra(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class VR extends Br{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Tm;const dv=new ae,Nm=new ae,Cm=new ae,Im=new Ze,fv=new Ze,_O=new nn,H2=new ae,hv=new ae,j2=new ae,jC=new Ze,mE=new Ze,zC=new Ze;class bO extends Wn{constructor(e=new VR){if(super(),this.isSprite=!0,this.type="Sprite",Tm===void 0){Tm=new Sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new S1(t,5);Tm.setIndex([0,1,2,0,2,3]),Tm.setAttribute("position",new nf(n,3,0,!1)),Tm.setAttribute("uv",new nf(n,2,3,!1))}this.geometry=Tm,this.material=e,this.center=new Ze(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nm.setFromMatrixScale(this.matrixWorld),_O.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Nm.multiplyScalar(-Cm.z);const n=this.material.rotation;let r,i;n!==0&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;z2(H2.set(-.5,-.5,0),Cm,s,Nm,r,i),z2(hv.set(.5,-.5,0),Cm,s,Nm,r,i),z2(j2.set(.5,.5,0),Cm,s,Nm,r,i),jC.set(0,0),mE.set(1,0),zC.set(1,1);let o=e.ray.intersectTriangle(H2,hv,j2,!1,dv);if(o===null&&(z2(hv.set(-.5,.5,0),Cm,s,Nm,r,i),mE.set(0,1),o=e.ray.intersectTriangle(H2,j2,hv,!1,dv),o===null))return;const l=e.ray.origin.distanceTo(dv);l<e.near||l>e.far||t.push({distance:l,point:dv.clone(),uv:Ms.getInterpolation(dv,H2,hv,j2,jC,mE,zC,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function z2(a,e,t,n,r,i){Im.subVectors(a,t).addScalar(.5).multiply(n),r!==void 0?(fv.x=i*Im.x-r*Im.y,fv.y=r*Im.x+i*Im.y):fv.copy(Im),a.copy(e),a.x+=fv.x,a.y+=fv.y,a.applyMatrix4(_O)}const G2=new ae,GC=new ae;class SO extends Wn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const i=t[n];this.addLevel(i.object.clone(),i.distance,i.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){G2.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(G2);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){G2.setFromMatrixPosition(e.matrixWorld),GC.setFromMatrixPosition(this.matrixWorld);const n=G2.distanceTo(GC)/e.zoom;t[0].object.visible=!0;let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),n>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const VC=new ae,WC=new Jn,KC=new Jn,z$=new ae,YC=new nn,V2=new ae,gE=new $r,qC=new nn,vE=new rp;class WR extends ur{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=W3,this.bindMatrix=new nn,this.bindMatrixInverse=new nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,V2),this.boundingBox.expandByPoint(V2)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new $r),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,V2),this.boundingSphere.expandByPoint(V2)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gE.copy(this.boundingSphere),gE.applyMatrix4(r),e.ray.intersectsSphere(gE)!==!1&&(qC.copy(r).invert(),vE.copy(e.ray).applyMatrix4(qC),!(this.boundingBox!==null&&vE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===W3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ZP?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;WC.fromBufferAttribute(r.attributes.skinIndex,e),KC.fromBufferAttribute(r.attributes.skinWeight,e),VC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const s=KC.getComponent(i);if(s!==0){const o=WC.getComponent(i);YC.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(z$.copy(VC).applyMatrix4(YC),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class U_ extends Wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wc extends Ua{constructor(e=null,t=1,n=1,r,i,s,o,l,c=Ur,d=Ur,h,m){super(null,s,o,l,c,d,r,i,h,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XC=new nn,G$=new nn;class E1{constructor(e=[],t=[]){this.uuid=so(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new nn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++){const o=e[i]?e[i].matrixWorld:G$;XC.multiplyMatrices(o,t[i]),XC.toArray(n,i*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new E1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new wc(t,e,e,Pi,Ts);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const i=e.bones[n];let s=t[i];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),s=new U_),this.bones.push(s),this.boneInverses.push(new nn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const s=t[r];e.bones.push(s.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class Wh extends ra{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dm=new nn,JC=new nn,W2=[],ZC=new hi,V$=new nn,pv=new ur,mv=new $r;class KR extends ur{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wh(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,V$)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dm),ZC.copy(e.boundingBox).applyMatrix4(Dm),this.boundingBox.union(ZC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new $r),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dm),mv.copy(e.boundingSphere).applyMatrix4(Dm),this.boundingSphere.union(mv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=n.length+1,s=e*i+1;for(let o=0;o<n.length;o++)n[o]=r[s+o]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(pv.geometry=this.geometry,pv.material=this.material,pv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mv.copy(this.boundingSphere),mv.applyMatrix4(n),e.ray.intersectsSphere(mv)!==!1))for(let i=0;i<r;i++){this.getMatrixAt(i,Dm),JC.multiplyMatrices(n,Dm),pv.matrixWorld=JC,pv.raycast(e,W2);for(let s=0,o=W2.length;s<o;s++){const l=W2[s];l.instanceId=i,l.object=this,t.push(l)}W2.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new wc(new Float32Array(r*this.count),r,this.count,M_,Ts));const i=this.morphTexture.source.data.data;let s=0;for(let c=0;c<n.length;c++)s+=n[c];const o=this.geometry.morphTargetsRelative?1:1-s,l=r*e;i[l]=o,i.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const yE=new ae,W$=new ae,K$=new bn;class mu{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=yE.subVectors(n,t).cross(W$.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(yE),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||K$.getNormalMatrix(e),r=this.coplanarPoint(yE).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sh=new $r,Y$=new Ze(.5,.5),K2=new ae;class I0{constructor(e=new mu,t=new mu,n=new mu,r=new mu,i=new mu,s=new mu){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=ao,n=!1){const r=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],c=i[3],d=i[4],h=i[5],m=i[6],v=i[7],A=i[8],E=i[9],b=i[10],_=i[11],R=i[12],T=i[13],M=i[14],I=i[15];if(r[0].setComponents(c-s,v-d,_-A,I-R).normalize(),r[1].setComponents(c+s,v+d,_+A,I+R).normalize(),r[2].setComponents(c+o,v+h,_+E,I+T).normalize(),r[3].setComponents(c-o,v-h,_-E,I-T).normalize(),n)r[4].setComponents(l,m,b,M).normalize(),r[5].setComponents(c-l,v-m,_-b,I-M).normalize();else if(r[4].setComponents(c-l,v-m,_-b,I-M).normalize(),t===ao)r[5].setComponents(c+l,v+m,_+b,I+M).normalize();else if(t===m0)r[5].setComponents(l,m,b,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),sh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sh)}intersectsSprite(e){sh.center.set(0,0,0);const t=Y$.distanceTo(e.center);return sh.radius=.7071067811865476+t,sh.applyMatrix4(e.matrixWorld),this.intersectsSphere(sh)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(K2.x=r.normal.x>0?e.max.x:e.min.x,K2.y=r.normal.y>0?e.max.y:e.min.y,K2.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(K2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const hc=new nn,pc=new I0;class B_{constructor(){this.coordinateSystem=ao}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),pc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),pc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),pc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),pc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(hc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pc.setFromProjectionMatrix(hc,r.coordinateSystem,r.reversedDepth),pc.containsPoint(e))return!0}return!1}clone(){return new B_}}function xE(a,e){return a-e}function q$(a,e){return a.z-e.z}function X$(a,e){return e.z-a.z}class J${constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const Ss=new nn,Z$=new Et(1,1,1),QC=new I0,Q$=new B_,Y2=new hi,oh=new $r,gv=new ae,$C=new ae,$$=new ae,AE=new J$,Ri=new ur,q2=[];function eee(a,e,t=0){const n=e.itemSize;if(a.isInterleavedBufferAttribute||a.array.constructor!==e.array.constructor){const r=a.count;for(let i=0;i<r;i++)for(let s=0;s<n;s++)e.setComponent(i+t,s,a.getComponent(i,s))}else e.array.set(a.array,t*n);e.needsUpdate=!0}function lh(a,e){if(a.constructor!==e.constructor){const t=Math.min(a.length,e.length);for(let n=0;n<t;n++)e[n]=a[n]}else{const t=Math.min(a.length,e.length);e.set(new a.constructor(a.buffer,0,t))}}class EO extends ur{constructor(e,t,n=t*2,r){super(new Sn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new wc(t,e,e,Pi,Ts);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new wc(t,e,e,_1,Ru);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new wc(t,e,e,Pi,Ts);n.colorSpace=Fn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const i in e.attributes){const s=e.getAttribute(i),{array:o,itemSize:l,normalized:c}=s,d=new o.constructor(n*l),h=new ra(d,l,c);t.setAttribute(i,h)}if(e.getIndex()!==null){const i=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new ra(i,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Ss),this.getBoundingBoxAt(i,Y2).applyMatrix4(Ss),e.union(Y2)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $r);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Ss),this.getBoundingSphereAt(i,oh).applyMatrix4(Ss),e.union(oh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(xE),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const i=this._matricesTexture;Ss.identity().toArray(i.image.data,r*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(Z$.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},i=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?s.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(xE),l=this._availableGeometryIds.shift(),i[l]=r):(l=this._geometryCount,this._geometryCount++,i.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,i=n.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in n.attributes){const h=t.getAttribute(d),m=n.getAttribute(d);eee(h,m,l);const v=h.itemSize;for(let A=h.count,E=c;A<E;A++){const b=l+A;for(let _=0;_<v;_++)m.setComponent(b,_,0)}m.needsUpdate=!0,m.addUpdateRange(l*v,c*v)}if(r){const d=o.indexStart,h=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<s.count;m++)i.setX(d+m,l+s.getX(m));for(let m=s.count,v=h;m<v;m++)i.setX(d+m,l);i.needsUpdate=!0,i.addUpdateRange(d,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,i=n.length;r<i;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((s,o)=>o).sort((s,o)=>n[s].vertexStart-n[o].vertexStart),i=this.geometry;for(let s=0,o=n.length;s<o;s++){const l=r[s],c=n[l];if(c.active!==!1){if(i.index!==null){if(c.indexStart!==t){const{indexStart:d,vertexStart:h,reservedIndexCount:m}=c,v=i.index,A=v.array,E=e-h;for(let b=d;b<d+m;b++)A[b]=A[b]+E;v.array.copyWithin(t,d,d+m),v.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:d,reservedVertexCount:h}=c,m=i.attributes;for(const v in m){const A=m[v],{array:E,itemSize:b}=A;E.copyWithin(e*b,d*b,(d+h)*b),A.addUpdateRange(e*b,h*b)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=i.index?c.indexStart:c.vertexStart,this._nextIndexStart=i.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const i=new hi,s=n.index,o=n.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let d=l;s&&(d=s.getX(d)),i.expandByPoint(gv.fromBufferAttribute(o,d))}r.boundingBox=i}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const i=new $r;this.getBoundingBoxAt(e,Y2),Y2.getCenter(i.center);const s=n.index,o=n.attributes.position;let l=0;for(let c=r.start,d=r.start+r.count;c<d;c++){let h=c;s&&(h=s.getX(h)),gv.fromBufferAttribute(o,h),l=Math.max(l,i.center.distanceToSquared(gv))}i.radius=Math.sqrt(l),r.boundingSphere=i}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(xE);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),i=new Int32Array(e);lh(this._multiDrawCounts,r),lh(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),lh(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),lh(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),lh(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Sn,this._initializeGeometry(i));const s=this.geometry;i.index&&lh(i.index.array,s.index.array);for(const o in i.attributes)lh(i.attributes[o].array,s.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,s=this.geometry;Ri.material=this.material,Ri.geometry.index=s.index,Ri.geometry.attributes=s.attributes,Ri.geometry.boundingBox===null&&(Ri.geometry.boundingBox=new hi),Ri.geometry.boundingSphere===null&&(Ri.geometry.boundingSphere=new $r);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const c=n[o].geometryIndex,d=r[c];Ri.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,Ri.matrixWorld).premultiply(i),this.getBoundingBoxAt(c,Ri.geometry.boundingBox),this.getBoundingSphereAt(c,Ri.geometry.boundingSphere),Ri.raycast(e,q2);for(let h=0,m=q2.length;h<m;h++){const v=q2[h];v.object=this,v.batchId=o,t.push(v)}q2.length=0}Ri.material=null,Ri.geometry.index=null,Ri.geometry.attributes={},Ri.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,h=this._geometryInfo,m=this.perObjectFrustumCulled,v=this._indirectTexture,A=v.image.data,E=n.isArrayCamera?Q$:QC;m&&!n.isArrayCamera&&(Ss.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),QC.setFromProjectionMatrix(Ss,n.coordinateSystem,n.reversedDepth));let b=0;if(this.sortObjects){Ss.copy(this.matrixWorld).invert(),gv.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ss),$C.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ss);for(let T=0,M=l.length;T<M;T++)if(l[T].visible&&l[T].active){const I=l[T].geometryIndex;this.getMatrixAt(T,Ss),this.getBoundingSphereAt(I,oh).applyMatrix4(Ss);let P=!1;if(m&&(P=!E.intersectsSphere(oh,n)),!P){const B=h[I],F=$$.subVectors(oh.center,gv).dot($C);AE.push(B.start,B.count,F,T)}}const _=AE.list,R=this.customSort;R===null?_.sort(i.transparent?X$:q$):R.call(this,_,n);for(let T=0,M=_.length;T<M;T++){const I=_[T];c[b]=I.start*o,d[b]=I.count,A[b]=I.index,b++}AE.reset()}else for(let _=0,R=l.length;_<R;_++)if(l[_].visible&&l[_].active){const T=l[_].geometryIndex;let M=!1;if(m&&(this.getMatrixAt(_,Ss),this.getBoundingSphereAt(T,oh).applyMatrix4(Ss),M=!E.intersectsSphere(oh,n)),!M){const I=h[T];c[b]=I.start*o,d[b]=I.count,A[b]=_,b++}}v.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,s){this.onBeforeRender(e,null,r,i,s)}}class Ui extends Br{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kA=new ae,HA=new ae,e4=new nn,vv=new rp,X2=new $r,_E=new ae,t4=new ae;class Mu extends Wn{constructor(e=new Sn,t=new Ui){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,i=t.count;r<i;r++)kA.fromBufferAttribute(t,r-1),HA.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=kA.distanceTo(HA);e.setAttribute("lineDistance",new kt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),X2.copy(n.boundingSphere),X2.applyMatrix4(r),X2.radius+=i,e.ray.intersectsSphere(X2)===!1)return;e4.copy(r).invert(),vv.copy(e.ray).applyMatrix4(e4);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,d=n.index,m=n.attributes.position;if(d!==null){const v=Math.max(0,s.start),A=Math.min(d.count,s.start+s.count);for(let E=v,b=A-1;E<b;E+=c){const _=d.getX(E),R=d.getX(E+1),T=J2(this,e,vv,l,_,R,E);T&&t.push(T)}if(this.isLineLoop){const E=d.getX(A-1),b=d.getX(v),_=J2(this,e,vv,l,E,b,A-1);_&&t.push(_)}}else{const v=Math.max(0,s.start),A=Math.min(m.count,s.start+s.count);for(let E=v,b=A-1;E<b;E+=c){const _=J2(this,e,vv,l,E,E+1,E);_&&t.push(_)}if(this.isLineLoop){const E=J2(this,e,vv,l,A-1,v,A-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}function J2(a,e,t,n,r,i,s){const o=a.geometry.attributes.position;if(kA.fromBufferAttribute(o,r),HA.fromBufferAttribute(o,i),t.distanceSqToSegment(kA,HA,_E,t4)>n)return;_E.applyMatrix4(a.matrixWorld);const c=e.ray.origin.distanceTo(_E);if(!(c<e.near||c>e.far))return{distance:c,point:t4.clone().applyMatrix4(a.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:a}}const n4=new ae,a4=new ae;class Tl extends Mu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,i=t.count;r<i;r+=2)n4.fromBufferAttribute(t,r),a4.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+n4.distanceTo(a4);e.setAttribute("lineDistance",new kt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class YR extends Mu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class F_ extends Br{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const r4=new nn,q3=new rp,Z2=new $r,Q2=new ae;class qR extends Wn{constructor(e=new Sn,t=new F_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Z2.copy(n.boundingSphere),Z2.applyMatrix4(r),Z2.radius+=i,e.ray.intersectsSphere(Z2)===!1)return;r4.copy(r).invert(),q3.copy(e.ray).applyMatrix4(r4);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,h=n.attributes.position;if(c!==null){const m=Math.max(0,s.start),v=Math.min(c.count,s.start+s.count);for(let A=m,E=v;A<E;A++){const b=c.getX(A);Q2.fromBufferAttribute(h,b),i4(Q2,b,l,r,e,t,this)}}else{const m=Math.max(0,s.start),v=Math.min(h.count,s.start+s.count);for(let A=m,E=v;A<E;A++)Q2.fromBufferAttribute(h,A),i4(Q2,A,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}function i4(a,e,t,n,r,i,s){const o=q3.distanceSqToPoint(a);if(o<t){const l=new ae;q3.closestPointToPoint(a,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class wO extends Ua{constructor(e,t,n,r,i=tr,s=tr,o,l,c){super(e,t,n,r,i,s,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const d=this;function h(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class tee extends wO{constructor(e,t,n,r,i,s,o,l){super({},e,t,n,r,i,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class nee extends Ua{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class k_ extends Ua{constructor(e,t,n,r,i,s,o,l,c,d,h,m){super(null,s,o,l,c,d,r,i,h,m),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aee extends k_{constructor(e,t,n,r,i,s){super(e,t,n,i,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=no,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ree extends k_{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,wu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class iee extends Ua{constructor(e,t,n,r,i,s,o,l,c){super(e,t,n,r,i,s,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class XR extends Ua{constructor(e,t,n=Ru,r,i,s,o=Ur,l=Ur,c,d=d0,h=1){if(d!==d0&&d!==f0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:h};super(m,r,i,s,o,l,d,n,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Kd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class H_ extends Sn{constructor(e=1,t=1,n=4,r=8,i=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:i},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),i=Math.max(1,Math.floor(i));const s=[],o=[],l=[],c=[],d=t/2,h=Math.PI/2*e,m=t,v=2*h+m,A=n*2+i,E=r+1,b=new ae,_=new ae;for(let R=0;R<=A;R++){let T=0,M=0,I=0,P=0;if(R<=n){const L=R/n,U=L*Math.PI/2;M=-d-e*Math.cos(U),I=e*Math.sin(U),P=-e*Math.cos(U),T=L*h}else if(R<=n+i){const L=(R-n)/i;M=-d+L*t,I=e,P=0,T=h+L*m}else{const L=(R-n-i)/n,U=L*Math.PI/2;M=d+e*Math.sin(U),I=e*Math.cos(U),P=e*Math.sin(U),T=h+m+L*h}const B=Math.max(0,Math.min(1,T/v));let F=0;R===0?F=.5/r:R===A&&(F=-.5/r);for(let L=0;L<=r;L++){const U=L/r,j=U*Math.PI*2,W=Math.sin(j),Q=Math.cos(j);_.x=-I*Q,_.y=M,_.z=I*W,o.push(_.x,_.y,_.z),b.set(-I*Q,P,I*W),b.normalize(),l.push(b.x,b.y,b.z),c.push(U+F,B)}if(R>0){const L=(R-1)*E;for(let U=0;U<r;U++){const j=L+U,W=L+U+1,Q=R*E+U,$=R*E+U+1;s.push(j,W,Q),s.push(W,$,Q)}}}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H_(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class j_ extends Sn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],o=[],l=[],c=new ae,d=new Ze;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,m=3;h<=t;h++,m+=3){const v=n+h/t*r;c.x=e*Math.cos(v),c.y=e*Math.sin(v),s.push(c.x,c.y,c.z),o.push(0,0,1),d.x=(s[m]/e+1)/2,d.y=(s[m+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)i.push(h,h+1,0);this.setIndex(i),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(o,3)),this.setAttribute("uv",new kt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class w1 extends Sn{constructor(e=1,t=1,n=1,r=32,i=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),i=Math.floor(i);const d=[],h=[],m=[],v=[];let A=0;const E=[],b=n/2;let _=0;R(),s===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(d),this.setAttribute("position",new kt(h,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function R(){const M=new ae,I=new ae;let P=0;const B=(t-e)/n;for(let F=0;F<=i;F++){const L=[],U=F/i,j=U*(t-e)+e;for(let W=0;W<=r;W++){const Q=W/r,$=Q*l+o,re=Math.sin($),G=Math.cos($);I.x=j*re,I.y=-U*n+b,I.z=j*G,h.push(I.x,I.y,I.z),M.set(re,B,G).normalize(),m.push(M.x,M.y,M.z),v.push(Q,1-U),L.push(A++)}E.push(L)}for(let F=0;F<r;F++)for(let L=0;L<i;L++){const U=E[L][F],j=E[L+1][F],W=E[L+1][F+1],Q=E[L][F+1];(e>0||L!==0)&&(d.push(U,j,Q),P+=3),(t>0||L!==i-1)&&(d.push(j,W,Q),P+=3)}c.addGroup(_,P,0),_+=P}function T(M){const I=A,P=new Ze,B=new ae;let F=0;const L=M===!0?e:t,U=M===!0?1:-1;for(let W=1;W<=r;W++)h.push(0,b*U,0),m.push(0,U,0),v.push(.5,.5),A++;const j=A;for(let W=0;W<=r;W++){const $=W/r*l+o,re=Math.cos($),G=Math.sin($);B.x=L*G,B.y=b*U,B.z=L*re,h.push(B.x,B.y,B.z),m.push(0,U,0),P.x=re*.5+.5,P.y=G*.5*U+.5,v.push(P.x,P.y),A++}for(let W=0;W<r;W++){const Q=I+W,$=j+W;M===!0?d.push($,$+1,Q):d.push($+1,$,Q),F+=3}c.addGroup(_,F,M===!0?1:2),_+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class R1 extends w1{constructor(e=1,t=1,n=32,r=1,i=!1,s=0,o=Math.PI*2){super(0,e,t,n,r,i,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:o}}static fromJSON(e){return new R1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lf extends Sn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];o(r),c(n),d(),this.setAttribute("position",new kt(i,3)),this.setAttribute("normal",new kt(i.slice(),3)),this.setAttribute("uv",new kt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(R){const T=new ae,M=new ae,I=new ae;for(let P=0;P<t.length;P+=3)v(t[P+0],T),v(t[P+1],M),v(t[P+2],I),l(T,M,I,R)}function l(R,T,M,I){const P=I+1,B=[];for(let F=0;F<=P;F++){B[F]=[];const L=R.clone().lerp(M,F/P),U=T.clone().lerp(M,F/P),j=P-F;for(let W=0;W<=j;W++)W===0&&F===P?B[F][W]=L:B[F][W]=L.clone().lerp(U,W/j)}for(let F=0;F<P;F++)for(let L=0;L<2*(P-F)-1;L++){const U=Math.floor(L/2);L%2===0?(m(B[F][U+1]),m(B[F+1][U]),m(B[F][U])):(m(B[F][U+1]),m(B[F+1][U+1]),m(B[F+1][U]))}}function c(R){const T=new ae;for(let M=0;M<i.length;M+=3)T.x=i[M+0],T.y=i[M+1],T.z=i[M+2],T.normalize().multiplyScalar(R),i[M+0]=T.x,i[M+1]=T.y,i[M+2]=T.z}function d(){const R=new ae;for(let T=0;T<i.length;T+=3){R.x=i[T+0],R.y=i[T+1],R.z=i[T+2];const M=b(R)/2/Math.PI+.5,I=_(R)/Math.PI+.5;s.push(M,1-I)}A(),h()}function h(){for(let R=0;R<s.length;R+=6){const T=s[R+0],M=s[R+2],I=s[R+4],P=Math.max(T,M,I),B=Math.min(T,M,I);P>.9&&B<.1&&(T<.2&&(s[R+0]+=1),M<.2&&(s[R+2]+=1),I<.2&&(s[R+4]+=1))}}function m(R){i.push(R.x,R.y,R.z)}function v(R,T){const M=R*3;T.x=e[M+0],T.y=e[M+1],T.z=e[M+2]}function A(){const R=new ae,T=new ae,M=new ae,I=new ae,P=new Ze,B=new Ze,F=new Ze;for(let L=0,U=0;L<i.length;L+=9,U+=6){R.set(i[L+0],i[L+1],i[L+2]),T.set(i[L+3],i[L+4],i[L+5]),M.set(i[L+6],i[L+7],i[L+8]),P.set(s[U+0],s[U+1]),B.set(s[U+2],s[U+3]),F.set(s[U+4],s[U+5]),I.copy(R).add(T).add(M).divideScalar(3);const j=b(I);E(P,U+0,R,j),E(B,U+2,T,j),E(F,U+4,M,j)}}function E(R,T,M,I){I<0&&R.x===1&&(s[T]=R.x-1),M.x===0&&M.z===0&&(s[T]=I/2/Math.PI+.5)}function b(R){return Math.atan2(R.z,-R.x)}function _(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lf(e.vertices,e.indices,e.radius,e.details)}}class z_ extends lf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(i,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new z_(e.radius,e.detail)}}const $2=new ae,ex=new ae,bE=new ae,tx=new Ms;class RO extends Sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),i=Math.cos(Hh*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,c=[0,0,0],d=["a","b","c"],h=new Array(3),m={},v=[];for(let A=0;A<l;A+=3){s?(c[0]=s.getX(A),c[1]=s.getX(A+1),c[2]=s.getX(A+2)):(c[0]=A,c[1]=A+1,c[2]=A+2);const{a:E,b,c:_}=tx;if(E.fromBufferAttribute(o,c[0]),b.fromBufferAttribute(o,c[1]),_.fromBufferAttribute(o,c[2]),tx.getNormal(bE),h[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,h[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let R=0;R<3;R++){const T=(R+1)%3,M=h[R],I=h[T],P=tx[d[R]],B=tx[d[T]],F=`${M}_${I}`,L=`${I}_${M}`;L in m&&m[L]?(bE.dot(m[L].normal)<=i&&(v.push(P.x,P.y,P.z),v.push(B.x,B.y,B.z)),m[L]=null):F in m||(m[F]={index0:c[R],index1:c[T],normal:bE.clone()})}}for(const A in m)if(m[A]){const{index0:E,index1:b}=m[A];$2.fromBufferAttribute(o,E),ex.fromBufferAttribute(o,b),v.push($2.x,$2.y,$2.z),v.push(ex.x,ex.y,ex.z)}this.setAttribute("position",new kt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Nl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const i=n.length;let s;t?s=t:s=e*n[i-1];let o=0,l=i-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=n[r]-s,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===s)return r/(i-1);const d=n[r],m=n[r+1]-d,v=(s-d)/m;return(r+v)/(i-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),l=t||(s.isVector2?new Ze:new ae);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ae,r=[],i=[],s=[],o=new ae,l=new nn;for(let v=0;v<=e;v++){const A=v/e;r[v]=this.getTangentAt(A,new ae)}i[0]=new ae,s[0]=new ae;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),m<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let v=1;v<=e;v++){if(i[v]=i[v-1].clone(),s[v]=s[v-1].clone(),o.crossVectors(r[v-1],r[v]),o.length()>Number.EPSILON){o.normalize();const A=Math.acos(ln(r[v-1].dot(r[v]),-1,1));i[v].applyMatrix4(l.makeRotationAxis(o,A))}s[v].crossVectors(r[v],i[v])}if(t===!0){let v=Math.acos(ln(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(let A=1;A<=e;A++)i[A].applyMatrix4(l.makeRotationAxis(r[A],v*A)),s[A].crossVectors(r[A],i[A])}return{tangents:r,normals:i,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class G_ extends Nl{constructor(e=0,t=0,n=1,r=1,i=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new Ze){const n=t,r=Math.PI*2;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(s?i=0:i=r),this.aClockwise===!0&&!s&&(i===r?i=-r:i=i-r);const o=this.aStartAngle+e*i;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),m=l-this.aX,v=c-this.aY;l=m*d-v*h+this.aX,c=m*h+v*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class MO extends G_{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}}function JR(){let a=0,e=0,t=0,n=0;function r(i,s,o,l){a=i,e=o,t=-3*i+3*s-2*o-l,n=2*i-2*s+o+l}return{initCatmullRom:function(i,s,o,l,c){r(s,o,c*(o-i),c*(l-s))},initNonuniformCatmullRom:function(i,s,o,l,c,d,h){let m=(s-i)/c-(o-i)/(c+d)+(o-s)/d,v=(o-s)/d-(l-s)/(d+h)+(l-o)/h;m*=d,v*=d,r(s,o,m,v)},calc:function(i){const s=i*i,o=s*i;return a+e*i+t*s+n*o}}}const nx=new ae,SE=new JR,EE=new JR,wE=new JR;class TO extends Nl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ae){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:l===0&&o===i-1&&(o=i-2,l=1);let c,d;this.closed||o>0?c=r[(o-1)%i]:(nx.subVectors(r[0],r[1]).add(r[0]),c=nx);const h=r[o%i],m=r[(o+1)%i];if(this.closed||o+2<i?d=r[(o+2)%i]:(nx.subVectors(r[i-1],r[i-2]).add(r[i-1]),d=nx),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let A=Math.pow(c.distanceToSquared(h),v),E=Math.pow(h.distanceToSquared(m),v),b=Math.pow(m.distanceToSquared(d),v);E<1e-4&&(E=1),A<1e-4&&(A=E),b<1e-4&&(b=E),SE.initNonuniformCatmullRom(c.x,h.x,m.x,d.x,A,E,b),EE.initNonuniformCatmullRom(c.y,h.y,m.y,d.y,A,E,b),wE.initNonuniformCatmullRom(c.z,h.z,m.z,d.z,A,E,b)}else this.curveType==="catmullrom"&&(SE.initCatmullRom(c.x,h.x,m.x,d.x,this.tension),EE.initCatmullRom(c.y,h.y,m.y,d.y,this.tension),wE.initCatmullRom(c.z,h.z,m.z,d.z,this.tension));return n.set(SE.calc(l),EE.calc(l),wE.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ae().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function s4(a,e,t,n,r){const i=(n-e)*.5,s=(r-t)*.5,o=a*a,l=a*o;return(2*t-2*n+i+s)*l+(-3*t+3*n-2*i-s)*o+i*a+t}function see(a,e){const t=1-a;return t*t*e}function oee(a,e){return 2*(1-a)*a*e}function lee(a,e){return a*a*e}function Lv(a,e,t,n){return see(a,e)+oee(a,t)+lee(a,n)}function cee(a,e){const t=1-a;return t*t*t*e}function uee(a,e){const t=1-a;return 3*t*t*a*e}function dee(a,e){return 3*(1-a)*a*a*e}function fee(a,e){return a*a*a*e}function Pv(a,e,t,n,r){return cee(a,e)+uee(a,t)+dee(a,n)+fee(a,r)}class ZR extends Nl{constructor(e=new Ze,t=new Ze,n=new Ze,r=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ze){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Pv(e,r.x,i.x,s.x,o.x),Pv(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class NO extends Nl{constructor(e=new ae,t=new ae,n=new ae,r=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ae){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Pv(e,r.x,i.x,s.x,o.x),Pv(e,r.y,i.y,s.y,o.y),Pv(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QR extends Nl{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CO extends Nl{constructor(e=new ae,t=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ae){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $R extends Nl{constructor(e=new Ze,t=new Ze,n=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ze){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Lv(e,r.x,i.x,s.x),Lv(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eM extends Nl{constructor(e=new ae,t=new ae,n=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ae){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Lv(e,r.x,i.x,s.x),Lv(e,r.y,i.y,s.y),Lv(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tM extends Nl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,l=r[s===0?s:s-1],c=r[s],d=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return n.set(s4(o,l.x,c.x,d.x,h.x),s4(o,l.y,c.y,d.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Ze().fromArray(r))}return this}}var jA=Object.freeze({__proto__:null,ArcCurve:MO,CatmullRomCurve3:TO,CubicBezierCurve:ZR,CubicBezierCurve3:NO,EllipseCurve:G_,LineCurve:QR,LineCurve3:CO,QuadraticBezierCurve:$R,QuadraticBezierCurve3:eM,SplineCurve:tM});class IO extends Nl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jA[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const s=r[i]-n,o=this.curves[i],l=o.getLength(),c=l===0?0:1-s/l;return o.getPointAt(c,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new jA[r.type]().fromJSON(r))}return this}}class zA extends IO{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new QR(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new $R(this.currentPoint.clone(),new Ze(e,t),new Ze(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new ZR(this.currentPoint.clone(),new Ze(e,t),new Ze(n,r),new Ze(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new tM(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,n,r,i,s,o,l),this}absellipse(e,t,n,r,i,s,o,l){const c=new G_(e,t,n,r,i,s,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jh extends zA{constructor(e){super(e),this.uuid=so(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new zA().fromJSON(r))}return this}}function hee(a,e,t=2){const n=e&&e.length,r=n?e[0]*t:a.length;let i=DO(a,0,r,t,!0);const s=[];if(!i||i.next===i.prev)return s;let o,l,c;if(n&&(i=yee(a,e,i,t)),a.length>80*t){o=1/0,l=1/0;let d=-1/0,h=-1/0;for(let m=t;m<r;m+=t){const v=a[m],A=a[m+1];v<o&&(o=v),A<l&&(l=A),v>d&&(d=v),A>h&&(h=A)}c=Math.max(d-o,h-l),c=c!==0?32767/c:0}return $v(i,s,t,o,l,c,0),s}function DO(a,e,t,n,r){let i;if(r===Nee(a,e,t,n)>0)for(let s=e;s<t;s+=n)i=o4(s/n|0,a[s],a[s+1],i);else for(let s=t-n;s>=e;s-=n)i=o4(s/n|0,a[s],a[s+1],i);return i&&x0(i,i.next)&&(t1(i),i=i.next),i}function Kh(a,e){if(!a)return a;e||(e=a);let t=a,n;do if(n=!1,!t.steiner&&(x0(t,t.next)||Ga(t.prev,t,t.next)===0)){if(t1(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function $v(a,e,t,n,r,i,s){if(!a)return;!s&&i&&See(a,n,r,i);let o=a;for(;a.prev!==a.next;){const l=a.prev,c=a.next;if(i?mee(a,n,r,i):pee(a)){e.push(l.i,a.i,c.i),t1(a),a=c.next,o=c.next;continue}if(a=c,a===o){s?s===1?(a=gee(Kh(a),e),$v(a,e,t,n,r,i,2)):s===2&&vee(a,e,t,n,r,i):$v(Kh(a),e,t,n,r,i,1);break}}}function pee(a){const e=a.prev,t=a,n=a.next;if(Ga(e,t,n)>=0)return!1;const r=e.x,i=t.x,s=n.x,o=e.y,l=t.y,c=n.y,d=Math.min(r,i,s),h=Math.min(o,l,c),m=Math.max(r,i,s),v=Math.max(o,l,c);let A=n.next;for(;A!==e;){if(A.x>=d&&A.x<=m&&A.y>=h&&A.y<=v&&_v(r,o,i,l,s,c,A.x,A.y)&&Ga(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function mee(a,e,t,n){const r=a.prev,i=a,s=a.next;if(Ga(r,i,s)>=0)return!1;const o=r.x,l=i.x,c=s.x,d=r.y,h=i.y,m=s.y,v=Math.min(o,l,c),A=Math.min(d,h,m),E=Math.max(o,l,c),b=Math.max(d,h,m),_=X3(v,A,e,t,n),R=X3(E,b,e,t,n);let T=a.prevZ,M=a.nextZ;for(;T&&T.z>=_&&M&&M.z<=R;){if(T.x>=v&&T.x<=E&&T.y>=A&&T.y<=b&&T!==r&&T!==s&&_v(o,d,l,h,c,m,T.x,T.y)&&Ga(T.prev,T,T.next)>=0||(T=T.prevZ,M.x>=v&&M.x<=E&&M.y>=A&&M.y<=b&&M!==r&&M!==s&&_v(o,d,l,h,c,m,M.x,M.y)&&Ga(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;T&&T.z>=_;){if(T.x>=v&&T.x<=E&&T.y>=A&&T.y<=b&&T!==r&&T!==s&&_v(o,d,l,h,c,m,T.x,T.y)&&Ga(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;M&&M.z<=R;){if(M.x>=v&&M.x<=E&&M.y>=A&&M.y<=b&&M!==r&&M!==s&&_v(o,d,l,h,c,m,M.x,M.y)&&Ga(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function gee(a,e){let t=a;do{const n=t.prev,r=t.next.next;!x0(n,r)&&PO(n,t,t.next,r)&&e1(n,r)&&e1(r,n)&&(e.push(n.i,t.i,r.i),t1(t),t1(t.next),t=a=r),t=t.next}while(t!==a);return Kh(t)}function vee(a,e,t,n,r,i){let s=a;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&Ree(s,o)){let l=OO(s,o);s=Kh(s,s.next),l=Kh(l,l.next),$v(s,e,t,n,r,i,0),$v(l,e,t,n,r,i,0);return}o=o.next}s=s.next}while(s!==a)}function yee(a,e,t,n){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i]*n,l=i<s-1?e[i+1]*n:a.length,c=DO(a,o,l,n,!1);c===c.next&&(c.steiner=!0),r.push(wee(c))}r.sort(xee);for(let i=0;i<r.length;i++)t=Aee(r[i],t);return t}function xee(a,e){let t=a.x-e.x;if(t===0&&(t=a.y-e.y,t===0)){const n=(a.next.y-a.y)/(a.next.x-a.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function Aee(a,e){const t=_ee(a,e);if(!t)return e;const n=OO(t,a);return Kh(n,n.next),Kh(t,t.next)}function _ee(a,e){let t=e;const n=a.x,r=a.y;let i=-1/0,s;if(x0(a,t))return t;do{if(x0(a,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>i&&(i=h,s=t.x<t.next.x?t:t.next,h===n))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,l=s.x,c=s.y;let d=1/0;t=s;do{if(n>=t.x&&t.x>=l&&n!==t.x&&LO(r<c?n:i,r,l,c,r<c?i:n,r,t.x,t.y)){const h=Math.abs(r-t.y)/(n-t.x);e1(t,a)&&(h<d||h===d&&(t.x>s.x||t.x===s.x&&bee(s,t)))&&(s=t,d=h)}t=t.next}while(t!==o);return s}function bee(a,e){return Ga(a.prev,a,e.prev)<0&&Ga(e.next,a,a.next)<0}function See(a,e,t,n){let r=a;do r.z===0&&(r.z=X3(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,Eee(r)}function Eee(a){let e,t=1;do{let n=a,r;a=null;let i=null;for(e=0;n;){e++;let s=n,o=0;for(let c=0;c<t&&(o++,s=s.nextZ,!!s);c++);let l=t;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||n.z<=s.z)?(r=n,n=n.nextZ,o--):(r=s,s=s.nextZ,l--),i?i.nextZ=r:a=r,r.prevZ=i,i=r;n=s}i.nextZ=null,t*=2}while(e>1);return a}function X3(a,e,t,n,r){return a=(a-t)*r|0,e=(e-n)*r|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function wee(a){let e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function LO(a,e,t,n,r,i,s,o){return(r-s)*(e-o)>=(a-s)*(i-o)&&(a-s)*(n-o)>=(t-s)*(e-o)&&(t-s)*(i-o)>=(r-s)*(n-o)}function _v(a,e,t,n,r,i,s,o){return!(a===s&&e===o)&&LO(a,e,t,n,r,i,s,o)}function Ree(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!Mee(a,e)&&(e1(a,e)&&e1(e,a)&&Tee(a,e)&&(Ga(a.prev,a,e.prev)||Ga(a,e.prev,e))||x0(a,e)&&Ga(a.prev,a,a.next)>0&&Ga(e.prev,e,e.next)>0)}function Ga(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function x0(a,e){return a.x===e.x&&a.y===e.y}function PO(a,e,t,n){const r=rx(Ga(a,e,t)),i=rx(Ga(a,e,n)),s=rx(Ga(t,n,a)),o=rx(Ga(t,n,e));return!!(r!==i&&s!==o||r===0&&ax(a,t,e)||i===0&&ax(a,n,e)||s===0&&ax(t,a,n)||o===0&&ax(t,e,n))}function ax(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function rx(a){return a>0?1:a<0?-1:0}function Mee(a,e){let t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&PO(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function e1(a,e){return Ga(a.prev,a,a.next)<0?Ga(a,e,a.next)>=0&&Ga(a,a.prev,e)>=0:Ga(a,e,a.prev)<0||Ga(a,a.next,e)<0}function Tee(a,e){let t=a,n=!1;const r=(a.x+e.x)/2,i=(a.y+e.y)/2;do t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==a);return n}function OO(a,e){const t=J3(a.i,a.x,a.y),n=J3(e.i,e.x,e.y),r=a.next,i=e.prev;return a.next=e,e.prev=a,t.next=r,r.prev=t,n.next=t,t.prev=n,i.next=n,n.prev=i,n}function o4(a,e,t,n){const r=J3(a,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function t1(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function J3(a,e,t){return{i:a,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Nee(a,e,t,n){let r=0;for(let i=e,s=t-n;i<t;i+=n)r+=(a[s]-a[i])*(a[i+1]+a[s+1]),s=i;return r}class Cee{static triangulate(e,t,n=2){return hee(e,t,n)}}class Al{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5}static isClockWise(e){return Al.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];l4(e),c4(n,e);let s=e.length;t.forEach(l4);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,c4(n,t[l]);const o=Cee.triangulate(n,r);for(let l=0;l<o.length;l+=3)i.push(o.slice(l,l+3));return i}}function l4(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function c4(a,e){for(let t=0;t<e.length;t++)a.push(e[t].x),a.push(e[t].y)}class V_ extends Sn{constructor(e=new jh([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];s(c)}this.setAttribute("position",new kt(r,3)),this.setAttribute("uv",new kt(i,2)),this.computeVertexNormals();function s(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:v-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:Iee;let T,M=!1,I,P,B,F;_&&(T=_.getSpacedPoints(d),M=!0,m=!1,I=_.computeFrenetFrames(d,!1),P=new ae,B=new ae,F=new ae),m||(b=0,v=0,A=0,E=0);const L=o.extractPoints(c);let U=L.shape;const j=L.holes;if(!Al.isClockWise(U)){U=U.reverse();for(let Be=0,Le=j.length;Be<Le;Be++){const Ke=j[Be];Al.isClockWise(Ke)&&(j[Be]=Ke.reverse())}}function Q(Be){const Ke=10000000000000001e-36;let ze=Be[0];for(let ot=1;ot<=Be.length;ot++){const Qe=ot%Be.length,st=Be[Qe],Ot=st.x-ze.x,zt=st.y-ze.y,ie=Ot*Ot+zt*zt,q=Math.max(Math.abs(st.x),Math.abs(st.y),Math.abs(ze.x),Math.abs(ze.y)),be=Ke*q*q;if(ie<=be){Be.splice(Qe,1),ot--;continue}ze=st}}Q(U),j.forEach(Q);const $=j.length,re=U;for(let Be=0;Be<$;Be++){const Le=j[Be];U=U.concat(Le)}function G(Be,Le,Ke){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Be.clone().addScaledVector(Le,Ke)}const Y=U.length;function K(Be,Le,Ke){let ze,ot,Qe;const st=Be.x-Le.x,Ot=Be.y-Le.y,zt=Ke.x-Be.x,ie=Ke.y-Be.y,q=st*st+Ot*Ot,be=st*ie-Ot*zt;if(Math.abs(be)>Number.EPSILON){const je=Math.sqrt(q),Ye=Math.sqrt(zt*zt+ie*ie),Pe=Le.x-Ot/je,_t=Le.y+st/je,mt=Ke.x-ie/Ye,Ct=Ke.y+zt/Ye,Dt=((mt-Pe)*ie-(Ct-_t)*zt)/(st*ie-Ot*zt);ze=Pe+st*Dt-Be.x,ot=_t+Ot*Dt-Be.y;const rt=ze*ze+ot*ot;if(rt<=2)return new Ze(ze,ot);Qe=Math.sqrt(rt/2)}else{let je=!1;st>Number.EPSILON?zt>Number.EPSILON&&(je=!0):st<-Number.EPSILON?zt<-Number.EPSILON&&(je=!0):Math.sign(Ot)===Math.sign(ie)&&(je=!0),je?(ze=-Ot,ot=st,Qe=Math.sqrt(q)):(ze=st,ot=Ot,Qe=Math.sqrt(q/2))}return new Ze(ze/Qe,ot/Qe)}const X=[];for(let Be=0,Le=re.length,Ke=Le-1,ze=Be+1;Be<Le;Be++,Ke++,ze++)Ke===Le&&(Ke=0),ze===Le&&(ze=0),X[Be]=K(re[Be],re[Ke],re[ze]);const z=[];let J,le=X.concat();for(let Be=0,Le=$;Be<Le;Be++){const Ke=j[Be];J=[];for(let ze=0,ot=Ke.length,Qe=ot-1,st=ze+1;ze<ot;ze++,Qe++,st++)Qe===ot&&(Qe=0),st===ot&&(st=0),J[ze]=K(Ke[ze],Ke[Qe],Ke[st]);z.push(J),le=le.concat(J)}let ce;if(b===0)ce=Al.triangulateShape(re,j);else{const Be=[],Le=[];for(let Ke=0;Ke<b;Ke++){const ze=Ke/b,ot=v*Math.cos(ze*Math.PI/2),Qe=A*Math.sin(ze*Math.PI/2)+E;for(let st=0,Ot=re.length;st<Ot;st++){const zt=G(re[st],X[st],Qe);Ue(zt.x,zt.y,-ot),ze===0&&Be.push(zt)}for(let st=0,Ot=$;st<Ot;st++){const zt=j[st];J=z[st];const ie=[];for(let q=0,be=zt.length;q<be;q++){const je=G(zt[q],J[q],Qe);Ue(je.x,je.y,-ot),ze===0&&ie.push(je)}ze===0&&Le.push(ie)}}ce=Al.triangulateShape(Be,Le)}const xe=ce.length,fe=A+E;for(let Be=0;Be<Y;Be++){const Le=m?G(U[Be],le[Be],fe):U[Be];M?(B.copy(I.normals[0]).multiplyScalar(Le.x),P.copy(I.binormals[0]).multiplyScalar(Le.y),F.copy(T[0]).add(B).add(P),Ue(F.x,F.y,F.z)):Ue(Le.x,Le.y,0)}for(let Be=1;Be<=d;Be++)for(let Le=0;Le<Y;Le++){const Ke=m?G(U[Le],le[Le],fe):U[Le];M?(B.copy(I.normals[Be]).multiplyScalar(Ke.x),P.copy(I.binormals[Be]).multiplyScalar(Ke.y),F.copy(T[Be]).add(B).add(P),Ue(F.x,F.y,F.z)):Ue(Ke.x,Ke.y,h/d*Be)}for(let Be=b-1;Be>=0;Be--){const Le=Be/b,Ke=v*Math.cos(Le*Math.PI/2),ze=A*Math.sin(Le*Math.PI/2)+E;for(let ot=0,Qe=re.length;ot<Qe;ot++){const st=G(re[ot],X[ot],ze);Ue(st.x,st.y,h+Ke)}for(let ot=0,Qe=j.length;ot<Qe;ot++){const st=j[ot];J=z[ot];for(let Ot=0,zt=st.length;Ot<zt;Ot++){const ie=G(st[Ot],J[Ot],ze);M?Ue(ie.x,ie.y+T[d-1].y,T[d-1].x+Ke):Ue(ie.x,ie.y,h+Ke)}}}_e(),Ie();function _e(){const Be=r.length/3;if(m){let Le=0,Ke=Y*Le;for(let ze=0;ze<xe;ze++){const ot=ce[ze];$e(ot[2]+Ke,ot[1]+Ke,ot[0]+Ke)}Le=d+b*2,Ke=Y*Le;for(let ze=0;ze<xe;ze++){const ot=ce[ze];$e(ot[0]+Ke,ot[1]+Ke,ot[2]+Ke)}}else{for(let Le=0;Le<xe;Le++){const Ke=ce[Le];$e(Ke[2],Ke[1],Ke[0])}for(let Le=0;Le<xe;Le++){const Ke=ce[Le];$e(Ke[0]+Y*d,Ke[1]+Y*d,Ke[2]+Y*d)}}n.addGroup(Be,r.length/3-Be,0)}function Ie(){const Be=r.length/3;let Le=0;Ge(re,Le),Le+=re.length;for(let Ke=0,ze=j.length;Ke<ze;Ke++){const ot=j[Ke];Ge(ot,Le),Le+=ot.length}n.addGroup(Be,r.length/3-Be,1)}function Ge(Be,Le){let Ke=Be.length;for(;--Ke>=0;){const ze=Ke;let ot=Ke-1;ot<0&&(ot=Be.length-1);for(let Qe=0,st=d+b*2;Qe<st;Qe++){const Ot=Y*Qe,zt=Y*(Qe+1),ie=Le+ze+Ot,q=Le+ot+Ot,be=Le+ot+zt,je=Le+ze+zt;dt(ie,q,be,je)}}}function Ue(Be,Le,Ke){l.push(Be),l.push(Le),l.push(Ke)}function $e(Be,Le,Ke){ct(Be),ct(Le),ct(Ke);const ze=r.length/3,ot=R.generateTopUV(n,r,ze-3,ze-2,ze-1);se(ot[0]),se(ot[1]),se(ot[2])}function dt(Be,Le,Ke,ze){ct(Be),ct(Le),ct(ze),ct(Le),ct(Ke),ct(ze);const ot=r.length/3,Qe=R.generateSideWallUV(n,r,ot-6,ot-3,ot-2,ot-1);se(Qe[0]),se(Qe[1]),se(Qe[3]),se(Qe[1]),se(Qe[2]),se(Qe[3])}function ct(Be){r.push(l[Be*3+0]),r.push(l[Be*3+1]),r.push(l[Be*3+2])}function se(Be){i.push(Be.x),i.push(Be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Dee(t,n,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new jA[r.type]().fromJSON(r)),new V_(n,e.options)}}const Iee={generateTopUV:function(a,e,t,n,r){const i=e[t*3],s=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[r*3],d=e[r*3+1];return[new Ze(i,s),new Ze(o,l),new Ze(c,d)]},generateSideWallUV:function(a,e,t,n,r,i){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],d=e[n*3+1],h=e[n*3+2],m=e[r*3],v=e[r*3+1],A=e[r*3+2],E=e[i*3],b=e[i*3+1],_=e[i*3+2];return Math.abs(o-d)<Math.abs(s-c)?[new Ze(s,1-l),new Ze(c,1-h),new Ze(m,1-A),new Ze(E,1-_)]:[new Ze(o,1-l),new Ze(d,1-h),new Ze(v,1-A),new Ze(b,1-_)]}};function Dee(a,e,t){if(t.shapes=[],Array.isArray(a))for(let n=0,r=a.length;n<r;n++){const i=a[n];t.shapes.push(i.uuid)}else t.shapes.push(a.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class W_ extends lf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,i,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new W_(e.radius,e.detail)}}class K_ extends Sn{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=ln(r,0,Math.PI*2);const i=[],s=[],o=[],l=[],c=[],d=1/t,h=new ae,m=new Ze,v=new ae,A=new ae,E=new ae;let b=0,_=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:b=e[R+1].x-e[R].x,_=e[R+1].y-e[R].y,v.x=_*1,v.y=-b,v.z=_*0,E.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(E.x,E.y,E.z);break;default:b=e[R+1].x-e[R].x,_=e[R+1].y-e[R].y,v.x=_*1,v.y=-b,v.z=_*0,A.copy(v),v.x+=E.x,v.y+=E.y,v.z+=E.z,v.normalize(),l.push(v.x,v.y,v.z),E.copy(A)}for(let R=0;R<=t;R++){const T=n+R*d*r,M=Math.sin(T),I=Math.cos(T);for(let P=0;P<=e.length-1;P++){h.x=e[P].x*M,h.y=e[P].y,h.z=e[P].x*I,s.push(h.x,h.y,h.z),m.x=R/t,m.y=P/(e.length-1),o.push(m.x,m.y);const B=l[3*P+0]*M,F=l[3*P+1],L=l[3*P+0]*I;c.push(B,F,L)}}for(let R=0;R<t;R++)for(let T=0;T<e.length-1;T++){const M=T+R*e.length,I=M,P=M+e.length,B=M+e.length+1,F=M+1;i.push(I,P,F),i.push(B,F,P)}this.setIndex(i),this.setAttribute("position",new kt(s,3)),this.setAttribute("uv",new kt(o,2)),this.setAttribute("normal",new kt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K_(e.points,e.segments,e.phiStart,e.phiLength)}}class M1 extends lf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new M1(e.radius,e.detail)}}class D0 extends Sn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),l=Math.floor(r),c=o+1,d=l+1,h=e/o,m=t/l,v=[],A=[],E=[],b=[];for(let _=0;_<d;_++){const R=_*m-s;for(let T=0;T<c;T++){const M=T*h-i;A.push(M,-R,0),E.push(0,0,1),b.push(T/o),b.push(1-_/l)}}for(let _=0;_<l;_++)for(let R=0;R<o;R++){const T=R+c*_,M=R+c*(_+1),I=R+1+c*(_+1),P=R+1+c*_;v.push(T,M,P),v.push(M,I,P)}this.setIndex(v),this.setAttribute("position",new kt(A,3)),this.setAttribute("normal",new kt(E,3)),this.setAttribute("uv",new kt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new D0(e.width,e.height,e.widthSegments,e.heightSegments)}}class Y_ extends Sn{constructor(e=.5,t=1,n=32,r=1,i=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n),r=Math.max(1,r);const o=[],l=[],c=[],d=[];let h=e;const m=(t-e)/r,v=new ae,A=new Ze;for(let E=0;E<=r;E++){for(let b=0;b<=n;b++){const _=i+b/n*s;v.x=h*Math.cos(_),v.y=h*Math.sin(_),l.push(v.x,v.y,v.z),c.push(0,0,1),A.x=(v.x/t+1)/2,A.y=(v.y/t+1)/2,d.push(A.x,A.y)}h+=m}for(let E=0;E<r;E++){const b=E*(n+1);for(let _=0;_<n;_++){const R=_+b,T=R,M=R+n+1,I=R+n+2,P=R+1;o.push(T,M,P),o.push(M,I,P)}}this.setIndex(o),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class q_ extends Sn{constructor(e=new jh([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(o,l,d),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new kt(r,3)),this.setAttribute("normal",new kt(i,3)),this.setAttribute("uv",new kt(s,2));function c(d){const h=r.length/3,m=d.extractPoints(t);let v=m.shape;const A=m.holes;Al.isClockWise(v)===!1&&(v=v.reverse());for(let b=0,_=A.length;b<_;b++){const R=A[b];Al.isClockWise(R)===!0&&(A[b]=R.reverse())}const E=Al.triangulateShape(v,A);for(let b=0,_=A.length;b<_;b++){const R=A[b];v=v.concat(R)}for(let b=0,_=v.length;b<_;b++){const R=v[b];r.push(R.x,R.y,0),i.push(0,0,1),s.push(R.x,R.y)}for(let b=0,_=E.length;b<_;b++){const R=E[b],T=R[0]+h,M=R[1]+h,I=R[2]+h;n.push(T,M,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Lee(t,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const s=t[e.shapes[r]];n.push(s)}return new q_(n,e.curveSegments)}}function Lee(a,e){if(e.shapes=[],Array.isArray(a))for(let t=0,n=a.length;t<n;t++){const r=a[t];e.shapes.push(r.uuid)}else e.shapes.push(a.uuid);return e}class T1 extends Sn{constructor(e=1,t=32,n=16,r=0,i=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(s+o,Math.PI);let c=0;const d=[],h=new ae,m=new ae,v=[],A=[],E=[],b=[];for(let _=0;_<=n;_++){const R=[],T=_/n;let M=0;_===0&&s===0?M=.5/t:_===n&&l===Math.PI&&(M=-.5/t);for(let I=0;I<=t;I++){const P=I/t;h.x=-e*Math.cos(r+P*i)*Math.sin(s+T*o),h.y=e*Math.cos(s+T*o),h.z=e*Math.sin(r+P*i)*Math.sin(s+T*o),A.push(h.x,h.y,h.z),m.copy(h).normalize(),E.push(m.x,m.y,m.z),b.push(P+M,1-T),R.push(c++)}d.push(R)}for(let _=0;_<n;_++)for(let R=0;R<t;R++){const T=d[_][R+1],M=d[_][R],I=d[_+1][R],P=d[_+1][R+1];(_!==0||s>0)&&v.push(T,M,P),(_!==n-1||l<Math.PI)&&v.push(M,I,P)}this.setIndex(v),this.setAttribute("position",new kt(A,3)),this.setAttribute("normal",new kt(E,3)),this.setAttribute("uv",new kt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class X_ extends lf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X_(e.radius,e.detail)}}class J_ extends Sn{constructor(e=1,t=.4,n=12,r=48,i=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],l=[],c=[],d=new ae,h=new ae,m=new ae;for(let v=0;v<=n;v++)for(let A=0;A<=r;A++){const E=A/r*i,b=v/n*Math.PI*2;h.x=(e+t*Math.cos(b))*Math.cos(E),h.y=(e+t*Math.cos(b))*Math.sin(E),h.z=t*Math.sin(b),o.push(h.x,h.y,h.z),d.x=e*Math.cos(E),d.y=e*Math.sin(E),m.subVectors(h,d).normalize(),l.push(m.x,m.y,m.z),c.push(A/r),c.push(v/n)}for(let v=1;v<=n;v++)for(let A=1;A<=r;A++){const E=(r+1)*v+A-1,b=(r+1)*(v-1)+A-1,_=(r+1)*(v-1)+A,R=(r+1)*v+A;s.push(E,b,R),s.push(b,_,R)}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Z_ extends Sn{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],d=[],h=new ae,m=new ae,v=new ae,A=new ae,E=new ae,b=new ae,_=new ae;for(let T=0;T<=n;++T){const M=T/n*i*Math.PI*2;R(M,i,s,e,v),R(M+.01,i,s,e,A),b.subVectors(A,v),_.addVectors(A,v),E.crossVectors(b,_),_.crossVectors(E,b),E.normalize(),_.normalize();for(let I=0;I<=r;++I){const P=I/r*Math.PI*2,B=-t*Math.cos(P),F=t*Math.sin(P);h.x=v.x+(B*_.x+F*E.x),h.y=v.y+(B*_.y+F*E.y),h.z=v.z+(B*_.z+F*E.z),l.push(h.x,h.y,h.z),m.subVectors(h,v).normalize(),c.push(m.x,m.y,m.z),d.push(T/n),d.push(I/r)}}for(let T=1;T<=n;T++)for(let M=1;M<=r;M++){const I=(r+1)*(T-1)+(M-1),P=(r+1)*T+(M-1),B=(r+1)*T+M,F=(r+1)*(T-1)+M;o.push(I,P,F),o.push(P,B,F)}this.setIndex(o),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(d,2));function R(T,M,I,P,B){const F=Math.cos(T),L=Math.sin(T),U=I/M*T,j=Math.cos(U);B.x=P*(2+j)*.5*F,B.y=P*(2+j)*L*.5,B.z=P*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Q_ extends Sn{constructor(e=new eM(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ae,l=new ae,c=new Ze;let d=new ae;const h=[],m=[],v=[],A=[];E(),this.setIndex(A),this.setAttribute("position",new kt(h,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function E(){for(let T=0;T<t;T++)b(T);b(i===!1?t:0),R(),_()}function b(T){d=e.getPointAt(T/t,d);const M=s.normals[T],I=s.binormals[T];for(let P=0;P<=r;P++){const B=P/r*Math.PI*2,F=Math.sin(B),L=-Math.cos(B);l.x=L*M.x+F*I.x,l.y=L*M.y+F*I.y,l.z=L*M.z+F*I.z,l.normalize(),m.push(l.x,l.y,l.z),o.x=d.x+n*l.x,o.y=d.y+n*l.y,o.z=d.z+n*l.z,h.push(o.x,o.y,o.z)}}function _(){for(let T=1;T<=t;T++)for(let M=1;M<=r;M++){const I=(r+1)*(T-1)+(M-1),P=(r+1)*T+(M-1),B=(r+1)*T+M,F=(r+1)*(T-1)+M;A.push(I,P,F),A.push(P,B,F)}}function R(){for(let T=0;T<=t;T++)for(let M=0;M<=r;M++)c.x=T/t,c.y=M/r,v.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Q_(new jA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class UO extends Sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new ae,i=new ae;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const h=l[c],m=h.start,v=h.count;for(let A=m,E=m+v;A<E;A+=3)for(let b=0;b<3;b++){const _=o.getX(A+b),R=o.getX(A+(b+1)%3);r.fromBufferAttribute(s,_),i.fromBufferAttribute(s,R),u4(r,i,n)===!0&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let c=0;c<3;c++){const d=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(s,d),i.fromBufferAttribute(s,h),u4(r,i,n)===!0&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function u4(a,e,t){const n=`${a.x},${a.y},${a.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${a.x},${a.y},${a.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var d4=Object.freeze({__proto__:null,BoxGeometry:ip,CapsuleGeometry:H_,CircleGeometry:j_,ConeGeometry:R1,CylinderGeometry:w1,DodecahedronGeometry:z_,EdgesGeometry:RO,ExtrudeGeometry:V_,IcosahedronGeometry:W_,LatheGeometry:K_,OctahedronGeometry:M1,PlaneGeometry:D0,PolyhedronGeometry:lf,RingGeometry:Y_,ShapeGeometry:q_,SphereGeometry:T1,TetrahedronGeometry:X_,TorusGeometry:J_,TorusKnotGeometry:Z_,TubeGeometry:Q_,WireframeGeometry:UO});class BO extends Br{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FO extends Sl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class N1 extends Br{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ko extends N1{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ln(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class kO extends Br{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lo,this.combine=A1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HO extends Br{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class jO extends Br{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zO extends Br{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lo,this.combine=A1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nM extends Br{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class aM extends Br{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class GO extends Br{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=of,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VO extends Ui{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ph(a,e){return!a||a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)}function WO(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function KO(a){function e(r,i){return a[r]-a[i]}const t=a.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function Z3(a,e,t){const n=a.length,r=new a.constructor(n);for(let i=0,s=0;s!==n;++i){const o=t[i]*e;for(let l=0;l!==e;++l)r[s++]=a[o+l]}return r}function rM(a,e,t,n){let r=1,i=a[0];for(;i!==void 0&&i[n]===void 0;)i=a[r++];if(i===void 0)return;let s=i[n];if(s!==void 0)if(Array.isArray(s))do s=i[n],s!==void 0&&(e.push(i.time),t.push(...s)),i=a[r++];while(i!==void 0);else if(s.toArray!==void 0)do s=i[n],s!==void 0&&(e.push(i.time),s.toArray(t,t.length)),i=a[r++];while(i!==void 0);else do s=i[n],s!==void 0&&(e.push(i.time),t.push(s)),i=a[r++];while(i!==void 0)}function Pee(a,e,t,n,r=30){const i=a.clone();i.name=e;const s=[];for(let l=0;l<i.tracks.length;++l){const c=i.tracks[l],d=c.getValueSize(),h=[],m=[];for(let v=0;v<c.times.length;++v){const A=c.times[v]*r;if(!(A<t||A>=n)){h.push(c.times[v]);for(let E=0;E<d;++E)m.push(c.values[v*d+E])}}h.length!==0&&(c.times=Ph(h,c.times.constructor),c.values=Ph(m,c.values.constructor),s.push(c))}i.tracks=s;let o=1/0;for(let l=0;l<i.tracks.length;++l)o>i.tracks[l].times[0]&&(o=i.tracks[l].times[0]);for(let l=0;l<i.tracks.length;++l)i.tracks[l].shift(-1*o);return i.resetDuration(),i}function Oee(a,e=0,t=a,n=30){n<=0&&(n=30);const r=t.tracks.length,i=e/n;for(let s=0;s<r;++s){const o=t.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=a.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(c===void 0)continue;let d=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const A=o.times.length-1;let E;if(i<=o.times[0]){const _=d,R=h-d;E=o.values.slice(_,R)}else if(i>=o.times[A]){const _=A*h+d,R=_+h-d;E=o.values.slice(_,R)}else{const _=o.createInterpolant(),R=d,T=h-d;_.evaluate(i),E=_.resultBuffer.slice(R,T)}l==="quaternion"&&new Qr().fromArray(E).normalize().conjugate().toArray(E);const b=c.times.length;for(let _=0;_<b;++_){const R=_*v+m;if(l==="quaternion")Qr.multiplyQuaternionsFlat(c.values,R,E,0,c.values,R);else{const T=v-m*2;for(let M=0;M<T;++M)c.values[R+M]-=E[M]}}}return a.blendMode=UR,a}class Uee{static convertArray(e,t){return Ph(e,t)}static isTypedArray(e){return WO(e)}static getKeyframeOrder(e){return KO(e)}static sortedArray(e,t,n){return Z3(e,t,n)}static flattenJSON(e,t,n,r){rM(e,t,n,r)}static subclip(e,t,n,r,i=30){return Pee(e,t,n,r,i)}static makeClipAdditive(e,t=0,n=e,r=30){return Oee(e,t,n,r)}}class L0{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{a:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<i)break a;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=i)){const o=t[1];e<o&&(n=2,i=o);for(let l=n-2;;){if(i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YO extends L0{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dh,endingEnd:Dh}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Lh:i=e,o=2*t-n;break;case Xv:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Lh:s=e,l=2*n-t;break;case Xv:s=1,l=n+r[1]-r[0];break;default:s=e-1,l=t}const c=(n-t)*.5,d=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=i*d,this._offsetNext=s*d}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,d=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,v=this._weightNext,A=(n-t)/(r-t),E=A*A,b=E*A,_=-m*b+2*m*E-m*A,R=(1+m)*b+(-1.5-2*m)*E+(-.5+m)*A+1,T=(-1-v)*b+(1.5+v)*E+.5*A,M=v*b-v*E;for(let I=0;I!==o;++I)i[I]=_*s[d+I]+R*s[c+I]+T*s[l+I]+M*s[h+I];return i}}class iM extends L0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,d=(n-t)/(r-t),h=1-d;for(let m=0;m!==o;++m)i[m]=s[c+m]*h+s[l+m]*d;return i}}class qO extends L0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ho{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ph(t,this.TimeBufferType),this.values=Ph(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ph(e.times,Array),values:Ph(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new qO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new iM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case h0:t=this.InterpolantFactoryMethodDiscrete;break;case p0:t=this.InterpolantFactoryMethodLinear;break;case Ex:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return h0;case this.InterpolantFactoryMethodLinear:return p0;case this.InterpolantFactoryMethodSmooth:return Ex}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;s!==-1&&n[s]>t;)--s;if(++s,i!==0||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const o=this.getValueSize();this.times=n.slice(i,s),this.values=this.values.slice(i*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==i;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&WO(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Ex,i=e.length-1;let s=1;for(let o=1;o<i;++o){let l=!1;const c=e[o],d=e[o+1];if(c!==d&&(o!==1||c!==e[0]))if(r)l=!0;else{const h=o*n,m=h-n,v=h+n;for(let A=0;A!==n;++A){const E=t[h+A];if(E!==t[m+A]||E!==t[v+A]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const h=o*n,m=s*n;for(let v=0;v!==n;++v)t[m+v]=t[h+v]}++s}}if(i>0){e[s]=e[i];for(let o=i*n,l=s*n,c=0;c!==n;++c)t[l+c]=t[o+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ho.prototype.ValueTypeName="";Ho.prototype.TimeBufferType=Float32Array;Ho.prototype.ValueBufferType=Float32Array;Ho.prototype.DefaultInterpolation=p0;class sp extends Ho{constructor(e,t,n){super(e,t,n)}}sp.prototype.ValueTypeName="bool";sp.prototype.ValueBufferType=Array;sp.prototype.DefaultInterpolation=h0;sp.prototype.InterpolantFactoryMethodLinear=void 0;sp.prototype.InterpolantFactoryMethodSmooth=void 0;class sM extends Ho{constructor(e,t,n,r){super(e,t,n,r)}}sM.prototype.ValueTypeName="color";class Yh extends Ho{constructor(e,t,n,r){super(e,t,n,r)}}Yh.prototype.ValueTypeName="number";class XO extends L0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(n-t)/(r-t);let c=e*o;for(let d=c+o;c!==d;c+=4)Qr.slerpFlat(i,0,s,c-o,s,c,l);return i}}class qh extends Ho{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new XO(this.times,this.values,this.getValueSize(),e)}}qh.prototype.ValueTypeName="quaternion";qh.prototype.InterpolantFactoryMethodSmooth=void 0;class op extends Ho{constructor(e,t,n){super(e,t,n)}}op.prototype.ValueTypeName="string";op.prototype.ValueBufferType=Array;op.prototype.DefaultInterpolation=h0;op.prototype.InterpolantFactoryMethodLinear=void 0;op.prototype.InterpolantFactoryMethodSmooth=void 0;class Xh extends Ho{constructor(e,t,n,r){super(e,t,n,r)}}Xh.prototype.ValueTypeName="vector";class A0{constructor(e="",t=-1,n=[],r=C_){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=so(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(Fee(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(Ho.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let o=0;o<i;o++){let l=[],c=[];l.push((o+i-1)%i,o,(o+1)%i),c.push(0,1,0);const d=KO(l);l=Z3(l,1,d),c=Z3(c,1,d),!r&&l[0]===0&&(l.push(i),c.push(c[0])),s.push(new Yh(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.name.match(i);if(d&&d.length>1){const h=d[1];let m=r[h];m||(r[h]=m=[]),m.push(c)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,m,v,A,E){if(v.length!==0){const b=[],_=[];rM(v,b,_,A),b.length!==0&&E.push(new h(m,b,_))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const m=c[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let A;for(A=0;A<m.length;A++)if(m[A].morphTargets)for(let E=0;E<m[A].morphTargets.length;E++)v[m[A].morphTargets[E]]=-1;for(const E in v){const b=[],_=[];for(let R=0;R!==m[A].morphTargets.length;++R){const T=m[A];b.push(T.time),_.push(T.morphTarget===E?1:0)}r.push(new Yh(".morphTargetInfluence["+E+"]",b,_))}l=v.length*s}else{const v=".bones["+t[h].name+"]";n(Xh,v+".position",m,"pos",r),n(qh,v+".quaternion",m,"rot",r),n(Xh,v+".scale",m,"scl",r)}}return r.length===0?null:new this(i,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Bee(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yh;case"vector":case"vector2":case"vector3":case"vector4":return Xh;case"color":return sM;case"quaternion":return qh;case"bool":case"boolean":return sp;case"string":return op}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function Fee(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Bee(a.type);if(a.times===void 0){const t=[],n=[];rM(a.keys,t,n,"value"),a.times=t,a.values=n}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const Ac={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class oM{constructor(e,t,n){const r=this;let i=!1,s=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(d){o++,i===!1&&r.onStart!==void 0&&r.onStart(d,s,o),i=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,o),s===o&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,m=c.length;h<m;h+=2){const v=c[h],A=c[h+1];if(v.global&&(v.lastIndex=0),v.test(d))return A}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const JO=new oM;class os{constructor(e){this.manager=e!==void 0?e:JO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}os.DEFAULT_MATERIAL_NAME="__DEFAULT";const du={};class kee extends Error{constructor(e,t){super(e),this.response=t}}class El extends os{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Ac.get(`file:${e}`);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(du[e]!==void 0){du[e].push({onLoad:t,onProgress:n,onError:r});return}du[e]=[],du[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=du[e],h=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),v=m?parseInt(m):0,A=v!==0;let E=0;const b=new ReadableStream({start(_){R();function R(){h.read().then(({done:T,value:M})=>{if(T)_.close();else{E+=M.byteLength;const I=new ProgressEvent("progress",{lengthComputable:A,loaded:E,total:v});for(let P=0,B=d.length;P<B;P++){const F=d[P];F.onProgress&&F.onProgress(I)}_.enqueue(M),R()}},T=>{_.error(T)})}}});return new Response(b)}else throw new kee(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return c.json();default:if(o==="")return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),m=h&&h[1]?h[1].toLowerCase():void 0,v=new TextDecoder(m);return c.arrayBuffer().then(A=>v.decode(A))}}}).then(c=>{Ac.add(`file:${e}`,c);const d=du[e];delete du[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onLoad&&v.onLoad(c)}}).catch(c=>{const d=du[e];if(d===void 0)throw this.manager.itemError(e),c;delete du[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onError&&v.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Hee extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new El(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(i.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),i.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=A0.parse(e[n]);t.push(r)}return t}}class jee extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=[],o=new k_,l=new El(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(i.withCredentials);let c=0;function d(h){l.load(e[h],function(m){const v=i.parse(m,!0);s[h]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},c+=1,c===6&&(v.mipmapCount===1&&(o.minFilter=tr),o.image=s,o.format=v.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let h=0,m=e.length;h<m;++h)d(h);else l.load(e,function(h){const m=i.parse(h,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let A=0;A<v;A++){s[A]={mipmaps:[]};for(let E=0;E<m.mipmapCount;E++)s[A].mipmaps.push(m.mipmaps[A*m.mipmapCount+E]),s[A].format=m.format,s[A].width=m.width,s[A].height=m.height}o.image=s}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=tr),o.format=m.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}const Lm=new WeakMap;class n1 extends os{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ac.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)i.manager.itemStart(e),setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0);else{let h=Lm.get(s);h===void 0&&(h=[],Lm.set(s,h)),h.push({onLoad:t,onError:r})}return s}const o=Qv("img");function l(){d(),t&&t(this);const h=Lm.get(this)||[];for(let m=0;m<h.length;m++){const v=h[m];v.onLoad&&v.onLoad(this)}Lm.delete(this),i.manager.itemEnd(e)}function c(h){d(),r&&r(h),Ac.remove(`image:${e}`);const m=Lm.get(this)||[];for(let v=0;v<m.length;v++){const A=m[v];A.onError&&A.onError(h)}Lm.delete(this),i.manager.itemError(e),i.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Ac.add(`image:${e}`,o),i.manager.itemStart(e),o.src=e,o}}class zee extends os{constructor(e){super(e)}load(e,t,n,r){const i=new b1;i.colorSpace=cr;const s=new n1(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(c){s.load(e[c],function(d){i.images[c]=d,o++,o===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return i}}class Gee extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new wc,o=new El(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,function(l){let c;try{c=i.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:no,s.wrapT=c.wrapT!==void 0?c.wrapT:no,s.magFilter=c.magFilter!==void 0?c.magFilter:tr,s.minFilter=c.minFilter!==void 0?c.minFilter:tr,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=Uo),c.mipmapCount===1&&(s.minFilter=tr),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,t&&t(s,c)},n,r),s}}class ZO extends os{constructor(e){super(e)}load(e,t,n,r){const i=new Ua,s=new n1(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){i.image=o,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}}class cf extends Wn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class QO extends cf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const RE=new nn,f4=new ae,h4=new ae;class lM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.mapType=Bo,this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new I0,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new Jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;f4.setFromMatrixPosition(e.matrixWorld),t.position.copy(f4),h4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(h4),t.updateMatrixWorld(),RE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RE,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(RE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Vee extends lM{constructor(){super(new er(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=g0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class cM extends cf{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new Vee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const p4=new nn,yv=new ae,ME=new ae;class Wee extends lM{constructor(){super(new er(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new Jn(2,1,1,1),new Jn(0,1,1,1),new Jn(3,1,1,1),new Jn(1,1,1,1),new Jn(3,0,1,1),new Jn(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),yv.setFromMatrixPosition(e.matrixWorld),n.position.copy(yv),ME.copy(n.position),ME.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ME),n.updateMatrixWorld(),r.makeTranslation(-yv.x,-yv.y,-yv.z),p4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p4,n.coordinateSystem,n.reversedDepth)}}class uM extends cf{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Wee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Su extends L_{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=c*this.view.offsetX,s=i+c*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Kee extends lM{constructor(){super(new Su(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dM extends cf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.shadow=new Kee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class $O extends cf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class e6 extends cf{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class t6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],1.092548*(n*r)),t.addScaledVector(s[5],1.092548*(r*i)),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],1.092548*(n*i)),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*i),t.addScaledVector(s[3],2*.511664*n),t.addScaledVector(s[4],2*.429043*n*r),t.addScaledVector(s[5],2*.429043*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],2*.429043*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class n6 extends cf{constructor(e=new t6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class $_ extends os{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new El(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,function(o){try{t(i.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),i.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(i){return t[i]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",i),t[i]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const i in e.uniforms){const s=e.uniforms[i];switch(r.uniforms[i]={},s.type){case"t":r.uniforms[i].value=n(s.value);break;case"c":r.uniforms[i].value=new Et().setHex(s.value);break;case"v2":r.uniforms[i].value=new Ze().fromArray(s.value);break;case"v3":r.uniforms[i].value=new ae().fromArray(s.value);break;case"v4":r.uniforms[i].value=new Jn().fromArray(s.value);break;case"m3":r.uniforms[i].value=new bn().fromArray(s.value);break;case"m4":r.uniforms[i].value=new nn().fromArray(s.value);break;default:r.uniforms[i].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),r.normalScale=new Ze().fromArray(i)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return $_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:BO,SpriteMaterial:VR,RawShaderMaterial:FO,ShaderMaterial:Sl,PointsMaterial:F_,MeshPhysicalMaterial:ko,MeshStandardMaterial:N1,MeshPhongMaterial:kO,MeshToonMaterial:HO,MeshNormalMaterial:jO,MeshLambertMaterial:zO,MeshDepthMaterial:nM,MeshDistanceMaterial:aM,MeshBasicMaterial:ro,MeshMatcapMaterial:GO,LineDashedMaterial:VO,LineBasicMaterial:Ui,Material:Br};return new t[e]}}class Zd{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class a6 extends Sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class r6 extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new El(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,function(o){try{t(i.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),i.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(v,A){if(t[A]!==void 0)return t[A];const b=v.interleavedBuffers[A],_=i(v,b.buffer),R=Vm(b.type,_),T=new S1(R,b.stride);return T.uuid=b.uuid,t[A]=T,T}function i(v,A){if(n[A]!==void 0)return n[A];const b=v.arrayBuffers[A],_=new Uint32Array(b).buffer;return n[A]=_,_}const s=e.isInstancedBufferGeometry?new a6:new Sn,o=e.data.index;if(o!==void 0){const v=Vm(o.type,o.array);s.setIndex(new ra(v,1))}const l=e.data.attributes;for(const v in l){const A=l[v];let E;if(A.isInterleavedBufferAttribute){const b=r(e.data,A.data);E=new nf(b,A.itemSize,A.offset,A.normalized)}else{const b=Vm(A.type,A.array),_=A.isInstancedBufferAttribute?Wh:ra;E=new _(b,A.itemSize,A.normalized)}A.name!==void 0&&(E.name=A.name),A.usage!==void 0&&E.setUsage(A.usage),s.setAttribute(v,E)}const c=e.data.morphAttributes;if(c)for(const v in c){const A=c[v],E=[];for(let b=0,_=A.length;b<_;b++){const R=A[b];let T;if(R.isInterleavedBufferAttribute){const M=r(e.data,R.data);T=new nf(M,R.itemSize,R.offset,R.normalized)}else{const M=Vm(R.type,R.array);T=new ra(M,R.itemSize,R.normalized)}R.name!==void 0&&(T.name=R.name),E.push(T)}s.morphAttributes[v]=E}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let v=0,A=h.length;v!==A;++v){const E=h[v];s.addGroup(E.start,E.count,E.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(s.boundingSphere=new $r().fromJSON(m)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Yee extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=this.path===""?Zd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new El(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(c,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Zd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const i=new El(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const s=await i.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,l,o,n),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),t!==void 0){let h=!1;for(const m in s)if(s[m].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const i=new jh().fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(i){i.isBone&&(r[i.uuid]=i)}),e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new E1().fromJSON(e[i],r);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new r6;for(let i=0,s=e.length;i<s;i++){let o;const l=e[i];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in d4?o=d4[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const i=new $_;i.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];n[l.uuid]===void 0&&(n[l.uuid]=i.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],i=A0.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(l){return n.manager.itemStart(l),i.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return s(d)}else return l.data?{data:Vm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new oM(t);i=new n1(l),i.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const h=e[c],m=h.url;if(Array.isArray(m)){const v=[];for(let A=0,E=m.length;A<E;A++){const b=m[A],_=o(b);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new wc(_.data,_.width,_.height)))}r[h.uuid]=new Kd(v)}else{const v=o(h.url);r[h.uuid]=new Kd(v)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return s.data?{data:Vm(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new n1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const d=[];for(let h=0,m=c.length;h<m;h++){const v=c[h],A=await i(v);A!==null&&(A instanceof HTMLImageElement?d.push(A):d.push(new wc(A.data,A.width,A.height)))}n[l.uuid]=new Kd(d)}else{const d=await i(l.url);n[l.uuid]=new Kd(d)}}}return n}parseTextures(e,t){function n(i,s){return typeof i=="number"?i:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",i),s[i])}const r={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=e[i];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let d;Array.isArray(c)?(d=new b1,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new wc:d=new Ua,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=n(o.mapping,qee)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=n(o.wrap[0],m4),d.wrapT=n(o.wrap[1],m4)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=n(o.minFilter,g4)),o.magFilter!==void 0&&(d.magFilter=n(o.magFilter,g4)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),r[o.uuid]=d}return r}parseObject(e,t,n,r,i){let s;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let A=0,E=m.length;A<E;A++){const b=m[A];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),v.push(n[b])}return v}return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),n[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,h;switch(e.type){case"Scene":s=new GR,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Et(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new O_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new P_(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new er(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Su(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new $O(e.color,e.intensity);break;case"DirectionalLight":s=new dM(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new uM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new e6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new cM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new QO(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new n6().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),h=l(e.material),s=new WR(d,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),h=l(e.material),s=new ur(d,h);break;case"InstancedMesh":d=o(e.geometry),h=l(e.material);const m=e.count,v=e.instanceMatrix,A=e.instanceColor;s=new KR(d,h,m),s.instanceMatrix=new Wh(new Float32Array(v.array),16),A!==void 0&&(s.instanceColor=new Wh(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":d=o(e.geometry),h=l(e.material),s=new EO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(E=>{let b=null,_=null;return E.boundingBox!==void 0&&(b=new hi().fromJSON(E.boundingBox)),E.boundingSphere!==void 0&&(_=new $r().fromJSON(E.boundingSphere)),{...E,boundingBox:b,boundingSphere:_}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=c(e.matricesTexture.uuid),s._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new $r().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new hi().fromJSON(e.boundingBox));break;case"LOD":s=new SO;break;case"Line":s=new Mu(o(e.geometry),l(e.material));break;case"LineLoop":s=new YR(o(e.geometry),l(e.material));break;case"LineSegments":s=new Tl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new qR(o(e.geometry),l(e.material));break;case"Sprite":s=new bO(l(e.material));break;case"Group":s=new xu;break;case"Bone":s=new U_;break;default:s=new Wn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)s.add(this.parseObject(m[v],t,n,r,i))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const A=m[v];s.animations.push(i[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const A=m[v],E=s.getObjectByProperty("uuid",A.object);E!==void 0&&s.addLevel(E,A.distance,A.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Wn}})}}const qee={UVMapping:b_,CubeReflectionMapping:wu,CubeRefractionMapping:ef,EquirectangularReflectionMapping:Yv,EquirectangularRefractionMapping:qv,CubeUVReflectionMapping:N0},m4={RepeatWrapping:tf,ClampToEdgeWrapping:no,MirroredRepeatWrapping:l0},g4={NearestFilter:Ur,NearestMipmapNearestFilter:S_,NearestMipmapLinearFilter:Ih,LinearFilter:tr,LinearMipmapNearestFilter:e0,LinearMipmapLinearFilter:Uo},TE=new WeakMap;class i6 extends os{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ac.get(`image-bitmap:${e}`);if(s!==void 0){if(i.manager.itemStart(e),s.then){s.then(c=>{if(TE.has(s)===!0)r&&r(TE.get(s)),i.manager.itemError(e),i.manager.itemEnd(e);else return t&&t(c),i.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ac.add(`image-bitmap:${e}`,c),t&&t(c),i.manager.itemEnd(e),c}).catch(function(c){r&&r(c),TE.set(l,c),Ac.remove(`image-bitmap:${e}`),i.manager.itemError(e),i.manager.itemEnd(e)});Ac.add(`image-bitmap:${e}`,l),i.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let ix,fM=class{static getContext(){return ix===void 0&&(ix=new(window.AudioContext||window.webkitAudioContext)),ix}static setContext(e){ix=e}};class Xee extends os{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new El(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);fM.getContext().decodeAudioData(c,function(h){t(h)}).catch(o)}catch(c){o(c)}},n,r);function o(l){r?r(l):console.error(l),i.manager.itemError(e)}}}const v4=new nn,y4=new nn,ch=new nn;class Jee{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new er,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new er,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ch.copy(e.projectionMatrix);const r=t.eyeSep/2,i=r*t.near/t.focus,s=t.near*Math.tan(Hh*t.fov*.5)/t.zoom;let o,l;y4.elements[12]=-r,v4.elements[12]=r,o=-s*t.aspect+i,l=s*t.aspect+i,ch.elements[0]=2*t.near/(l-o),ch.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(ch),o=-s*t.aspect-i,l=s*t.aspect-i,ch.elements[0]=2*t.near/(l-o),ch.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(ch)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(y4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(v4)}}class s6 extends er{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class hM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const uh=new ae,NE=new Qr,Zee=new ae,dh=new ae,fh=new ae;class Qee extends Wn{constructor(){super(),this.type="AudioListener",this.context=fM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new hM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uh,NE,Zee),dh.set(0,0,-1).applyQuaternion(NE),fh.set(0,1,0).applyQuaternion(NE),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(uh.x,n),t.positionY.linearRampToValueAtTime(uh.y,n),t.positionZ.linearRampToValueAtTime(uh.z,n),t.forwardX.linearRampToValueAtTime(dh.x,n),t.forwardY.linearRampToValueAtTime(dh.y,n),t.forwardZ.linearRampToValueAtTime(dh.z,n),t.upX.linearRampToValueAtTime(fh.x,n),t.upY.linearRampToValueAtTime(fh.y,n),t.upZ.linearRampToValueAtTime(fh.z,n)}else t.setPosition(uh.x,uh.y,uh.z),t.setOrientation(dh.x,dh.y,dh.z,fh.x,fh.y,fh.z)}}class o6 extends Wn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hh=new ae,x4=new Qr,$ee=new ae,ph=new ae;class ete extends o6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hh,x4,$ee),ph.set(0,0,1).applyQuaternion(x4);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hh.x,n),t.positionY.linearRampToValueAtTime(hh.y,n),t.positionZ.linearRampToValueAtTime(hh.z,n),t.orientationX.linearRampToValueAtTime(ph.x,n),t.orientationY.linearRampToValueAtTime(ph.y,n),t.orientationZ.linearRampToValueAtTime(ph.z,n)}else t.setPosition(hh.x,hh.y,hh.z),t.setOrientation(ph.x,ph.y,ph.z)}}class tte{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class l6{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,i,s;switch(t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)n[i+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,i,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,s=r;i!==s;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let s=0;s!==i;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){Qr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;Qr.multiplyQuaternionsFlat(e,s,e,t,e,n),Qr.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const l=t+o;e[l]=e[l]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const o=t+s;e[o]=e[o]+e[n+s]*r}}}const pM="\\[\\]\\.:\\/",nte=new RegExp("["+pM+"]","g"),mM="[^"+pM+"]",ate="[^"+pM.replace("\\.","")+"]",rte=/((?:WC+[\/:])*)/.source.replace("WC",mM),ite=/(WCOD+)?/.source.replace("WCOD",ate),ste=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mM),ote=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mM),lte=new RegExp("^"+rte+ite+ste+ote+"$"),cte=["material","materials","bones","map"];class ute{constructor(e,t,n){const r=n||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class qn{constructor(e,t,n){this.path=t,this.parsedPath=n||qn.parseTrackName(t),this.node=qn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new qn.Composite(e,t,n):new qn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(nte,"")}static parseTrackName(e){const t=lte.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=n.nodeName.substring(r+1);cte.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(i){for(let s=0;s<i.length;s++){const o=i[s];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=qn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[r];if(s===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qn.Composite=ute;qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qn.prototype.GetterByBindingType=[qn.prototype._getValue_direct,qn.prototype._getValue_array,qn.prototype._getValue_arrayElement,qn.prototype._getValue_toArray];qn.prototype.SetterByBindingTypeAndVersioning=[[qn.prototype._setValue_direct,qn.prototype._setValue_direct_setNeedsUpdate,qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_array,qn.prototype._setValue_array_setNeedsUpdate,qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_arrayElement,qn.prototype._setValue_arrayElement_setNeedsUpdate,qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_fromArray,qn.prototype._setValue_fromArray_setNeedsUpdate,qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dte{constructor(){this.isAnimationObjectGroup=!0,this.uuid=so(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o,l=e.length,c=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const m=arguments[d],v=m.uuid;let A=t[v];if(A===void 0){A=l++,t[v]=A,e.push(m);for(let E=0,b=s;E!==b;++E)i[E].push(new qn(m,n[E],r[E]))}else if(A<c){o=e[A];const E=--c,b=e[E];t[b.uuid]=A,e[A]=b,t[v]=E,e[E]=m;for(let _=0,R=s;_!==R;++_){const T=i[_],M=T[E];let I=T[A];T[A]=M,I===void 0&&(I=new qn(m,n[_],r[_])),T[E]=I}}else e[A]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],c=l.uuid,d=t[c];if(d!==void 0&&d>=i){const h=i++,m=e[h];t[m.uuid]=d,e[d]=m,t[c]=h,e[h]=l;for(let v=0,A=r;v!==A;++v){const E=n[v],b=E[h],_=E[d];E[d]=b,E[h]=_}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<i){const m=--i,v=e[m],A=--s,E=e[A];t[v.uuid]=h,e[h]=v,t[E.uuid]=m,e[m]=E,e.pop();for(let b=0,_=r;b!==_;++b){const R=n[b],T=R[m],M=R[A];R[h]=T,R[m]=M,R.pop()}}else{const m=--s,v=e[m];m>0&&(t[v.uuid]=h),e[h]=v,e.pop();for(let A=0,E=r;A!==E;++A){const b=n[A];b[h]=b[m],b.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(r!==void 0)return i[r];const s=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,h=new Array(c);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(h);for(let m=d,v=l.length;m!==v;++m){const A=l[m];h[m]=new qn(A,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],c=e[o];t[c]=n,s[n]=l,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class c6{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,o=new Array(s),l={endingStart:Dh,endingEnd:Dh};for(let c=0;c!==s;++c){const d=i[c].createInterpolant(null);o[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$P,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,i=e._clip.duration,s=i/r,o=r/i;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=i,l[1]=i+n,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const i=this._startTime;if(i!==null){const l=(e-i)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case UR:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(s),c[d].accumulateAdditive(o);break;case C_:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(s),c[d].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===eO;if(e===0)return i===-1?r:s&&(i&1)===1?t-r:r;if(n===QP){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);const l=this.repetitions-i;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(i&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Lh,r.endingEnd=Lh):(e?r.endingStart=this.zeroSlopeAtStart?Lh:Dh:r.endingStart=Xv,t?r.endingEnd=this.zeroSlopeAtEnd?Lh:Dh:r.endingEnd=Xv)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,l[0]=t,o[1]=i+e,l[1]=n,this}}const fte=new Float32Array(1);class hte extends Pc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let h=0;h!==i;++h){const m=r[h],v=m.name;let A=d[v];if(A!==void 0)++A.referenceCount,s[h]=A;else{if(A=s[h],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,l,v));continue}const E=t&&t._propertyBindings[h].binding.parsedPath;A=new l6(qn.create(n,v,E),m.ValueTypeName,m.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,l,v),s[h]=A}o[h].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];i.useCount++===0&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,o=s[i],l=o.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[i],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new iM(new Float32Array(2),new Float32Array(2),1,fte),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s=typeof e=="string"?A0.findByName(r,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(s!==null?n=s.blendMode:n=C_),l!==void 0){const h=l.actionByRoot[i];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const d=new c6(this,s,t,n);return this._bindAction(d,c),this._addInactiveAction(d,o,i),d}existingAction(e,t){const n=t||this._root,r=n.uuid,i=typeof e=="string"?A0.findByName(n,e):e,s=i?i.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,i,s);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){const s=i.knownActions;for(let o=0,l=s.length;o!==l;++o){const c=s[o];this._deactivateAction(c);const d=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,i=r[t];if(i!==void 0)for(const s in i){const o=i[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class pte extends HR{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new D_(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class gM{constructor(e){this.value=e}clone(){return new gM(this.value.clone===void 0?this.value:this.value.clone())}}let mte=0;class gte extends Pc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mte++}),this.name="",this.usage=Zv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const i=Array.isArray(t[n])?t[n]:[t[n]];for(let s=0;s<i.length;s++)this.uniforms.push(i[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class vte extends S1{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class yte{constructor(e,t,n,r,i,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const A4=new nn;class u6{constructor(e,t,n=0,r=1/0){this.ray=new rp(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new v0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return A4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(A4),this}intersectObject(e,t=!0,n=[]){return Q3(e,this,n,t),n.sort(_4),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Q3(e[r],this,n,t);return n.sort(_4),n}}function _4(a,e){return a.distance-e.distance}function Q3(a,e,t,n){let r=!0;if(a.layers.test(e.layers)&&a.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const i=a.children;for(let s=0,o=i.length;s<o;s++)Q3(i[s],e,t,!0)}}class xte{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Ate.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Ate(){this._document.hidden===!1&&this.reset()}class $3{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ln(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ln(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _te{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class vM{constructor(e,t,n,r){vM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}const b4=new Ze;class bte{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=b4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S4=new ae,sx=new ae,Pm=new ae,Om=new ae,CE=new ae,Ste=new ae,Ete=new ae;class wte{constructor(e=new ae,t=new ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){S4.subVectors(e,this.start),sx.subVectors(this.end,this.start);const n=sx.dot(sx);let i=sx.dot(S4)/n;return t&&(i=ln(i,0,1)),i}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Ste,n=Ete){const r=10000000000000001e-32;let i,s;const o=this.start,l=e.start,c=this.end,d=e.end;Pm.subVectors(c,o),Om.subVectors(d,l),CE.subVectors(o,l);const h=Pm.dot(Pm),m=Om.dot(Om),v=Om.dot(CE);if(h<=r&&m<=r)return t.copy(o),n.copy(l),t.sub(n),t.dot(t);if(h<=r)i=0,s=v/m,s=ln(s,0,1);else{const A=Pm.dot(CE);if(m<=r)s=0,i=ln(-A/h,0,1);else{const E=Pm.dot(Om),b=h*m-E*E;b!==0?i=ln((E*v-A*m)/b,0,1):i=0,s=(E*i+v)/m,s<0?(s=0,i=ln(-A/h,0,1)):s>1&&(s=1,i=ln((E-A)/h,0,1))}}return t.copy(o).add(Pm.multiplyScalar(i)),n.copy(l).add(Om.multiplyScalar(s)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const E4=new ae;class Rte extends Wn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Sn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const c=s/l*Math.PI*2,d=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new kt(r,3));const i=new Ui({fog:!1,toneMapped:!1});this.cone=new Tl(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),E4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(E4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fd=new ae,ox=new nn,IE=new nn;class Mte extends Tl{constructor(e){const t=d6(e),n=new Sn,r=[],i=[];for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(0,0,0),i.push(0,0,0))}n.setAttribute("position",new kt(r,3)),n.setAttribute("color",new kt(i,3));const s=new Ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Et(255),l=new Et(65280);this.setColors(o,l)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");IE.copy(this.root.matrixWorld).invert();for(let i=0,s=0;i<t.length;i++){const o=t[i];o.parent&&o.parent.isBone&&(ox.multiplyMatrices(IE,o.matrixWorld),Fd.setFromMatrixPosition(ox),r.setXYZ(s,Fd.x,Fd.y,Fd.z),ox.multiplyMatrices(IE,o.parent.matrixWorld),Fd.setFromMatrixPosition(ox),r.setXYZ(s+1,Fd.x,Fd.y,Fd.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let i=0;i<r.count;i+=2)r.setXYZ(i,e.r,e.g,e.b),r.setXYZ(i+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function d6(a){const e=[];a.isBone===!0&&e.push(a);for(let t=0;t<a.children.length;t++)e.push(...d6(a.children[t]));return e}class Tte extends ur{constructor(e,t,n){const r=new T1(t,4,2),i=new ro({wireframe:!0,fog:!1,toneMapped:!1});super(r,i),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Nte=new ae,w4=new Et,R4=new Et;class Cte extends Wn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new M1(t);r.rotateY(Math.PI*.5),this.material=new ro({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(i.count*3);r.setAttribute("color",new ra(s,3)),this.add(new ur(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");w4.copy(this.light.color),R4.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const i=n<r/2?w4:R4;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Nte.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ite extends Tl{constructor(e=10,t=10,n=4473924,r=8947848){n=new Et(n),r=new Et(r);const i=t/2,s=e/t,o=e/2,l=[],c=[];for(let m=0,v=0,A=-o;m<=t;m++,A+=s){l.push(-o,0,A,o,0,A),l.push(A,0,-o,A,0,o);const E=m===i?n:r;E.toArray(c,v),v+=3,E.toArray(c,v),v+=3,E.toArray(c,v),v+=3,E.toArray(c,v),v+=3}const d=new Sn;d.setAttribute("position",new kt(l,3)),d.setAttribute("color",new kt(c,3));const h=new Ui({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Dte extends Tl{constructor(e=10,t=16,n=8,r=64,i=4473924,s=8947848){i=new Et(i),s=new Et(s);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const m=h/t*(Math.PI*2),v=Math.sin(m)*e,A=Math.cos(m)*e;o.push(0,0,0),o.push(v,0,A);const E=h&1?i:s;l.push(E.r,E.g,E.b),l.push(E.r,E.g,E.b)}for(let h=0;h<n;h++){const m=h&1?i:s,v=e-e/n*h;for(let A=0;A<r;A++){let E=A/r*(Math.PI*2),b=Math.sin(E)*v,_=Math.cos(E)*v;o.push(b,0,_),l.push(m.r,m.g,m.b),E=(A+1)/r*(Math.PI*2),b=Math.sin(E)*v,_=Math.cos(E)*v,o.push(b,0,_),l.push(m.r,m.g,m.b)}}const c=new Sn;c.setAttribute("position",new kt(o,3)),c.setAttribute("color",new kt(l,3));const d=new Ui({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const M4=new ae,lx=new ae,T4=new ae;class Lte extends Wn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Sn;r.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Ui({fog:!1,toneMapped:!1});this.lightPlane=new Mu(r,i),this.add(this.lightPlane),r=new Sn,r.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new Mu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),M4.setFromMatrixPosition(this.light.matrixWorld),lx.setFromMatrixPosition(this.light.target.matrixWorld),T4.subVectors(lx,M4),this.lightPlane.lookAt(lx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lx),this.targetLine.scale.z=T4.length()}}const cx=new ae,Qa=new L_;class Pte extends Tl{constructor(e){const t=new Sn,n=new Ui({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(A,E){l(A),l(E)}function l(A){r.push(0,0,0),i.push(0,0,0),s[A]===void 0&&(s[A]=[]),s[A].push(r.length/3-1)}t.setAttribute("position",new kt(r,3)),t.setAttribute("color",new kt(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Et(16755200),d=new Et(16711680),h=new Et(43775),m=new Et(16777215),v=new Et(3355443);this.setColors(c,d,h,m,v)}setColors(e,t,n,r,i){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;let i,s;if(Qa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)i=1,s=0;else if(this.camera.coordinateSystem===ao)i=-1,s=1;else if(this.camera.coordinateSystem===m0)i=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);lr("c",t,e,Qa,0,0,i),lr("t",t,e,Qa,0,0,s),lr("n1",t,e,Qa,-1,-1,i),lr("n2",t,e,Qa,n,-1,i),lr("n3",t,e,Qa,-1,r,i),lr("n4",t,e,Qa,n,r,i),lr("f1",t,e,Qa,-1,-1,s),lr("f2",t,e,Qa,n,-1,s),lr("f3",t,e,Qa,-1,r,s),lr("f4",t,e,Qa,n,r,s),lr("u1",t,e,Qa,n*.7,r*1.1,i),lr("u2",t,e,Qa,-1*.7,r*1.1,i),lr("u3",t,e,Qa,0,r*2,i),lr("cf1",t,e,Qa,-1,0,s),lr("cf2",t,e,Qa,n,0,s),lr("cf3",t,e,Qa,0,-1,s),lr("cf4",t,e,Qa,0,r,s),lr("cn1",t,e,Qa,-1,0,i),lr("cn2",t,e,Qa,n,0,i),lr("cn3",t,e,Qa,0,-1,i),lr("cn4",t,e,Qa,0,r,i),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function lr(a,e,t,n,r,i,s){cx.set(r,i,s).unproject(n);const o=e[a];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,d=o.length;c<d;c++)l.setXYZ(o[c],cx.x,cx.y,cx.z)}}const ux=new hi;class Ote extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new Sn;i.setIndex(new ra(n,1)),i.setAttribute("position",new ra(r,3)),super(i,new Ui({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&ux.setFromObject(this.object),ux.isEmpty())return;const e=ux.min,t=ux.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ute extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new Sn;i.setIndex(new ra(n,1)),i.setAttribute("position",new kt(r,3)),super(i,new Ui({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bte extends Mu{constructor(e,t=1,n=16776960){const r=n,i=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Sn;s.setAttribute("position",new kt(i,3)),s.computeBoundingSphere(),super(s,new Ui({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Sn;l.setAttribute("position",new kt(o,3)),l.computeBoundingSphere(),this.add(new ur(l,new ro({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const N4=new ae;let dx,DE;class Fte extends Wn{constructor(e=new ae(0,0,1),t=new ae(0,0,0),n=1,r=16776960,i=n*.2,s=i*.2){super(),this.type="ArrowHelper",dx===void 0&&(dx=new Sn,dx.setAttribute("position",new kt([0,0,0,0,1,0],3)),DE=new R1(.5,1,5,1),DE.translate(0,-.5,0)),this.position.copy(t),this.line=new Mu(dx,new Ui({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ur(DE,new ro({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{N4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(N4,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class kte extends Tl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Sn;r.setAttribute("position",new kt(t,3)),r.setAttribute("color",new kt(n,3));const i=new Ui({vertexColors:!0,toneMapped:!1});super(r,i),this.type="AxesHelper"}setColors(e,t,n){const r=new Et,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hte{constructor(){this.type="ShapePath",this.color=new Et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const R=[];for(let T=0,M=_.length;T<M;T++){const I=_[T],P=new jh;P.curves=I.curves,R.push(P)}return R}function n(_,R){const T=R.length;let M=!1;for(let I=T-1,P=0;P<T;I=P++){let B=R[I],F=R[P],L=F.x-B.x,U=F.y-B.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(B=R[P],L=-L,F=R[I],U=-U),_.y<B.y||_.y>F.y)continue;if(_.y===B.y){if(_.x===B.x)return!0}else{const j=U*(_.x-B.x)-L*(_.y-B.y);if(j===0)return!0;if(j<0)continue;M=!M}}else{if(_.y!==B.y)continue;if(F.x<=_.x&&_.x<=B.x||B.x<=_.x&&_.x<=F.x)return!0}}return M}const r=Al.isClockWise,i=this.subPaths;if(i.length===0)return[];let s,o,l;const c=[];if(i.length===1)return o=i[0],l=new jh,l.curves=o.curves,c.push(l),c;let d=!r(i[0].getPoints());d=e?!d:d;const h=[],m=[];let v=[],A=0,E;m[A]=void 0,v[A]=[];for(let _=0,R=i.length;_<R;_++)o=i[_],E=o.getPoints(),s=r(E),s=e?!s:s,s?(!d&&m[A]&&A++,m[A]={s:new jh,p:E},m[A].s.curves=o.curves,d&&A++,v[A]=[]):v[A].push({h:o,p:E[0]});if(!m[0])return t(i);if(m.length>1){let _=!1,R=0;for(let T=0,M=m.length;T<M;T++)h[T]=[];for(let T=0,M=m.length;T<M;T++){const I=v[T];for(let P=0;P<I.length;P++){const B=I[P];let F=!0;for(let L=0;L<m.length;L++)n(B.p,m[L].p)&&(T!==L&&R++,F?(F=!1,h[L].push(B)):_=!0);F&&h[T].push(B)}}R>0&&_===!1&&(v=h)}let b;for(let _=0,R=m.length;_<R;_++){l=m[_].s,c.push(l),b=v[_];for(let T=0,M=b.length;T<M;T++)l.holes.push(b[T].h)}return c}}class jte extends Pc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function zte(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2):(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0),a}function Gte(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0):(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2),a}function Vte(a){return a.repeat.x=1,a.repeat.y=1,a.offset.x=0,a.offset.y=0,a}function ew(a,e,t,n){const r=Wte(n);switch(t){case DR:return a*e;case M_:return a*e/r.components*r.byteLength;case _1:return a*e/r.components*r.byteLength;case PR:return a*e*2/r.components*r.byteLength;case T_:return a*e*2/r.components*r.byteLength;case LR:return a*e*3/r.components*r.byteLength;case Pi:return a*e*4/r.components*r.byteLength;case N_:return a*e*4/r.components*r.byteLength;case Mv:case Tv:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case Nv:case Cv:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case hA:case mA:return Math.max(a,16)*Math.max(e,8)/4;case fA:case pA:return Math.max(a,8)*Math.max(e,8)/2;case gA:case vA:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case yA:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case xA:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case AA:return Math.floor((a+4)/5)*Math.floor((e+3)/4)*16;case _A:return Math.floor((a+4)/5)*Math.floor((e+4)/5)*16;case bA:return Math.floor((a+5)/6)*Math.floor((e+4)/5)*16;case SA:return Math.floor((a+5)/6)*Math.floor((e+5)/6)*16;case EA:return Math.floor((a+7)/8)*Math.floor((e+4)/5)*16;case wA:return Math.floor((a+7)/8)*Math.floor((e+5)/6)*16;case RA:return Math.floor((a+7)/8)*Math.floor((e+7)/8)*16;case MA:return Math.floor((a+9)/10)*Math.floor((e+4)/5)*16;case TA:return Math.floor((a+9)/10)*Math.floor((e+5)/6)*16;case NA:return Math.floor((a+9)/10)*Math.floor((e+7)/8)*16;case CA:return Math.floor((a+9)/10)*Math.floor((e+9)/10)*16;case IA:return Math.floor((a+11)/12)*Math.floor((e+9)/10)*16;case DA:return Math.floor((a+11)/12)*Math.floor((e+11)/12)*16;case Iv:case LA:case PA:return Math.ceil(a/4)*Math.ceil(e/4)*16;case OR:case OA:return Math.ceil(a/4)*Math.ceil(e/4)*8;case UA:case BA:return Math.ceil(a/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Wte(a){switch(a){case Bo:case NR:return{byteLength:1,components:1};case c0:case CR:case C0:return{byteLength:2,components:1};case w_:case R_:return{byteLength:2,components:4};case Ru:case E_:case Ts:return{byteLength:4,components:1};case IR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${a}.`)}class Kte{static contain(e,t){return zte(e,t)}static cover(e,t){return Gte(e,t)}static fill(e){return Vte(e)}static getByteLength(e,t,n,r){return ew(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:A_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=A_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function f6(){let a=null,e=!1,t=null,n=null;function r(i,s){t(i,s),n=a.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=a.requestAnimationFrame(r),e=!0)},stop:function(){a.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(i){t=i},setContext:function(i){a=i}}}function Yte(a){const e=new WeakMap;function t(o,l){const c=o.array,d=o.usage,h=c.byteLength,m=a.createBuffer();a.bindBuffer(l,m),a.bufferData(l,c,d),o.onUploadCallback();let v;if(c instanceof Float32Array)v=a.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)v=a.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?v=a.HALF_FLOAT:v=a.UNSIGNED_SHORT;else if(c instanceof Int16Array)v=a.SHORT;else if(c instanceof Uint32Array)v=a.UNSIGNED_INT;else if(c instanceof Int32Array)v=a.INT;else if(c instanceof Int8Array)v=a.BYTE;else if(c instanceof Uint8Array)v=a.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)v=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:v,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function n(o,l,c){const d=l.array,h=l.updateRanges;if(a.bindBuffer(c,o),h.length===0)a.bufferSubData(c,0,d);else{h.sort((v,A)=>v.start-A.start);let m=0;for(let v=1;v<h.length;v++){const A=h[m],E=h[v];E.start<=A.start+A.count+1?A.count=Math.max(A.count,E.start+E.count-A.start):(++m,h[m]=E)}h.length=m+1;for(let v=0,A=h.length;v<A;v++){const E=h[v];a.bufferSubData(c,E.start*d.BYTES_PER_ELEMENT,d,E.start,E.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function i(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(a.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:r,remove:i,update:s}}var qte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Xte=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Jte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Zte=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qte=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,$te=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ene=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,tne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ane=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,rne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ine=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,one=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,lne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,cne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,une=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,gne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,vne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ane=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_ne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,bne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Sne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ene="gl_FragColor = linearToOutputTexel( gl_FragColor );",wne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Rne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Mne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Tne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Cne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ine=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Dne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Lne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Pne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,One=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Une=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Bne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Fne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,kne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Hne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Gne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Vne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Wne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Kne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yne=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Xne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Jne=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Zne=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Qne=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$ne=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,eae=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,tae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,nae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sae=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,oae=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,lae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,cae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,uae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,gae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,vae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,yae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,xae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Aae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_ae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,bae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Sae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Eae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Rae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Mae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Tae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Nae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Cae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Iae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Dae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Pae=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Oae=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Uae=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Bae=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Fae=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kae=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Hae=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jae=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zae=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Gae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Vae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Wae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Kae=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Yae=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qae=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jae=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qae=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$ae=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ere=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,tre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,are=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ire=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ore=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,lre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ure=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,mre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yre=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Are=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_re=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Sre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ere=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:qte,alphahash_pars_fragment:Xte,alphamap_fragment:Jte,alphamap_pars_fragment:Zte,alphatest_fragment:Qte,alphatest_pars_fragment:$te,aomap_fragment:ene,aomap_pars_fragment:tne,batching_pars_vertex:nne,batching_vertex:ane,begin_vertex:rne,beginnormal_vertex:ine,bsdfs:sne,iridescence_fragment:one,bumpmap_pars_fragment:lne,clipping_planes_fragment:cne,clipping_planes_pars_fragment:une,clipping_planes_pars_vertex:dne,clipping_planes_vertex:fne,color_fragment:hne,color_pars_fragment:pne,color_pars_vertex:mne,color_vertex:gne,common:vne,cube_uv_reflection_fragment:yne,defaultnormal_vertex:xne,displacementmap_pars_vertex:Ane,displacementmap_vertex:_ne,emissivemap_fragment:bne,emissivemap_pars_fragment:Sne,colorspace_fragment:Ene,colorspace_pars_fragment:wne,envmap_fragment:Rne,envmap_common_pars_fragment:Mne,envmap_pars_fragment:Tne,envmap_pars_vertex:Nne,envmap_physical_pars_fragment:Hne,envmap_vertex:Cne,fog_vertex:Ine,fog_pars_vertex:Dne,fog_fragment:Lne,fog_pars_fragment:Pne,gradientmap_pars_fragment:One,lightmap_pars_fragment:Une,lights_lambert_fragment:Bne,lights_lambert_pars_fragment:Fne,lights_pars_begin:kne,lights_toon_fragment:jne,lights_toon_pars_fragment:zne,lights_phong_fragment:Gne,lights_phong_pars_fragment:Vne,lights_physical_fragment:Wne,lights_physical_pars_fragment:Kne,lights_fragment_begin:Yne,lights_fragment_maps:qne,lights_fragment_end:Xne,logdepthbuf_fragment:Jne,logdepthbuf_pars_fragment:Zne,logdepthbuf_pars_vertex:Qne,logdepthbuf_vertex:$ne,map_fragment:eae,map_pars_fragment:tae,map_particle_fragment:nae,map_particle_pars_fragment:aae,metalnessmap_fragment:rae,metalnessmap_pars_fragment:iae,morphinstance_vertex:sae,morphcolor_vertex:oae,morphnormal_vertex:lae,morphtarget_pars_vertex:cae,morphtarget_vertex:uae,normal_fragment_begin:dae,normal_fragment_maps:fae,normal_pars_fragment:hae,normal_pars_vertex:pae,normal_vertex:mae,normalmap_pars_fragment:gae,clearcoat_normal_fragment_begin:vae,clearcoat_normal_fragment_maps:yae,clearcoat_pars_fragment:xae,iridescence_pars_fragment:Aae,opaque_fragment:_ae,packing:bae,premultiplied_alpha_fragment:Sae,project_vertex:Eae,dithering_fragment:wae,dithering_pars_fragment:Rae,roughnessmap_fragment:Mae,roughnessmap_pars_fragment:Tae,shadowmap_pars_fragment:Nae,shadowmap_pars_vertex:Cae,shadowmap_vertex:Iae,shadowmask_pars_fragment:Dae,skinbase_vertex:Lae,skinning_pars_vertex:Pae,skinning_vertex:Oae,skinnormal_vertex:Uae,specularmap_fragment:Bae,specularmap_pars_fragment:Fae,tonemapping_fragment:kae,tonemapping_pars_fragment:Hae,transmission_fragment:jae,transmission_pars_fragment:zae,uv_pars_fragment:Gae,uv_pars_vertex:Vae,uv_vertex:Wae,worldpos_vertex:Kae,background_vert:Yae,background_frag:qae,backgroundCube_vert:Xae,backgroundCube_frag:Jae,cube_vert:Zae,cube_frag:Qae,depth_vert:$ae,depth_frag:ere,distanceRGBA_vert:tre,distanceRGBA_frag:nre,equirect_vert:are,equirect_frag:rre,linedashed_vert:ire,linedashed_frag:sre,meshbasic_vert:ore,meshbasic_frag:lre,meshlambert_vert:cre,meshlambert_frag:ure,meshmatcap_vert:dre,meshmatcap_frag:fre,meshnormal_vert:hre,meshnormal_frag:pre,meshphong_vert:mre,meshphong_frag:gre,meshphysical_vert:vre,meshphysical_frag:yre,meshtoon_vert:xre,meshtoon_frag:Are,points_vert:_re,points_frag:bre,shadow_vert:Sre,shadow_frag:Ere,sprite_vert:wre,sprite_frag:Rre},Mt={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},envMapRotation:{value:new bn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}}},vl={basic:{uniforms:as([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:as([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:as([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:as([Mt.common,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.roughnessmap,Mt.metalnessmap,Mt.fog,Mt.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:as([Mt.common,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.gradientmap,Mt.fog,Mt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:as([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:as([Mt.points,Mt.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:as([Mt.common,Mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:as([Mt.common,Mt.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:as([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:as([Mt.sprite,Mt.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new bn}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:as([Mt.common,Mt.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:as([Mt.lights,Mt.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};vl.physical={uniforms:as([vl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const fx={r:0,b:0,g:0},mh=new lo,Mre=new nn;function Tre(a,e,t,n,r,i,s){const o=new Et(0);let l=i===!0?0:1,c,d,h=null,m=0,v=null;function A(T){let M=T.isScene===!0?T.background:null;return M&&M.isTexture&&(M=(T.backgroundBlurriness>0?t:e).get(M)),M}function E(T){let M=!1;const I=A(T);I===null?_(o,l):I&&I.isColor&&(_(I,1),M=!0);const P=a.xr.getEnvironmentBlendMode();P==="additive"?n.buffers.color.setClear(0,0,0,1,s):P==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(a.autoClear||M)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))}function b(T,M){const I=A(M);I&&(I.isCubeTexture||I.mapping===N0)?(d===void 0&&(d=new ur(new ip(1,1,1),new Sl({name:"BackgroundCubeMaterial",uniforms:y0(vl.backgroundCube.uniforms),vertexShader:vl.backgroundCube.vertexShader,fragmentShader:vl.backgroundCube.fragmentShader,side:ss,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,B,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),mh.copy(M.backgroundRotation),mh.x*=-1,mh.y*=-1,mh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(mh.y*=-1,mh.z*=-1),d.material.uniforms.envMap.value=I,d.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Mre.makeRotationFromEuler(mh)),d.material.toneMapped=Fn.getTransfer(I.colorSpace)!==fa,(h!==I||m!==I.version||v!==a.toneMapping)&&(d.material.needsUpdate=!0,h=I,m=I.version,v=a.toneMapping),d.layers.enableAll(),T.unshift(d,d.geometry,d.material,0,0,null)):I&&I.isTexture&&(c===void 0&&(c=new ur(new D0(2,2),new Sl({name:"BackgroundMaterial",uniforms:y0(vl.background.uniforms),vertexShader:vl.background.vertexShader,fragmentShader:vl.background.fragmentShader,side:Tc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=I,c.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,c.material.toneMapped=Fn.getTransfer(I.colorSpace)!==fa,I.matrixAutoUpdate===!0&&I.updateMatrix(),c.material.uniforms.uvTransform.value.copy(I.matrix),(h!==I||m!==I.version||v!==a.toneMapping)&&(c.material.needsUpdate=!0,h=I,m=I.version,v=a.toneMapping),c.layers.enableAll(),T.unshift(c,c.geometry,c.material,0,0,null))}function _(T,M){T.getRGB(fx,vO(a)),n.buffers.color.setClear(fx.r,fx.g,fx.b,M,s)}function R(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(T,M=1){o.set(T),l=M,_(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,_(o,l)},render:E,addToRenderList:b,dispose:R}}function Nre(a,e){const t=a.getParameter(a.MAX_VERTEX_ATTRIBS),n={},r=m(null);let i=r,s=!1;function o(U,j,W,Q,$){let re=!1;const G=h(Q,W,j);i!==G&&(i=G,c(i.object)),re=v(U,Q,W,$),re&&A(U,Q,W,$),$!==null&&e.update($,a.ELEMENT_ARRAY_BUFFER),(re||s)&&(s=!1,M(U,j,W,Q),$!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function l(){return a.createVertexArray()}function c(U){return a.bindVertexArray(U)}function d(U){return a.deleteVertexArray(U)}function h(U,j,W){const Q=W.wireframe===!0;let $=n[U.id];$===void 0&&($={},n[U.id]=$);let re=$[j.id];re===void 0&&(re={},$[j.id]=re);let G=re[Q];return G===void 0&&(G=m(l()),re[Q]=G),G}function m(U){const j=[],W=[],Q=[];for(let $=0;$<t;$++)j[$]=0,W[$]=0,Q[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:W,attributeDivisors:Q,object:U,attributes:{},index:null}}function v(U,j,W,Q){const $=i.attributes,re=j.attributes;let G=0;const Y=W.getAttributes();for(const K in Y)if(Y[K].location>=0){const z=$[K];let J=re[K];if(J===void 0&&(K==="instanceMatrix"&&U.instanceMatrix&&(J=U.instanceMatrix),K==="instanceColor"&&U.instanceColor&&(J=U.instanceColor)),z===void 0||z.attribute!==J||J&&z.data!==J.data)return!0;G++}return i.attributesNum!==G||i.index!==Q}function A(U,j,W,Q){const $={},re=j.attributes;let G=0;const Y=W.getAttributes();for(const K in Y)if(Y[K].location>=0){let z=re[K];z===void 0&&(K==="instanceMatrix"&&U.instanceMatrix&&(z=U.instanceMatrix),K==="instanceColor"&&U.instanceColor&&(z=U.instanceColor));const J={};J.attribute=z,z&&z.data&&(J.data=z.data),$[K]=J,G++}i.attributes=$,i.attributesNum=G,i.index=Q}function E(){const U=i.newAttributes;for(let j=0,W=U.length;j<W;j++)U[j]=0}function b(U){_(U,0)}function _(U,j){const W=i.newAttributes,Q=i.enabledAttributes,$=i.attributeDivisors;W[U]=1,Q[U]===0&&(a.enableVertexAttribArray(U),Q[U]=1),$[U]!==j&&(a.vertexAttribDivisor(U,j),$[U]=j)}function R(){const U=i.newAttributes,j=i.enabledAttributes;for(let W=0,Q=j.length;W<Q;W++)j[W]!==U[W]&&(a.disableVertexAttribArray(W),j[W]=0)}function T(U,j,W,Q,$,re,G){G===!0?a.vertexAttribIPointer(U,j,W,$,re):a.vertexAttribPointer(U,j,W,Q,$,re)}function M(U,j,W,Q){E();const $=Q.attributes,re=W.getAttributes(),G=j.defaultAttributeValues;for(const Y in re){const K=re[Y];if(K.location>=0){let X=$[Y];if(X===void 0&&(Y==="instanceMatrix"&&U.instanceMatrix&&(X=U.instanceMatrix),Y==="instanceColor"&&U.instanceColor&&(X=U.instanceColor)),X!==void 0){const z=X.normalized,J=X.itemSize,le=e.get(X);if(le===void 0)continue;const ce=le.buffer,xe=le.type,fe=le.bytesPerElement,_e=xe===a.INT||xe===a.UNSIGNED_INT||X.gpuType===E_;if(X.isInterleavedBufferAttribute){const Ie=X.data,Ge=Ie.stride,Ue=X.offset;if(Ie.isInstancedInterleavedBuffer){for(let $e=0;$e<K.locationSize;$e++)_(K.location+$e,Ie.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let $e=0;$e<K.locationSize;$e++)b(K.location+$e);a.bindBuffer(a.ARRAY_BUFFER,ce);for(let $e=0;$e<K.locationSize;$e++)T(K.location+$e,J/K.locationSize,xe,z,Ge*fe,(Ue+J/K.locationSize*$e)*fe,_e)}else{if(X.isInstancedBufferAttribute){for(let Ie=0;Ie<K.locationSize;Ie++)_(K.location+Ie,X.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Ie=0;Ie<K.locationSize;Ie++)b(K.location+Ie);a.bindBuffer(a.ARRAY_BUFFER,ce);for(let Ie=0;Ie<K.locationSize;Ie++)T(K.location+Ie,J/K.locationSize,xe,z,J*fe,J/K.locationSize*Ie*fe,_e)}}else if(G!==void 0){const z=G[Y];if(z!==void 0)switch(z.length){case 2:a.vertexAttrib2fv(K.location,z);break;case 3:a.vertexAttrib3fv(K.location,z);break;case 4:a.vertexAttrib4fv(K.location,z);break;default:a.vertexAttrib1fv(K.location,z)}}}}R()}function I(){F();for(const U in n){const j=n[U];for(const W in j){const Q=j[W];for(const $ in Q)d(Q[$].object),delete Q[$];delete j[W]}delete n[U]}}function P(U){if(n[U.id]===void 0)return;const j=n[U.id];for(const W in j){const Q=j[W];for(const $ in Q)d(Q[$].object),delete Q[$];delete j[W]}delete n[U.id]}function B(U){for(const j in n){const W=n[j];if(W[U.id]===void 0)continue;const Q=W[U.id];for(const $ in Q)d(Q[$].object),delete Q[$];delete W[U.id]}}function F(){L(),s=!0,i!==r&&(i=r,c(i.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:F,resetDefaultState:L,dispose:I,releaseStatesOfGeometry:P,releaseStatesOfProgram:B,initAttributes:E,enableAttribute:b,disableUnusedAttributes:R}}function Cre(a,e,t){let n;function r(c){n=c}function i(c,d){a.drawArrays(n,c,d),t.update(d,n,1)}function s(c,d,h){h!==0&&(a.drawArraysInstanced(n,c,d,h),t.update(d,n,h))}function o(c,d,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,d,0,h);let v=0;for(let A=0;A<h;A++)v+=d[A];t.update(v,n,1)}function l(c,d,h,m){if(h===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let A=0;A<c.length;A++)s(c[A],d[A],m[A]);else{v.multiDrawArraysInstancedWEBGL(n,c,0,d,0,m,0,h);let A=0;for(let E=0;E<h;E++)A+=d[E]*m[E];t.update(A,n,1)}}this.setMode=r,this.render=i,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Ire(a,e,t,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=a.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(B){return!(B!==Pi&&n.convert(B)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(B){const F=B===C0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(B!==Bo&&n.convert(B)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==Ts&&!F)}function l(B){if(B==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),v=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),A=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=a.getParameter(a.MAX_TEXTURE_SIZE),b=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),_=a.getParameter(a.MAX_VERTEX_ATTRIBS),R=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),T=a.getParameter(a.MAX_VARYING_VECTORS),M=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),I=A>0,P=a.getParameter(a.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:i,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,reversedDepthBuffer:m,maxTextures:v,maxVertexTextures:A,maxTextureSize:E,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:R,maxVaryings:T,maxFragmentUniforms:M,vertexTextures:I,maxSamples:P}}function Dre(a){const e=this;let t=null,n=0,r=!1,i=!1;const s=new mu,o=new bn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){const v=h.length!==0||m||n!==0||r;return r=m,n=h.length,v},this.beginShadows=function(){i=!0,d(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(h,m){t=d(h,m,0)},this.setState=function(h,m,v){const A=h.clippingPlanes,E=h.clipIntersection,b=h.clipShadows,_=a.get(h);if(!r||A===null||A.length===0||i&&!b)i?d(null):c();else{const R=i?0:n,T=R*4;let M=_.clippingState||null;l.value=M,M=d(A,m,T,v);for(let I=0;I!==T;++I)M[I]=t[I];_.clippingState=M,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=R}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(h,m,v,A){const E=h!==null?h.length:0;let b=null;if(E!==0){if(b=l.value,A!==!0||b===null){const _=v+E*4,R=m.matrixWorldInverse;o.getNormalMatrix(R),(b===null||b.length<_)&&(b=new Float32Array(_));for(let T=0,M=v;T!==E;++T,M+=4)s.copy(h[T]).applyMatrix4(R,o),s.normal.toArray(b,M),b[M+3]=s.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,b}}function Lre(a){let e=new WeakMap;function t(s,o){return o===Yv?s.mapping=wu:o===qv&&(s.mapping=ef),s}function n(s){if(s&&s.isTexture){const o=s.mapping;if(o===Yv||o===qv)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new AO(l.height);return c.fromEquirectangularTexture(a,s),e.set(s,c),s.addEventListener("dispose",r),t(c.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function i(){e=new WeakMap}return{get:n,dispose:i}}const Wm=4,C4=[.125,.215,.35,.446,.526,.582],Mh=20,LE=new Su,I4=new Et;let PE=null,OE=0,UE=0,BE=!1;const Eh=(1+Math.sqrt(5))/2,Um=1/Eh,D4=[new ae(-Eh,Um,0),new ae(Eh,Um,0),new ae(-Um,0,Eh),new ae(Um,0,Eh),new ae(0,Eh,-Um),new ae(0,Eh,Um),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)],Pre=new ae;class tw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,i={}){const{size:s=256,position:o=Pre}=i;PE=this._renderer.getRenderTarget(),OE=this._renderer.getActiveCubeFace(),UE=this._renderer.getActiveMipmapLevel(),BE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=O4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=P4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(PE,OE,UE),this._renderer.xr.enabled=BE,e.scissorTest=!1,hx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===wu||e.mapping===ef?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),PE=this._renderer.getRenderTarget(),OE=this._renderer.getActiveCubeFace(),UE=this._renderer.getActiveMipmapLevel(),BE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:tr,minFilter:tr,generateMipmaps:!1,type:C0,format:Pi,colorSpace:pi,depthBuffer:!1},r=L4(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=L4(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ore(i)),this._blurMaterial=Ure(i,e,t)}return r}_compileMaterial(e){const t=new ur(this._lodPlanes[0],e);this._renderer.compile(t,LE)}_sceneToCubeUV(e,t,n,r,i){const l=new er(90,1,t,n),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,m=h.autoClear,v=h.toneMapping;h.getClearColor(I4),h.toneMapping=Ec,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(r),h.clearDepth(),h.setRenderTarget(null));const E=new ro({name:"PMREM.Background",side:ss,depthWrite:!1,depthTest:!1}),b=new ur(new ip,E);let _=!1;const R=e.background;R?R.isColor&&(E.color.copy(R),e.background=null,_=!0):(E.color.copy(I4),_=!0);for(let T=0;T<6;T++){const M=T%3;M===0?(l.up.set(0,c[T],0),l.position.set(i.x,i.y,i.z),l.lookAt(i.x+d[T],i.y,i.z)):M===1?(l.up.set(0,0,c[T]),l.position.set(i.x,i.y,i.z),l.lookAt(i.x,i.y+d[T],i.z)):(l.up.set(0,c[T],0),l.position.set(i.x,i.y,i.z),l.lookAt(i.x,i.y,i.z+d[T]));const I=this._cubeSize;hx(r,M*I,T>2?I:0,I,I),h.setRenderTarget(r),_&&h.render(b,l),h.render(e,l)}b.geometry.dispose(),b.material.dispose(),h.toneMapping=v,h.autoClear=m,e.background=R}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===wu||e.mapping===ef;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=O4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=P4());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new ur(this._lodPlanes[0],i),o=i.uniforms;o.envMap.value=e;const l=this._cubeSize;hx(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(s,LE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=D4[(r-i-1)%D4.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new ur(this._lodPlanes[r],c),m=c.uniforms,v=this._sizeLods[n]-1,A=isFinite(i)?Math.PI/(2*v):2*Math.PI/(2*Mh-1),E=i/A,b=isFinite(i)?1+Math.floor(d*E):Mh;b>Mh&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Mh}`);const _=[];let R=0;for(let B=0;B<Mh;++B){const F=B/E,L=Math.exp(-F*F/2);_.push(L),B===0?R+=L:B<b&&(R+=2*L)}for(let B=0;B<_.length;B++)_[B]=_[B]/R;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=_,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:T}=this;m.dTheta.value=A,m.mipInt.value=T-n;const M=this._sizeLods[r],I=3*M*(r>T-Wm?r-T+Wm:0),P=4*(this._cubeSize-M);hx(t,I,P,3*M,2*M),l.setRenderTarget(t),l.render(h,LE)}}function Ore(a){const e=[],t=[],n=[];let r=a;const i=a-Wm+1+C4.length;for(let s=0;s<i;s++){const o=Math.pow(2,r);t.push(o);let l=1/o;s>a-Wm?l=C4[s-a+Wm-1]:s===0&&(l=0),n.push(l);const c=1/(o-2),d=-c,h=1+c,m=[d,d,h,d,h,h,d,d,h,h,d,h],v=6,A=6,E=3,b=2,_=1,R=new Float32Array(E*A*v),T=new Float32Array(b*A*v),M=new Float32Array(_*A*v);for(let P=0;P<v;P++){const B=P%3*2/3-1,F=P>2?0:-1,L=[B,F,0,B+2/3,F,0,B+2/3,F+1,0,B,F,0,B+2/3,F+1,0,B,F+1,0];R.set(L,E*A*P),T.set(m,b*A*P);const U=[P,P,P,P,P,P];M.set(U,_*A*P)}const I=new Sn;I.setAttribute("position",new ra(R,E)),I.setAttribute("uv",new ra(T,b)),I.setAttribute("faceIndex",new ra(M,_)),e.push(I),r>Wm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function L4(a,e,t){const n=new Nc(a,e,t);return n.texture.mapping=N0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hx(a,e,t,n,r){a.viewport.set(e,t,n,r),a.scissor.set(e,t,n,r)}function Ure(a,e,t){const n=new Float32Array(Mh),r=new ae(0,1,0);return new Sl({name:"SphericalGaussianBlur",defines:{n:Mh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:yM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function P4(){return new Sl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function O4(){return new Sl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function yM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bre(a){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===Yv||l===qv,d=l===wu||l===ef;if(c||d){let h=e.get(o);const m=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return t===null&&(t=new tw(a)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const v=o.image;return c&&v&&v.height>0||d&&v&&r(v)?(t===null&&(t=new tw(a)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",i),h.texture):null}}}return o}function r(o){let l=0;const c=6;for(let d=0;d<c;d++)o[d]!==void 0&&l++;return l===c}function i(o){const l=o.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function Fre(a){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=a.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&t0("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function kre(a,e,t,n){const r={},i=new WeakMap;function s(h){const m=h.target;m.index!==null&&e.remove(m.index);for(const A in m.attributes)e.remove(m.attributes[A]);m.removeEventListener("dispose",s),delete r[m.id];const v=i.get(m);v&&(e.remove(v),i.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(h,m){return r[m.id]===!0||(m.addEventListener("dispose",s),r[m.id]=!0,t.memory.geometries++),m}function l(h){const m=h.attributes;for(const v in m)e.update(m[v],a.ARRAY_BUFFER)}function c(h){const m=[],v=h.index,A=h.attributes.position;let E=0;if(v!==null){const R=v.array;E=v.version;for(let T=0,M=R.length;T<M;T+=3){const I=R[T+0],P=R[T+1],B=R[T+2];m.push(I,P,P,B,B,I)}}else if(A!==void 0){const R=A.array;E=A.version;for(let T=0,M=R.length/3-1;T<M;T+=3){const I=T+0,P=T+1,B=T+2;m.push(I,P,P,B,B,I)}}else return;const b=new(hO(m)?zR:jR)(m,1);b.version=E;const _=i.get(h);_&&e.remove(_),i.set(h,b)}function d(h){const m=i.get(h);if(m){const v=h.index;v!==null&&m.version<v.version&&c(h)}else c(h);return i.get(h)}return{get:o,update:l,getWireframeAttribute:d}}function Hre(a,e,t){let n;function r(m){n=m}let i,s;function o(m){i=m.type,s=m.bytesPerElement}function l(m,v){a.drawElements(n,v,i,m*s),t.update(v,n,1)}function c(m,v,A){A!==0&&(a.drawElementsInstanced(n,v,i,m*s,A),t.update(v,n,A))}function d(m,v,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,v,0,i,m,0,A);let b=0;for(let _=0;_<A;_++)b+=v[_];t.update(b,n,1)}function h(m,v,A,E){if(A===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let _=0;_<m.length;_++)c(m[_]/s,v[_],E[_]);else{b.multiDrawElementsInstancedWEBGL(n,v,0,i,m,0,E,0,A);let _=0;for(let R=0;R<A;R++)_+=v[R]*E[R];t.update(_,n,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=h}function jre(a){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(i,s,o){switch(t.calls++,s){case a.TRIANGLES:t.triangles+=o*(i/3);break;case a.LINES:t.lines+=o*(i/2);break;case a.LINE_STRIP:t.lines+=o*(i-1);break;case a.LINE_LOOP:t.lines+=o*i;break;case a.POINTS:t.points+=o*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function zre(a,e,t){const n=new WeakMap,r=new Jn;function i(s,o,l){const c=s.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=d!==void 0?d.length:0;let m=n.get(o);if(m===void 0||m.count!==h){let L=function(){B.dispose(),n.delete(o),o.removeEventListener("dispose",L)};m!==void 0&&m.texture.dispose();const v=o.morphAttributes.position!==void 0,A=o.morphAttributes.normal!==void 0,E=o.morphAttributes.color!==void 0,b=o.morphAttributes.position||[],_=o.morphAttributes.normal||[],R=o.morphAttributes.color||[];let T=0;v===!0&&(T=1),A===!0&&(T=2),E===!0&&(T=3);let M=o.attributes.position.count*T,I=1;M>e.maxTextureSize&&(I=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const P=new Float32Array(M*I*4*h),B=new I_(P,M,I,h);B.type=Ts,B.needsUpdate=!0;const F=T*4;for(let U=0;U<h;U++){const j=b[U],W=_[U],Q=R[U],$=M*I*4*U;for(let re=0;re<j.count;re++){const G=re*F;v===!0&&(r.fromBufferAttribute(j,re),P[$+G+0]=r.x,P[$+G+1]=r.y,P[$+G+2]=r.z,P[$+G+3]=0),A===!0&&(r.fromBufferAttribute(W,re),P[$+G+4]=r.x,P[$+G+5]=r.y,P[$+G+6]=r.z,P[$+G+7]=0),E===!0&&(r.fromBufferAttribute(Q,re),P[$+G+8]=r.x,P[$+G+9]=r.y,P[$+G+10]=r.z,P[$+G+11]=Q.itemSize===4?r.w:1)}}m={count:h,texture:B,size:new Ze(M,I)},n.set(o,m),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(a,"morphTexture",s.morphTexture,t);else{let v=0;for(let E=0;E<c.length;E++)v+=c[E];const A=o.morphTargetsRelative?1:1-v;l.getUniforms().setValue(a,"morphTargetBaseInfluence",A),l.getUniforms().setValue(a,"morphTargetInfluences",c)}l.getUniforms().setValue(a,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(a,"morphTargetsTextureSize",m.size)}return{update:i}}function Gre(a,e,t,n){let r=new WeakMap;function i(l){const c=n.render.frame,d=l.geometry,h=e.get(l,d);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,a.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,a.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==c&&(m.update(),r.set(m,c))}return h}function s(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:i,dispose:s}}const h6=new Ua,U4=new XR(1,1),p6=new I_,m6=new D_,g6=new b1,B4=[],F4=[],k4=new Float32Array(16),H4=new Float32Array(9),j4=new Float32Array(4);function P0(a,e,t){const n=a[0];if(n<=0||n>0)return a;const r=e*t;let i=B4[r];if(i===void 0&&(i=new Float32Array(r),B4[r]=i),e!==0){n.toArray(i,0);for(let s=1,o=0;s!==e;++s)o+=t,a[s].toArray(i,o)}return i}function Hr(a,e){if(a.length!==e.length)return!1;for(let t=0,n=a.length;t<n;t++)if(a[t]!==e[t])return!1;return!0}function jr(a,e){for(let t=0,n=e.length;t<n;t++)a[t]=e[t]}function eb(a,e){let t=F4[e];t===void 0&&(t=new Int32Array(e),F4[e]=t);for(let n=0;n!==e;++n)t[n]=a.allocateTextureUnit();return t}function Vre(a,e){const t=this.cache;t[0]!==e&&(a.uniform1f(this.addr,e),t[0]=e)}function Wre(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hr(t,e))return;a.uniform2fv(this.addr,e),jr(t,e)}}function Kre(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Hr(t,e))return;a.uniform3fv(this.addr,e),jr(t,e)}}function Yre(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hr(t,e))return;a.uniform4fv(this.addr,e),jr(t,e)}}function qre(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hr(t,e))return;a.uniformMatrix2fv(this.addr,!1,e),jr(t,e)}else{if(Hr(t,n))return;j4.set(n),a.uniformMatrix2fv(this.addr,!1,j4),jr(t,n)}}function Xre(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hr(t,e))return;a.uniformMatrix3fv(this.addr,!1,e),jr(t,e)}else{if(Hr(t,n))return;H4.set(n),a.uniformMatrix3fv(this.addr,!1,H4),jr(t,n)}}function Jre(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hr(t,e))return;a.uniformMatrix4fv(this.addr,!1,e),jr(t,e)}else{if(Hr(t,n))return;k4.set(n),a.uniformMatrix4fv(this.addr,!1,k4),jr(t,n)}}function Zre(a,e){const t=this.cache;t[0]!==e&&(a.uniform1i(this.addr,e),t[0]=e)}function Qre(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hr(t,e))return;a.uniform2iv(this.addr,e),jr(t,e)}}function $re(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hr(t,e))return;a.uniform3iv(this.addr,e),jr(t,e)}}function eie(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hr(t,e))return;a.uniform4iv(this.addr,e),jr(t,e)}}function tie(a,e){const t=this.cache;t[0]!==e&&(a.uniform1ui(this.addr,e),t[0]=e)}function nie(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hr(t,e))return;a.uniform2uiv(this.addr,e),jr(t,e)}}function aie(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hr(t,e))return;a.uniform3uiv(this.addr,e),jr(t,e)}}function rie(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hr(t,e))return;a.uniform4uiv(this.addr,e),jr(t,e)}}function iie(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r);let i;this.type===a.SAMPLER_2D_SHADOW?(U4.compareFunction=FR,i=U4):i=h6,t.setTexture2D(e||i,r)}function sie(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||m6,r)}function oie(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||g6,r)}function lie(a,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(a.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||p6,r)}function cie(a){switch(a){case 5126:return Vre;case 35664:return Wre;case 35665:return Kre;case 35666:return Yre;case 35674:return qre;case 35675:return Xre;case 35676:return Jre;case 5124:case 35670:return Zre;case 35667:case 35671:return Qre;case 35668:case 35672:return $re;case 35669:case 35673:return eie;case 5125:return tie;case 36294:return nie;case 36295:return aie;case 36296:return rie;case 35678:case 36198:case 36298:case 36306:case 35682:return iie;case 35679:case 36299:case 36307:return sie;case 35680:case 36300:case 36308:case 36293:return oie;case 36289:case 36303:case 36311:case 36292:return lie}}function uie(a,e){a.uniform1fv(this.addr,e)}function die(a,e){const t=P0(e,this.size,2);a.uniform2fv(this.addr,t)}function fie(a,e){const t=P0(e,this.size,3);a.uniform3fv(this.addr,t)}function hie(a,e){const t=P0(e,this.size,4);a.uniform4fv(this.addr,t)}function pie(a,e){const t=P0(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,t)}function mie(a,e){const t=P0(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,t)}function gie(a,e){const t=P0(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,t)}function vie(a,e){a.uniform1iv(this.addr,e)}function yie(a,e){a.uniform2iv(this.addr,e)}function xie(a,e){a.uniform3iv(this.addr,e)}function Aie(a,e){a.uniform4iv(this.addr,e)}function _ie(a,e){a.uniform1uiv(this.addr,e)}function bie(a,e){a.uniform2uiv(this.addr,e)}function Sie(a,e){a.uniform3uiv(this.addr,e)}function Eie(a,e){a.uniform4uiv(this.addr,e)}function wie(a,e,t){const n=this.cache,r=e.length,i=eb(t,r);Hr(n,i)||(a.uniform1iv(this.addr,i),jr(n,i));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||h6,i[s])}function Rie(a,e,t){const n=this.cache,r=e.length,i=eb(t,r);Hr(n,i)||(a.uniform1iv(this.addr,i),jr(n,i));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||m6,i[s])}function Mie(a,e,t){const n=this.cache,r=e.length,i=eb(t,r);Hr(n,i)||(a.uniform1iv(this.addr,i),jr(n,i));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||g6,i[s])}function Tie(a,e,t){const n=this.cache,r=e.length,i=eb(t,r);Hr(n,i)||(a.uniform1iv(this.addr,i),jr(n,i));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||p6,i[s])}function Nie(a){switch(a){case 5126:return uie;case 35664:return die;case 35665:return fie;case 35666:return hie;case 35674:return pie;case 35675:return mie;case 35676:return gie;case 5124:case 35670:return vie;case 35667:case 35671:return yie;case 35668:case 35672:return xie;case 35669:case 35673:return Aie;case 5125:return _ie;case 36294:return bie;case 36295:return Sie;case 36296:return Eie;case 35678:case 36198:case 36298:case 36306:case 35682:return wie;case 35679:case 36299:case 36307:return Rie;case 35680:case 36300:case 36308:case 36293:return Mie;case 36289:case 36303:case 36311:case 36292:return Tie}}class Cie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=cie(t.type)}}class Iie{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Nie(t.type)}}class Die{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const FE=/(\w+)(\])?(\[|\.)?/g;function z4(a,e){a.seq.push(e),a.map[e.id]=e}function Lie(a,e,t){const n=a.name,r=n.length;for(FE.lastIndex=0;;){const i=FE.exec(n),s=FE.lastIndex;let o=i[1];const l=i[2]==="]",c=i[3];if(l&&(o=o|0),c===void 0||c==="["&&s+2===r){z4(t,c===void 0?new Cie(o,a,e):new Iie(o,a,e));break}else{let h=t.map[o];h===void 0&&(h=new Die(o),z4(t,h)),t=h}}}class Rx{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const i=e.getActiveUniform(t,r),s=e.getUniformLocation(t,i.name);Lie(i,s,this)}}setValue(e,t,n,r){const i=this.map[t];i!==void 0&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const o=t[i],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function G4(a,e,t){const n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),n}const Pie=37297;let Oie=0;function Uie(a,e){const t=a.split(`
`),n=[],r=Math.max(e-6,0),i=Math.min(e+6,t.length);for(let s=r;s<i;s++){const o=s+1;n.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return n.join(`
`)}const V4=new bn;function Bie(a){Fn._getMatrix(V4,Fn.workingColorSpace,a);const e=`mat3( ${V4.elements.map(t=>t.toFixed(4))} )`;switch(Fn.getTransfer(a)){case Jv:return[e,"LinearTransferOETF"];case fa:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",a),[e,"LinearTransferOETF"]}}function W4(a,e,t){const n=a.getShaderParameter(e,a.COMPILE_STATUS),i=(a.getShaderInfoLog(e)||"").trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Uie(a.getShaderSource(e),o)}else return i}function Fie(a,e){const t=Bie(e);return[`vec4 ${a}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function kie(a,e){let t;switch(e){case WP:t="Linear";break;case KP:t="Reinhard";break;case YP:t="Cineon";break;case TR:t="ACESFilmic";break;case XP:t="AgX";break;case JP:t="Neutral";break;case qP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+a+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const px=new ae;function Hie(){Fn.getLuminanceCoefficients(px);const a=px.x.toFixed(4),e=px.y.toFixed(4),t=px.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${a}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function jie(a){return[a.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",a.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(bv).join(`
`)}function zie(a){const e=[];for(const t in a){const n=a[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Gie(a,e){const t={},n=a.getProgramParameter(e,a.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const i=a.getActiveAttrib(e,r),s=i.name;let o=1;i.type===a.FLOAT_MAT2&&(o=2),i.type===a.FLOAT_MAT3&&(o=3),i.type===a.FLOAT_MAT4&&(o=4),t[s]={type:i.type,location:a.getAttribLocation(e,s),locationSize:o}}return t}function bv(a){return a!==""}function K4(a,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Y4(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Vie=/^[ \t]*#include +<([\w\d./]+)>/gm;function nw(a){return a.replace(Vie,Kie)}const Wie=new Map;function Kie(a,e){let t=Cn[e];if(t===void 0){const n=Wie.get(e);if(n!==void 0)t=Cn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return nw(t)}const Yie=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function q4(a){return a.replace(Yie,qie)}function qie(a,e,t,n){let r="";for(let i=parseInt(e);i<parseInt(t);i++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return r}function X4(a){let e=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Xie(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===__?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===Rv?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===ml&&(e="SHADOWMAP_TYPE_VSM"),e}function Jie(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case wu:case ef:e="ENVMAP_TYPE_CUBE";break;case N0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Zie(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case ef:e="ENVMAP_MODE_REFRACTION";break}return e}function Qie(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case A1:e="ENVMAP_BLENDING_MULTIPLY";break;case GP:e="ENVMAP_BLENDING_MIX";break;case VP:e="ENVMAP_BLENDING_ADD";break}return e}function $ie(a){const e=a.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function ese(a,e,t,n){const r=a.getContext(),i=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=Xie(t),c=Jie(t),d=Zie(t),h=Qie(t),m=$ie(t),v=jie(t),A=zie(i),E=r.createProgram();let b,_,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(bv).join(`
`),b.length>0&&(b+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(bv).join(`
`),_.length>0&&(_+=`
`)):(b=[X4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bv).join(`
`),_=[X4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ec?"#define TONE_MAPPING":"",t.toneMapping!==Ec?Cn.tonemapping_pars_fragment:"",t.toneMapping!==Ec?kie("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,Fie("linearToOutputTexel",t.outputColorSpace),Hie(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(bv).join(`
`)),s=nw(s),s=K4(s,t),s=Y4(s,t),o=nw(o),o=K4(o,t),o=Y4(o,t),s=q4(s),o=q4(o),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,b=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,_=["#define varying in",t.glslVersion===Y3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Y3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const T=R+b+s,M=R+_+o,I=G4(r,r.VERTEX_SHADER,T),P=G4(r,r.FRAGMENT_SHADER,M);r.attachShader(E,I),r.attachShader(E,P),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E);function B(j){if(a.debug.checkShaderErrors){const W=r.getProgramInfoLog(E)||"",Q=r.getShaderInfoLog(I)||"",$=r.getShaderInfoLog(P)||"",re=W.trim(),G=Q.trim(),Y=$.trim();let K=!0,X=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(K=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(r,E,I,P);else{const z=W4(r,I,"vertex"),J=W4(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+re+`
`+z+`
`+J)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(G===""||Y==="")&&(X=!1);X&&(j.diagnostics={runnable:K,programLog:re,vertexShader:{log:G,prefix:b},fragmentShader:{log:Y,prefix:_}})}r.deleteShader(I),r.deleteShader(P),F=new Rx(r,E),L=Gie(r,E)}let F;this.getUniforms=function(){return F===void 0&&B(this),F};let L;this.getAttributes=function(){return L===void 0&&B(this),L};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(E,Pie)),U},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Oie++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=P,this}let tse=0;class nse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(i)===!1&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new ase(e),t.set(e,n)),n}}class ase{constructor(e){this.id=tse++,this.code=e,this.usedTimes=0}}function rse(a,e,t,n,r,i,s){const o=new v0,l=new nse,c=new Set,d=[],h=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(L){return c.add(L),L===0?"uv":`uv${L}`}function b(L,U,j,W,Q){const $=W.fog,re=Q.geometry,G=L.isMeshStandardMaterial?W.environment:null,Y=(L.isMeshStandardMaterial?t:e).get(L.envMap||G),K=Y&&Y.mapping===N0?Y.image.height:null,X=A[L.type];L.precision!==null&&(v=r.getMaxPrecision(L.precision),v!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",v,"instead."));const z=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,J=z!==void 0?z.length:0;let le=0;re.morphAttributes.position!==void 0&&(le=1),re.morphAttributes.normal!==void 0&&(le=2),re.morphAttributes.color!==void 0&&(le=3);let ce,xe,fe,_e;if(X){const mn=vl[X];ce=mn.vertexShader,xe=mn.fragmentShader}else ce=L.vertexShader,xe=L.fragmentShader,l.update(L),fe=l.getVertexShaderID(L),_e=l.getFragmentShaderID(L);const Ie=a.getRenderTarget(),Ge=a.state.buffers.depth.getReversed(),Ue=Q.isInstancedMesh===!0,$e=Q.isBatchedMesh===!0,dt=!!L.map,ct=!!L.matcap,se=!!Y,Be=!!L.aoMap,Le=!!L.lightMap,Ke=!!L.bumpMap,ze=!!L.normalMap,ot=!!L.displacementMap,Qe=!!L.emissiveMap,st=!!L.metalnessMap,Ot=!!L.roughnessMap,zt=L.anisotropy>0,ie=L.clearcoat>0,q=L.dispersion>0,be=L.iridescence>0,je=L.sheen>0,Ye=L.transmission>0,Pe=zt&&!!L.anisotropyMap,_t=ie&&!!L.clearcoatMap,mt=ie&&!!L.clearcoatNormalMap,Ct=ie&&!!L.clearcoatRoughnessMap,Dt=be&&!!L.iridescenceMap,rt=be&&!!L.iridescenceThicknessMap,gt=je&&!!L.sheenColorMap,Lt=je&&!!L.sheenRoughnessMap,ue=!!L.specularMap,Me=!!L.specularColorMap,ft=!!L.specularIntensityMap,pe=Ye&&!!L.transmissionMap,nt=Ye&&!!L.thicknessMap,ut=!!L.gradientMap,bt=!!L.alphaMap,lt=L.alphaTest>0,et=!!L.alphaHash,wt=!!L.extensions;let jt=Ec;L.toneMapped&&(Ie===null||Ie.isXRRenderTarget===!0)&&(jt=a.toneMapping);const En={shaderID:X,shaderType:L.type,shaderName:L.name,vertexShader:ce,fragmentShader:xe,defines:L.defines,customVertexShaderID:fe,customFragmentShaderID:_e,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:v,batching:$e,batchingColor:$e&&Q._colorsTexture!==null,instancing:Ue,instancingColor:Ue&&Q.instanceColor!==null,instancingMorph:Ue&&Q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Ie===null?a.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:pi,alphaToCoverage:!!L.alphaToCoverage,map:dt,matcap:ct,envMap:se,envMapMode:se&&Y.mapping,envMapCubeUVHeight:K,aoMap:Be,lightMap:Le,bumpMap:Ke,normalMap:ze,displacementMap:m&&ot,emissiveMap:Qe,normalMapObjectSpace:ze&&L.normalMapType===rO,normalMapTangentSpace:ze&&L.normalMapType===of,metalnessMap:st,roughnessMap:Ot,anisotropy:zt,anisotropyMap:Pe,clearcoat:ie,clearcoatMap:_t,clearcoatNormalMap:mt,clearcoatRoughnessMap:Ct,dispersion:q,iridescence:be,iridescenceMap:Dt,iridescenceThicknessMap:rt,sheen:je,sheenColorMap:gt,sheenRoughnessMap:Lt,specularMap:ue,specularColorMap:Me,specularIntensityMap:ft,transmission:Ye,transmissionMap:pe,thicknessMap:nt,gradientMap:ut,opaque:L.transparent===!1&&L.blending===kh&&L.alphaToCoverage===!1,alphaMap:bt,alphaTest:lt,alphaHash:et,combine:L.combine,mapUv:dt&&E(L.map.channel),aoMapUv:Be&&E(L.aoMap.channel),lightMapUv:Le&&E(L.lightMap.channel),bumpMapUv:Ke&&E(L.bumpMap.channel),normalMapUv:ze&&E(L.normalMap.channel),displacementMapUv:ot&&E(L.displacementMap.channel),emissiveMapUv:Qe&&E(L.emissiveMap.channel),metalnessMapUv:st&&E(L.metalnessMap.channel),roughnessMapUv:Ot&&E(L.roughnessMap.channel),anisotropyMapUv:Pe&&E(L.anisotropyMap.channel),clearcoatMapUv:_t&&E(L.clearcoatMap.channel),clearcoatNormalMapUv:mt&&E(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ct&&E(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Dt&&E(L.iridescenceMap.channel),iridescenceThicknessMapUv:rt&&E(L.iridescenceThicknessMap.channel),sheenColorMapUv:gt&&E(L.sheenColorMap.channel),sheenRoughnessMapUv:Lt&&E(L.sheenRoughnessMap.channel),specularMapUv:ue&&E(L.specularMap.channel),specularColorMapUv:Me&&E(L.specularColorMap.channel),specularIntensityMapUv:ft&&E(L.specularIntensityMap.channel),transmissionMapUv:pe&&E(L.transmissionMap.channel),thicknessMapUv:nt&&E(L.thicknessMap.channel),alphaMapUv:bt&&E(L.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(ze||zt),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!re.attributes.uv&&(dt||bt),fog:!!$,useFog:L.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:Ge,skinning:Q.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:le,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:L.dithering,shadowMapEnabled:a.shadowMap.enabled&&j.length>0,shadowMapType:a.shadowMap.type,toneMapping:jt,decodeVideoTexture:dt&&L.map.isVideoTexture===!0&&Fn.getTransfer(L.map.colorSpace)===fa,decodeVideoTextureEmissive:Qe&&L.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(L.emissiveMap.colorSpace)===fa,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===yl,flipSided:L.side===ss,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:wt&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(wt&&L.extensions.multiDraw===!0||$e)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return En.vertexUv1s=c.has(1),En.vertexUv2s=c.has(2),En.vertexUv3s=c.has(3),c.clear(),En}function _(L){const U=[];if(L.shaderID?U.push(L.shaderID):(U.push(L.customVertexShaderID),U.push(L.customFragmentShaderID)),L.defines!==void 0)for(const j in L.defines)U.push(j),U.push(L.defines[j]);return L.isRawShaderMaterial===!1&&(R(U,L),T(U,L),U.push(a.outputColorSpace)),U.push(L.customProgramCacheKey),U.join()}function R(L,U){L.push(U.precision),L.push(U.outputColorSpace),L.push(U.envMapMode),L.push(U.envMapCubeUVHeight),L.push(U.mapUv),L.push(U.alphaMapUv),L.push(U.lightMapUv),L.push(U.aoMapUv),L.push(U.bumpMapUv),L.push(U.normalMapUv),L.push(U.displacementMapUv),L.push(U.emissiveMapUv),L.push(U.metalnessMapUv),L.push(U.roughnessMapUv),L.push(U.anisotropyMapUv),L.push(U.clearcoatMapUv),L.push(U.clearcoatNormalMapUv),L.push(U.clearcoatRoughnessMapUv),L.push(U.iridescenceMapUv),L.push(U.iridescenceThicknessMapUv),L.push(U.sheenColorMapUv),L.push(U.sheenRoughnessMapUv),L.push(U.specularMapUv),L.push(U.specularColorMapUv),L.push(U.specularIntensityMapUv),L.push(U.transmissionMapUv),L.push(U.thicknessMapUv),L.push(U.combine),L.push(U.fogExp2),L.push(U.sizeAttenuation),L.push(U.morphTargetsCount),L.push(U.morphAttributeCount),L.push(U.numDirLights),L.push(U.numPointLights),L.push(U.numSpotLights),L.push(U.numSpotLightMaps),L.push(U.numHemiLights),L.push(U.numRectAreaLights),L.push(U.numDirLightShadows),L.push(U.numPointLightShadows),L.push(U.numSpotLightShadows),L.push(U.numSpotLightShadowsWithMaps),L.push(U.numLightProbes),L.push(U.shadowMapType),L.push(U.toneMapping),L.push(U.numClippingPlanes),L.push(U.numClipIntersection),L.push(U.depthPacking)}function T(L,U){o.disableAll(),U.supportsVertexTextures&&o.enable(0),U.instancing&&o.enable(1),U.instancingColor&&o.enable(2),U.instancingMorph&&o.enable(3),U.matcap&&o.enable(4),U.envMap&&o.enable(5),U.normalMapObjectSpace&&o.enable(6),U.normalMapTangentSpace&&o.enable(7),U.clearcoat&&o.enable(8),U.iridescence&&o.enable(9),U.alphaTest&&o.enable(10),U.vertexColors&&o.enable(11),U.vertexAlphas&&o.enable(12),U.vertexUv1s&&o.enable(13),U.vertexUv2s&&o.enable(14),U.vertexUv3s&&o.enable(15),U.vertexTangents&&o.enable(16),U.anisotropy&&o.enable(17),U.alphaHash&&o.enable(18),U.batching&&o.enable(19),U.dispersion&&o.enable(20),U.batchingColor&&o.enable(21),U.gradientMap&&o.enable(22),L.push(o.mask),o.disableAll(),U.fog&&o.enable(0),U.useFog&&o.enable(1),U.flatShading&&o.enable(2),U.logarithmicDepthBuffer&&o.enable(3),U.reversedDepthBuffer&&o.enable(4),U.skinning&&o.enable(5),U.morphTargets&&o.enable(6),U.morphNormals&&o.enable(7),U.morphColors&&o.enable(8),U.premultipliedAlpha&&o.enable(9),U.shadowMapEnabled&&o.enable(10),U.doubleSided&&o.enable(11),U.flipSided&&o.enable(12),U.useDepthPacking&&o.enable(13),U.dithering&&o.enable(14),U.transmission&&o.enable(15),U.sheen&&o.enable(16),U.opaque&&o.enable(17),U.pointsUvs&&o.enable(18),U.decodeVideoTexture&&o.enable(19),U.decodeVideoTextureEmissive&&o.enable(20),U.alphaToCoverage&&o.enable(21),L.push(o.mask)}function M(L){const U=A[L.type];let j;if(U){const W=vl[U];j=yO.clone(W.uniforms)}else j=L.uniforms;return j}function I(L,U){let j;for(let W=0,Q=d.length;W<Q;W++){const $=d[W];if($.cacheKey===U){j=$,++j.usedTimes;break}}return j===void 0&&(j=new ese(a,U,L,i),d.push(j)),j}function P(L){if(--L.usedTimes===0){const U=d.indexOf(L);d[U]=d[d.length-1],d.pop(),L.destroy()}}function B(L){l.remove(L)}function F(){l.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:M,acquireProgram:I,releaseProgram:P,releaseShaderCache:B,programs:d,dispose:F}}function ise(){let a=new WeakMap;function e(s){return a.has(s)}function t(s){let o=a.get(s);return o===void 0&&(o={},a.set(s,o)),o}function n(s){a.delete(s)}function r(s,o,l){a.get(s)[o]=l}function i(){a=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:i}}function sse(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function J4(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function Z4(){const a=[];let e=0;const t=[],n=[],r=[];function i(){e=0,t.length=0,n.length=0,r.length=0}function s(h,m,v,A,E,b){let _=a[e];return _===void 0?(_={id:h.id,object:h,geometry:m,material:v,groupOrder:A,renderOrder:h.renderOrder,z:E,group:b},a[e]=_):(_.id=h.id,_.object=h,_.geometry=m,_.material=v,_.groupOrder=A,_.renderOrder=h.renderOrder,_.z=E,_.group=b),e++,_}function o(h,m,v,A,E,b){const _=s(h,m,v,A,E,b);v.transmission>0?n.push(_):v.transparent===!0?r.push(_):t.push(_)}function l(h,m,v,A,E,b){const _=s(h,m,v,A,E,b);v.transmission>0?n.unshift(_):v.transparent===!0?r.unshift(_):t.unshift(_)}function c(h,m){t.length>1&&t.sort(h||sse),n.length>1&&n.sort(m||J4),r.length>1&&r.sort(m||J4)}function d(){for(let h=e,m=a.length;h<m;h++){const v=a[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:r,init:i,push:o,unshift:l,finish:d,sort:c}}function ose(){let a=new WeakMap;function e(n,r){const i=a.get(n);let s;return i===void 0?(s=new Z4,a.set(n,[s])):r>=i.length?(s=new Z4,i.push(s)):s=i[r],s}function t(){a=new WeakMap}return{get:e,dispose:t}}function lse(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new Et};break;case"SpotLight":t={position:new ae,direction:new ae,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return a[e.id]=t,t}}}function cse(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=t,t}}}let use=0;function dse(a,e){return(e.castShadow?2:0)-(a.castShadow?2:0)+(e.map?1:0)-(a.map?1:0)}function fse(a){const e=new lse,t=cse(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new ae);const r=new ae,i=new nn,s=new nn;function o(c){let d=0,h=0,m=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let v=0,A=0,E=0,b=0,_=0,R=0,T=0,M=0,I=0,P=0,B=0;c.sort(dse);for(let L=0,U=c.length;L<U;L++){const j=c[L],W=j.color,Q=j.intensity,$=j.distance,re=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)d+=W.r*Q,h+=W.g*Q,m+=W.b*Q;else if(j.isLightProbe){for(let G=0;G<9;G++)n.probe[G].addScaledVector(j.sh.coefficients[G],Q);B++}else if(j.isDirectionalLight){const G=e.get(j);if(G.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const Y=j.shadow,K=t.get(j);K.shadowIntensity=Y.intensity,K.shadowBias=Y.bias,K.shadowNormalBias=Y.normalBias,K.shadowRadius=Y.radius,K.shadowMapSize=Y.mapSize,n.directionalShadow[v]=K,n.directionalShadowMap[v]=re,n.directionalShadowMatrix[v]=j.shadow.matrix,R++}n.directional[v]=G,v++}else if(j.isSpotLight){const G=e.get(j);G.position.setFromMatrixPosition(j.matrixWorld),G.color.copy(W).multiplyScalar(Q),G.distance=$,G.coneCos=Math.cos(j.angle),G.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),G.decay=j.decay,n.spot[E]=G;const Y=j.shadow;if(j.map&&(n.spotLightMap[I]=j.map,I++,Y.updateMatrices(j),j.castShadow&&P++),n.spotLightMatrix[E]=Y.matrix,j.castShadow){const K=t.get(j);K.shadowIntensity=Y.intensity,K.shadowBias=Y.bias,K.shadowNormalBias=Y.normalBias,K.shadowRadius=Y.radius,K.shadowMapSize=Y.mapSize,n.spotShadow[E]=K,n.spotShadowMap[E]=re,M++}E++}else if(j.isRectAreaLight){const G=e.get(j);G.color.copy(W).multiplyScalar(Q),G.halfWidth.set(j.width*.5,0,0),G.halfHeight.set(0,j.height*.5,0),n.rectArea[b]=G,b++}else if(j.isPointLight){const G=e.get(j);if(G.color.copy(j.color).multiplyScalar(j.intensity),G.distance=j.distance,G.decay=j.decay,j.castShadow){const Y=j.shadow,K=t.get(j);K.shadowIntensity=Y.intensity,K.shadowBias=Y.bias,K.shadowNormalBias=Y.normalBias,K.shadowRadius=Y.radius,K.shadowMapSize=Y.mapSize,K.shadowCameraNear=Y.camera.near,K.shadowCameraFar=Y.camera.far,n.pointShadow[A]=K,n.pointShadowMap[A]=re,n.pointShadowMatrix[A]=j.shadow.matrix,T++}n.point[A]=G,A++}else if(j.isHemisphereLight){const G=e.get(j);G.skyColor.copy(j.color).multiplyScalar(Q),G.groundColor.copy(j.groundColor).multiplyScalar(Q),n.hemi[_]=G,_++}}b>0&&(a.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Mt.LTC_FLOAT_1,n.rectAreaLTC2=Mt.LTC_FLOAT_2):(n.rectAreaLTC1=Mt.LTC_HALF_1,n.rectAreaLTC2=Mt.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=h,n.ambient[2]=m;const F=n.hash;(F.directionalLength!==v||F.pointLength!==A||F.spotLength!==E||F.rectAreaLength!==b||F.hemiLength!==_||F.numDirectionalShadows!==R||F.numPointShadows!==T||F.numSpotShadows!==M||F.numSpotMaps!==I||F.numLightProbes!==B)&&(n.directional.length=v,n.spot.length=E,n.rectArea.length=b,n.point.length=A,n.hemi.length=_,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=T,n.pointShadowMap.length=T,n.spotShadow.length=M,n.spotShadowMap.length=M,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=T,n.spotLightMatrix.length=M+I-P,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=P,n.numLightProbes=B,F.directionalLength=v,F.pointLength=A,F.spotLength=E,F.rectAreaLength=b,F.hemiLength=_,F.numDirectionalShadows=R,F.numPointShadows=T,F.numSpotShadows=M,F.numSpotMaps=I,F.numLightProbes=B,n.version=use++)}function l(c,d){let h=0,m=0,v=0,A=0,E=0;const b=d.matrixWorldInverse;for(let _=0,R=c.length;_<R;_++){const T=c[_];if(T.isDirectionalLight){const M=n.directional[h];M.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(b),h++}else if(T.isSpotLight){const M=n.spot[v];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(b),M.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(b),v++}else if(T.isRectAreaLight){const M=n.rectArea[A];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(b),s.identity(),i.copy(T.matrixWorld),i.premultiply(b),s.extractRotation(i),M.halfWidth.set(T.width*.5,0,0),M.halfHeight.set(0,T.height*.5,0),M.halfWidth.applyMatrix4(s),M.halfHeight.applyMatrix4(s),A++}else if(T.isPointLight){const M=n.point[m];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(b),m++}else if(T.isHemisphereLight){const M=n.hemi[E];M.direction.setFromMatrixPosition(T.matrixWorld),M.direction.transformDirection(b),E++}}}return{setup:o,setupView:l,state:n}}function Q4(a){const e=new fse(a),t=[],n=[];function r(d){c.camera=d,t.length=0,n.length=0}function i(d){t.push(d)}function s(d){n.push(d)}function o(){e.setup(t)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:i,pushShadow:s}}function hse(a){let e=new WeakMap;function t(r,i=0){const s=e.get(r);let o;return s===void 0?(o=new Q4(a),e.set(r,[o])):i>=s.length?(o=new Q4(a),s.push(o)):o=s[i],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const pse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,mse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function gse(a,e,t){let n=new I0;const r=new Ze,i=new Ze,s=new Jn,o=new nM({depthPacking:aO}),l=new aM,c={},d=t.maxTextureSize,h={[Tc]:ss,[ss]:Tc,[yl]:yl},m=new Sl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:pse,fragmentShader:mse}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const A=new Sn;A.setAttribute("position",new ra(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ur(A,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=__;let _=this.type;this.render=function(P,B,F){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||P.length===0)return;const L=a.getRenderTarget(),U=a.getActiveCubeFace(),j=a.getActiveMipmapLevel(),W=a.state;W.setBlending(_u),W.buffers.depth.getReversed()?W.buffers.color.setClear(0,0,0,0):W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const Q=_!==ml&&this.type===ml,$=_===ml&&this.type!==ml;for(let re=0,G=P.length;re<G;re++){const Y=P[re],K=Y.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const X=K.getFrameExtents();if(r.multiply(X),i.copy(K.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(i.x=Math.floor(d/X.x),r.x=i.x*X.x,K.mapSize.x=i.x),r.y>d&&(i.y=Math.floor(d/X.y),r.y=i.y*X.y,K.mapSize.y=i.y)),K.map===null||Q===!0||$===!0){const J=this.type!==ml?{minFilter:Ur,magFilter:Ur}:{};K.map!==null&&K.map.dispose(),K.map=new Nc(r.x,r.y,J),K.map.texture.name=Y.name+".shadowMap",K.camera.updateProjectionMatrix()}a.setRenderTarget(K.map),a.clear();const z=K.getViewportCount();for(let J=0;J<z;J++){const le=K.getViewport(J);s.set(i.x*le.x,i.y*le.y,i.x*le.z,i.y*le.w),W.viewport(s),K.updateMatrices(Y,J),n=K.getFrustum(),M(B,F,K.camera,Y,this.type)}K.isPointLightShadow!==!0&&this.type===ml&&R(K,F),K.needsUpdate=!1}_=this.type,b.needsUpdate=!1,a.setRenderTarget(L,U,j)};function R(P,B){const F=e.update(E);m.defines.VSM_SAMPLES!==P.blurSamples&&(m.defines.VSM_SAMPLES=P.blurSamples,v.defines.VSM_SAMPLES=P.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Nc(r.x,r.y)),m.uniforms.shadow_pass.value=P.map.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,a.setRenderTarget(P.mapPass),a.clear(),a.renderBufferDirect(B,null,F,m,E,null),v.uniforms.shadow_pass.value=P.mapPass.texture,v.uniforms.resolution.value=P.mapSize,v.uniforms.radius.value=P.radius,a.setRenderTarget(P.map),a.clear(),a.renderBufferDirect(B,null,F,v,E,null)}function T(P,B,F,L){let U=null;const j=F.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(j!==void 0)U=j;else if(U=F.isPointLight===!0?l:o,a.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0||B.alphaToCoverage===!0){const W=U.uuid,Q=B.uuid;let $=c[W];$===void 0&&($={},c[W]=$);let re=$[Q];re===void 0&&(re=U.clone(),$[Q]=re,B.addEventListener("dispose",I)),U=re}if(U.visible=B.visible,U.wireframe=B.wireframe,L===ml?U.side=B.shadowSide!==null?B.shadowSide:B.side:U.side=B.shadowSide!==null?B.shadowSide:h[B.side],U.alphaMap=B.alphaMap,U.alphaTest=B.alphaToCoverage===!0?.5:B.alphaTest,U.map=B.map,U.clipShadows=B.clipShadows,U.clippingPlanes=B.clippingPlanes,U.clipIntersection=B.clipIntersection,U.displacementMap=B.displacementMap,U.displacementScale=B.displacementScale,U.displacementBias=B.displacementBias,U.wireframeLinewidth=B.wireframeLinewidth,U.linewidth=B.linewidth,F.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const W=a.properties.get(U);W.light=F}return U}function M(P,B,F,L,U){if(P.visible===!1)return;if(P.layers.test(B.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&U===ml)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,P.matrixWorld);const Q=e.update(P),$=P.material;if(Array.isArray($)){const re=Q.groups;for(let G=0,Y=re.length;G<Y;G++){const K=re[G],X=$[K.materialIndex];if(X&&X.visible){const z=T(P,X,L,U);P.onBeforeShadow(a,P,B,F,Q,z,K),a.renderBufferDirect(F,null,Q,z,P,K),P.onAfterShadow(a,P,B,F,Q,z,K)}}}else if($.visible){const re=T(P,$,L,U);P.onBeforeShadow(a,P,B,F,Q,re,null),a.renderBufferDirect(F,null,Q,re,P,null),P.onAfterShadow(a,P,B,F,Q,re,null)}}const W=P.children;for(let Q=0,$=W.length;Q<$;Q++)M(W[Q],B,F,L,U)}function I(P){P.target.removeEventListener("dispose",I);for(const F in c){const L=c[F],U=P.target.uuid;U in L&&(L[U].dispose(),delete L[U])}}}const vse={[iA]:sA,[oA]:uA,[lA]:dA,[Vh]:cA,[sA]:iA,[uA]:oA,[dA]:lA,[cA]:Vh};function yse(a,e){function t(){let pe=!1;const nt=new Jn;let ut=null;const bt=new Jn(0,0,0,0);return{setMask:function(lt){ut!==lt&&!pe&&(a.colorMask(lt,lt,lt,lt),ut=lt)},setLocked:function(lt){pe=lt},setClear:function(lt,et,wt,jt,En){En===!0&&(lt*=jt,et*=jt,wt*=jt),nt.set(lt,et,wt,jt),bt.equals(nt)===!1&&(a.clearColor(lt,et,wt,jt),bt.copy(nt))},reset:function(){pe=!1,ut=null,bt.set(-1,0,0,0)}}}function n(){let pe=!1,nt=!1,ut=null,bt=null,lt=null;return{setReversed:function(et){if(nt!==et){const wt=e.get("EXT_clip_control");et?wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.ZERO_TO_ONE_EXT):wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.NEGATIVE_ONE_TO_ONE_EXT),nt=et;const jt=lt;lt=null,this.setClear(jt)}},getReversed:function(){return nt},setTest:function(et){et?Ie(a.DEPTH_TEST):Ge(a.DEPTH_TEST)},setMask:function(et){ut!==et&&!pe&&(a.depthMask(et),ut=et)},setFunc:function(et){if(nt&&(et=vse[et]),bt!==et){switch(et){case iA:a.depthFunc(a.NEVER);break;case sA:a.depthFunc(a.ALWAYS);break;case oA:a.depthFunc(a.LESS);break;case Vh:a.depthFunc(a.LEQUAL);break;case lA:a.depthFunc(a.EQUAL);break;case cA:a.depthFunc(a.GEQUAL);break;case uA:a.depthFunc(a.GREATER);break;case dA:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}bt=et}},setLocked:function(et){pe=et},setClear:function(et){lt!==et&&(nt&&(et=1-et),a.clearDepth(et),lt=et)},reset:function(){pe=!1,ut=null,bt=null,lt=null,nt=!1}}}function r(){let pe=!1,nt=null,ut=null,bt=null,lt=null,et=null,wt=null,jt=null,En=null;return{setTest:function(mn){pe||(mn?Ie(a.STENCIL_TEST):Ge(a.STENCIL_TEST))},setMask:function(mn){nt!==mn&&!pe&&(a.stencilMask(mn),nt=mn)},setFunc:function(mn,fr,xa){(ut!==mn||bt!==fr||lt!==xa)&&(a.stencilFunc(mn,fr,xa),ut=mn,bt=fr,lt=xa)},setOp:function(mn,fr,xa){(et!==mn||wt!==fr||jt!==xa)&&(a.stencilOp(mn,fr,xa),et=mn,wt=fr,jt=xa)},setLocked:function(mn){pe=mn},setClear:function(mn){En!==mn&&(a.clearStencil(mn),En=mn)},reset:function(){pe=!1,nt=null,ut=null,bt=null,lt=null,et=null,wt=null,jt=null,En=null}}}const i=new t,s=new n,o=new r,l=new WeakMap,c=new WeakMap;let d={},h={},m=new WeakMap,v=[],A=null,E=!1,b=null,_=null,R=null,T=null,M=null,I=null,P=null,B=new Et(0,0,0),F=0,L=!1,U=null,j=null,W=null,Q=null,$=null;const re=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,Y=0;const K=a.getParameter(a.VERSION);K.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(K)[1]),G=Y>=1):K.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),G=Y>=2);let X=null,z={};const J=a.getParameter(a.SCISSOR_BOX),le=a.getParameter(a.VIEWPORT),ce=new Jn().fromArray(J),xe=new Jn().fromArray(le);function fe(pe,nt,ut,bt){const lt=new Uint8Array(4),et=a.createTexture();a.bindTexture(pe,et),a.texParameteri(pe,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(pe,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let wt=0;wt<ut;wt++)pe===a.TEXTURE_3D||pe===a.TEXTURE_2D_ARRAY?a.texImage3D(nt,0,a.RGBA,1,1,bt,0,a.RGBA,a.UNSIGNED_BYTE,lt):a.texImage2D(nt+wt,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,lt);return et}const _e={};_e[a.TEXTURE_2D]=fe(a.TEXTURE_2D,a.TEXTURE_2D,1),_e[a.TEXTURE_CUBE_MAP]=fe(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[a.TEXTURE_2D_ARRAY]=fe(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),_e[a.TEXTURE_3D]=fe(a.TEXTURE_3D,a.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ie(a.DEPTH_TEST),s.setFunc(Vh),Ke(!1),ze(j3),Ie(a.CULL_FACE),Be(_u);function Ie(pe){d[pe]!==!0&&(a.enable(pe),d[pe]=!0)}function Ge(pe){d[pe]!==!1&&(a.disable(pe),d[pe]=!1)}function Ue(pe,nt){return h[pe]!==nt?(a.bindFramebuffer(pe,nt),h[pe]=nt,pe===a.DRAW_FRAMEBUFFER&&(h[a.FRAMEBUFFER]=nt),pe===a.FRAMEBUFFER&&(h[a.DRAW_FRAMEBUFFER]=nt),!0):!1}function $e(pe,nt){let ut=v,bt=!1;if(pe){ut=m.get(nt),ut===void 0&&(ut=[],m.set(nt,ut));const lt=pe.textures;if(ut.length!==lt.length||ut[0]!==a.COLOR_ATTACHMENT0){for(let et=0,wt=lt.length;et<wt;et++)ut[et]=a.COLOR_ATTACHMENT0+et;ut.length=lt.length,bt=!0}}else ut[0]!==a.BACK&&(ut[0]=a.BACK,bt=!0);bt&&a.drawBuffers(ut)}function dt(pe){return A!==pe?(a.useProgram(pe),A=pe,!0):!1}const ct={[jd]:a.FUNC_ADD,[RP]:a.FUNC_SUBTRACT,[MP]:a.FUNC_REVERSE_SUBTRACT};ct[TP]=a.MIN,ct[NP]=a.MAX;const se={[CP]:a.ZERO,[IP]:a.ONE,[DP]:a.SRC_COLOR,[aA]:a.SRC_ALPHA,[FP]:a.SRC_ALPHA_SATURATE,[UP]:a.DST_COLOR,[PP]:a.DST_ALPHA,[LP]:a.ONE_MINUS_SRC_COLOR,[rA]:a.ONE_MINUS_SRC_ALPHA,[BP]:a.ONE_MINUS_DST_COLOR,[OP]:a.ONE_MINUS_DST_ALPHA,[kP]:a.CONSTANT_COLOR,[HP]:a.ONE_MINUS_CONSTANT_COLOR,[jP]:a.CONSTANT_ALPHA,[zP]:a.ONE_MINUS_CONSTANT_ALPHA};function Be(pe,nt,ut,bt,lt,et,wt,jt,En,mn){if(pe===_u){E===!0&&(Ge(a.BLEND),E=!1);return}if(E===!1&&(Ie(a.BLEND),E=!0),pe!==wP){if(pe!==b||mn!==L){if((_!==jd||M!==jd)&&(a.blendEquation(a.FUNC_ADD),_=jd,M=jd),mn)switch(pe){case kh:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case z3:a.blendFunc(a.ONE,a.ONE);break;case G3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case V3:a.blendFuncSeparate(a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ZERO,a.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case kh:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case z3:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE,a.ONE,a.ONE);break;case G3:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case V3:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}R=null,T=null,I=null,P=null,B.set(0,0,0),F=0,b=pe,L=mn}return}lt=lt||nt,et=et||ut,wt=wt||bt,(nt!==_||lt!==M)&&(a.blendEquationSeparate(ct[nt],ct[lt]),_=nt,M=lt),(ut!==R||bt!==T||et!==I||wt!==P)&&(a.blendFuncSeparate(se[ut],se[bt],se[et],se[wt]),R=ut,T=bt,I=et,P=wt),(jt.equals(B)===!1||En!==F)&&(a.blendColor(jt.r,jt.g,jt.b,En),B.copy(jt),F=En),b=pe,L=!1}function Le(pe,nt){pe.side===yl?Ge(a.CULL_FACE):Ie(a.CULL_FACE);let ut=pe.side===ss;nt&&(ut=!ut),Ke(ut),pe.blending===kh&&pe.transparent===!1?Be(_u):Be(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),s.setFunc(pe.depthFunc),s.setTest(pe.depthTest),s.setMask(pe.depthWrite),i.setMask(pe.colorWrite);const bt=pe.stencilWrite;o.setTest(bt),bt&&(o.setMask(pe.stencilWriteMask),o.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),o.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Qe(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Ie(a.SAMPLE_ALPHA_TO_COVERAGE):Ge(a.SAMPLE_ALPHA_TO_COVERAGE)}function Ke(pe){U!==pe&&(pe?a.frontFace(a.CW):a.frontFace(a.CCW),U=pe)}function ze(pe){pe!==bP?(Ie(a.CULL_FACE),pe!==j&&(pe===j3?a.cullFace(a.BACK):pe===SP?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):Ge(a.CULL_FACE),j=pe}function ot(pe){pe!==W&&(G&&a.lineWidth(pe),W=pe)}function Qe(pe,nt,ut){pe?(Ie(a.POLYGON_OFFSET_FILL),(Q!==nt||$!==ut)&&(a.polygonOffset(nt,ut),Q=nt,$=ut)):Ge(a.POLYGON_OFFSET_FILL)}function st(pe){pe?Ie(a.SCISSOR_TEST):Ge(a.SCISSOR_TEST)}function Ot(pe){pe===void 0&&(pe=a.TEXTURE0+re-1),X!==pe&&(a.activeTexture(pe),X=pe)}function zt(pe,nt,ut){ut===void 0&&(X===null?ut=a.TEXTURE0+re-1:ut=X);let bt=z[ut];bt===void 0&&(bt={type:void 0,texture:void 0},z[ut]=bt),(bt.type!==pe||bt.texture!==nt)&&(X!==ut&&(a.activeTexture(ut),X=ut),a.bindTexture(pe,nt||_e[pe]),bt.type=pe,bt.texture=nt)}function ie(){const pe=z[X];pe!==void 0&&pe.type!==void 0&&(a.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function q(){try{a.compressedTexImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function be(){try{a.compressedTexImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function je(){try{a.texSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ye(){try{a.texSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Pe(){try{a.compressedTexSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function _t(){try{a.compressedTexSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function mt(){try{a.texStorage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ct(){try{a.texStorage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Dt(){try{a.texImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function rt(){try{a.texImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function gt(pe){ce.equals(pe)===!1&&(a.scissor(pe.x,pe.y,pe.z,pe.w),ce.copy(pe))}function Lt(pe){xe.equals(pe)===!1&&(a.viewport(pe.x,pe.y,pe.z,pe.w),xe.copy(pe))}function ue(pe,nt){let ut=c.get(nt);ut===void 0&&(ut=new WeakMap,c.set(nt,ut));let bt=ut.get(pe);bt===void 0&&(bt=a.getUniformBlockIndex(nt,pe.name),ut.set(pe,bt))}function Me(pe,nt){const bt=c.get(nt).get(pe);l.get(nt)!==bt&&(a.uniformBlockBinding(nt,bt,pe.__bindingPointIndex),l.set(nt,bt))}function ft(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),s.setReversed(!1),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),d={},X=null,z={},h={},m=new WeakMap,v=[],A=null,E=!1,b=null,_=null,R=null,T=null,M=null,I=null,P=null,B=new Et(0,0,0),F=0,L=!1,U=null,j=null,W=null,Q=null,$=null,ce.set(0,0,a.canvas.width,a.canvas.height),xe.set(0,0,a.canvas.width,a.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Ie,disable:Ge,bindFramebuffer:Ue,drawBuffers:$e,useProgram:dt,setBlending:Be,setMaterial:Le,setFlipSided:Ke,setCullFace:ze,setLineWidth:ot,setPolygonOffset:Qe,setScissorTest:st,activeTexture:Ot,bindTexture:zt,unbindTexture:ie,compressedTexImage2D:q,compressedTexImage3D:be,texImage2D:Dt,texImage3D:rt,updateUBOMapping:ue,uniformBlockBinding:Me,texStorage2D:mt,texStorage3D:Ct,texSubImage2D:je,texSubImage3D:Ye,compressedTexSubImage2D:Pe,compressedTexSubImage3D:_t,scissor:gt,viewport:Lt,reset:ft}}function xse(a,e,t,n,r,i,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ze,d=new WeakMap;let h;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(ie,q){return v?new OffscreenCanvas(ie,q):Qv("canvas")}function E(ie,q,be){let je=1;const Ye=zt(ie);if((Ye.width>be||Ye.height>be)&&(je=be/Math.max(Ye.width,Ye.height)),je<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const Pe=Math.floor(je*Ye.width),_t=Math.floor(je*Ye.height);h===void 0&&(h=A(Pe,_t));const mt=q?A(Pe,_t):h;return mt.width=Pe,mt.height=_t,mt.getContext("2d").drawImage(ie,0,0,Pe,_t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ye.width+"x"+Ye.height+") to ("+Pe+"x"+_t+")."),mt}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ye.width+"x"+Ye.height+")."),ie;return ie}function b(ie){return ie.generateMipmaps}function _(ie){a.generateMipmap(ie)}function R(ie){return ie.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:ie.isWebGL3DRenderTarget?a.TEXTURE_3D:ie.isWebGLArrayRenderTarget||ie.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D}function T(ie,q,be,je,Ye=!1){if(ie!==null){if(a[ie]!==void 0)return a[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Pe=q;if(q===a.RED&&(be===a.FLOAT&&(Pe=a.R32F),be===a.HALF_FLOAT&&(Pe=a.R16F),be===a.UNSIGNED_BYTE&&(Pe=a.R8)),q===a.RED_INTEGER&&(be===a.UNSIGNED_BYTE&&(Pe=a.R8UI),be===a.UNSIGNED_SHORT&&(Pe=a.R16UI),be===a.UNSIGNED_INT&&(Pe=a.R32UI),be===a.BYTE&&(Pe=a.R8I),be===a.SHORT&&(Pe=a.R16I),be===a.INT&&(Pe=a.R32I)),q===a.RG&&(be===a.FLOAT&&(Pe=a.RG32F),be===a.HALF_FLOAT&&(Pe=a.RG16F),be===a.UNSIGNED_BYTE&&(Pe=a.RG8)),q===a.RG_INTEGER&&(be===a.UNSIGNED_BYTE&&(Pe=a.RG8UI),be===a.UNSIGNED_SHORT&&(Pe=a.RG16UI),be===a.UNSIGNED_INT&&(Pe=a.RG32UI),be===a.BYTE&&(Pe=a.RG8I),be===a.SHORT&&(Pe=a.RG16I),be===a.INT&&(Pe=a.RG32I)),q===a.RGB_INTEGER&&(be===a.UNSIGNED_BYTE&&(Pe=a.RGB8UI),be===a.UNSIGNED_SHORT&&(Pe=a.RGB16UI),be===a.UNSIGNED_INT&&(Pe=a.RGB32UI),be===a.BYTE&&(Pe=a.RGB8I),be===a.SHORT&&(Pe=a.RGB16I),be===a.INT&&(Pe=a.RGB32I)),q===a.RGBA_INTEGER&&(be===a.UNSIGNED_BYTE&&(Pe=a.RGBA8UI),be===a.UNSIGNED_SHORT&&(Pe=a.RGBA16UI),be===a.UNSIGNED_INT&&(Pe=a.RGBA32UI),be===a.BYTE&&(Pe=a.RGBA8I),be===a.SHORT&&(Pe=a.RGBA16I),be===a.INT&&(Pe=a.RGBA32I)),q===a.RGB&&be===a.UNSIGNED_INT_5_9_9_9_REV&&(Pe=a.RGB9_E5),q===a.RGBA){const _t=Ye?Jv:Fn.getTransfer(je);be===a.FLOAT&&(Pe=a.RGBA32F),be===a.HALF_FLOAT&&(Pe=a.RGBA16F),be===a.UNSIGNED_BYTE&&(Pe=_t===fa?a.SRGB8_ALPHA8:a.RGBA8),be===a.UNSIGNED_SHORT_4_4_4_4&&(Pe=a.RGBA4),be===a.UNSIGNED_SHORT_5_5_5_1&&(Pe=a.RGB5_A1)}return(Pe===a.R16F||Pe===a.R32F||Pe===a.RG16F||Pe===a.RG32F||Pe===a.RGBA16F||Pe===a.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function M(ie,q){let be;return ie?q===null||q===Ru||q===u0?be=a.DEPTH24_STENCIL8:q===Ts?be=a.DEPTH32F_STENCIL8:q===c0&&(be=a.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Ru||q===u0?be=a.DEPTH_COMPONENT24:q===Ts?be=a.DEPTH_COMPONENT32F:q===c0&&(be=a.DEPTH_COMPONENT16),be}function I(ie,q){return b(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==Ur&&ie.minFilter!==tr?Math.log2(Math.max(q.width,q.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?q.mipmaps.length:1}function P(ie){const q=ie.target;q.removeEventListener("dispose",P),F(q),q.isVideoTexture&&d.delete(q)}function B(ie){const q=ie.target;q.removeEventListener("dispose",B),U(q)}function F(ie){const q=n.get(ie);if(q.__webglInit===void 0)return;const be=ie.source,je=m.get(be);if(je){const Ye=je[q.__cacheKey];Ye.usedTimes--,Ye.usedTimes===0&&L(ie),Object.keys(je).length===0&&m.delete(be)}n.remove(ie)}function L(ie){const q=n.get(ie);a.deleteTexture(q.__webglTexture);const be=ie.source,je=m.get(be);delete je[q.__cacheKey],s.memory.textures--}function U(ie){const q=n.get(ie);if(ie.depthTexture&&(ie.depthTexture.dispose(),n.remove(ie.depthTexture)),ie.isWebGLCubeRenderTarget)for(let je=0;je<6;je++){if(Array.isArray(q.__webglFramebuffer[je]))for(let Ye=0;Ye<q.__webglFramebuffer[je].length;Ye++)a.deleteFramebuffer(q.__webglFramebuffer[je][Ye]);else a.deleteFramebuffer(q.__webglFramebuffer[je]);q.__webglDepthbuffer&&a.deleteRenderbuffer(q.__webglDepthbuffer[je])}else{if(Array.isArray(q.__webglFramebuffer))for(let je=0;je<q.__webglFramebuffer.length;je++)a.deleteFramebuffer(q.__webglFramebuffer[je]);else a.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&a.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&a.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let je=0;je<q.__webglColorRenderbuffer.length;je++)q.__webglColorRenderbuffer[je]&&a.deleteRenderbuffer(q.__webglColorRenderbuffer[je]);q.__webglDepthRenderbuffer&&a.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const be=ie.textures;for(let je=0,Ye=be.length;je<Ye;je++){const Pe=n.get(be[je]);Pe.__webglTexture&&(a.deleteTexture(Pe.__webglTexture),s.memory.textures--),n.remove(be[je])}n.remove(ie)}let j=0;function W(){j=0}function Q(){const ie=j;return ie>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+r.maxTextures),j+=1,ie}function $(ie){const q=[];return q.push(ie.wrapS),q.push(ie.wrapT),q.push(ie.wrapR||0),q.push(ie.magFilter),q.push(ie.minFilter),q.push(ie.anisotropy),q.push(ie.internalFormat),q.push(ie.format),q.push(ie.type),q.push(ie.generateMipmaps),q.push(ie.premultiplyAlpha),q.push(ie.flipY),q.push(ie.unpackAlignment),q.push(ie.colorSpace),q.join()}function re(ie,q){const be=n.get(ie);if(ie.isVideoTexture&&st(ie),ie.isRenderTargetTexture===!1&&ie.isExternalTexture!==!0&&ie.version>0&&be.__version!==ie.version){const je=ie.image;if(je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(be,ie,q);return}}else ie.isExternalTexture&&(be.__webglTexture=ie.sourceTexture?ie.sourceTexture:null);t.bindTexture(a.TEXTURE_2D,be.__webglTexture,a.TEXTURE0+q)}function G(ie,q){const be=n.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&be.__version!==ie.version){_e(be,ie,q);return}t.bindTexture(a.TEXTURE_2D_ARRAY,be.__webglTexture,a.TEXTURE0+q)}function Y(ie,q){const be=n.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&be.__version!==ie.version){_e(be,ie,q);return}t.bindTexture(a.TEXTURE_3D,be.__webglTexture,a.TEXTURE0+q)}function K(ie,q){const be=n.get(ie);if(ie.version>0&&be.__version!==ie.version){Ie(be,ie,q);return}t.bindTexture(a.TEXTURE_CUBE_MAP,be.__webglTexture,a.TEXTURE0+q)}const X={[tf]:a.REPEAT,[no]:a.CLAMP_TO_EDGE,[l0]:a.MIRRORED_REPEAT},z={[Ur]:a.NEAREST,[S_]:a.NEAREST_MIPMAP_NEAREST,[Ih]:a.NEAREST_MIPMAP_LINEAR,[tr]:a.LINEAR,[e0]:a.LINEAR_MIPMAP_NEAREST,[Uo]:a.LINEAR_MIPMAP_LINEAR},J={[iO]:a.NEVER,[dO]:a.ALWAYS,[sO]:a.LESS,[FR]:a.LEQUAL,[oO]:a.EQUAL,[uO]:a.GEQUAL,[lO]:a.GREATER,[cO]:a.NOTEQUAL};function le(ie,q){if(q.type===Ts&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===tr||q.magFilter===e0||q.magFilter===Ih||q.magFilter===Uo||q.minFilter===tr||q.minFilter===e0||q.minFilter===Ih||q.minFilter===Uo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(ie,a.TEXTURE_WRAP_S,X[q.wrapS]),a.texParameteri(ie,a.TEXTURE_WRAP_T,X[q.wrapT]),(ie===a.TEXTURE_3D||ie===a.TEXTURE_2D_ARRAY)&&a.texParameteri(ie,a.TEXTURE_WRAP_R,X[q.wrapR]),a.texParameteri(ie,a.TEXTURE_MAG_FILTER,z[q.magFilter]),a.texParameteri(ie,a.TEXTURE_MIN_FILTER,z[q.minFilter]),q.compareFunction&&(a.texParameteri(ie,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(ie,a.TEXTURE_COMPARE_FUNC,J[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===Ur||q.minFilter!==Ih&&q.minFilter!==Uo||q.type===Ts&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||n.get(q).__currentAnisotropy){const be=e.get("EXT_texture_filter_anisotropic");a.texParameterf(ie,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,r.getMaxAnisotropy())),n.get(q).__currentAnisotropy=q.anisotropy}}}function ce(ie,q){let be=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,q.addEventListener("dispose",P));const je=q.source;let Ye=m.get(je);Ye===void 0&&(Ye={},m.set(je,Ye));const Pe=$(q);if(Pe!==ie.__cacheKey){Ye[Pe]===void 0&&(Ye[Pe]={texture:a.createTexture(),usedTimes:0},s.memory.textures++,be=!0),Ye[Pe].usedTimes++;const _t=Ye[ie.__cacheKey];_t!==void 0&&(Ye[ie.__cacheKey].usedTimes--,_t.usedTimes===0&&L(q)),ie.__cacheKey=Pe,ie.__webglTexture=Ye[Pe].texture}return be}function xe(ie,q,be){return Math.floor(Math.floor(ie/be)/q)}function fe(ie,q,be,je){const Pe=ie.updateRanges;if(Pe.length===0)t.texSubImage2D(a.TEXTURE_2D,0,0,0,q.width,q.height,be,je,q.data);else{Pe.sort((rt,gt)=>rt.start-gt.start);let _t=0;for(let rt=1;rt<Pe.length;rt++){const gt=Pe[_t],Lt=Pe[rt],ue=gt.start+gt.count,Me=xe(Lt.start,q.width,4),ft=xe(gt.start,q.width,4);Lt.start<=ue+1&&Me===ft&&xe(Lt.start+Lt.count-1,q.width,4)===Me?gt.count=Math.max(gt.count,Lt.start+Lt.count-gt.start):(++_t,Pe[_t]=Lt)}Pe.length=_t+1;const mt=a.getParameter(a.UNPACK_ROW_LENGTH),Ct=a.getParameter(a.UNPACK_SKIP_PIXELS),Dt=a.getParameter(a.UNPACK_SKIP_ROWS);a.pixelStorei(a.UNPACK_ROW_LENGTH,q.width);for(let rt=0,gt=Pe.length;rt<gt;rt++){const Lt=Pe[rt],ue=Math.floor(Lt.start/4),Me=Math.ceil(Lt.count/4),ft=ue%q.width,pe=Math.floor(ue/q.width),nt=Me,ut=1;a.pixelStorei(a.UNPACK_SKIP_PIXELS,ft),a.pixelStorei(a.UNPACK_SKIP_ROWS,pe),t.texSubImage2D(a.TEXTURE_2D,0,ft,pe,nt,ut,be,je,q.data)}ie.clearUpdateRanges(),a.pixelStorei(a.UNPACK_ROW_LENGTH,mt),a.pixelStorei(a.UNPACK_SKIP_PIXELS,Ct),a.pixelStorei(a.UNPACK_SKIP_ROWS,Dt)}}function _e(ie,q,be){let je=a.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(je=a.TEXTURE_2D_ARRAY),q.isData3DTexture&&(je=a.TEXTURE_3D);const Ye=ce(ie,q),Pe=q.source;t.bindTexture(je,ie.__webglTexture,a.TEXTURE0+be);const _t=n.get(Pe);if(Pe.version!==_t.__version||Ye===!0){t.activeTexture(a.TEXTURE0+be);const mt=Fn.getPrimaries(Fn.workingColorSpace),Ct=q.colorSpace===vu?null:Fn.getPrimaries(q.colorSpace),Dt=q.colorSpace===vu||mt===Ct?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,q.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,q.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);let rt=E(q.image,!1,r.maxTextureSize);rt=Ot(q,rt);const gt=i.convert(q.format,q.colorSpace),Lt=i.convert(q.type);let ue=T(q.internalFormat,gt,Lt,q.colorSpace,q.isVideoTexture);le(je,q);let Me;const ft=q.mipmaps,pe=q.isVideoTexture!==!0,nt=_t.__version===void 0||Ye===!0,ut=Pe.dataReady,bt=I(q,rt);if(q.isDepthTexture)ue=M(q.format===f0,q.type),nt&&(pe?t.texStorage2D(a.TEXTURE_2D,1,ue,rt.width,rt.height):t.texImage2D(a.TEXTURE_2D,0,ue,rt.width,rt.height,0,gt,Lt,null));else if(q.isDataTexture)if(ft.length>0){pe&&nt&&t.texStorage2D(a.TEXTURE_2D,bt,ue,ft[0].width,ft[0].height);for(let lt=0,et=ft.length;lt<et;lt++)Me=ft[lt],pe?ut&&t.texSubImage2D(a.TEXTURE_2D,lt,0,0,Me.width,Me.height,gt,Lt,Me.data):t.texImage2D(a.TEXTURE_2D,lt,ue,Me.width,Me.height,0,gt,Lt,Me.data);q.generateMipmaps=!1}else pe?(nt&&t.texStorage2D(a.TEXTURE_2D,bt,ue,rt.width,rt.height),ut&&fe(q,rt,gt,Lt)):t.texImage2D(a.TEXTURE_2D,0,ue,rt.width,rt.height,0,gt,Lt,rt.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){pe&&nt&&t.texStorage3D(a.TEXTURE_2D_ARRAY,bt,ue,ft[0].width,ft[0].height,rt.depth);for(let lt=0,et=ft.length;lt<et;lt++)if(Me=ft[lt],q.format!==Pi)if(gt!==null)if(pe){if(ut)if(q.layerUpdates.size>0){const wt=ew(Me.width,Me.height,q.format,q.type);for(const jt of q.layerUpdates){const En=Me.data.subarray(jt*wt/Me.data.BYTES_PER_ELEMENT,(jt+1)*wt/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,lt,0,0,jt,Me.width,Me.height,1,gt,En)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,lt,0,0,0,Me.width,Me.height,rt.depth,gt,Me.data)}else t.compressedTexImage3D(a.TEXTURE_2D_ARRAY,lt,ue,Me.width,Me.height,rt.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?ut&&t.texSubImage3D(a.TEXTURE_2D_ARRAY,lt,0,0,0,Me.width,Me.height,rt.depth,gt,Lt,Me.data):t.texImage3D(a.TEXTURE_2D_ARRAY,lt,ue,Me.width,Me.height,rt.depth,0,gt,Lt,Me.data)}else{pe&&nt&&t.texStorage2D(a.TEXTURE_2D,bt,ue,ft[0].width,ft[0].height);for(let lt=0,et=ft.length;lt<et;lt++)Me=ft[lt],q.format!==Pi?gt!==null?pe?ut&&t.compressedTexSubImage2D(a.TEXTURE_2D,lt,0,0,Me.width,Me.height,gt,Me.data):t.compressedTexImage2D(a.TEXTURE_2D,lt,ue,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?ut&&t.texSubImage2D(a.TEXTURE_2D,lt,0,0,Me.width,Me.height,gt,Lt,Me.data):t.texImage2D(a.TEXTURE_2D,lt,ue,Me.width,Me.height,0,gt,Lt,Me.data)}else if(q.isDataArrayTexture)if(pe){if(nt&&t.texStorage3D(a.TEXTURE_2D_ARRAY,bt,ue,rt.width,rt.height,rt.depth),ut)if(q.layerUpdates.size>0){const lt=ew(rt.width,rt.height,q.format,q.type);for(const et of q.layerUpdates){const wt=rt.data.subarray(et*lt/rt.data.BYTES_PER_ELEMENT,(et+1)*lt/rt.data.BYTES_PER_ELEMENT);t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,et,rt.width,rt.height,1,gt,Lt,wt)}q.clearLayerUpdates()}else t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,gt,Lt,rt.data)}else t.texImage3D(a.TEXTURE_2D_ARRAY,0,ue,rt.width,rt.height,rt.depth,0,gt,Lt,rt.data);else if(q.isData3DTexture)pe?(nt&&t.texStorage3D(a.TEXTURE_3D,bt,ue,rt.width,rt.height,rt.depth),ut&&t.texSubImage3D(a.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,gt,Lt,rt.data)):t.texImage3D(a.TEXTURE_3D,0,ue,rt.width,rt.height,rt.depth,0,gt,Lt,rt.data);else if(q.isFramebufferTexture){if(nt)if(pe)t.texStorage2D(a.TEXTURE_2D,bt,ue,rt.width,rt.height);else{let lt=rt.width,et=rt.height;for(let wt=0;wt<bt;wt++)t.texImage2D(a.TEXTURE_2D,wt,ue,lt,et,0,gt,Lt,null),lt>>=1,et>>=1}}else if(ft.length>0){if(pe&&nt){const lt=zt(ft[0]);t.texStorage2D(a.TEXTURE_2D,bt,ue,lt.width,lt.height)}for(let lt=0,et=ft.length;lt<et;lt++)Me=ft[lt],pe?ut&&t.texSubImage2D(a.TEXTURE_2D,lt,0,0,gt,Lt,Me):t.texImage2D(a.TEXTURE_2D,lt,ue,gt,Lt,Me);q.generateMipmaps=!1}else if(pe){if(nt){const lt=zt(rt);t.texStorage2D(a.TEXTURE_2D,bt,ue,lt.width,lt.height)}ut&&t.texSubImage2D(a.TEXTURE_2D,0,0,0,gt,Lt,rt)}else t.texImage2D(a.TEXTURE_2D,0,ue,gt,Lt,rt);b(q)&&_(je),_t.__version=Pe.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function Ie(ie,q,be){if(q.image.length!==6)return;const je=ce(ie,q),Ye=q.source;t.bindTexture(a.TEXTURE_CUBE_MAP,ie.__webglTexture,a.TEXTURE0+be);const Pe=n.get(Ye);if(Ye.version!==Pe.__version||je===!0){t.activeTexture(a.TEXTURE0+be);const _t=Fn.getPrimaries(Fn.workingColorSpace),mt=q.colorSpace===vu?null:Fn.getPrimaries(q.colorSpace),Ct=q.colorSpace===vu||_t===mt?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,q.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,q.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);const Dt=q.isCompressedTexture||q.image[0].isCompressedTexture,rt=q.image[0]&&q.image[0].isDataTexture,gt=[];for(let et=0;et<6;et++)!Dt&&!rt?gt[et]=E(q.image[et],!0,r.maxCubemapSize):gt[et]=rt?q.image[et].image:q.image[et],gt[et]=Ot(q,gt[et]);const Lt=gt[0],ue=i.convert(q.format,q.colorSpace),Me=i.convert(q.type),ft=T(q.internalFormat,ue,Me,q.colorSpace),pe=q.isVideoTexture!==!0,nt=Pe.__version===void 0||je===!0,ut=Ye.dataReady;let bt=I(q,Lt);le(a.TEXTURE_CUBE_MAP,q);let lt;if(Dt){pe&&nt&&t.texStorage2D(a.TEXTURE_CUBE_MAP,bt,ft,Lt.width,Lt.height);for(let et=0;et<6;et++){lt=gt[et].mipmaps;for(let wt=0;wt<lt.length;wt++){const jt=lt[wt];q.format!==Pi?ue!==null?pe?ut&&t.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt,0,0,jt.width,jt.height,ue,jt.data):t.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt,ft,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?ut&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt,0,0,jt.width,jt.height,ue,Me,jt.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt,ft,jt.width,jt.height,0,ue,Me,jt.data)}}}else{if(lt=q.mipmaps,pe&&nt){lt.length>0&&bt++;const et=zt(gt[0]);t.texStorage2D(a.TEXTURE_CUBE_MAP,bt,ft,et.width,et.height)}for(let et=0;et<6;et++)if(rt){pe?ut&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,gt[et].width,gt[et].height,ue,Me,gt[et].data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,ft,gt[et].width,gt[et].height,0,ue,Me,gt[et].data);for(let wt=0;wt<lt.length;wt++){const En=lt[wt].image[et].image;pe?ut&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt+1,0,0,En.width,En.height,ue,Me,En.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt+1,ft,En.width,En.height,0,ue,Me,En.data)}}else{pe?ut&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,ue,Me,gt[et]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,ft,ue,Me,gt[et]);for(let wt=0;wt<lt.length;wt++){const jt=lt[wt];pe?ut&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt+1,0,0,ue,Me,jt.image[et]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+et,wt+1,ft,ue,Me,jt.image[et])}}}b(q)&&_(a.TEXTURE_CUBE_MAP),Pe.__version=Ye.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function Ge(ie,q,be,je,Ye,Pe){const _t=i.convert(be.format,be.colorSpace),mt=i.convert(be.type),Ct=T(be.internalFormat,_t,mt,be.colorSpace),Dt=n.get(q),rt=n.get(be);if(rt.__renderTarget=q,!Dt.__hasExternalTextures){const gt=Math.max(1,q.width>>Pe),Lt=Math.max(1,q.height>>Pe);Ye===a.TEXTURE_3D||Ye===a.TEXTURE_2D_ARRAY?t.texImage3D(Ye,Pe,Ct,gt,Lt,q.depth,0,_t,mt,null):t.texImage2D(Ye,Pe,Ct,gt,Lt,0,_t,mt,null)}t.bindFramebuffer(a.FRAMEBUFFER,ie),Qe(q)?o.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,je,Ye,rt.__webglTexture,0,ot(q)):(Ye===a.TEXTURE_2D||Ye>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&Ye<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,je,Ye,rt.__webglTexture,Pe),t.bindFramebuffer(a.FRAMEBUFFER,null)}function Ue(ie,q,be){if(a.bindRenderbuffer(a.RENDERBUFFER,ie),q.depthBuffer){const je=q.depthTexture,Ye=je&&je.isDepthTexture?je.type:null,Pe=M(q.stencilBuffer,Ye),_t=q.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,mt=ot(q);Qe(q)?o.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,mt,Pe,q.width,q.height):be?a.renderbufferStorageMultisample(a.RENDERBUFFER,mt,Pe,q.width,q.height):a.renderbufferStorage(a.RENDERBUFFER,Pe,q.width,q.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,_t,a.RENDERBUFFER,ie)}else{const je=q.textures;for(let Ye=0;Ye<je.length;Ye++){const Pe=je[Ye],_t=i.convert(Pe.format,Pe.colorSpace),mt=i.convert(Pe.type),Ct=T(Pe.internalFormat,_t,mt,Pe.colorSpace),Dt=ot(q);be&&Qe(q)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,Dt,Ct,q.width,q.height):Qe(q)?o.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Dt,Ct,q.width,q.height):a.renderbufferStorage(a.RENDERBUFFER,Ct,q.width,q.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function $e(ie,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(a.FRAMEBUFFER,ie),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const je=n.get(q.depthTexture);je.__renderTarget=q,(!je.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),re(q.depthTexture,0);const Ye=je.__webglTexture,Pe=ot(q);if(q.depthTexture.format===d0)Qe(q)?o.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Ye,0,Pe):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Ye,0);else if(q.depthTexture.format===f0)Qe(q)?o.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Ye,0,Pe):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Ye,0);else throw new Error("Unknown depthTexture format")}function dt(ie){const q=n.get(ie),be=ie.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ie.depthTexture){const je=ie.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),je){const Ye=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,je.removeEventListener("dispose",Ye)};je.addEventListener("dispose",Ye),q.__depthDisposeCallback=Ye}q.__boundDepthTexture=je}if(ie.depthTexture&&!q.__autoAllocateDepthBuffer){if(be)throw new Error("target.depthTexture not supported in Cube render targets");const je=ie.texture.mipmaps;je&&je.length>0?$e(q.__webglFramebuffer[0],ie):$e(q.__webglFramebuffer,ie)}else if(be){q.__webglDepthbuffer=[];for(let je=0;je<6;je++)if(t.bindFramebuffer(a.FRAMEBUFFER,q.__webglFramebuffer[je]),q.__webglDepthbuffer[je]===void 0)q.__webglDepthbuffer[je]=a.createRenderbuffer(),Ue(q.__webglDepthbuffer[je],ie,!1);else{const Ye=ie.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Pe=q.__webglDepthbuffer[je];a.bindRenderbuffer(a.RENDERBUFFER,Pe),a.framebufferRenderbuffer(a.FRAMEBUFFER,Ye,a.RENDERBUFFER,Pe)}}else{const je=ie.texture.mipmaps;if(je&&je.length>0?t.bindFramebuffer(a.FRAMEBUFFER,q.__webglFramebuffer[0]):t.bindFramebuffer(a.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=a.createRenderbuffer(),Ue(q.__webglDepthbuffer,ie,!1);else{const Ye=ie.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Pe=q.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,Pe),a.framebufferRenderbuffer(a.FRAMEBUFFER,Ye,a.RENDERBUFFER,Pe)}}t.bindFramebuffer(a.FRAMEBUFFER,null)}function ct(ie,q,be){const je=n.get(ie);q!==void 0&&Ge(je.__webglFramebuffer,ie,ie.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),be!==void 0&&dt(ie)}function se(ie){const q=ie.texture,be=n.get(ie),je=n.get(q);ie.addEventListener("dispose",B);const Ye=ie.textures,Pe=ie.isWebGLCubeRenderTarget===!0,_t=Ye.length>1;if(_t||(je.__webglTexture===void 0&&(je.__webglTexture=a.createTexture()),je.__version=q.version,s.memory.textures++),Pe){be.__webglFramebuffer=[];for(let mt=0;mt<6;mt++)if(q.mipmaps&&q.mipmaps.length>0){be.__webglFramebuffer[mt]=[];for(let Ct=0;Ct<q.mipmaps.length;Ct++)be.__webglFramebuffer[mt][Ct]=a.createFramebuffer()}else be.__webglFramebuffer[mt]=a.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){be.__webglFramebuffer=[];for(let mt=0;mt<q.mipmaps.length;mt++)be.__webglFramebuffer[mt]=a.createFramebuffer()}else be.__webglFramebuffer=a.createFramebuffer();if(_t)for(let mt=0,Ct=Ye.length;mt<Ct;mt++){const Dt=n.get(Ye[mt]);Dt.__webglTexture===void 0&&(Dt.__webglTexture=a.createTexture(),s.memory.textures++)}if(ie.samples>0&&Qe(ie)===!1){be.__webglMultisampledFramebuffer=a.createFramebuffer(),be.__webglColorRenderbuffer=[],t.bindFramebuffer(a.FRAMEBUFFER,be.__webglMultisampledFramebuffer);for(let mt=0;mt<Ye.length;mt++){const Ct=Ye[mt];be.__webglColorRenderbuffer[mt]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,be.__webglColorRenderbuffer[mt]);const Dt=i.convert(Ct.format,Ct.colorSpace),rt=i.convert(Ct.type),gt=T(Ct.internalFormat,Dt,rt,Ct.colorSpace,ie.isXRRenderTarget===!0),Lt=ot(ie);a.renderbufferStorageMultisample(a.RENDERBUFFER,Lt,gt,ie.width,ie.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+mt,a.RENDERBUFFER,be.__webglColorRenderbuffer[mt])}a.bindRenderbuffer(a.RENDERBUFFER,null),ie.depthBuffer&&(be.__webglDepthRenderbuffer=a.createRenderbuffer(),Ue(be.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(a.TEXTURE_CUBE_MAP,je.__webglTexture),le(a.TEXTURE_CUBE_MAP,q);for(let mt=0;mt<6;mt++)if(q.mipmaps&&q.mipmaps.length>0)for(let Ct=0;Ct<q.mipmaps.length;Ct++)Ge(be.__webglFramebuffer[mt][Ct],ie,q,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+mt,Ct);else Ge(be.__webglFramebuffer[mt],ie,q,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+mt,0);b(q)&&_(a.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_t){for(let mt=0,Ct=Ye.length;mt<Ct;mt++){const Dt=Ye[mt],rt=n.get(Dt);let gt=a.TEXTURE_2D;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(gt=ie.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(gt,rt.__webglTexture),le(gt,Dt),Ge(be.__webglFramebuffer,ie,Dt,a.COLOR_ATTACHMENT0+mt,gt,0),b(Dt)&&_(gt)}t.unbindTexture()}else{let mt=a.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(mt=ie.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(mt,je.__webglTexture),le(mt,q),q.mipmaps&&q.mipmaps.length>0)for(let Ct=0;Ct<q.mipmaps.length;Ct++)Ge(be.__webglFramebuffer[Ct],ie,q,a.COLOR_ATTACHMENT0,mt,Ct);else Ge(be.__webglFramebuffer,ie,q,a.COLOR_ATTACHMENT0,mt,0);b(q)&&_(mt),t.unbindTexture()}ie.depthBuffer&&dt(ie)}function Be(ie){const q=ie.textures;for(let be=0,je=q.length;be<je;be++){const Ye=q[be];if(b(Ye)){const Pe=R(ie),_t=n.get(Ye).__webglTexture;t.bindTexture(Pe,_t),_(Pe),t.unbindTexture()}}}const Le=[],Ke=[];function ze(ie){if(ie.samples>0){if(Qe(ie)===!1){const q=ie.textures,be=ie.width,je=ie.height;let Ye=a.COLOR_BUFFER_BIT;const Pe=ie.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,_t=n.get(ie),mt=q.length>1;if(mt)for(let Dt=0;Dt<q.length;Dt++)t.bindFramebuffer(a.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Dt,a.RENDERBUFFER,null),t.bindFramebuffer(a.FRAMEBUFFER,_t.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Dt,a.TEXTURE_2D,null,0);t.bindFramebuffer(a.READ_FRAMEBUFFER,_t.__webglMultisampledFramebuffer);const Ct=ie.texture.mipmaps;Ct&&Ct.length>0?t.bindFramebuffer(a.DRAW_FRAMEBUFFER,_t.__webglFramebuffer[0]):t.bindFramebuffer(a.DRAW_FRAMEBUFFER,_t.__webglFramebuffer);for(let Dt=0;Dt<q.length;Dt++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&(Ye|=a.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&(Ye|=a.STENCIL_BUFFER_BIT)),mt){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,_t.__webglColorRenderbuffer[Dt]);const rt=n.get(q[Dt]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,rt,0)}a.blitFramebuffer(0,0,be,je,0,0,be,je,Ye,a.NEAREST),l===!0&&(Le.length=0,Ke.length=0,Le.push(a.COLOR_ATTACHMENT0+Dt),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Le.push(Pe),Ke.push(Pe),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,Ke)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Le))}if(t.bindFramebuffer(a.READ_FRAMEBUFFER,null),t.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),mt)for(let Dt=0;Dt<q.length;Dt++){t.bindFramebuffer(a.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Dt,a.RENDERBUFFER,_t.__webglColorRenderbuffer[Dt]);const rt=n.get(q[Dt]).__webglTexture;t.bindFramebuffer(a.FRAMEBUFFER,_t.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Dt,a.TEXTURE_2D,rt,0)}t.bindFramebuffer(a.DRAW_FRAMEBUFFER,_t.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&l){const q=ie.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[q])}}}function ot(ie){return Math.min(r.maxSamples,ie.samples)}function Qe(ie){const q=n.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function st(ie){const q=s.render.frame;d.get(ie)!==q&&(d.set(ie,q),ie.update())}function Ot(ie,q){const be=ie.colorSpace,je=ie.format,Ye=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||be!==pi&&be!==vu&&(Fn.getTransfer(be)===fa?(je!==Pi||Ye!==Bo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",be)),q}function zt(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(c.width=ie.naturalWidth||ie.width,c.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(c.width=ie.displayWidth,c.height=ie.displayHeight):(c.width=ie.width,c.height=ie.height),c}this.allocateTextureUnit=Q,this.resetTextureUnits=W,this.setTexture2D=re,this.setTexture2DArray=G,this.setTexture3D=Y,this.setTextureCube=K,this.rebindTextures=ct,this.setupRenderTarget=se,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=dt,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=Qe}function v6(a,e){function t(n,r=vu){let i;const s=Fn.getTransfer(r);if(n===Bo)return a.UNSIGNED_BYTE;if(n===w_)return a.UNSIGNED_SHORT_4_4_4_4;if(n===R_)return a.UNSIGNED_SHORT_5_5_5_1;if(n===IR)return a.UNSIGNED_INT_5_9_9_9_REV;if(n===NR)return a.BYTE;if(n===CR)return a.SHORT;if(n===c0)return a.UNSIGNED_SHORT;if(n===E_)return a.INT;if(n===Ru)return a.UNSIGNED_INT;if(n===Ts)return a.FLOAT;if(n===C0)return a.HALF_FLOAT;if(n===DR)return a.ALPHA;if(n===LR)return a.RGB;if(n===Pi)return a.RGBA;if(n===d0)return a.DEPTH_COMPONENT;if(n===f0)return a.DEPTH_STENCIL;if(n===M_)return a.RED;if(n===_1)return a.RED_INTEGER;if(n===PR)return a.RG;if(n===T_)return a.RG_INTEGER;if(n===N_)return a.RGBA_INTEGER;if(n===Mv||n===Tv||n===Nv||n===Cv)if(s===fa)if(i=e.get("WEBGL_compressed_texture_s3tc_srgb"),i!==null){if(n===Mv)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Tv)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Nv)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Cv)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(i=e.get("WEBGL_compressed_texture_s3tc"),i!==null){if(n===Mv)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Tv)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Nv)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Cv)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===fA||n===hA||n===pA||n===mA)if(i=e.get("WEBGL_compressed_texture_pvrtc"),i!==null){if(n===fA)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===hA)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===pA)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===mA)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===gA||n===vA||n===yA)if(i=e.get("WEBGL_compressed_texture_etc"),i!==null){if(n===gA||n===vA)return s===fa?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===yA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===xA||n===AA||n===_A||n===bA||n===SA||n===EA||n===wA||n===RA||n===MA||n===TA||n===NA||n===CA||n===IA||n===DA)if(i=e.get("WEBGL_compressed_texture_astc"),i!==null){if(n===xA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===AA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===_A)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===bA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===SA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===EA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===wA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===RA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===MA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===TA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===NA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===CA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===IA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===DA)return s===fa?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Iv||n===LA||n===PA)if(i=e.get("EXT_texture_compression_bptc"),i!==null){if(n===Iv)return s===fa?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===LA)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===PA)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===OR||n===OA||n===UA||n===BA)if(i=e.get("EXT_texture_compression_rgtc"),i!==null){if(n===Iv)return i.COMPRESSED_RED_RGTC1_EXT;if(n===OA)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===UA)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===BA)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===u0?a.UNSIGNED_INT_24_8:a[n]!==void 0?a[n]:null}return{convert:t}}class y6 extends Ua{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const Ase=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_se=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bse{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new y6(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Sl({vertexShader:Ase,fragmentShader:_se,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ur(new D0(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Sse extends Pc{constructor(e,t){super();const n=this;let r=null,i=1,s=null,o="local-floor",l=1,c=null,d=null,h=null,m=null,v=null,A=null;const E=new bse,b={},_=t.getContextAttributes();let R=null,T=null;const M=[],I=[],P=new Ze;let B=null;const F=new er;F.viewport=new Jn;const L=new er;L.viewport=new Jn;const U=[F,L],j=new s6;let W=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let _e=M[fe];return _e===void 0&&(_e=new wx,M[fe]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(fe){let _e=M[fe];return _e===void 0&&(_e=new wx,M[fe]=_e),_e.getGripSpace()},this.getHand=function(fe){let _e=M[fe];return _e===void 0&&(_e=new wx,M[fe]=_e),_e.getHandSpace()};function $(fe){const _e=I.indexOf(fe.inputSource);if(_e===-1)return;const Ie=M[_e];Ie!==void 0&&(Ie.update(fe.inputSource,fe.frame,c||s),Ie.dispatchEvent({type:fe.type,data:fe.inputSource}))}function re(){r.removeEventListener("select",$),r.removeEventListener("selectstart",$),r.removeEventListener("selectend",$),r.removeEventListener("squeeze",$),r.removeEventListener("squeezestart",$),r.removeEventListener("squeezeend",$),r.removeEventListener("end",re),r.removeEventListener("inputsourceschange",G);for(let fe=0;fe<M.length;fe++){const _e=I[fe];_e!==null&&(I[fe]=null,M[fe].disconnect(_e))}W=null,Q=null,E.reset();for(const fe in b)delete b[fe];e.setRenderTarget(R),v=null,m=null,h=null,r=null,T=null,xe.stop(),n.isPresenting=!1,e.setPixelRatio(B),e.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){i=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){o=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(fe){c=fe},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return h},this.getFrame=function(){return A},this.getSession=function(){return r},this.setSession=async function(fe){if(r=fe,r!==null){if(R=e.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",re),r.addEventListener("inputsourceschange",G),_.xrCompatible!==!0&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&(h=new XRWebGLBinding(r,t)),h!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ie=null,Ge=null,Ue=null;_.depth&&(Ue=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ie=_.stencil?f0:d0,Ge=_.stencil?u0:Ru);const $e={colorFormat:t.RGBA8,depthFormat:Ue,scaleFactor:i};m=h.createProjectionLayer($e),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),T=new Nc(m.textureWidth,m.textureHeight,{format:Pi,type:Bo,depthTexture:new XR(m.textureWidth,m.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,Ie),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const Ie={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:i};v=new XRWebGLLayer(r,t,Ie),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),T=new Nc(v.framebufferWidth,v.framebufferHeight,{format:Pi,type:Bo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await r.requestReferenceSpace(o),xe.setContext(r),xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function G(fe){for(let _e=0;_e<fe.removed.length;_e++){const Ie=fe.removed[_e],Ge=I.indexOf(Ie);Ge>=0&&(I[Ge]=null,M[Ge].disconnect(Ie))}for(let _e=0;_e<fe.added.length;_e++){const Ie=fe.added[_e];let Ge=I.indexOf(Ie);if(Ge===-1){for(let $e=0;$e<M.length;$e++)if($e>=I.length){I.push(Ie),Ge=$e;break}else if(I[$e]===null){I[$e]=Ie,Ge=$e;break}if(Ge===-1)break}const Ue=M[Ge];Ue&&Ue.connect(Ie)}}const Y=new ae,K=new ae;function X(fe,_e,Ie){Y.setFromMatrixPosition(_e.matrixWorld),K.setFromMatrixPosition(Ie.matrixWorld);const Ge=Y.distanceTo(K),Ue=_e.projectionMatrix.elements,$e=Ie.projectionMatrix.elements,dt=Ue[14]/(Ue[10]-1),ct=Ue[14]/(Ue[10]+1),se=(Ue[9]+1)/Ue[5],Be=(Ue[9]-1)/Ue[5],Le=(Ue[8]-1)/Ue[0],Ke=($e[8]+1)/$e[0],ze=dt*Le,ot=dt*Ke,Qe=Ge/(-Le+Ke),st=Qe*-Le;if(_e.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(st),fe.translateZ(Qe),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),Ue[10]===-1)fe.projectionMatrix.copy(_e.projectionMatrix),fe.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const Ot=dt+Qe,zt=ct+Qe,ie=ze-st,q=ot+(Ge-st),be=se*ct/zt*Ot,je=Be*ct/zt*Ot;fe.projectionMatrix.makePerspective(ie,q,be,je,Ot,zt),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function z(fe,_e){_e===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(_e.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(r===null)return;let _e=fe.near,Ie=fe.far;E.texture!==null&&(E.depthNear>0&&(_e=E.depthNear),E.depthFar>0&&(Ie=E.depthFar)),j.near=L.near=F.near=_e,j.far=L.far=F.far=Ie,(W!==j.near||Q!==j.far)&&(r.updateRenderState({depthNear:j.near,depthFar:j.far}),W=j.near,Q=j.far),j.layers.mask=fe.layers.mask|6,F.layers.mask=j.layers.mask&3,L.layers.mask=j.layers.mask&5;const Ge=fe.parent,Ue=j.cameras;z(j,Ge);for(let $e=0;$e<Ue.length;$e++)z(Ue[$e],Ge);Ue.length===2?X(j,F,L):j.projectionMatrix.copy(F.projectionMatrix),J(fe,j,Ge)};function J(fe,_e,Ie){Ie===null?fe.matrix.copy(_e.matrixWorld):(fe.matrix.copy(Ie.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(_e.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(_e.projectionMatrix),fe.projectionMatrixInverse.copy(_e.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=g0*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return j},this.getFoveation=function(){if(!(m===null&&v===null))return l},this.setFoveation=function(fe){l=fe,m!==null&&(m.fixedFoveation=fe),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=fe)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(j)},this.getCameraTexture=function(fe){return b[fe]};let le=null;function ce(fe,_e){if(d=_e.getViewerPose(c||s),A=_e,d!==null){const Ie=d.views;v!==null&&(e.setRenderTargetFramebuffer(T,v.framebuffer),e.setRenderTarget(T));let Ge=!1;Ie.length!==j.cameras.length&&(j.cameras.length=0,Ge=!0);for(let ct=0;ct<Ie.length;ct++){const se=Ie[ct];let Be=null;if(v!==null)Be=v.getViewport(se);else{const Ke=h.getViewSubImage(m,se);Be=Ke.viewport,ct===0&&(e.setRenderTargetTextures(T,Ke.colorTexture,Ke.depthStencilTexture),e.setRenderTarget(T))}let Le=U[ct];Le===void 0&&(Le=new er,Le.layers.enable(ct),Le.viewport=new Jn,U[ct]=Le),Le.matrix.fromArray(se.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(se.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(Be.x,Be.y,Be.width,Be.height),ct===0&&(j.matrix.copy(Le.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale)),Ge===!0&&j.cameras.push(Le)}const Ue=r.enabledFeatures;if(Ue&&Ue.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){const ct=h.getDepthInformation(Ie[0]);ct&&ct.isValid&&ct.texture&&E.init(ct,r.renderState)}if(Ue&&Ue.includes("camera-access")&&(e.state.unbindTexture(),h))for(let ct=0;ct<Ie.length;ct++){const se=Ie[ct].camera;if(se){let Be=b[se];Be||(Be=new y6,b[se]=Be);const Le=h.getCameraImage(se);Be.sourceTexture=Le}}}for(let Ie=0;Ie<M.length;Ie++){const Ge=I[Ie],Ue=M[Ie];Ge!==null&&Ue!==void 0&&Ue.update(Ge,_e,c||s)}le&&le(fe,_e),_e.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:_e}),A=null}const xe=new f6;xe.setAnimationLoop(ce),this.setAnimationLoop=function(fe){le=fe},this.dispose=function(){}}}const gh=new lo,Ese=new nn;function wse(a,e){function t(b,_){b.matrixAutoUpdate===!0&&b.updateMatrix(),_.value.copy(b.matrix)}function n(b,_){_.color.getRGB(b.fogColor.value,vO(a)),_.isFog?(b.fogNear.value=_.near,b.fogFar.value=_.far):_.isFogExp2&&(b.fogDensity.value=_.density)}function r(b,_,R,T,M){_.isMeshBasicMaterial||_.isMeshLambertMaterial?i(b,_):_.isMeshToonMaterial?(i(b,_),h(b,_)):_.isMeshPhongMaterial?(i(b,_),d(b,_)):_.isMeshStandardMaterial?(i(b,_),m(b,_),_.isMeshPhysicalMaterial&&v(b,_,M)):_.isMeshMatcapMaterial?(i(b,_),A(b,_)):_.isMeshDepthMaterial?i(b,_):_.isMeshDistanceMaterial?(i(b,_),E(b,_)):_.isMeshNormalMaterial?i(b,_):_.isLineBasicMaterial?(s(b,_),_.isLineDashedMaterial&&o(b,_)):_.isPointsMaterial?l(b,_,R,T):_.isSpriteMaterial?c(b,_):_.isShadowMaterial?(b.color.value.copy(_.color),b.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function i(b,_){b.opacity.value=_.opacity,_.color&&b.diffuse.value.copy(_.color),_.emissive&&b.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.bumpMap&&(b.bumpMap.value=_.bumpMap,t(_.bumpMap,b.bumpMapTransform),b.bumpScale.value=_.bumpScale,_.side===ss&&(b.bumpScale.value*=-1)),_.normalMap&&(b.normalMap.value=_.normalMap,t(_.normalMap,b.normalMapTransform),b.normalScale.value.copy(_.normalScale),_.side===ss&&b.normalScale.value.negate()),_.displacementMap&&(b.displacementMap.value=_.displacementMap,t(_.displacementMap,b.displacementMapTransform),b.displacementScale.value=_.displacementScale,b.displacementBias.value=_.displacementBias),_.emissiveMap&&(b.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,b.emissiveMapTransform)),_.specularMap&&(b.specularMap.value=_.specularMap,t(_.specularMap,b.specularMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest);const R=e.get(_),T=R.envMap,M=R.envMapRotation;T&&(b.envMap.value=T,gh.copy(M),gh.x*=-1,gh.y*=-1,gh.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(gh.y*=-1,gh.z*=-1),b.envMapRotation.value.setFromMatrix4(Ese.makeRotationFromEuler(gh)),b.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=_.reflectivity,b.ior.value=_.ior,b.refractionRatio.value=_.refractionRatio),_.lightMap&&(b.lightMap.value=_.lightMap,b.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,b.lightMapTransform)),_.aoMap&&(b.aoMap.value=_.aoMap,b.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,b.aoMapTransform))}function s(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,_.map&&(b.map.value=_.map,t(_.map,b.mapTransform))}function o(b,_){b.dashSize.value=_.dashSize,b.totalSize.value=_.dashSize+_.gapSize,b.scale.value=_.scale}function l(b,_,R,T){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.size.value=_.size*R,b.scale.value=T*.5,_.map&&(b.map.value=_.map,t(_.map,b.uvTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest)}function c(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.rotation.value=_.rotation,_.map&&(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest)}function d(b,_){b.specular.value.copy(_.specular),b.shininess.value=Math.max(_.shininess,1e-4)}function h(b,_){_.gradientMap&&(b.gradientMap.value=_.gradientMap)}function m(b,_){b.metalness.value=_.metalness,_.metalnessMap&&(b.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,b.metalnessMapTransform)),b.roughness.value=_.roughness,_.roughnessMap&&(b.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,b.roughnessMapTransform)),_.envMap&&(b.envMapIntensity.value=_.envMapIntensity)}function v(b,_,R){b.ior.value=_.ior,_.sheen>0&&(b.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),b.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(b.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,b.sheenColorMapTransform)),_.sheenRoughnessMap&&(b.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,b.sheenRoughnessMapTransform))),_.clearcoat>0&&(b.clearcoat.value=_.clearcoat,b.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(b.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,b.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(b.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===ss&&b.clearcoatNormalScale.value.negate())),_.dispersion>0&&(b.dispersion.value=_.dispersion),_.iridescence>0&&(b.iridescence.value=_.iridescence,b.iridescenceIOR.value=_.iridescenceIOR,b.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(b.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,b.iridescenceMapTransform)),_.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),_.transmission>0&&(b.transmission.value=_.transmission,b.transmissionSamplerMap.value=R.texture,b.transmissionSamplerSize.value.set(R.width,R.height),_.transmissionMap&&(b.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,b.transmissionMapTransform)),b.thickness.value=_.thickness,_.thicknessMap&&(b.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=_.attenuationDistance,b.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(b.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(b.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=_.specularIntensity,b.specularColor.value.copy(_.specularColor),_.specularColorMap&&(b.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,b.specularColorMapTransform)),_.specularIntensityMap&&(b.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,b.specularIntensityMapTransform))}function A(b,_){_.matcap&&(b.matcap.value=_.matcap)}function E(b,_){const R=e.get(_).light;b.referencePosition.value.setFromMatrixPosition(R.matrixWorld),b.nearDistance.value=R.shadow.camera.near,b.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Rse(a,e,t,n){let r={},i={},s=[];const o=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function l(R,T){const M=T.program;n.uniformBlockBinding(R,M)}function c(R,T){let M=r[R.id];M===void 0&&(A(R),M=d(R),r[R.id]=M,R.addEventListener("dispose",b));const I=T.program;n.updateUBOMapping(R,I);const P=e.render.frame;i[R.id]!==P&&(m(R),i[R.id]=P)}function d(R){const T=h();R.__bindingPointIndex=T;const M=a.createBuffer(),I=R.__size,P=R.usage;return a.bindBuffer(a.UNIFORM_BUFFER,M),a.bufferData(a.UNIFORM_BUFFER,I,P),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,T,M),M}function h(){for(let R=0;R<o;R++)if(s.indexOf(R)===-1)return s.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(R){const T=r[R.id],M=R.uniforms,I=R.__cache;a.bindBuffer(a.UNIFORM_BUFFER,T);for(let P=0,B=M.length;P<B;P++){const F=Array.isArray(M[P])?M[P]:[M[P]];for(let L=0,U=F.length;L<U;L++){const j=F[L];if(v(j,P,L,I)===!0){const W=j.__offset,Q=Array.isArray(j.value)?j.value:[j.value];let $=0;for(let re=0;re<Q.length;re++){const G=Q[re],Y=E(G);typeof G=="number"||typeof G=="boolean"?(j.__data[0]=G,a.bufferSubData(a.UNIFORM_BUFFER,W+$,j.__data)):G.isMatrix3?(j.__data[0]=G.elements[0],j.__data[1]=G.elements[1],j.__data[2]=G.elements[2],j.__data[3]=0,j.__data[4]=G.elements[3],j.__data[5]=G.elements[4],j.__data[6]=G.elements[5],j.__data[7]=0,j.__data[8]=G.elements[6],j.__data[9]=G.elements[7],j.__data[10]=G.elements[8],j.__data[11]=0):(G.toArray(j.__data,$),$+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,W,j.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function v(R,T,M,I){const P=R.value,B=T+"_"+M;if(I[B]===void 0)return typeof P=="number"||typeof P=="boolean"?I[B]=P:I[B]=P.clone(),!0;{const F=I[B];if(typeof P=="number"||typeof P=="boolean"){if(F!==P)return I[B]=P,!0}else if(F.equals(P)===!1)return F.copy(P),!0}return!1}function A(R){const T=R.uniforms;let M=0;const I=16;for(let B=0,F=T.length;B<F;B++){const L=Array.isArray(T[B])?T[B]:[T[B]];for(let U=0,j=L.length;U<j;U++){const W=L[U],Q=Array.isArray(W.value)?W.value:[W.value];for(let $=0,re=Q.length;$<re;$++){const G=Q[$],Y=E(G),K=M%I,X=K%Y.boundary,z=K+X;M+=X,z!==0&&I-z<Y.storage&&(M+=I-z),W.__data=new Float32Array(Y.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=M,M+=Y.storage}}}const P=M%I;return P>0&&(M+=I-P),R.__size=M,R.__cache={},this}function E(R){const T={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(T.boundary=4,T.storage=4):R.isVector2?(T.boundary=8,T.storage=8):R.isVector3||R.isColor?(T.boundary=16,T.storage=12):R.isVector4?(T.boundary=16,T.storage=16):R.isMatrix3?(T.boundary=48,T.storage=48):R.isMatrix4?(T.boundary=64,T.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),T}function b(R){const T=R.target;T.removeEventListener("dispose",b);const M=s.indexOf(T.__bindingPointIndex);s.splice(M,1),a.deleteBuffer(r[T.id]),delete r[T.id],delete i[T.id]}function _(){for(const R in r)a.deleteBuffer(r[R]);s=[],r={},i={}}return{bind:l,update:c,dispose:_}}class x6{constructor(e={}){const{canvas:t=pO(),context:n=null,depth:r=!0,stencil:i=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let v;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=n.getContextAttributes().alpha}else v=s;const A=new Uint32Array(4),E=new Int32Array(4);let b=null,_=null;const R=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ec,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const M=this;let I=!1;this._outputColorSpace=cr;let P=0,B=0,F=null,L=-1,U=null;const j=new Jn,W=new Jn;let Q=null;const $=new Et(0);let re=0,G=t.width,Y=t.height,K=1,X=null,z=null;const J=new Jn(0,0,G,Y),le=new Jn(0,0,G,Y);let ce=!1;const xe=new I0;let fe=!1,_e=!1;const Ie=new nn,Ge=new ae,Ue=new Jn,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let dt=!1;function ct(){return F===null?K:1}let se=n;function Be(ee,ye){return t.getContext(ee,ye)}try{const ee={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${A_}`),t.addEventListener("webglcontextlost",ut,!1),t.addEventListener("webglcontextrestored",bt,!1),t.addEventListener("webglcontextcreationerror",lt,!1),se===null){const ye="webgl2";if(se=Be(ye,ee),se===null)throw Be(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let Le,Ke,ze,ot,Qe,st,Ot,zt,ie,q,be,je,Ye,Pe,_t,mt,Ct,Dt,rt,gt,Lt,ue,Me,ft;function pe(){Le=new Fre(se),Le.init(),ue=new v6(se,Le),Ke=new Ire(se,Le,e,ue),ze=new yse(se,Le),Ke.reversedDepthBuffer&&m&&ze.buffers.depth.setReversed(!0),ot=new jre(se),Qe=new ise,st=new xse(se,Le,ze,Qe,Ke,ue,ot),Ot=new Lre(M),zt=new Bre(M),ie=new Yte(se),Me=new Nre(se,ie),q=new kre(se,ie,ot,Me),be=new Gre(se,q,ie,ot),rt=new zre(se,Ke,st),mt=new Dre(Qe),je=new rse(M,Ot,zt,Le,Ke,Me,mt),Ye=new wse(M,Qe),Pe=new ose,_t=new hse(Le),Dt=new Tre(M,Ot,zt,ze,be,v,l),Ct=new gse(M,be,Ke),ft=new Rse(se,ot,Ke,ze),gt=new Cre(se,Le,ot),Lt=new Hre(se,Le,ot),ot.programs=je.programs,M.capabilities=Ke,M.extensions=Le,M.properties=Qe,M.renderLists=Pe,M.shadowMap=Ct,M.state=ze,M.info=ot}pe();const nt=new Sse(M,se);this.xr=nt,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const ee=Le.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=Le.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(ee){ee!==void 0&&(K=ee,this.setSize(G,Y,!1))},this.getSize=function(ee){return ee.set(G,Y)},this.setSize=function(ee,ye,Re=!0){if(nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}G=ee,Y=ye,t.width=Math.floor(ee*K),t.height=Math.floor(ye*K),Re===!0&&(t.style.width=ee+"px",t.style.height=ye+"px"),this.setViewport(0,0,ee,ye)},this.getDrawingBufferSize=function(ee){return ee.set(G*K,Y*K).floor()},this.setDrawingBufferSize=function(ee,ye,Re){G=ee,Y=ye,K=Re,t.width=Math.floor(ee*Re),t.height=Math.floor(ye*Re),this.setViewport(0,0,ee,ye)},this.getCurrentViewport=function(ee){return ee.copy(j)},this.getViewport=function(ee){return ee.copy(J)},this.setViewport=function(ee,ye,Re,Oe){ee.isVector4?J.set(ee.x,ee.y,ee.z,ee.w):J.set(ee,ye,Re,Oe),ze.viewport(j.copy(J).multiplyScalar(K).round())},this.getScissor=function(ee){return ee.copy(le)},this.setScissor=function(ee,ye,Re,Oe){ee.isVector4?le.set(ee.x,ee.y,ee.z,ee.w):le.set(ee,ye,Re,Oe),ze.scissor(W.copy(le).multiplyScalar(K).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(ee){ze.setScissorTest(ce=ee)},this.setOpaqueSort=function(ee){X=ee},this.setTransparentSort=function(ee){z=ee},this.getClearColor=function(ee){return ee.copy(Dt.getClearColor())},this.setClearColor=function(){Dt.setClearColor(...arguments)},this.getClearAlpha=function(){return Dt.getClearAlpha()},this.setClearAlpha=function(){Dt.setClearAlpha(...arguments)},this.clear=function(ee=!0,ye=!0,Re=!0){let Oe=0;if(ee){let Se=!1;if(F!==null){const ht=F.texture.format;Se=ht===N_||ht===T_||ht===_1}if(Se){const ht=F.texture.type,yt=ht===Bo||ht===Ru||ht===c0||ht===u0||ht===w_||ht===R_,It=Dt.getClearColor(),St=Dt.getClearAlpha(),qt=It.r,Qt=It.g,Ht=It.b;yt?(A[0]=qt,A[1]=Qt,A[2]=Ht,A[3]=St,se.clearBufferuiv(se.COLOR,0,A)):(E[0]=qt,E[1]=Qt,E[2]=Ht,E[3]=St,se.clearBufferiv(se.COLOR,0,E))}else Oe|=se.COLOR_BUFFER_BIT}ye&&(Oe|=se.DEPTH_BUFFER_BIT),Re&&(Oe|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ut,!1),t.removeEventListener("webglcontextrestored",bt,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Dt.dispose(),Pe.dispose(),_t.dispose(),Qe.dispose(),Ot.dispose(),zt.dispose(),be.dispose(),Me.dispose(),ft.dispose(),je.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",xa),nt.removeEventListener("sessionend",Ya),Ea.stop()};function ut(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const ee=ot.autoReset,ye=Ct.enabled,Re=Ct.autoUpdate,Oe=Ct.needsUpdate,Se=Ct.type;pe(),ot.autoReset=ee,Ct.enabled=ye,Ct.autoUpdate=Re,Ct.needsUpdate=Oe,Ct.type=Se}function lt(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function et(ee){const ye=ee.target;ye.removeEventListener("dispose",et),wt(ye)}function wt(ee){jt(ee),Qe.remove(ee)}function jt(ee){const ye=Qe.get(ee).programs;ye!==void 0&&(ye.forEach(function(Re){je.releaseProgram(Re)}),ee.isShaderMaterial&&je.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,ye,Re,Oe,Se,ht){ye===null&&(ye=$e);const yt=Se.isMesh&&Se.matrixWorld.determinant()<0,It=co(ee,ye,Re,Oe,Se);ze.setMaterial(Oe,yt);let St=Re.index,qt=1;if(Oe.wireframe===!0){if(St=q.getWireframeAttribute(Re),St===void 0)return;qt=2}const Qt=Re.drawRange,Ht=Re.attributes.position;let An=Qt.start*qt,zn=(Qt.start+Qt.count)*qt;ht!==null&&(An=Math.max(An,ht.start*qt),zn=Math.min(zn,(ht.start+ht.count)*qt)),St!==null?(An=Math.max(An,0),zn=Math.min(zn,St.count)):Ht!=null&&(An=Math.max(An,0),zn=Math.min(zn,Ht.count));const Aa=zn-An;if(Aa<0||Aa===1/0)return;Me.setup(Se,Oe,It,Re,St);let ta,gn=gt;if(St!==null&&(ta=ie.get(St),gn=Lt,gn.setIndex(ta)),Se.isMesh)Oe.wireframe===!0?(ze.setLineWidth(Oe.wireframeLinewidth*ct()),gn.setMode(se.LINES)):gn.setMode(se.TRIANGLES);else if(Se.isLine){let Xt=Oe.linewidth;Xt===void 0&&(Xt=1),ze.setLineWidth(Xt*ct()),Se.isLineSegments?gn.setMode(se.LINES):Se.isLineLoop?gn.setMode(se.LINE_LOOP):gn.setMode(se.LINE_STRIP)}else Se.isPoints?gn.setMode(se.POINTS):Se.isSprite&&gn.setMode(se.TRIANGLES);if(Se.isBatchedMesh)if(Se._multiDrawInstances!==null)t0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),gn.renderMultiDrawInstances(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount,Se._multiDrawInstances);else if(Le.get("WEBGL_multi_draw"))gn.renderMultiDraw(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount);else{const Xt=Se._multiDrawStarts,_a=Se._multiDrawCounts,In=Se._multiDrawCount,Ar=St?ie.get(St).bytesPerElement:1,cs=Qe.get(Oe).currentProgram.getUniforms();for(let _r=0;_r<In;_r++)cs.setValue(se,"_gl_DrawID",_r),gn.render(Xt[_r]/Ar,_a[_r])}else if(Se.isInstancedMesh)gn.renderInstances(An,Aa,Se.count);else if(Re.isInstancedBufferGeometry){const Xt=Re._maxInstanceCount!==void 0?Re._maxInstanceCount:1/0,_a=Math.min(Re.instanceCount,Xt);gn.renderInstances(An,Aa,_a)}else gn.render(An,Aa)};function En(ee,ye,Re){ee.transparent===!0&&ee.side===yl&&ee.forceSinglePass===!1?(ee.side=ss,ee.needsUpdate=!0,Hi(ee,ye,Re),ee.side=Tc,ee.needsUpdate=!0,Hi(ee,ye,Re),ee.side=yl):Hi(ee,ye,Re)}this.compile=function(ee,ye,Re=null){Re===null&&(Re=ee),_=_t.get(Re),_.init(ye),T.push(_),Re.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ye.layers)&&(_.pushLight(Se),Se.castShadow&&_.pushShadow(Se))}),ee!==Re&&ee.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ye.layers)&&(_.pushLight(Se),Se.castShadow&&_.pushShadow(Se))}),_.setupLights();const Oe=new Set;return ee.traverse(function(Se){if(!(Se.isMesh||Se.isPoints||Se.isLine||Se.isSprite))return;const ht=Se.material;if(ht)if(Array.isArray(ht))for(let yt=0;yt<ht.length;yt++){const It=ht[yt];En(It,Re,Se),Oe.add(It)}else En(ht,Re,Se),Oe.add(ht)}),_=T.pop(),Oe},this.compileAsync=function(ee,ye,Re=null){const Oe=this.compile(ee,ye,Re);return new Promise(Se=>{function ht(){if(Oe.forEach(function(yt){Qe.get(yt).currentProgram.isReady()&&Oe.delete(yt)}),Oe.size===0){Se(ee);return}setTimeout(ht,10)}Le.get("KHR_parallel_shader_compile")!==null?ht():setTimeout(ht,10)})};let mn=null;function fr(ee){mn&&mn(ee)}function xa(){Ea.stop()}function Ya(){Ea.start()}const Ea=new f6;Ea.setAnimationLoop(fr),typeof self<"u"&&Ea.setContext(self),this.setAnimationLoop=function(ee){mn=ee,nt.setAnimationLoop(ee),ee===null?Ea.stop():Ea.start()},nt.addEventListener("sessionstart",xa),nt.addEventListener("sessionend",Ya),this.render=function(ee,ye){if(ye!==void 0&&ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),ye.parent===null&&ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),nt.enabled===!0&&nt.isPresenting===!0&&(nt.cameraAutoUpdate===!0&&nt.updateCamera(ye),ye=nt.getCamera()),ee.isScene===!0&&ee.onBeforeRender(M,ee,ye,F),_=_t.get(ee,T.length),_.init(ye),T.push(_),Ie.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),xe.setFromProjectionMatrix(Ie,ao,ye.reversedDepth),_e=this.localClippingEnabled,fe=mt.init(this.clippingPlanes,_e),b=Pe.get(ee,R.length),b.init(),R.push(b),nt.enabled===!0&&nt.isPresenting===!0){const ht=M.xr.getDepthSensingMesh();ht!==null&&ls(ht,ye,-1/0,M.sortObjects)}ls(ee,ye,0,M.sortObjects),b.finish(),M.sortObjects===!0&&b.sort(X,z),dt=nt.enabled===!1||nt.isPresenting===!1||nt.hasDepthSensing()===!1,dt&&Dt.addToRenderList(b,ee),this.info.render.frame++,fe===!0&&mt.beginShadows();const Re=_.state.shadowsArray;Ct.render(Re,ee,ye),fe===!0&&mt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=b.opaque,Se=b.transmissive;if(_.setupLights(),ye.isArrayCamera){const ht=ye.cameras;if(Se.length>0)for(let yt=0,It=ht.length;yt<It;yt++){const St=ht[yt];uf(Oe,Se,ee,St)}dt&&Dt.render(ee);for(let yt=0,It=ht.length;yt<It;yt++){const St=ht[yt];Bi(b,ee,St,St.viewport)}}else Se.length>0&&uf(Oe,Se,ee,ye),dt&&Dt.render(ee),Bi(b,ee,ye);F!==null&&B===0&&(st.updateMultisampleRenderTarget(F),st.updateRenderTargetMipmap(F)),ee.isScene===!0&&ee.onAfterRender(M,ee,ye),Me.resetDefaultState(),L=-1,U=null,T.pop(),T.length>0?(_=T[T.length-1],fe===!0&&mt.setGlobalState(M.clippingPlanes,_.state.camera)):_=null,R.pop(),R.length>0?b=R[R.length-1]:b=null};function ls(ee,ye,Re,Oe){if(ee.visible===!1)return;if(ee.layers.test(ye.layers)){if(ee.isGroup)Re=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(ye);else if(ee.isLight)_.pushLight(ee),ee.castShadow&&_.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||xe.intersectsSprite(ee)){Oe&&Ue.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Ie);const yt=be.update(ee),It=ee.material;It.visible&&b.push(ee,yt,It,Re,Ue.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||xe.intersectsObject(ee))){const yt=be.update(ee),It=ee.material;if(Oe&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),Ue.copy(ee.boundingSphere.center)):(yt.boundingSphere===null&&yt.computeBoundingSphere(),Ue.copy(yt.boundingSphere.center)),Ue.applyMatrix4(ee.matrixWorld).applyMatrix4(Ie)),Array.isArray(It)){const St=yt.groups;for(let qt=0,Qt=St.length;qt<Qt;qt++){const Ht=St[qt],An=It[Ht.materialIndex];An&&An.visible&&b.push(ee,yt,An,Re,Ue.z,Ht)}}else It.visible&&b.push(ee,yt,It,Re,Ue.z,null)}}const ht=ee.children;for(let yt=0,It=ht.length;yt<It;yt++)ls(ht[yt],ye,Re,Oe)}function Bi(ee,ye,Re,Oe){const Se=ee.opaque,ht=ee.transmissive,yt=ee.transparent;_.setupLightsView(Re),fe===!0&&mt.setGlobalState(M.clippingPlanes,Re),Oe&&ze.viewport(j.copy(Oe)),Se.length>0&&Fi(Se,ye,Re),ht.length>0&&Fi(ht,ye,Re),yt.length>0&&Fi(yt,ye,Re),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function uf(ee,ye,Re,Oe){if((Re.isScene===!0?Re.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Oe.id]===void 0&&(_.state.transmissionRenderTarget[Oe.id]=new Nc(1,1,{generateMipmaps:!0,type:Le.has("EXT_color_buffer_half_float")||Le.has("EXT_color_buffer_float")?C0:Bo,minFilter:Uo,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace}));const ht=_.state.transmissionRenderTarget[Oe.id],yt=Oe.viewport||j;ht.setSize(yt.z*M.transmissionResolutionScale,yt.w*M.transmissionResolutionScale);const It=M.getRenderTarget(),St=M.getActiveCubeFace(),qt=M.getActiveMipmapLevel();M.setRenderTarget(ht),M.getClearColor($),re=M.getClearAlpha(),re<1&&M.setClearColor(16777215,.5),M.clear(),dt&&Dt.render(Re);const Qt=M.toneMapping;M.toneMapping=Ec;const Ht=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),_.setupLightsView(Oe),fe===!0&&mt.setGlobalState(M.clippingPlanes,Oe),Fi(ee,Re,Oe),st.updateMultisampleRenderTarget(ht),st.updateRenderTargetMipmap(ht),Le.has("WEBGL_multisampled_render_to_texture")===!1){let An=!1;for(let zn=0,Aa=ye.length;zn<Aa;zn++){const ta=ye[zn],gn=ta.object,Xt=ta.geometry,_a=ta.material,In=ta.group;if(_a.side===yl&&gn.layers.test(Oe.layers)){const Ar=_a.side;_a.side=ss,_a.needsUpdate=!0,ki(gn,Re,Oe,Xt,_a,In),_a.side=Ar,_a.needsUpdate=!0,An=!0}}An===!0&&(st.updateMultisampleRenderTarget(ht),st.updateRenderTargetMipmap(ht))}M.setRenderTarget(It,St,qt),M.setClearColor($,re),Ht!==void 0&&(Oe.viewport=Ht),M.toneMapping=Qt}function Fi(ee,ye,Re){const Oe=ye.isScene===!0?ye.overrideMaterial:null;for(let Se=0,ht=ee.length;Se<ht;Se++){const yt=ee[Se],It=yt.object,St=yt.geometry,qt=yt.group;let Qt=yt.material;Qt.allowOverride===!0&&Oe!==null&&(Qt=Oe),It.layers.test(Re.layers)&&ki(It,ye,Re,St,Qt,qt)}}function ki(ee,ye,Re,Oe,Se,ht){ee.onBeforeRender(M,ye,Re,Oe,Se,ht),ee.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Se.onBeforeRender(M,ye,Re,Oe,ee,ht),Se.transparent===!0&&Se.side===yl&&Se.forceSinglePass===!1?(Se.side=ss,Se.needsUpdate=!0,M.renderBufferDirect(Re,ye,Oe,Se,ee,ht),Se.side=Tc,Se.needsUpdate=!0,M.renderBufferDirect(Re,ye,Oe,Se,ee,ht),Se.side=yl):M.renderBufferDirect(Re,ye,Oe,Se,ee,ht),ee.onAfterRender(M,ye,Re,Oe,Se,ht)}function Hi(ee,ye,Re){ye.isScene!==!0&&(ye=$e);const Oe=Qe.get(ee),Se=_.state.lights,ht=_.state.shadowsArray,yt=Se.state.version,It=je.getParameters(ee,Se.state,ht,ye,Re),St=je.getProgramCacheKey(It);let qt=Oe.programs;Oe.environment=ee.isMeshStandardMaterial?ye.environment:null,Oe.fog=ye.fog,Oe.envMap=(ee.isMeshStandardMaterial?zt:Ot).get(ee.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&ee.envMap===null?ye.environmentRotation:ee.envMapRotation,qt===void 0&&(ee.addEventListener("dispose",et),qt=new Map,Oe.programs=qt);let Qt=qt.get(St);if(Qt!==void 0){if(Oe.currentProgram===Qt&&Oe.lightsStateVersion===yt)return Os(ee,It),Qt}else It.uniforms=je.getUniforms(ee),ee.onBeforeCompile(It,M),Qt=je.acquireProgram(It,St),qt.set(St,Qt),Oe.uniforms=It.uniforms;const Ht=Oe.uniforms;return(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(Ht.clippingPlanes=mt.uniform),Os(ee,It),Oe.needsLights=jo(ee),Oe.lightsStateVersion=yt,Oe.needsLights&&(Ht.ambientLightColor.value=Se.state.ambient,Ht.lightProbe.value=Se.state.probe,Ht.directionalLights.value=Se.state.directional,Ht.directionalLightShadows.value=Se.state.directionalShadow,Ht.spotLights.value=Se.state.spot,Ht.spotLightShadows.value=Se.state.spotShadow,Ht.rectAreaLights.value=Se.state.rectArea,Ht.ltc_1.value=Se.state.rectAreaLTC1,Ht.ltc_2.value=Se.state.rectAreaLTC2,Ht.pointLights.value=Se.state.point,Ht.pointLightShadows.value=Se.state.pointShadow,Ht.hemisphereLights.value=Se.state.hemi,Ht.directionalShadowMap.value=Se.state.directionalShadowMap,Ht.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,Ht.spotShadowMap.value=Se.state.spotShadowMap,Ht.spotLightMatrix.value=Se.state.spotLightMatrix,Ht.spotLightMap.value=Se.state.spotLightMap,Ht.pointShadowMap.value=Se.state.pointShadowMap,Ht.pointShadowMatrix.value=Se.state.pointShadowMatrix),Oe.currentProgram=Qt,Oe.uniformsList=null,Qt}function ha(ee){if(ee.uniformsList===null){const ye=ee.currentProgram.getUniforms();ee.uniformsList=Rx.seqWithValue(ye.seq,ee.uniforms)}return ee.uniformsList}function Os(ee,ye){const Re=Qe.get(ee);Re.outputColorSpace=ye.outputColorSpace,Re.batching=ye.batching,Re.batchingColor=ye.batchingColor,Re.instancing=ye.instancing,Re.instancingColor=ye.instancingColor,Re.instancingMorph=ye.instancingMorph,Re.skinning=ye.skinning,Re.morphTargets=ye.morphTargets,Re.morphNormals=ye.morphNormals,Re.morphColors=ye.morphColors,Re.morphTargetsCount=ye.morphTargetsCount,Re.numClippingPlanes=ye.numClippingPlanes,Re.numIntersection=ye.numClipIntersection,Re.vertexAlphas=ye.vertexAlphas,Re.vertexTangents=ye.vertexTangents,Re.toneMapping=ye.toneMapping}function co(ee,ye,Re,Oe,Se){ye.isScene!==!0&&(ye=$e),st.resetTextureUnits();const ht=ye.fog,yt=Oe.isMeshStandardMaterial?ye.environment:null,It=F===null?M.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:pi,St=(Oe.isMeshStandardMaterial?zt:Ot).get(Oe.envMap||yt),qt=Oe.vertexColors===!0&&!!Re.attributes.color&&Re.attributes.color.itemSize===4,Qt=!!Re.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),Ht=!!Re.morphAttributes.position,An=!!Re.morphAttributes.normal,zn=!!Re.morphAttributes.color;let Aa=Ec;Oe.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Aa=M.toneMapping);const ta=Re.morphAttributes.position||Re.morphAttributes.normal||Re.morphAttributes.color,gn=ta!==void 0?ta.length:0,Xt=Qe.get(Oe),_a=_.state.lights;if(fe===!0&&(_e===!0||ee!==U)){const Ma=ee===U&&Oe.id===L;mt.setState(Oe,ee,Ma)}let In=!1;Oe.version===Xt.__version?(Xt.needsLights&&Xt.lightsStateVersion!==_a.state.version||Xt.outputColorSpace!==It||Se.isBatchedMesh&&Xt.batching===!1||!Se.isBatchedMesh&&Xt.batching===!0||Se.isBatchedMesh&&Xt.batchingColor===!0&&Se.colorTexture===null||Se.isBatchedMesh&&Xt.batchingColor===!1&&Se.colorTexture!==null||Se.isInstancedMesh&&Xt.instancing===!1||!Se.isInstancedMesh&&Xt.instancing===!0||Se.isSkinnedMesh&&Xt.skinning===!1||!Se.isSkinnedMesh&&Xt.skinning===!0||Se.isInstancedMesh&&Xt.instancingColor===!0&&Se.instanceColor===null||Se.isInstancedMesh&&Xt.instancingColor===!1&&Se.instanceColor!==null||Se.isInstancedMesh&&Xt.instancingMorph===!0&&Se.morphTexture===null||Se.isInstancedMesh&&Xt.instancingMorph===!1&&Se.morphTexture!==null||Xt.envMap!==St||Oe.fog===!0&&Xt.fog!==ht||Xt.numClippingPlanes!==void 0&&(Xt.numClippingPlanes!==mt.numPlanes||Xt.numIntersection!==mt.numIntersection)||Xt.vertexAlphas!==qt||Xt.vertexTangents!==Qt||Xt.morphTargets!==Ht||Xt.morphNormals!==An||Xt.morphColors!==zn||Xt.toneMapping!==Aa||Xt.morphTargetsCount!==gn)&&(In=!0):(In=!0,Xt.__version=Oe.version);let Ar=Xt.currentProgram;In===!0&&(Ar=Hi(Oe,ye,Se));let cs=!1,_r=!1,nr=!1;const ia=Ar.getUniforms(),Gr=Xt.uniforms;if(ze.useProgram(Ar.program)&&(cs=!0,_r=!0,nr=!0),Oe.id!==L&&(L=Oe.id,_r=!0),cs||U!==ee){ze.buffers.depth.getReversed()&&ee.reversedDepth!==!0&&(ee._reversedDepth=!0,ee.updateProjectionMatrix()),ia.setValue(se,"projectionMatrix",ee.projectionMatrix),ia.setValue(se,"viewMatrix",ee.matrixWorldInverse);const Sr=ia.map.cameraPosition;Sr!==void 0&&Sr.setValue(se,Ge.setFromMatrixPosition(ee.matrixWorld)),Ke.logarithmicDepthBuffer&&ia.setValue(se,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&ia.setValue(se,"isOrthographic",ee.isOrthographicCamera===!0),U!==ee&&(U=ee,_r=!0,nr=!0)}if(Se.isSkinnedMesh){ia.setOptional(se,Se,"bindMatrix"),ia.setOptional(se,Se,"bindMatrixInverse");const Ma=Se.skeleton;Ma&&(Ma.boneTexture===null&&Ma.computeBoneTexture(),ia.setValue(se,"boneTexture",Ma.boneTexture,st))}Se.isBatchedMesh&&(ia.setOptional(se,Se,"batchingTexture"),ia.setValue(se,"batchingTexture",Se._matricesTexture,st),ia.setOptional(se,Se,"batchingIdTexture"),ia.setValue(se,"batchingIdTexture",Se._indirectTexture,st),ia.setOptional(se,Se,"batchingColorTexture"),Se._colorsTexture!==null&&ia.setValue(se,"batchingColorTexture",Se._colorsTexture,st));const br=Re.morphAttributes;if((br.position!==void 0||br.normal!==void 0||br.color!==void 0)&&rt.update(Se,Re,Ar),(_r||Xt.receiveShadow!==Se.receiveShadow)&&(Xt.receiveShadow=Se.receiveShadow,ia.setValue(se,"receiveShadow",Se.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(Gr.envMap.value=St,Gr.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&ye.environment!==null&&(Gr.envMapIntensity.value=ye.environmentIntensity),_r&&(ia.setValue(se,"toneMappingExposure",M.toneMappingExposure),Xt.needsLights&&Cl(Gr,nr),ht&&Oe.fog===!0&&Ye.refreshFogUniforms(Gr,ht),Ye.refreshMaterialUniforms(Gr,Oe,K,Y,_.state.transmissionRenderTarget[ee.id]),Rx.upload(se,ha(Xt),Gr,st)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(Rx.upload(se,ha(Xt),Gr,st),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&ia.setValue(se,"center",Se.center),ia.setValue(se,"modelViewMatrix",Se.modelViewMatrix),ia.setValue(se,"normalMatrix",Se.normalMatrix),ia.setValue(se,"modelMatrix",Se.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const Ma=Oe.uniformsGroups;for(let Sr=0,Oc=Ma.length;Sr<Oc;Sr++){const ar=Ma[Sr];ft.update(ar,Ar),ft.bind(ar,Ar)}}return Ar}function Cl(ee,ye){ee.ambientLightColor.needsUpdate=ye,ee.lightProbe.needsUpdate=ye,ee.directionalLights.needsUpdate=ye,ee.directionalLightShadows.needsUpdate=ye,ee.pointLights.needsUpdate=ye,ee.pointLightShadows.needsUpdate=ye,ee.spotLights.needsUpdate=ye,ee.spotLightShadows.needsUpdate=ye,ee.rectAreaLights.needsUpdate=ye,ee.hemisphereLights.needsUpdate=ye}function jo(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(ee,ye,Re){const Oe=Qe.get(ee);Oe.__autoAllocateDepthBuffer=ee.resolveDepthBuffer===!1,Oe.__autoAllocateDepthBuffer===!1&&(Oe.__useRenderToTexture=!1),Qe.get(ee.texture).__webglTexture=ye,Qe.get(ee.depthTexture).__webglTexture=Oe.__autoAllocateDepthBuffer?void 0:Re,Oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ee,ye){const Re=Qe.get(ee);Re.__webglFramebuffer=ye,Re.__useDefaultFramebuffer=ye===void 0};const qa=se.createFramebuffer();this.setRenderTarget=function(ee,ye=0,Re=0){F=ee,P=ye,B=Re;let Oe=!0,Se=null,ht=!1,yt=!1;if(ee){const St=Qe.get(ee);if(St.__useDefaultFramebuffer!==void 0)ze.bindFramebuffer(se.FRAMEBUFFER,null),Oe=!1;else if(St.__webglFramebuffer===void 0)st.setupRenderTarget(ee);else if(St.__hasExternalTextures)st.rebindTextures(ee,Qe.get(ee.texture).__webglTexture,Qe.get(ee.depthTexture).__webglTexture);else if(ee.depthBuffer){const Ht=ee.depthTexture;if(St.__boundDepthTexture!==Ht){if(Ht!==null&&Qe.has(Ht)&&(ee.width!==Ht.image.width||ee.height!==Ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");st.setupDepthRenderbuffer(ee)}}const qt=ee.texture;(qt.isData3DTexture||qt.isDataArrayTexture||qt.isCompressedArrayTexture)&&(yt=!0);const Qt=Qe.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Array.isArray(Qt[ye])?Se=Qt[ye][Re]:Se=Qt[ye],ht=!0):ee.samples>0&&st.useMultisampledRTT(ee)===!1?Se=Qe.get(ee).__webglMultisampledFramebuffer:Array.isArray(Qt)?Se=Qt[Re]:Se=Qt,j.copy(ee.viewport),W.copy(ee.scissor),Q=ee.scissorTest}else j.copy(J).multiplyScalar(K).floor(),W.copy(le).multiplyScalar(K).floor(),Q=ce;if(Re!==0&&(Se=qa),ze.bindFramebuffer(se.FRAMEBUFFER,Se)&&Oe&&ze.drawBuffers(ee,Se),ze.viewport(j),ze.scissor(W),ze.setScissorTest(Q),ht){const St=Qe.get(ee.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+ye,St.__webglTexture,Re)}else if(yt){const St=ye;for(let qt=0;qt<ee.textures.length;qt++){const Qt=Qe.get(ee.textures[qt]);se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0+qt,Qt.__webglTexture,Re,St)}}else if(ee!==null&&Re!==0){const St=Qe.get(ee.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,St.__webglTexture,Re)}L=-1},this.readRenderTargetPixels=function(ee,ye,Re,Oe,Se,ht,yt,It=0){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=Qe.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&yt!==void 0&&(St=St[yt]),St){ze.bindFramebuffer(se.FRAMEBUFFER,St);try{const qt=ee.textures[It],Qt=qt.format,Ht=qt.type;if(!Ke.textureFormatReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(Ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye>=0&&ye<=ee.width-Oe&&Re>=0&&Re<=ee.height-Se&&(ee.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+It),se.readPixels(ye,Re,Oe,Se,ue.convert(Qt),ue.convert(Ht),ht))}finally{const qt=F!==null?Qe.get(F).__webglFramebuffer:null;ze.bindFramebuffer(se.FRAMEBUFFER,qt)}}},this.readRenderTargetPixelsAsync=async function(ee,ye,Re,Oe,Se,ht,yt,It=0){if(!(ee&&ee.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=Qe.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&yt!==void 0&&(St=St[yt]),St)if(ye>=0&&ye<=ee.width-Oe&&Re>=0&&Re<=ee.height-Se){ze.bindFramebuffer(se.FRAMEBUFFER,St);const qt=ee.textures[It],Qt=qt.format,Ht=qt.type;if(!Ke.textureFormatReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const An=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,An),se.bufferData(se.PIXEL_PACK_BUFFER,ht.byteLength,se.STREAM_READ),ee.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+It),se.readPixels(ye,Re,Oe,Se,ue.convert(Qt),ue.convert(Ht),0);const zn=F!==null?Qe.get(F).__webglFramebuffer:null;ze.bindFramebuffer(se.FRAMEBUFFER,zn);const Aa=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await h$(se,Aa,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,An),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,ht),se.deleteBuffer(An),se.deleteSync(Aa),ht}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ee,ye=null,Re=0){const Oe=Math.pow(2,-Re),Se=Math.floor(ee.image.width*Oe),ht=Math.floor(ee.image.height*Oe),yt=ye!==null?ye.x:0,It=ye!==null?ye.y:0;st.setTexture2D(ee,0),se.copyTexSubImage2D(se.TEXTURE_2D,Re,0,0,yt,It,Se,ht),ze.unbindTexture()};const Ou=se.createFramebuffer(),Uu=se.createFramebuffer();this.copyTextureToTexture=function(ee,ye,Re=null,Oe=null,Se=0,ht=null){ht===null&&(Se!==0?(t0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ht=Se,Se=0):ht=0);let yt,It,St,qt,Qt,Ht,An,zn,Aa;const ta=ee.isCompressedTexture?ee.mipmaps[ht]:ee.image;if(Re!==null)yt=Re.max.x-Re.min.x,It=Re.max.y-Re.min.y,St=Re.isBox3?Re.max.z-Re.min.z:1,qt=Re.min.x,Qt=Re.min.y,Ht=Re.isBox3?Re.min.z:0;else{const br=Math.pow(2,-Se);yt=Math.floor(ta.width*br),It=Math.floor(ta.height*br),ee.isDataArrayTexture?St=ta.depth:ee.isData3DTexture?St=Math.floor(ta.depth*br):St=1,qt=0,Qt=0,Ht=0}Oe!==null?(An=Oe.x,zn=Oe.y,Aa=Oe.z):(An=0,zn=0,Aa=0);const gn=ue.convert(ye.format),Xt=ue.convert(ye.type);let _a;ye.isData3DTexture?(st.setTexture3D(ye,0),_a=se.TEXTURE_3D):ye.isDataArrayTexture||ye.isCompressedArrayTexture?(st.setTexture2DArray(ye,0),_a=se.TEXTURE_2D_ARRAY):(st.setTexture2D(ye,0),_a=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,ye.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ye.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,ye.unpackAlignment);const In=se.getParameter(se.UNPACK_ROW_LENGTH),Ar=se.getParameter(se.UNPACK_IMAGE_HEIGHT),cs=se.getParameter(se.UNPACK_SKIP_PIXELS),_r=se.getParameter(se.UNPACK_SKIP_ROWS),nr=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,ta.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,ta.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,qt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Qt),se.pixelStorei(se.UNPACK_SKIP_IMAGES,Ht);const ia=ee.isDataArrayTexture||ee.isData3DTexture,Gr=ye.isDataArrayTexture||ye.isData3DTexture;if(ee.isDepthTexture){const br=Qe.get(ee),Ma=Qe.get(ye),Sr=Qe.get(br.__renderTarget),Oc=Qe.get(Ma.__renderTarget);ze.bindFramebuffer(se.READ_FRAMEBUFFER,Sr.__webglFramebuffer),ze.bindFramebuffer(se.DRAW_FRAMEBUFFER,Oc.__webglFramebuffer);for(let ar=0;ar<St;ar++)ia&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Qe.get(ee).__webglTexture,Se,Ht+ar),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Qe.get(ye).__webglTexture,ht,Aa+ar)),se.blitFramebuffer(qt,Qt,yt,It,An,zn,yt,It,se.DEPTH_BUFFER_BIT,se.NEAREST);ze.bindFramebuffer(se.READ_FRAMEBUFFER,null),ze.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(Se!==0||ee.isRenderTargetTexture||Qe.has(ee)){const br=Qe.get(ee),Ma=Qe.get(ye);ze.bindFramebuffer(se.READ_FRAMEBUFFER,Ou),ze.bindFramebuffer(se.DRAW_FRAMEBUFFER,Uu);for(let Sr=0;Sr<St;Sr++)ia?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,br.__webglTexture,Se,Ht+Sr):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,br.__webglTexture,Se),Gr?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ma.__webglTexture,ht,Aa+Sr):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Ma.__webglTexture,ht),Se!==0?se.blitFramebuffer(qt,Qt,yt,It,An,zn,yt,It,se.COLOR_BUFFER_BIT,se.NEAREST):Gr?se.copyTexSubImage3D(_a,ht,An,zn,Aa+Sr,qt,Qt,yt,It):se.copyTexSubImage2D(_a,ht,An,zn,qt,Qt,yt,It);ze.bindFramebuffer(se.READ_FRAMEBUFFER,null),ze.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else Gr?ee.isDataTexture||ee.isData3DTexture?se.texSubImage3D(_a,ht,An,zn,Aa,yt,It,St,gn,Xt,ta.data):ye.isCompressedArrayTexture?se.compressedTexSubImage3D(_a,ht,An,zn,Aa,yt,It,St,gn,ta.data):se.texSubImage3D(_a,ht,An,zn,Aa,yt,It,St,gn,Xt,ta):ee.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,ht,An,zn,yt,It,gn,Xt,ta.data):ee.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,ht,An,zn,ta.width,ta.height,gn,ta.data):se.texSubImage2D(se.TEXTURE_2D,ht,An,zn,yt,It,gn,Xt,ta);se.pixelStorei(se.UNPACK_ROW_LENGTH,In),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Ar),se.pixelStorei(se.UNPACK_SKIP_PIXELS,cs),se.pixelStorei(se.UNPACK_SKIP_ROWS,_r),se.pixelStorei(se.UNPACK_SKIP_IMAGES,nr),ht===0&&ye.generateMipmaps&&se.generateMipmap(_a),ze.unbindTexture()},this.copyTextureToTexture3D=function(ee,ye,Re=null,Oe=null,Se=0){return t0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ee,ye,Re,Oe,Se)},this.initRenderTarget=function(ee){Qe.get(ee).__webglFramebuffer===void 0&&st.setupRenderTarget(ee)},this.initTexture=function(ee){ee.isCubeTexture?st.setTextureCube(ee,0):ee.isData3DTexture?st.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?st.setTexture2DArray(ee,0):st.setTexture2D(ee,0),ze.unbindTexture()},this.resetState=function(){P=0,B=0,F=null,ze.reset(),Me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ao}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Fn._getUnpackColorSpace()}}const Mse=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:TR,AddEquation:jd,AddOperation:VP,AdditiveAnimationBlendMode:UR,AdditiveBlending:z3,AgXToneMapping:XP,AlphaFormat:DR,AlwaysCompare:dO,AlwaysDepth:sA,AlwaysStencilFunc:K3,AmbientLight:$O,AnimationAction:c6,AnimationClip:A0,AnimationLoader:Hee,AnimationMixer:hte,AnimationObjectGroup:dte,AnimationUtils:Uee,ArcCurve:MO,ArrayCamera:s6,ArrowHelper:Fte,AttachedBindMode:W3,Audio:o6,AudioAnalyser:tte,AudioContext:fM,AudioListener:Qee,AudioLoader:Xee,AxesHelper:kte,BackSide:ss,BasicDepthPacking:nO,BasicShadowMap:EP,BatchedMesh:EO,Bone:U_,BooleanKeyframeTrack:sp,Box2:bte,Box3:hi,Box3Helper:Ute,BoxGeometry:ip,BoxHelper:Ote,BufferAttribute:ra,BufferGeometry:Sn,BufferGeometryLoader:r6,ByteType:NR,Cache:Ac,Camera:L_,CameraHelper:Pte,CanvasTexture:iee,CapsuleGeometry:H_,CatmullRomCurve3:TO,CineonToneMapping:YP,CircleGeometry:j_,ClampToEdgeWrapping:no,Clock:hM,Color:Et,ColorKeyframeTrack:sM,ColorManagement:Fn,CompressedArrayTexture:aee,CompressedCubeTexture:ree,CompressedTexture:k_,CompressedTextureLoader:jee,ConeGeometry:R1,ConstantAlphaFactor:jP,ConstantColorFactor:kP,Controls:jte,CubeCamera:xO,CubeReflectionMapping:wu,CubeRefractionMapping:ef,CubeTexture:b1,CubeTextureLoader:zee,CubeUVReflectionMapping:N0,CubicBezierCurve:ZR,CubicBezierCurve3:NO,CubicInterpolant:YO,CullFaceBack:j3,CullFaceFront:SP,CullFaceFrontBack:gQ,CullFaceNone:bP,Curve:Nl,CurvePath:IO,CustomBlending:wP,CustomToneMapping:qP,CylinderGeometry:w1,Cylindrical:_te,Data3DTexture:D_,DataArrayTexture:I_,DataTexture:wc,DataTextureLoader:Gee,DataUtils:T$,DecrementStencilOp:MQ,DecrementWrapStencilOp:NQ,DefaultLoadingManager:JO,DepthFormat:d0,DepthStencilFormat:f0,DepthTexture:XR,DetachedBindMode:ZP,DirectionalLight:dM,DirectionalLightHelper:Lte,DiscreteInterpolant:qO,DodecahedronGeometry:z_,DoubleSide:yl,DstAlphaFactor:PP,DstColorFactor:UP,DynamicCopyUsage:VQ,DynamicDrawUsage:FQ,DynamicReadUsage:jQ,EdgesGeometry:RO,EllipseCurve:G_,EqualCompare:oO,EqualDepth:lA,EqualStencilFunc:LQ,EquirectangularReflectionMapping:Yv,EquirectangularRefractionMapping:qv,Euler:lo,EventDispatcher:Pc,ExtrudeGeometry:V_,FileLoader:El,Float16BufferAttribute:O$,Float32BufferAttribute:kt,FloatType:Ts,Fog:O_,FogExp2:P_,FramebufferTexture:nee,FrontSide:Tc,Frustum:I0,FrustumArray:B_,GLBufferAttribute:yte,GLSL1:KQ,GLSL3:Y3,GreaterCompare:lO,GreaterDepth:uA,GreaterEqualCompare:uO,GreaterEqualDepth:cA,GreaterEqualStencilFunc:BQ,GreaterStencilFunc:OQ,GridHelper:Ite,Group:xu,HalfFloatType:C0,HemisphereLight:QO,HemisphereLightHelper:Cte,IcosahedronGeometry:W_,ImageBitmapLoader:i6,ImageLoader:n1,ImageUtils:mO,IncrementStencilOp:RQ,IncrementWrapStencilOp:TQ,InstancedBufferAttribute:Wh,InstancedBufferGeometry:a6,InstancedInterleavedBuffer:vte,InstancedMesh:KR,Int16BufferAttribute:L$,Int32BufferAttribute:P$,Int8BufferAttribute:C$,IntType:E_,InterleavedBuffer:S1,InterleavedBufferAttribute:nf,Interpolant:L0,InterpolateDiscrete:h0,InterpolateLinear:p0,InterpolateSmooth:Ex,InterpolationSamplingMode:XQ,InterpolationSamplingType:qQ,InvertStencilOp:CQ,KeepStencilOp:Sh,KeyframeTrack:Ho,LOD:SO,LatheGeometry:K_,Layers:v0,LessCompare:sO,LessDepth:oA,LessEqualCompare:FR,LessEqualDepth:Vh,LessEqualStencilFunc:PQ,LessStencilFunc:DQ,Light:cf,LightProbe:n6,Line:Mu,Line3:wte,LineBasicMaterial:Ui,LineCurve:QR,LineCurve3:CO,LineDashedMaterial:VO,LineLoop:YR,LineSegments:Tl,LinearFilter:tr,LinearInterpolant:iM,LinearMipMapLinearFilter:AQ,LinearMipMapNearestFilter:xQ,LinearMipmapLinearFilter:Uo,LinearMipmapNearestFilter:e0,LinearSRGBColorSpace:pi,LinearToneMapping:WP,LinearTransfer:Jv,Loader:os,LoaderUtils:Zd,LoadingManager:oM,LoopOnce:QP,LoopPingPong:eO,LoopRepeat:$P,MOUSE:_h,Material:Br,MaterialLoader:$_,MathUtils:fO,Matrix2:vM,Matrix3:bn,Matrix4:nn,MaxEquation:NP,Mesh:ur,MeshBasicMaterial:ro,MeshDepthMaterial:nM,MeshDistanceMaterial:aM,MeshLambertMaterial:zO,MeshMatcapMaterial:GO,MeshNormalMaterial:jO,MeshPhongMaterial:kO,MeshPhysicalMaterial:ko,MeshStandardMaterial:N1,MeshToonMaterial:HO,MinEquation:TP,MirroredRepeatWrapping:l0,MixOperation:GP,MultiplyBlending:V3,MultiplyOperation:A1,NearestFilter:Ur,NearestMipMapLinearFilter:yQ,NearestMipMapNearestFilter:vQ,NearestMipmapLinearFilter:Ih,NearestMipmapNearestFilter:S_,NeutralToneMapping:JP,NeverCompare:iO,NeverDepth:iA,NeverStencilFunc:IQ,NoBlending:_u,NoColorSpace:vu,NoToneMapping:Ec,NormalAnimationBlendMode:C_,NormalBlending:kh,NotEqualCompare:cO,NotEqualDepth:dA,NotEqualStencilFunc:UQ,NumberKeyframeTrack:Yh,Object3D:Wn,ObjectLoader:Yee,ObjectSpaceNormalMap:rO,OctahedronGeometry:M1,OneFactor:IP,OneMinusConstantAlphaFactor:zP,OneMinusConstantColorFactor:HP,OneMinusDstAlphaFactor:OP,OneMinusDstColorFactor:BP,OneMinusSrcAlphaFactor:rA,OneMinusSrcColorFactor:LP,OrthographicCamera:Su,PCFShadowMap:__,PCFSoftShadowMap:Rv,PMREMGenerator:tw,Path:zA,PerspectiveCamera:er,Plane:mu,PlaneGeometry:D0,PlaneHelper:Bte,PointLight:uM,PointLightHelper:Tte,Points:qR,PointsMaterial:F_,PolarGridHelper:Dte,PolyhedronGeometry:lf,PositionalAudio:ete,PropertyBinding:qn,PropertyMixer:l6,QuadraticBezierCurve:$R,QuadraticBezierCurve3:eM,Quaternion:Qr,QuaternionKeyframeTrack:qh,QuaternionLinearInterpolant:XO,RED_GREEN_RGTC2_Format:UA,RED_RGTC1_Format:OR,REVISION:A_,RGBADepthPacking:aO,RGBAFormat:Pi,RGBAIntegerFormat:N_,RGBA_ASTC_10x10_Format:CA,RGBA_ASTC_10x5_Format:MA,RGBA_ASTC_10x6_Format:TA,RGBA_ASTC_10x8_Format:NA,RGBA_ASTC_12x10_Format:IA,RGBA_ASTC_12x12_Format:DA,RGBA_ASTC_4x4_Format:xA,RGBA_ASTC_5x4_Format:AA,RGBA_ASTC_5x5_Format:_A,RGBA_ASTC_6x5_Format:bA,RGBA_ASTC_6x6_Format:SA,RGBA_ASTC_8x5_Format:EA,RGBA_ASTC_8x6_Format:wA,RGBA_ASTC_8x8_Format:RA,RGBA_BPTC_Format:Iv,RGBA_ETC2_EAC_Format:yA,RGBA_PVRTC_2BPPV1_Format:mA,RGBA_PVRTC_4BPPV1_Format:pA,RGBA_S3TC_DXT1_Format:Tv,RGBA_S3TC_DXT3_Format:Nv,RGBA_S3TC_DXT5_Format:Cv,RGBDepthPacking:bQ,RGBFormat:LR,RGBIntegerFormat:_Q,RGB_BPTC_SIGNED_Format:LA,RGB_BPTC_UNSIGNED_Format:PA,RGB_ETC1_Format:gA,RGB_ETC2_Format:vA,RGB_PVRTC_2BPPV1_Format:hA,RGB_PVRTC_4BPPV1_Format:fA,RGB_S3TC_DXT1_Format:Mv,RGDepthPacking:SQ,RGFormat:PR,RGIntegerFormat:T_,RawShaderMaterial:FO,Ray:rp,Raycaster:u6,RectAreaLight:e6,RedFormat:M_,RedIntegerFormat:_1,ReinhardToneMapping:KP,RenderTarget:HR,RenderTarget3D:pte,RepeatWrapping:tf,ReplaceStencilOp:wQ,ReverseSubtractEquation:MP,RingGeometry:Y_,SIGNED_RED_GREEN_RGTC2_Format:BA,SIGNED_RED_RGTC1_Format:OA,SRGBColorSpace:cr,SRGBTransfer:fa,Scene:GR,ShaderChunk:Cn,ShaderLib:vl,ShaderMaterial:Sl,ShadowMaterial:BO,Shape:jh,ShapeGeometry:q_,ShapePath:Hte,ShapeUtils:Al,ShortType:CR,Skeleton:E1,SkeletonHelper:Mte,SkinnedMesh:WR,Source:Kd,Sphere:$r,SphereGeometry:T1,Spherical:$3,SphericalHarmonics3:t6,SplineCurve:tM,SpotLight:cM,SpotLightHelper:Rte,Sprite:bO,SpriteMaterial:VR,SrcAlphaFactor:aA,SrcAlphaSaturateFactor:FP,SrcColorFactor:DP,StaticCopyUsage:GQ,StaticDrawUsage:Zv,StaticReadUsage:HQ,StereoCamera:Jee,StreamCopyUsage:WQ,StreamDrawUsage:kQ,StreamReadUsage:zQ,StringKeyframeTrack:op,SubtractEquation:RP,SubtractiveBlending:G3,TOUCH:bh,TangentSpaceNormalMap:of,TetrahedronGeometry:X_,Texture:Ua,TextureLoader:ZO,TextureUtils:Kte,Timer:xte,TimestampQuery:YQ,TorusGeometry:J_,TorusKnotGeometry:Z_,Triangle:Ms,TriangleFanDrawMode:FA,TriangleStripDrawMode:BR,TrianglesDrawMode:tO,TubeGeometry:Q_,UVMapping:b_,Uint16BufferAttribute:jR,Uint32BufferAttribute:zR,Uint8BufferAttribute:I$,Uint8ClampedBufferAttribute:D$,Uniform:gM,UniformsGroup:gte,UniformsLib:Mt,UniformsUtils:yO,UnsignedByteType:Bo,UnsignedInt248Type:u0,UnsignedInt5999Type:IR,UnsignedIntType:Ru,UnsignedShort4444Type:w_,UnsignedShort5551Type:R_,UnsignedShortType:c0,VSMShadowMap:ml,Vector2:Ze,Vector3:ae,Vector4:Jn,VectorKeyframeTrack:Xh,VideoFrameTexture:tee,VideoTexture:wO,WebGL3DRenderTarget:y$,WebGLArrayRenderTarget:v$,WebGLCoordinateSystem:ao,WebGLCubeRenderTarget:AO,WebGLRenderTarget:Nc,WebGLRenderer:x6,WebGLUtils:v6,WebGPUCoordinateSystem:m0,WebXRController:wx,WireframeGeometry:UO,WrapAroundEnding:Xv,ZeroCurvatureEnding:Dh,ZeroFactor:CP,ZeroSlopeEnding:Lh,ZeroStencilOp:EQ,createCanvasElement:pO},Symbol.toStringTag,{value:"Module"}));var kE={exports:{}},fu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $4;function Tse(){return $4||($4=1,fu.ConcurrentRoot=1,fu.ContinuousEventPriority=8,fu.DefaultEventPriority=32,fu.DiscreteEventPriority=2,fu.IdleEventPriority=268435456,fu.LegacyRoot=0,fu.NoEventPriority=0),fu}var eI;function Nse(){return eI||(eI=1,kE.exports=Tse()),kE.exports}var Mx=Nse(),HE={exports:{}},jE={},zE={exports:{}},GE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function Cse(){if(tI)return GE;tI=1;var a=b0();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var t=typeof Object.is=="function"?Object.is:e,n=a.useState,r=a.useEffect,i=a.useLayoutEffect,s=a.useDebugValue;function o(h,m){var v=m(),A=n({inst:{value:v,getSnapshot:m}}),E=A[0].inst,b=A[1];return i(function(){E.value=v,E.getSnapshot=m,l(E)&&b({inst:E})},[h,v,m]),r(function(){return l(E)&&b({inst:E}),h(function(){l(E)&&b({inst:E})})},[h]),s(v),v}function l(h){var m=h.getSnapshot;h=h.value;try{var v=m();return!t(h,v)}catch{return!0}}function c(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return GE.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:d,GE}var nI;function Ise(){return nI||(nI=1,zE.exports=Cse()),zE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI;function Dse(){if(aI)return jE;aI=1;var a=b0(),e=Ise();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=a.useRef,s=a.useEffect,o=a.useMemo,l=a.useDebugValue;return jE.useSyncExternalStoreWithSelector=function(c,d,h,m,v){var A=i(null);if(A.current===null){var E={hasValue:!1,value:null};A.current=E}else E=A.current;A=o(function(){function _(P){if(!R){if(R=!0,T=P,P=m(P),v!==void 0&&E.hasValue){var B=E.value;if(v(B,P))return M=B}return M=P}if(B=M,n(T,P))return B;var F=m(P);return v!==void 0&&v(B,F)?(T=P,B):(T=P,M=F)}var R=!1,T,M,I=h===void 0?null:h;return[function(){return _(d())},I===null?void 0:function(){return _(I())}]},[d,h,m,v]);var b=r(c,A[0],A[1]);return s(function(){E.hasValue=!0,E.value=b},[b]),l(b),b},jE}var rI;function Lse(){return rI||(rI=1,HE.exports=Dse()),HE.exports}var Pse=Lse();const Ose=r1(Pse),iI=a=>{let e;const t=new Set,n=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const m=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(v=>v(e,m))}},r=()=>e,o={setState:n,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=a(n,r,o);return o},Use=a=>a?iI(a):iI,{useSyncExternalStoreWithSelector:Bse}=Ose,Fse=a=>a;function kse(a,e=Fse,t){const n=Bse(a.subscribe,a.getState,a.getInitialState,e,t);return IU.useDebugValue(n),n}const sI=(a,e)=>{const t=Use(a),n=(r,i=e)=>kse(t,r,i);return Object.assign(n,t),n},Hse=(a,e)=>a?sI(a,e):sI,jse=a=>typeof a=="object"&&typeof a.then=="function",Oh=[];function A6(a,e,t=(n,r)=>n===r){if(a===e)return!0;if(!a||!e)return!1;const n=a.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(a[r],e[r]))return!1;return!0}function _6(a,e=null,t=!1,n={}){e===null&&(e=[a]);for(const i of Oh)if(A6(e,i.keys,i.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return n.lifespan&&n.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,n.lifespan)),i.response;if(!t)throw i.promise}const r={keys:e,equal:n.equal,remove:()=>{const i=Oh.indexOf(r);i!==-1&&Oh.splice(i,1)},promise:(jse(a)?a:a(...e)).then(i=>{r.response=i,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(i=>r.error=i)};if(Oh.push(r),!t)throw r.promise}const zse=(a,e,t)=>_6(a,e,!1,t),Gse=(a,e,t)=>void _6(a,e,!0,t),Vse=a=>{if(a===void 0||a.length===0)Oh.splice(0,Oh.length);else{const e=Oh.find(t=>A6(a,t.keys,t.equal));e&&e.remove()}};var VE={exports:{}},WE={exports:{}},KE={exports:{}},YE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI;function Wse(){return oI||(oI=1,function(a){function e(G,Y){var K=G.length;G.push(Y);e:for(;0<K;){var X=K-1>>>1,z=G[X];if(0<r(z,Y))G[X]=Y,G[K]=z,K=X;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Y=G[0],K=G.pop();if(K!==Y){G[0]=K;e:for(var X=0,z=G.length,J=z>>>1;X<J;){var le=2*(X+1)-1,ce=G[le],xe=le+1,fe=G[xe];if(0>r(ce,K))xe<z&&0>r(fe,ce)?(G[X]=fe,G[xe]=K,X=xe):(G[X]=ce,G[le]=K,X=le);else if(xe<z&&0>r(fe,K))G[X]=fe,G[xe]=K,X=xe;else break e}}return Y}function r(G,Y){var K=G.sortIndex-Y.sortIndex;return K!==0?K:G.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();a.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,A=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function T(G){for(var Y=t(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=G)n(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function M(G){if(E=!1,T(G),!A)if(t(l)!==null)A=!0,$();else{var Y=t(c);Y!==null&&re(M,Y.startTime-G)}}var I=!1,P=-1,B=5,F=-1;function L(){return!(a.unstable_now()-F<B)}function U(){if(I){var G=a.unstable_now();F=G;var Y=!0;try{e:{A=!1,E&&(E=!1,_(P),P=-1),v=!0;var K=m;try{t:{for(T(G),h=t(l);h!==null&&!(h.expirationTime>G&&L());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var z=X(h.expirationTime<=G);if(G=a.unstable_now(),typeof z=="function"){h.callback=z,T(G),Y=!0;break t}h===t(l)&&n(l),T(G)}else n(l);h=t(l)}if(h!==null)Y=!0;else{var J=t(c);J!==null&&re(M,J.startTime-G),Y=!1}}break e}finally{h=null,m=K,v=!1}Y=void 0}}finally{Y?j():I=!1}}}var j;if(typeof R=="function")j=function(){R(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=U,j=function(){Q.postMessage(null)}}else j=function(){b(U,0)};function $(){I||(I=!0,j())}function re(G,Y){P=b(function(){G(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_continueExecution=function(){A||v||(A=!0,$())},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return m},a.unstable_getFirstCallbackNode=function(){return t(l)},a.unstable_next=function(G){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var K=m;m=Y;try{return G()}finally{m=K}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var K=m;m=G;try{return Y()}finally{m=K}},a.unstable_scheduleCallback=function(G,Y,K){var X=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,G){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,G={id:d++,callback:Y,priorityLevel:G,startTime:K,expirationTime:z,sortIndex:-1},K>X?(G.sortIndex=K,e(c,G),t(l)===null&&G===t(c)&&(E?(_(P),P=-1):E=!0,re(M,K-X))):(G.sortIndex=z,e(l,G),A||v||(A=!0,$())),G},a.unstable_shouldYield=L,a.unstable_wrapCallback=function(G){var Y=m;return function(){var K=m;m=Y;try{return G.apply(this,arguments)}finally{m=K}}}}(YE)),YE}var lI;function Kse(){return lI||(lI=1,KE.exports=Wse()),KE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI;function Yse(){return cI||(cI=1,function(a){a.exports=function(e){function t(p,g,w,C){return new ug(p,g,w,C)}function n(){}function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return p===null||typeof p!="object"?null:(p=el&&p[el]||p["@@iterator"],typeof p=="function"?p:null)}function s(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===pg?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case Kl:return"Fragment";case hs:return"Portal";case Ip:return"Profiler";case Ff:return"StrictMode";case Dp:return"Suspense";case nd:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Fs:return(p.displayName||"Context")+".Provider";case fg:return(p._context.displayName||"Context")+".Consumer";case Hf:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Lp:return g=p.displayName||null,g!==null?g:s(p.type)||"Memo";case ps:g=p._payload,p=p._init;try{return s(p(g))}catch{}}return null}function o(p){if(mo===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);mo=g&&g[1]||"",tl=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mo+p+tl}function l(p,g){if(!p||Hc)return"";Hc=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(hn){var Nt=hn}Reflect.construct(p,[],Rt)}else{try{Rt.call()}catch(hn){Nt=hn}p.call(Rt.prototype)}}else{try{throw Error()}catch(hn){Nt=hn}(Rt=p())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(hn){if(hn&&Nt&&typeof hn.stack=="string")return[hn.stack,Nt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=C.DetermineComponentFrameRoot(),te=k[0],he=k[1];if(te&&he){var we=te.split(`
`),Xe=he.split(`
`);for(O=C=0;C<we.length&&!we[C].includes("DetermineComponentFrameRoot");)C++;for(;O<Xe.length&&!Xe[O].includes("DetermineComponentFrameRoot");)O++;if(C===we.length||O===Xe.length)for(C=we.length-1,O=Xe.length-1;1<=C&&0<=O&&we[C]!==Xe[O];)O--;for(;1<=C&&0<=O;C--,O--)if(we[C]!==Xe[O]){if(C!==1||O!==1)do if(C--,O--,0>O||we[C]!==Xe[O]){var vt=`
`+we[C].replace(" at new "," at ");return p.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",p.displayName)),vt}while(1<=C&&0<=O);break}}}finally{Hc=!1,Error.prepareStackTrace=w}return(w=p?p.displayName||p.name:"")?o(w):""}function c(p){switch(p.tag){case 26:case 27:case 5:return o(p.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return p=l(p.type,!1),p;case 11:return p=l(p.type.render,!1),p;case 1:return p=l(p.type,!0),p;default:return""}}function d(p){try{var g="";do g+=c(p),p=p.return;while(p);return g}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function h(p){var g=p,w=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(w=g.return),p=g.return;while(p)}return g.tag===3?w:null}function m(p){if(h(p)!==p)throw Error(r(188))}function v(p){var g=p.alternate;if(!g){if(g=h(p),g===null)throw Error(r(188));return g!==p?null:p}for(var w=p,C=g;;){var O=w.return;if(O===null)break;var k=O.alternate;if(k===null){if(C=O.return,C!==null){w=C;continue}break}if(O.child===k.child){for(k=O.child;k;){if(k===w)return m(O),p;if(k===C)return m(O),g;k=k.sibling}throw Error(r(188))}if(w.return!==C.return)w=O,C=k;else{for(var te=!1,he=O.child;he;){if(he===w){te=!0,w=O,C=k;break}if(he===C){te=!0,C=O,w=k;break}he=he.sibling}if(!te){for(he=k.child;he;){if(he===w){te=!0,w=k,C=O;break}if(he===C){te=!0,C=k,w=O;break}he=he.sibling}if(!te)throw Error(r(189))}}if(w.alternate!==C)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?p:g}function A(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=A(p),g!==null)return g;p=p.sibling}return null}function E(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=E(p),g!==null))return g;p=p.sibling}return null}function b(p){return{current:p}}function _(p){0>il||(p.current=ka[il],ka[il]=null,il--)}function R(p,g){il++,ka[il]=p.current,p.current=g}function T(p){return p>>>=0,p===0?32:31-(Uy(p)/By|0)|0}function M(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function I(p,g){var w=p.pendingLanes;if(w===0)return 0;var C=0,O=p.suspendedLanes,k=p.pingedLanes,te=p.warmLanes;p=p.finishedLanes!==0;var he=w&134217727;return he!==0?(w=he&~O,w!==0?C=M(w):(k&=he,k!==0?C=M(k):p||(te=he&~te,te!==0&&(C=M(te))))):(he=w&~O,he!==0?C=M(he):k!==0?C=M(k):p||(te=w&~te,te!==0&&(C=M(te)))),C===0?0:g!==0&&g!==C&&!(g&O)&&(O=C&-C,te=g&-g,O>=te||O===32&&(te&4194176)!==0)?g:C}function P(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function B(p,g){switch(p){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var p=vo;return vo<<=1,!(vo&4194176)&&(vo=128),p}function L(){var p=Gc;return Gc<<=1,!(Gc&62914560)&&(Gc=4194304),p}function U(p){for(var g=[],w=0;31>w;w++)g.push(p);return g}function j(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function W(p,g,w,C,O,k){var te=p.pendingLanes;p.pendingLanes=w,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=w,p.entangledLanes&=w,p.errorRecoveryDisabledLanes&=w,p.shellSuspendCounter=0;var he=p.entanglements,we=p.expirationTimes,Xe=p.hiddenUpdates;for(w=te&~w;0<w;){var vt=31-si(w),Rt=1<<vt;he[vt]=0,we[vt]=-1;var Nt=Xe[vt];if(Nt!==null)for(Xe[vt]=null,vt=0;vt<Nt.length;vt++){var hn=Nt[vt];hn!==null&&(hn.lane&=-536870913)}w&=~Rt}C!==0&&Q(p,C,0),k!==0&&O===0&&p.tag!==0&&(p.suspendedLanes|=k&~(te&~g))}function Q(p,g,w){p.pendingLanes|=g,p.suspendedLanes&=~g;var C=31-si(g);p.entangledLanes|=g,p.entanglements[C]=p.entanglements[C]|1073741824|w&4194218}function $(p,g){var w=p.entangledLanes|=g;for(p=p.entanglements;w;){var C=31-si(w),O=1<<C;O&g|p[C]&g&&(p[C]|=g),w&=~O}}function re(p){return p&=-p,2<p?8<p?p&134217727?32:268435456:8:2}function G(p){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Ha,p,void 0,(p.current.flags&128)===128)}catch{}}function Y(p){if(typeof Hy=="function"&&mr(p),_i&&typeof _i.setStrictMode=="function")try{_i.setStrictMode(Ha,p)}catch{}}function K(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function X(p,g){if(typeof p=="object"&&p!==null){var w=Lg.get(p);return w!==void 0?w:(g={value:p,source:g,stack:d(g)},Lg.set(p,g),g)}return{value:p,source:g,stack:d(g)}}function z(p,g){Vc[Wc++]=dd,Vc[Wc++]=Kc,Kc=p,dd=g}function J(p,g,w){Wi[Ki++]=js,Wi[Ki++]=zs,Wi[Ki++]=$l,$l=p;var C=js;p=zs;var O=32-si(C)-1;C&=~(1<<O),w+=1;var k=32-si(g)+O;if(30<k){var te=O-O%5;k=(C&(1<<te)-1).toString(32),C>>=te,O-=te,js=1<<32-si(g)+O|w<<O|C,zs=k+p}else js=1<<k|w<<O|C,zs=p}function le(p){p.return!==null&&(z(p,1),J(p,1,0))}function ce(p){for(;p===Kc;)Kc=Vc[--Wc],Vc[Wc]=null,dd=Vc[--Wc],Vc[Wc]=null;for(;p===$l;)$l=Wi[--Ki],Wi[Ki]=null,zs=Wi[--Ki],Wi[Ki]=null,js=Wi[--Ki],Wi[Ki]=null}function xe(p,g){R(yo,g),R(fd,p),R(ir,null),p=ty(g),_(ir),R(ir,p)}function fe(){_(ir),_(fd),_(yo)}function _e(p){p.memoizedState!==null&&R(Yc,p);var g=ir.current,w=sd(g,p.type);g!==w&&(R(fd,p),R(ir,w))}function Ie(p){fd.current===p&&(_(ir),_(fd)),Yc.current===p&&(_(Yc),ri?ks._currentValue=ql:ks._currentValue2=ql)}function Ge(p){var g=Error(r(418,""));throw se(X(g,p)),Xf}function Ue(p,g){if(!Nr)throw Error(r(175));Ry(p.stateNode,p.type,p.memoizedProps,g,p)||Ge(p)}function $e(p){for(Cr=p.return;Cr;)switch(Cr.tag){case 3:case 27:gr=!0;return;case 5:case 13:gr=!1;return;default:Cr=Cr.return}}function dt(p){if(!Nr||p!==Cr)return!1;if(!jn)return $e(p),jn=!0,!1;var g=!1;if(la?p.tag!==3&&p.tag!==27&&(p.tag!==5||zp(p.type)&&!yn(p.type,p.memoizedProps))&&(g=!0):p.tag!==3&&(p.tag!==5||zp(p.type)&&!yn(p.type,p.memoizedProps))&&(g=!0),g&&Ir&&Ge(p),$e(p),p.tag===13){if(!Nr)throw Error(r(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Ir=Ty(p)}else Ir=Cr?Ng(p.stateNode):null;return!0}function ct(){Nr&&(Ir=Cr=null,jn=!1)}function se(p){vs===null?vs=[p]:vs.push(p)}function Be(){for(var p=qc,g=Gs=qc=0;g<p;){var w=ys[g];ys[g++]=null;var C=ys[g];ys[g++]=null;var O=ys[g];ys[g++]=null;var k=ys[g];if(ys[g++]=null,C!==null&&O!==null){var te=C.pending;te===null?O.next=O:(O.next=te.next,te.next=O),C.pending=O}k!==0&&ot(w,O,k)}}function Le(p,g,w,C){ys[qc++]=p,ys[qc++]=g,ys[qc++]=w,ys[qc++]=C,Gs|=C,p.lanes|=C,p=p.alternate,p!==null&&(p.lanes|=C)}function Ke(p,g,w,C){return Le(p,g,w,C),Qe(p)}function ze(p,g){return Le(p,null,null,g),Qe(p)}function ot(p,g,w){p.lanes|=w;var C=p.alternate;C!==null&&(C.lanes|=w);for(var O=!1,k=p.return;k!==null;)k.childLanes|=w,C=k.alternate,C!==null&&(C.childLanes|=w),k.tag===22&&(p=k.stateNode,p===null||p._visibility&1||(O=!0)),p=k,k=k.return;O&&g!==null&&p.tag===3&&(k=p.stateNode,O=31-si(w),k=k.hiddenUpdates,p=k[O],p===null?k[O]=[g]:p.push(g),g.lane=w|536870912)}function Qe(p){if(50<_d)throw _d=0,am=null,Error(r(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function st(p){p!==sl&&p.next===null&&(sl===null?Jf=sl=p:sl=sl.next=p),pa=!0,Xc||(Xc=!0,je(zt))}function Ot(p,g){if(!Pg&&pa){Pg=!0;do for(var w=!1,C=Jf;C!==null;){if(p!==0){var O=C.pendingLanes;if(O===0)var k=0;else{var te=C.suspendedLanes,he=C.pingedLanes;k=(1<<31-si(42|p)+1)-1,k&=O&~(te&~he),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(w=!0,be(C,k))}else k=Pn,k=I(C,C===$n?k:0),!(k&3)||P(C,k)||(w=!0,be(C,k));C=C.next}while(w);Pg=!1}}function zt(){pa=Xc=!1;var p=0;hd!==0&&(iy()&&(p=hd),hd=0);for(var g=gs(),w=null,C=Jf;C!==null;){var O=C.next,k=ie(C,g);k===0?(C.next=null,w===null?Jf=O:w.next=O,O===null&&(sl=w)):(w=C,(p!==0||k&3)&&(pa=!0)),C=O}Ot(p)}function ie(p,g){for(var w=p.suspendedLanes,C=p.pingedLanes,O=p.expirationTimes,k=p.pendingLanes&-62914561;0<k;){var te=31-si(k),he=1<<te,we=O[te];we===-1?(!(he&w)||he&C)&&(O[te]=B(he,g)):we<=g&&(p.expiredLanes|=he),k&=~he}if(g=$n,w=Pn,w=I(p,p===g?w:0),C=p.callbackNode,w===0||p===g&&sa===2||p.cancelPendingCommit!==null)return C!==null&&C!==null&&Kp(C),p.callbackNode=null,p.callbackPriority=0;if(!(w&3)||P(p,w)){if(g=w&-w,g===p.callbackPriority)return g;switch(C!==null&&Kp(C),re(w)){case 2:case 8:w=ky;break;case 32:w=Xp;break;case 268435456:w=hb;break;default:w=Xp}return C=q.bind(null,p),w=qf(w,C),p.callbackPriority=g,p.callbackNode=w,g}return C!==null&&C!==null&&Kp(C),p.callbackPriority=2,p.callbackNode=null,2}function q(p,g){var w=p.callbackNode;if(Bs()&&p.callbackNode!==w)return null;var C=Pn;return C=I(p,p===$n?C:0),C===0?null:(jl(p,C,g),ie(p,gs()),p.callbackNode!=null&&p.callbackNode===w?q.bind(null,p):null)}function be(p,g){if(Bs())return null;jl(p,g,!0)}function je(p){xg?rl(function(){Vn&6?qf(qp,p):p()}):qf(qp,p)}function Ye(){return hd===0&&(hd=F()),hd}function Pe(p,g){if(pd===null){var w=pd=[];Jc=0,Yi=Ye(),Zc={status:"pending",value:void 0,then:function(C){w.push(C)}}}return Jc++,g.then(_t,_t),g}function _t(){if(--Jc===0&&pd!==null){Zc!==null&&(Zc.status="fulfilled");var p=pd;pd=null,Yi=0,Zc=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function mt(p,g){var w=[],C={status:"pending",value:null,reason:null,then:function(O){w.push(O)}};return p.then(function(){C.status="fulfilled",C.value=g;for(var O=0;O<w.length;O++)(0,w[O])(g)},function(O){for(C.status="rejected",C.reason=O,O=0;O<w.length;O++)(0,w[O])(void 0)}),C}function Ct(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dt(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function rt(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function gt(p,g,w){var C=p.updateQueue;if(C===null)return null;if(C=C.shared,Vn&2){var O=C.pending;return O===null?g.next=g:(g.next=O.next,O.next=g),C.pending=g,g=Qe(p),ot(p,null,w),g}return Le(p,C,g,w),Qe(p)}function Lt(p,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194176)!==0)){var C=g.lanes;C&=p.pendingLanes,w|=C,g.lanes=w,$(p,w)}}function ue(p,g){var w=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var O=null,k=null;if(w=w.firstBaseUpdate,w!==null){do{var te={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};k===null?O=k=te:k=k.next=te,w=w.next}while(w!==null);k===null?O=k=g:k=k.next=g}else O=k=g;w={baseState:C.baseState,firstBaseUpdate:O,lastBaseUpdate:k,shared:C.shared,callbacks:C.callbacks},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=g:p.next=g,w.lastBaseUpdate=g}function Me(){if(Qc){var p=Zc;if(p!==null)throw p}}function ft(p,g,w,C){Qc=!1;var O=p.updateQueue;ol=!1;var k=O.firstBaseUpdate,te=O.lastBaseUpdate,he=O.shared.pending;if(he!==null){O.shared.pending=null;var we=he,Xe=we.next;we.next=null,te===null?k=Xe:te.next=Xe,te=we;var vt=p.alternate;vt!==null&&(vt=vt.updateQueue,he=vt.lastBaseUpdate,he!==te&&(he===null?vt.firstBaseUpdate=Xe:he.next=Xe,vt.lastBaseUpdate=we))}if(k!==null){var Rt=O.baseState;te=0,vt=Xe=we=null,he=k;do{var Nt=he.lane&-536870913,hn=Nt!==he.lane;if(hn?(Pn&Nt)===Nt:(C&Nt)===Nt){Nt!==0&&Nt===Yi&&(Qc=!0),vt!==null&&(vt=vt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var ts=p,lc=he;Nt=g;var cc=w;switch(lc.tag){case 1:if(ts=lc.payload,typeof ts=="function"){Rt=ts.call(cc,Rt,Nt);break e}Rt=ts;break e;case 3:ts.flags=ts.flags&-65537|128;case 0:if(ts=lc.payload,Nt=typeof ts=="function"?ts.call(cc,Rt,Nt):ts,Nt==null)break e;Rt=Cp({},Rt,Nt);break e;case 2:ol=!0}}Nt=he.callback,Nt!==null&&(p.flags|=64,hn&&(p.flags|=8192),hn=O.callbacks,hn===null?O.callbacks=[Nt]:hn.push(Nt))}else hn={lane:Nt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},vt===null?(Xe=vt=hn,we=Rt):vt=vt.next=hn,te|=Nt;if(he=he.next,he===null){if(he=O.shared.pending,he===null)break;hn=he,he=hn.next,hn.next=null,O.lastBaseUpdate=hn,O.shared.pending=null}}while(!0);vt===null&&(we=Rt),O.baseState=we,O.firstBaseUpdate=Xe,O.lastBaseUpdate=vt,k===null&&(O.shared.lanes=0),$i|=te,p.lanes=te,p.memoizedState=Rt}}function pe(p,g){if(typeof p!="function")throw Error(r(191,p));p.call(g)}function nt(p,g){var w=p.callbacks;if(w!==null)for(p.callbacks=null,p=0;p<w.length;p++)pe(w[p],g)}function ut(p,g){if(bi(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var w=Object.keys(p),C=Object.keys(g);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var O=w[C];if(!xo.call(g,O)||!bi(p[O],g[O]))return!1}return!0}function bt(p){return p=p.status,p==="fulfilled"||p==="rejected"}function lt(){}function et(p,g,w){switch(w=p[w],w===void 0?p.push(g):w!==g&&(g.then(lt,lt),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===md?Error(r(483)):p;default:if(typeof g.status=="string")g.then(lt,lt);else{if(p=$n,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=g,p.status="pending",p.then(function(C){if(g.status==="pending"){var O=g;O.status="fulfilled",O.value=C}},function(C){if(g.status==="pending"){var O=g;O.status="rejected",O.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===md?Error(r(483)):p}throw ec=g,md}}function wt(){if(ec===null)throw Error(r(459));var p=ec;return ec=null,p}function jt(p){var g=nc;return nc+=1,tc===null&&(tc=[]),et(tc,p,g)}function En(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function mn(p,g){throw g.$$typeof===sb?Error(r(525)):(p=Object.prototype.toString.call(g),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function fr(p){var g=p._init;return g(p._payload)}function xa(p){function g(Ce,ge){if(p){var ke=Ce.deletions;ke===null?(Ce.deletions=[ge],Ce.flags|=16):ke.push(ge)}}function w(Ce,ge){if(!p)return null;for(;ge!==null;)g(Ce,ge),ge=ge.sibling;return null}function C(Ce){for(var ge=new Map;Ce!==null;)Ce.key!==null?ge.set(Ce.key,Ce):ge.set(Ce.index,Ce),Ce=Ce.sibling;return ge}function O(Ce,ge){return Ce=fs(Ce,ge),Ce.index=0,Ce.sibling=null,Ce}function k(Ce,ge,ke){return Ce.index=ke,p?(ke=Ce.alternate,ke!==null?(ke=ke.index,ke<ge?(Ce.flags|=33554434,ge):ke):(Ce.flags|=33554434,ge)):(Ce.flags|=1048576,ge)}function te(Ce){return p&&Ce.alternate===null&&(Ce.flags|=33554434),Ce}function he(Ce,ge,ke,pt){return ge===null||ge.tag!==6?(ge=Tp(ke,Ce.mode,pt),ge.return=Ce,ge):(ge=O(ge,ke),ge.return=Ce,ge)}function we(Ce,ge,ke,pt){var Yt=ke.type;return Yt===Kl?vt(Ce,ge,ke.props.children,pt,ke.key):ge!==null&&(ge.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===ps&&fr(Yt)===ge.type)?(ge=O(ge,ke.props),En(ge,ke),ge.return=Ce,ge):(ge=po(ke.type,ke.key,ke.props,null,Ce.mode,pt),En(ge,ke),ge.return=Ce,ge)}function Xe(Ce,ge,ke,pt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==ke.containerInfo||ge.stateNode.implementation!==ke.implementation?(ge=dg(ke,Ce.mode,pt),ge.return=Ce,ge):(ge=O(ge,ke.children||[]),ge.return=Ce,ge)}function vt(Ce,ge,ke,pt,Yt){return ge===null||ge.tag!==7?(ge=Ia(ke,Ce.mode,pt,Yt),ge.return=Ce,ge):(ge=O(ge,ke),ge.return=Ce,ge)}function Rt(Ce,ge,ke){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Tp(""+ge,Ce.mode,ke),ge.return=Ce,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case Bf:return ke=po(ge.type,ge.key,ge.props,null,Ce.mode,ke),En(ke,ge),ke.return=Ce,ke;case hs:return ge=dg(ge,Ce.mode,ke),ge.return=Ce,ge;case ps:var pt=ge._init;return ge=pt(ge._payload),Rt(Ce,ge,ke)}if(ad(ge)||i(ge))return ge=Ia(ge,Ce.mode,ke,null),ge.return=Ce,ge;if(typeof ge.then=="function")return Rt(Ce,jt(ge),ke);if(ge.$$typeof===Fs)return Rt(Ce,bf(Ce,ge),ke);mn(Ce,ge)}return null}function Nt(Ce,ge,ke,pt){var Yt=ge!==null?ge.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Yt!==null?null:he(Ce,ge,""+ke,pt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case Bf:return ke.key===Yt?we(Ce,ge,ke,pt):null;case hs:return ke.key===Yt?Xe(Ce,ge,ke,pt):null;case ps:return Yt=ke._init,ke=Yt(ke._payload),Nt(Ce,ge,ke,pt)}if(ad(ke)||i(ke))return Yt!==null?null:vt(Ce,ge,ke,pt,null);if(typeof ke.then=="function")return Nt(Ce,ge,jt(ke),pt);if(ke.$$typeof===Fs)return Nt(Ce,ge,bf(Ce,ke),pt);mn(Ce,ke)}return null}function hn(Ce,ge,ke,pt,Yt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ce=Ce.get(ke)||null,he(ge,Ce,""+pt,Yt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Bf:return Ce=Ce.get(pt.key===null?ke:pt.key)||null,we(ge,Ce,pt,Yt);case hs:return Ce=Ce.get(pt.key===null?ke:pt.key)||null,Xe(ge,Ce,pt,Yt);case ps:var Sa=pt._init;return pt=Sa(pt._payload),hn(Ce,ge,ke,pt,Yt)}if(ad(pt)||i(pt))return Ce=Ce.get(ke)||null,vt(ge,Ce,pt,Yt,null);if(typeof pt.then=="function")return hn(Ce,ge,ke,jt(pt),Yt);if(pt.$$typeof===Fs)return hn(Ce,ge,ke,bf(ge,pt),Yt);mn(ge,pt)}return null}function ts(Ce,ge,ke,pt){for(var Yt=null,Sa=null,on=ge,Yn=ge=0,ja=null;on!==null&&Yn<ke.length;Yn++){on.index>Yn?(ja=on,on=null):ja=on.sibling;var Ln=Nt(Ce,on,ke[Yn],pt);if(Ln===null){on===null&&(on=ja);break}p&&on&&Ln.alternate===null&&g(Ce,on),ge=k(Ln,ge,Yn),Sa===null?Yt=Ln:Sa.sibling=Ln,Sa=Ln,on=ja}if(Yn===ke.length)return w(Ce,on),jn&&z(Ce,Yn),Yt;if(on===null){for(;Yn<ke.length;Yn++)on=Rt(Ce,ke[Yn],pt),on!==null&&(ge=k(on,ge,Yn),Sa===null?Yt=on:Sa.sibling=on,Sa=on);return jn&&z(Ce,Yn),Yt}for(on=C(on);Yn<ke.length;Yn++)ja=hn(on,Ce,Yn,ke[Yn],pt),ja!==null&&(p&&ja.alternate!==null&&on.delete(ja.key===null?Yn:ja.key),ge=k(ja,ge,Yn),Sa===null?Yt=ja:Sa.sibling=ja,Sa=ja);return p&&on.forEach(function(Mo){return g(Ce,Mo)}),jn&&z(Ce,Yn),Yt}function lc(Ce,ge,ke,pt){if(ke==null)throw Error(r(151));for(var Yt=null,Sa=null,on=ge,Yn=ge=0,ja=null,Ln=ke.next();on!==null&&!Ln.done;Yn++,Ln=ke.next()){on.index>Yn?(ja=on,on=null):ja=on.sibling;var Mo=Nt(Ce,on,Ln.value,pt);if(Mo===null){on===null&&(on=ja);break}p&&on&&Mo.alternate===null&&g(Ce,on),ge=k(Mo,ge,Yn),Sa===null?Yt=Mo:Sa.sibling=Mo,Sa=Mo,on=ja}if(Ln.done)return w(Ce,on),jn&&z(Ce,Yn),Yt;if(on===null){for(;!Ln.done;Yn++,Ln=ke.next())Ln=Rt(Ce,Ln.value,pt),Ln!==null&&(ge=k(Ln,ge,Yn),Sa===null?Yt=Ln:Sa.sibling=Ln,Sa=Ln);return jn&&z(Ce,Yn),Yt}for(on=C(on);!Ln.done;Yn++,Ln=ke.next())Ln=hn(on,Ce,Yn,Ln.value,pt),Ln!==null&&(p&&Ln.alternate!==null&&on.delete(Ln.key===null?Yn:Ln.key),ge=k(Ln,ge,Yn),Sa===null?Yt=Ln:Sa.sibling=Ln,Sa=Ln);return p&&on.forEach(function(rm){return g(Ce,rm)}),jn&&z(Ce,Yn),Yt}function cc(Ce,ge,ke,pt){if(typeof ke=="object"&&ke!==null&&ke.type===Kl&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case Bf:e:{for(var Yt=ke.key;ge!==null;){if(ge.key===Yt){if(Yt=ke.type,Yt===Kl){if(ge.tag===7){w(Ce,ge.sibling),pt=O(ge,ke.props.children),pt.return=Ce,Ce=pt;break e}}else if(ge.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===ps&&fr(Yt)===ge.type){w(Ce,ge.sibling),pt=O(ge,ke.props),En(pt,ke),pt.return=Ce,Ce=pt;break e}w(Ce,ge);break}else g(Ce,ge);ge=ge.sibling}ke.type===Kl?(pt=Ia(ke.props.children,Ce.mode,pt,ke.key),pt.return=Ce,Ce=pt):(pt=po(ke.type,ke.key,ke.props,null,Ce.mode,pt),En(pt,ke),pt.return=Ce,Ce=pt)}return te(Ce);case hs:e:{for(Yt=ke.key;ge!==null;){if(ge.key===Yt)if(ge.tag===4&&ge.stateNode.containerInfo===ke.containerInfo&&ge.stateNode.implementation===ke.implementation){w(Ce,ge.sibling),pt=O(ge,ke.children||[]),pt.return=Ce,Ce=pt;break e}else{w(Ce,ge);break}else g(Ce,ge);ge=ge.sibling}pt=dg(ke,Ce.mode,pt),pt.return=Ce,Ce=pt}return te(Ce);case ps:return Yt=ke._init,ke=Yt(ke._payload),cc(Ce,ge,ke,pt)}if(ad(ke))return ts(Ce,ge,ke,pt);if(i(ke)){if(Yt=i(ke),typeof Yt!="function")throw Error(r(150));return ke=Yt.call(ke),lc(Ce,ge,ke,pt)}if(typeof ke.then=="function")return cc(Ce,ge,jt(ke),pt);if(ke.$$typeof===Fs)return cc(Ce,ge,bf(Ce,ke),pt);mn(Ce,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,ge!==null&&ge.tag===6?(w(Ce,ge.sibling),pt=O(ge,ke),pt.return=Ce,Ce=pt):(w(Ce,ge),pt=Tp(ke,Ce.mode,pt),pt.return=Ce,Ce=pt),te(Ce)):w(Ce,ge)}return function(Ce,ge,ke,pt){try{nc=0;var Yt=cc(Ce,ge,ke,pt);return tc=null,Yt}catch(on){if(on===md)throw on;var Sa=t(29,on,null,Ce.mode);return Sa.lanes=pt,Sa.return=Ce,Sa}finally{}}}function Ya(p,g){p=Yr,R(gd,p),R(ma,g),Yr=p|g.baseLanes}function Ea(){R(gd,Yr),R(ma,ma.current)}function ls(){Yr=gd.current,_(ma),_(gd)}function Bi(p){var g=p.alternate;R(sr,sr.current&1),R(qi,p),ca===null&&(g===null||ma.current!==null||g.memoizedState!==null)&&(ca=p)}function uf(p){if(p.tag===22){if(R(sr,sr.current),R(qi,p),ca===null){var g=p.alternate;g!==null&&g.memoizedState!==null&&(ca=p)}}else Fi()}function Fi(){R(sr,sr.current),R(qi,qi.current)}function ki(p){_(qi),ca===p&&(ca=null),_(sr)}function Hi(p){for(var g=p;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||kp(w)||Hp(w)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function ha(){throw Error(r(321))}function Os(p,g){if(g===null)return!1;for(var w=0;w<g.length&&w<p.length;w++)if(!bi(p[w],g[w]))return!1;return!0}function co(p,g,w,C,O,k){return ll=k,wn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,sn.H=p===null||p.memoizedState===null?ic:oi,rc=!1,k=w(C,O),rc=!1,$c&&(k=jo(g,w,C,O)),Cl(p),k}function Cl(p){sn.H=Da;var g=$t!==null&&$t.next!==null;if(ll=0,Gn=$t=wn=null,xs=!1,eu=0,vr=null,g)throw Error(r(300));p===null||ua||(p=p.dependencies,p!==null&&_f(p)&&(ua=!0))}function jo(p,g,w,C){wn=p;var O=0;do{if($c&&(vr=null),eu=0,$c=!1,25<=O)throw Error(r(301));if(O+=1,Gn=$t=null,p.updateQueue!=null){var k=p.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}sn.H=Xi,k=g(w,C)}while($c);return k}function qa(){var p=sn.H,g=p.useState()[0];return g=typeof g.then=="function"?Oe(g):g,p=p.useState()[0],($t!==null?$t.memoizedState:null)!==p&&(wn.flags|=1024),g}function Ou(){var p=Jp!==0;return Jp=0,p}function Uu(p,g,w){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~w}function ee(p){if(xs){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}xs=!1}ll=0,Gn=$t=wn=null,$c=!1,eu=Jp=0,vr=null}function ye(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?wn.memoizedState=Gn=p:Gn=Gn.next=p,Gn}function Re(){if($t===null){var p=wn.alternate;p=p!==null?p.memoizedState:null}else p=$t.next;var g=Gn===null?wn.memoizedState:Gn.next;if(g!==null)Gn=g,$t=p;else{if(p===null)throw wn.alternate===null?Error(r(467)):Error(r(310));$t=p,p={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Gn===null?wn.memoizedState=Gn=p:Gn=Gn.next=p}return Gn}function Oe(p){var g=eu;return eu+=1,vr===null&&(vr=[]),p=et(vr,p,g),g=wn,(Gn===null?g.memoizedState:Gn.next)===null&&(g=g.alternate,sn.H=g===null||g.memoizedState===null?ic:oi),p}function Se(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Oe(p);if(p.$$typeof===Fs)return wr(p)}throw Error(r(438,String(p)))}function ht(p){var g=null,w=wn.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var C=wn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(O){return O.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=Zp(),wn.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(p),C=0;C<p;C++)w[C]=ey;return g.index++,w}function yt(p,g){return typeof g=="function"?g(p):g}function It(p){var g=Re();return St(g,$t,p)}function St(p,g,w){var C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=w;var O=p.baseQueue,k=C.pending;if(k!==null){if(O!==null){var te=O.next;O.next=k.next,k.next=te}g.baseQueue=O=k,C.pending=null}if(k=p.baseState,O===null)p.memoizedState=k;else{g=O.next;var he=te=null,we=null,Xe=g,vt=!1;do{var Rt=Xe.lane&-536870913;if(Rt!==Xe.lane?(Pn&Rt)===Rt:(ll&Rt)===Rt){var Nt=Xe.revertLane;if(Nt===0)we!==null&&(we=we.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),Rt===Yi&&(vt=!0);else if((ll&Nt)===Nt){Xe=Xe.next,Nt===Yi&&(vt=!0);continue}else Rt={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},we===null?(he=we=Rt,te=k):we=we.next=Rt,wn.lanes|=Nt,$i|=Nt;Rt=Xe.action,rc&&w(k,Rt),k=Xe.hasEagerState?Xe.eagerState:w(k,Rt)}else Nt={lane:Rt,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},we===null?(he=we=Nt,te=k):we=we.next=Nt,wn.lanes|=Rt,$i|=Rt;Xe=Xe.next}while(Xe!==null&&Xe!==g);if(we===null?te=k:we.next=he,!bi(k,p.memoizedState)&&(ua=!0,vt&&(w=Zc,w!==null)))throw w;p.memoizedState=k,p.baseState=te,p.baseQueue=we,C.lastRenderedState=k}return O===null&&(C.lanes=0),[p.memoizedState,C.dispatch]}function qt(p){var g=Re(),w=g.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=p;var C=w.dispatch,O=w.pending,k=g.memoizedState;if(O!==null){w.pending=null;var te=O=O.next;do k=p(k,te.action),te=te.next;while(te!==O);bi(k,g.memoizedState)||(ua=!0),g.memoizedState=k,g.baseQueue===null&&(g.baseState=k),w.lastRenderedState=k}return[k,C]}function Qt(p,g,w){var C=wn,O=Re(),k=jn;if(k){if(w===void 0)throw Error(r(407));w=w()}else w=g();var te=!bi(($t||O).memoizedState,w);if(te&&(O.memoizedState=w,ua=!0),O=O.queue,U0(zn.bind(null,C,O,p),[p]),O.getSnapshot!==g||te||Gn!==null&&Gn.memoizedState.tag&1){if(C.flags|=2048,ar(9,An.bind(null,C,O,w,g),{destroy:void 0},null),$n===null)throw Error(r(349));k||ll&60||Ht(C,g,w)}return w}function Ht(p,g,w){p.flags|=16384,p={getSnapshot:g,value:w},g=wn.updateQueue,g===null?(g=Zp(),wn.updateQueue=g,g.stores=[p]):(w=g.stores,w===null?g.stores=[p]:w.push(p))}function An(p,g,w,C){g.value=w,g.getSnapshot=C,Aa(g)&&ta(p)}function zn(p,g,w){return w(function(){Aa(g)&&ta(p)})}function Aa(p){var g=p.getSnapshot;p=p.value;try{var w=g();return!bi(p,w)}catch{return!0}}function ta(p){var g=ze(p,2);g!==null&&pr(g,p,2)}function gn(p){var g=ye();if(typeof p=="function"){var w=p;if(p=w(),rc){Y(!0);try{w()}finally{Y(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:p},g}function Xt(p,g,w,C){return p.baseState=w,St(p,$t,typeof C=="function"?C:yt)}function _a(p,g,w,C,O){if(gf(p))throw Error(r(485));if(p=g.action,p!==null){var k={payload:O,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){k.listeners.push(te)}};sn.T!==null?w(!0):k.isTransition=!1,C(k),w=g.pending,w===null?(k.next=g.pending=k,In(g,k)):(k.next=w.next,g.pending=w.next=k)}}function In(p,g){var w=g.action,C=g.payload,O=p.state;if(g.isTransition){var k=sn.T,te={};sn.T=te;try{var he=w(O,C),we=sn.S;we!==null&&we(te,he),Ar(p,g,he)}catch(Xe){_r(p,g,Xe)}finally{sn.T=k}}else try{k=w(O,C),Ar(p,g,k)}catch(Xe){_r(p,g,Xe)}}function Ar(p,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(C){cs(p,g,C)},function(C){return _r(p,g,C)}):cs(p,g,w)}function cs(p,g,w){g.status="fulfilled",g.value=w,nr(g),p.state=w,g=p.pending,g!==null&&(w=g.next,w===g?p.pending=null:(w=w.next,g.next=w,In(p,w)))}function _r(p,g,w){var C=p.pending;if(p.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=w,nr(g),g=g.next;while(g!==C)}p.action=null}function nr(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function ia(p,g){return g}function Gr(p,g){if(jn){var w=$n.formState;if(w!==null){e:{var C=wn;if(jn){if(Ir){var O=Tg(Ir,gr);if(O){Ir=Ng(O),C=by(O);break e}}Ge(C)}C=!1}C&&(g=w[0])}}w=ye(),w.memoizedState=w.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:g},w.queue=C,w=H0.bind(null,wn,C),C.dispatch=w,C=gn(!1);var k=ku.bind(null,wn,!1,C.queue);return C=ye(),O={state:g,dispatch:null,action:p,pending:null},C.queue=O,w=_a.bind(null,wn,O,k,w),O.dispatch=w,C.memoizedState=p,[g,w,!1]}function br(p){var g=Re();return Ma(g,$t,p)}function Ma(p,g,w){g=St(p,g,ia)[0],p=It(yt)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?Oe(g):g;var C=Re(),O=C.queue,k=O.dispatch;return w!==C.memoizedState&&(wn.flags|=2048,ar(9,Sr.bind(null,O,w),{destroy:void 0},null)),[g,k,p]}function Sr(p,g){p.action=g}function Oc(p){var g=Re(),w=$t;if(w!==null)return Ma(g,w,p);Re(),g=g.memoizedState,w=Re();var C=w.queue.dispatch;return w.memoizedState=p,[g,C,!1]}function ar(p,g,w,C){return p={tag:p,create:g,inst:w,deps:C,next:null},g=wn.updateQueue,g===null&&(g=Zp(),wn.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=p.next=p:(C=w.next,w.next=p,p.next=C,g.lastEffect=p),p}function I1(){return Re().memoizedState}function df(p,g,w,C){var O=ye();wn.flags|=p,O.memoizedState=ar(1|g,w,{destroy:void 0},C===void 0?null:C)}function ff(p,g,w,C){var O=Re();C=C===void 0?null:C;var k=O.memoizedState.inst;$t!==null&&C!==null&&Os(C,$t.memoizedState.deps)?O.memoizedState=ar(g,w,k,C):(wn.flags|=p,O.memoizedState=ar(1|g,w,k,C))}function lp(p,g){df(8390656,8,p,g)}function U0(p,g){ff(2048,8,p,g)}function D1(p,g){return ff(4,2,p,g)}function hf(p,g){return ff(4,4,p,g)}function cp(p,g){if(typeof g=="function"){p=p();var w=g(p);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function up(p,g,w){w=w!=null?w.concat([p]):null,ff(4,4,cp.bind(null,g,p),w)}function Il(){}function Uc(p,g){var w=Re();g=g===void 0?null:g;var C=w.memoizedState;return g!==null&&Os(g,C[1])?C[0]:(w.memoizedState=[p,g],p)}function B0(p,g){var w=Re();g=g===void 0?null:g;var C=w.memoizedState;if(g!==null&&Os(g,C[1]))return C[0];if(C=p(),rc){Y(!0);try{p()}finally{Y(!1)}}return w.memoizedState=[C,g],C}function pf(p,g,w){return w===void 0||ll&1073741824?p.memoizedState=g:(p.memoizedState=w,p=ig(),wn.lanes|=p,$i|=p,w)}function F0(p,g,w,C){return bi(w,g)?w:ma.current!==null?(p=pf(p,w,C),bi(p,g)||(ua=!0),p):ll&42?(p=ig(),wn.lanes|=p,$i|=p,g):(ua=!0,p.memoizedState=w)}function Bu(p,g,w,C,O){var k=al();Wr(k!==0&&8>k?k:8);var te=sn.T,he={};sn.T=he,ku(p,!1,g,w);try{var we=O(),Xe=sn.S;if(Xe!==null&&Xe(he,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var vt=mt(we,C);Dl(p,g,vt,Ba(p))}else Dl(p,g,C,Ba(p))}catch(Rt){Dl(p,g,{then:function(){},status:"rejected",reason:Rt},Ba())}finally{Wr(k),sn.T=te}}function uo(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:ql,baseState:ql,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:ql},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:w},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function mf(){return wr(ks)}function Fu(){return Re().memoizedState}function zo(){return Re().memoizedState}function k0(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var w=Ba();p=rt(w);var C=gt(g,p,w);C!==null&&(pr(C,g,w),Lt(C,g,w)),g={cache:Ul()},p.payload=g;return}g=g.return}}function dp(p,g,w){var C=Ba();w={lane:C,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},gf(p)?ti(g,w):(w=Ke(p,g,w,C),w!==null&&(pr(w,p,C),Ll(w,g,C)))}function H0(p,g,w){var C=Ba();Dl(p,g,w,C)}function Dl(p,g,w,C){var O={lane:C,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(gf(p))ti(g,O);else{var k=p.alternate;if(p.lanes===0&&(k===null||k.lanes===0)&&(k=g.lastRenderedReducer,k!==null))try{var te=g.lastRenderedState,he=k(te,w);if(O.hasEagerState=!0,O.eagerState=he,bi(he,te))return Le(p,g,O,0),$n===null&&Be(),!1}catch{}finally{}if(w=Ke(p,g,O,C),w!==null)return pr(w,p,C),Ll(w,g,C),!0}return!1}function ku(p,g,w,C){if(C={lane:2,revertLane:Ye(),action:C,hasEagerState:!1,eagerState:null,next:null},gf(p)){if(g)throw Error(r(479))}else g=Ke(p,w,C,2),g!==null&&pr(g,p,2)}function gf(p){var g=p.alternate;return p===wn||g!==null&&g===wn}function ti(p,g){$c=xs=!0;var w=p.pending;w===null?g.next=g:(g.next=w.next,w.next=g),p.pending=g}function Ll(p,g,w){if(w&4194176){var C=g.lanes;C&=p.pendingLanes,w|=C,g.lanes=w,$(p,w)}}function Hu(p,g,w,C){g=p.memoizedState,w=w(C,g),w=w==null?g:Cp({},g,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}function ju(p,g,w,C,O,k,te){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,k,te):g.prototype&&g.prototype.isPureReactComponent?!ut(w,C)||!ut(O,k):!0}function L1(p,g,w,C){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,C),g.state!==p&&_o.enqueueReplaceState(g,g.state,null)}function Go(p,g){var w=g;if("ref"in g){w={};for(var C in g)C!=="ref"&&(w[C]=g[C])}if(p=p.defaultProps){w===g&&(w=Cp({},w));for(var O in p)w[O]===void 0&&(w[O]=p[O])}return w}function zu(p,g){try{var w=p.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function Gu(p,g,w){try{var C=p.onCaughtError;C(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function Vu(p,g,w){return w=rt(w),w.tag=3,w.payload={element:null},w.callback=function(){zu(p,g)},w}function j0(p){return p=rt(p),p.tag=3,p}function P1(p,g,w,C){var O=w.type.getDerivedStateFromError;if(typeof O=="function"){var k=C.value;p.payload=function(){return O(k)},p.callback=function(){Gu(g,w,C)}}var te=w.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(p.callback=function(){Gu(g,w,C),typeof O!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var he=C.stack;this.componentDidCatch(C.value,{componentStack:he!==null?he:""})})}function nb(p,g,w,C,O){if(w.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=w.alternate,g!==null&&Af(g,w,O,!0),w=qi.current,w!==null){switch(w.tag){case 13:return ca===null?Zo():w.alternate===null&&da===0&&(da=3),w.flags&=-257,w.flags|=65536,w.lanes=O,C===Qf?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([C]):g.add(C),kc(p,C,O)),!1;case 22:return w.flags|=65536,C===Qf?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([C]):w.add(C)),kc(p,C,O)),!1}throw Error(r(435,w.tag))}return kc(p,C,O),Zo(),!1}if(jn)return g=qi.current,g!==null?(!(g.flags&65536)&&(g.flags|=256),g.flags|=65536,g.lanes=O,C!==Xf&&(p=Error(r(422),{cause:C}),se(X(p,w)))):(C!==Xf&&(g=Error(r(423),{cause:C}),se(X(g,w))),p=p.current.alternate,p.flags|=65536,O&=-O,p.lanes|=O,C=X(C,w),O=Vu(p.stateNode,C,O),ue(p,O),da!==4&&(da=2)),!1;var k=Error(r(520),{cause:C});if(k=X(k,w),nu===null?nu=[k]:nu.push(k),da!==4&&(da=2),g===null)return!0;C=X(C,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,p=O&-O,w.lanes|=p,p=Vu(w.stateNode,C,p),ue(w,p),!1;case 1:if(g=w.type,k=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(sc===null||!sc.has(k))))return w.flags|=65536,O&=-O,w.lanes|=O,O=j0(O),P1(O,p,w,C),ue(w,O),!1}w=w.return}while(w!==null);return!1}function Er(p,g,w,C){g.child=p===null?Ao(g,null,w,C):ac(g,p.child,w,C)}function fp(p,g,w,C,O){w=w.render;var k=g.ref;if("ref"in C){var te={};for(var he in C)he!=="ref"&&(te[he]=C[he])}else te=C;return Ol(g),C=co(p,g,w,te,k,O),he=Ou(),p!==null&&!ua?(Uu(p,g,O),Vo(p,g,O)):(jn&&he&&le(g),g.flags|=1,Er(p,g,C,O),g.child)}function O1(p,g,w,C,O){if(p===null){var k=w.type;return typeof k=="function"&&!Lf(k)&&k.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=k,U1(p,g,k,C,O)):(p=po(w.type,null,C,g,g.mode,O),p.ref=g.ref,p.return=g,g.child=p)}if(k=p.child,!K0(p,O)){var te=k.memoizedProps;if(w=w.compare,w=w!==null?w:ut,w(te,C)&&p.ref===g.ref)return Vo(p,g,O)}return g.flags|=1,p=fs(k,C),p.ref=g.ref,p.return=g,g.child=p}function U1(p,g,w,C,O){if(p!==null){var k=p.memoizedProps;if(ut(k,C)&&p.ref===g.ref)if(ua=!1,g.pendingProps=C=k,K0(p,O))p.flags&131072&&(ua=!0);else return g.lanes=p.lanes,Vo(p,g,O)}return hp(p,g,w,C,O)}function B1(p,g,w){var C=g.pendingProps,O=C.children,k=(g.stateNode._pendingVisibility&2)!==0,te=p!==null?p.memoizedState:null;if(vf(p,g),C.mode==="hidden"||k){if(g.flags&128){if(C=te!==null?te.baseLanes|w:w,p!==null){for(O=g.child=p.child,k=0;O!==null;)k=k|O.lanes|O.childLanes,O=O.sibling;g.childLanes=k&~C}else g.childLanes=0,g.child=null;return F1(p,g,C,w)}if(w&536870912)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&mp(g,te!==null?te.cachePool:null),te!==null?Ya(g,te):Ea(),uf(g);else return g.lanes=g.childLanes=536870912,F1(p,g,te!==null?te.baseLanes|w:w,w)}else te!==null?(mp(g,te.cachePool),Ya(g,te),Fi(),g.memoizedState=null):(p!==null&&mp(g,null),Ea(),Fi());return Er(p,g,O,w),g.child}function F1(p,g,w,C){var O=q0();return O=O===null?null:{parent:ri?ga._currentValue:ga._currentValue2,pool:O},g.memoizedState={baseLanes:w,cachePool:O},p!==null&&mp(g,null),Ea(),uf(g),p!==null&&Af(p,g,C,!0),null}function vf(p,g){var w=g.ref;if(w===null)p!==null&&p.ref!==null&&(g.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(p===null||p.ref!==w)&&(g.flags|=2097664)}}function hp(p,g,w,C,O){return Ol(g),w=co(p,g,w,C,void 0,O),C=Ou(),p!==null&&!ua?(Uu(p,g,O),Vo(p,g,O)):(jn&&C&&le(g),g.flags|=1,Er(p,g,w,O),g.child)}function k1(p,g,w,C,O,k){return Ol(g),g.updateQueue=null,w=jo(g,C,w,O),Cl(p),C=Ou(),p!==null&&!ua?(Uu(p,g,k),Vo(p,g,k)):(jn&&C&&le(g),g.flags|=1,Er(p,g,w,k),g.child)}function H1(p,g,w,C,O){if(Ol(g),g.stateNode===null){var k=Ql,te=w.contextType;typeof te=="object"&&te!==null&&(k=wr(te)),k=new w(C,k),g.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=_o,g.stateNode=k,k._reactInternals=g,k=g.stateNode,k.props=C,k.state=g.memoizedState,k.refs={},Ct(g),te=w.contextType,k.context=typeof te=="object"&&te!==null?wr(te):Ql,k.state=g.memoizedState,te=w.getDerivedStateFromProps,typeof te=="function"&&(Hu(g,w,te,C),k.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(te=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),te!==k.state&&_o.enqueueReplaceState(k,k.state,null),ft(g,C,k,O),Me(),k.state=g.memoizedState),typeof k.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(p===null){k=g.stateNode;var he=g.memoizedProps,we=Go(w,he);k.props=we;var Xe=k.context,vt=w.contextType;te=Ql,typeof vt=="object"&&vt!==null&&(te=wr(vt));var Rt=w.getDerivedStateFromProps;vt=typeof Rt=="function"||typeof k.getSnapshotBeforeUpdate=="function",he=g.pendingProps!==he,vt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(he||Xe!==te)&&L1(g,k,C,te),ol=!1;var Nt=g.memoizedState;k.state=Nt,ft(g,C,k,O),Me(),Xe=g.memoizedState,he||Nt!==Xe||ol?(typeof Rt=="function"&&(Hu(g,w,Rt,C),Xe=g.memoizedState),(we=ol||ju(g,w,we,C,Nt,Xe,te))?(vt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(g.flags|=4194308)):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=Xe),k.props=C,k.state=Xe,k.context=te,C=we):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{k=g.stateNode,Dt(p,g),te=g.memoizedProps,vt=Go(w,te),k.props=vt,Rt=g.pendingProps,Nt=k.context,Xe=w.contextType,we=Ql,typeof Xe=="object"&&Xe!==null&&(we=wr(Xe)),he=w.getDerivedStateFromProps,(Xe=typeof he=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(te!==Rt||Nt!==we)&&L1(g,k,C,we),ol=!1,Nt=g.memoizedState,k.state=Nt,ft(g,C,k,O),Me();var hn=g.memoizedState;te!==Rt||Nt!==hn||ol||p!==null&&p.dependencies!==null&&_f(p.dependencies)?(typeof he=="function"&&(Hu(g,w,he,C),hn=g.memoizedState),(vt=ol||ju(g,w,vt,C,Nt,hn,we)||p!==null&&p.dependencies!==null&&_f(p.dependencies))?(Xe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(C,hn,we),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(C,hn,we)),typeof k.componentDidUpdate=="function"&&(g.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof k.componentDidUpdate!="function"||te===p.memoizedProps&&Nt===p.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Nt===p.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=hn),k.props=C,k.state=hn,k.context=we,C=vt):(typeof k.componentDidUpdate!="function"||te===p.memoizedProps&&Nt===p.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Nt===p.memoizedState||(g.flags|=1024),C=!1)}return k=C,vf(p,g),C=(g.flags&128)!==0,k||C?(k=g.stateNode,w=C&&typeof w.getDerivedStateFromError!="function"?null:k.render(),g.flags|=1,p!==null&&C?(g.child=ac(g,p.child,null,O),g.child=ac(g,null,w,O)):Er(p,g,w,O),g.memoizedState=k.state,p=g.child):p=Vo(p,g,O),p}function j1(p,g,w,C){return ct(),g.flags|=256,Er(p,g,w,C),g.child}function z0(p){return{baseLanes:p,cachePool:X0()}}function yf(p,g,w){return p=p!==null?p.childLanes&~w:0,g&&(p|=es),p}function z1(p,g,w){var C=g.pendingProps,O=!1,k=(g.flags&128)!==0,te;if((te=k)||(te=p!==null&&p.memoizedState===null?!1:(sr.current&2)!==0),te&&(O=!0,g.flags&=-129),te=(g.flags&32)!==0,g.flags&=-33,p===null){if(jn){if(O?Bi(g):Fi(),jn){var he=Ir,we;(we=he)&&(he=wy(he,gr),he!==null?(g.memoizedState={dehydrated:he,treeContext:$l!==null?{id:js,overflow:zs}:null,retryLane:536870912},we=t(18,null,null,0),we.stateNode=he,we.return=g,g.child=we,Cr=g,Ir=null,we=!0):we=!1),we||Ge(g)}if(he=g.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return Hp(he)?g.lanes=16:g.lanes=536870912,null;ki(g)}return he=C.children,C=C.fallback,O?(Fi(),O=g.mode,he=V0({mode:"hidden",children:he},O),C=Ia(C,O,w,null),he.return=g,C.return=g,he.sibling=C,g.child=he,O=g.child,O.memoizedState=z0(w),O.childLanes=yf(p,te,w),g.memoizedState=em,C):(Bi(g),G0(g,he))}if(we=p.memoizedState,we!==null&&(he=we.dehydrated,he!==null)){if(k)g.flags&256?(Bi(g),g.flags&=-257,g=pp(p,g,w)):g.memoizedState!==null?(Fi(),g.child=p.child,g.flags|=128,g=null):(Fi(),O=C.fallback,he=g.mode,C=V0({mode:"visible",children:C.children},he),O=Ia(O,he,w,null),O.flags|=2,C.return=g,O.return=g,C.sibling=O,g.child=C,ac(g,p.child,null,w),C=g.child,C.memoizedState=z0(w),C.childLanes=yf(p,te,w),g.memoizedState=em,g=O);else if(Bi(g),Hp(he))te=Ay(he).digest,C=Error(r(419)),C.stack="",C.digest=te,se({value:C,source:null,stack:null}),g=pp(p,g,w);else if(ua||Af(p,g,w,!1),te=(w&p.childLanes)!==0,ua||te){if(te=$n,te!==null){if(C=w&-w,C&42)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=C&(te.suspendedLanes|w)?0:C,C!==0&&C!==we.retryLane)throw we.retryLane=C,ze(p,C),pr(te,p,C),$p}kp(he)||Zo(),g=pp(p,g,w)}else kp(he)?(g.flags|=128,g.child=p.child,g=Qo.bind(null,p),_y(he,g),g=null):(p=we.treeContext,Nr&&(Ir=Ey(he),Cr=g,jn=!0,vs=null,gr=!1,p!==null&&(Wi[Ki++]=js,Wi[Ki++]=zs,Wi[Ki++]=$l,js=p.id,zs=p.overflow,$l=g)),g=G0(g,C.children),g.flags|=4096);return g}return O?(Fi(),O=C.fallback,he=g.mode,we=p.child,k=we.sibling,C=fs(we,{mode:"hidden",children:C.children}),C.subtreeFlags=we.subtreeFlags&31457280,k!==null?O=fs(k,O):(O=Ia(O,he,w,null),O.flags|=2),O.return=g,C.return=g,C.sibling=O,g.child=C,C=O,O=g.child,he=p.child.memoizedState,he===null?he=z0(w):(we=he.cachePool,we!==null?(k=ri?ga._currentValue:ga._currentValue2,we=we.parent!==k?{parent:k,pool:k}:we):we=X0(),he={baseLanes:he.baseLanes|w,cachePool:we}),O.memoizedState=he,O.childLanes=yf(p,te,w),g.memoizedState=em,C):(Bi(g),w=p.child,p=w.sibling,w=fs(w,{mode:"visible",children:C.children}),w.return=g,w.sibling=null,p!==null&&(te=g.deletions,te===null?(g.deletions=[p],g.flags|=16):te.push(p)),g.child=w,g.memoizedState=null,w)}function G0(p,g){return g=V0({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function V0(p,g){return Of(p,g,0,null)}function pp(p,g,w){return ac(g,p.child,null,w),p=G0(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function G1(p,g,w){p.lanes|=g;var C=p.alternate;C!==null&&(C.lanes|=g),xf(p.return,g,w)}function W0(p,g,w,C,O){var k=p.memoizedState;k===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:O}:(k.isBackwards=g,k.rendering=null,k.renderingStartTime=0,k.last=C,k.tail=w,k.tailMode=O)}function V1(p,g,w){var C=g.pendingProps,O=C.revealOrder,k=C.tail;if(Er(p,g,C.children,w),C=sr.current,C&2)C=C&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&G1(p,w,g);else if(p.tag===19)G1(p,w,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}switch(R(sr,C),O){case"forwards":for(w=g.child,O=null;w!==null;)p=w.alternate,p!==null&&Hi(p)===null&&(O=w),w=w.sibling;w=O,w===null?(O=g.child,g.child=null):(O=w.sibling,w.sibling=null),W0(g,!1,O,w,k);break;case"backwards":for(w=null,O=g.child,g.child=null;O!==null;){if(p=O.alternate,p!==null&&Hi(p)===null){g.child=O;break}p=O.sibling,O.sibling=w,w=O,O=p}W0(g,!0,w,null,k);break;case"together":W0(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Vo(p,g,w){if(p!==null&&(g.dependencies=p.dependencies),$i|=g.lanes,!(w&g.childLanes))if(p!==null){if(Af(p,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(r(153));if(g.child!==null){for(p=g.child,w=fs(p,p.pendingProps),g.child=w,w.return=g;p.sibling!==null;)p=p.sibling,w=w.sibling=fs(p,p.pendingProps),w.return=g;w.sibling=null}return g.child}function K0(p,g){return p.lanes&g?!0:(p=p.dependencies,!!(p!==null&&_f(p)))}function ab(p,g,w){switch(g.tag){case 3:xe(g,g.stateNode.containerInfo),Pl(g,ga,p.memoizedState.cache),ct();break;case 27:case 5:_e(g);break;case 4:xe(g,g.stateNode.containerInfo);break;case 10:Pl(g,g.type,g.memoizedProps.value);break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(Bi(g),g.flags|=128,null):w&g.child.childLanes?z1(p,g,w):(Bi(g),p=Vo(p,g,w),p!==null?p.sibling:null);Bi(g);break;case 19:var O=(p.flags&128)!==0;if(C=(w&g.childLanes)!==0,C||(Af(p,g,w,!1),C=(w&g.childLanes)!==0),O){if(C)return V1(p,g,w);g.flags|=128}if(O=g.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),R(sr,sr.current),C)break;return null;case 22:case 23:return g.lanes=0,B1(p,g,w);case 24:Pl(g,ga,p.memoizedState.cache)}return Vo(p,g,w)}function W1(p,g,w){if(p!==null)if(p.memoizedProps!==g.pendingProps)ua=!0;else{if(!K0(p,w)&&!(g.flags&128))return ua=!1,ab(p,g,w);ua=!!(p.flags&131072)}else ua=!1,jn&&g.flags&1048576&&J(g,dd,g.index);switch(g.lanes=0,g.tag){case 16:e:{p=g.pendingProps;var C=g.elementType,O=C._init;if(C=O(C._payload),g.type=C,typeof C=="function")Lf(C)?(p=Go(C,p),g.tag=1,g=H1(null,g,C,p,w)):(g.tag=0,g=hp(null,g,C,p,w));else{if(C!=null){if(O=C.$$typeof,O===Hf){g.tag=11,g=fp(null,g,C,p,w);break e}else if(O===Lp){g.tag=14,g=O1(null,g,C,p,w);break e}}throw g=s(C)||C,Error(r(306,g,""))}}return g;case 0:return hp(p,g,g.type,g.pendingProps,w);case 1:return C=g.type,O=Go(C,g.pendingProps),H1(p,g,C,O,w);case 3:e:{if(xe(g,g.stateNode.containerInfo),p===null)throw Error(r(387));var k=g.pendingProps;O=g.memoizedState,C=O.element,Dt(p,g),ft(g,k,null,w);var te=g.memoizedState;if(k=te.cache,Pl(g,ga,k),k!==O.cache&&Bc(g,[ga],w,!0),Me(),k=te.element,Nr&&O.isDehydrated)if(O={element:k,isDehydrated:!1,cache:te.cache},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){g=j1(p,g,k,w);break e}else if(k!==C){C=X(Error(r(424)),g),se(C),g=j1(p,g,k,w);break e}else for(Nr&&(Ir=Sy(g.stateNode.containerInfo),Cr=g,jn=!0,vs=null,gr=!0),w=Ao(g,null,k,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ct(),k===C){g=Vo(p,g,w);break e}Er(p,g,k,w)}g=g.child}return g;case 26:if(Vi)return vf(p,g),p===null?(w=Dg(g.type,null,g.pendingProps,null))?g.memoizedState=w:jn||(g.stateNode=Wp(g.type,g.pendingProps,yo.current,g)):g.memoizedState=Dg(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(la)return _e(g),p===null&&la&&jn&&(C=g.stateNode=Hs(g.type,g.pendingProps,yo.current,ir.current,!1),Cr=g,gr=!0,Ir=jp(C)),C=g.pendingProps.children,p!==null||jn?Er(p,g,C,w):g.child=ac(g,null,C,w),vf(p,g),g.child;case 5:return p===null&&jn&&(Gp(g.type,g.pendingProps,ir.current),(O=C=Ir)&&(C=ub(C,g.type,g.pendingProps,gr),C!==null?(g.stateNode=C,Cr=g,Ir=jp(C),gr=!1,O=!0):O=!1),O||Ge(g)),_e(g),O=g.type,k=g.pendingProps,te=p!==null?p.memoizedProps:null,C=k.children,yn(O,k)?C=null:te!==null&&yn(O,te)&&(g.flags|=32),g.memoizedState!==null&&(O=co(p,g,qa,null,null,w),ri?ks._currentValue=O:ks._currentValue2=O),vf(p,g),Er(p,g,C,w),g.child;case 6:return p===null&&jn&&(Cy(g.pendingProps,ir.current),(p=w=Ir)&&(w=Cg(w,g.pendingProps,gr),w!==null?(g.stateNode=w,Cr=g,Ir=null,p=!0):p=!1),p||Ge(g)),null;case 13:return z1(p,g,w);case 4:return xe(g,g.stateNode.containerInfo),C=g.pendingProps,p===null?g.child=ac(g,null,C,w):Er(p,g,C,w),g.child;case 11:return fp(p,g,g.type,g.pendingProps,w);case 7:return Er(p,g,g.pendingProps,w),g.child;case 8:return Er(p,g,g.pendingProps.children,w),g.child;case 12:return Er(p,g,g.pendingProps.children,w),g.child;case 10:return C=g.pendingProps,Pl(g,g.type,C.value),Er(p,g,C.children,w),g.child;case 9:return O=g.type._context,C=g.pendingProps.children,Ol(g),O=wr(O),C=C(O),g.flags|=1,Er(p,g,C,w),g.child;case 14:return O1(p,g,g.type,g.pendingProps,w);case 15:return U1(p,g,g.type,g.pendingProps,w);case 19:return V1(p,g,w);case 22:return B1(p,g,w);case 24:return Ol(g),C=wr(ga),p===null?(O=q0(),O===null&&(O=$n,k=Ul(),O.pooledCache=k,k.refCount++,k!==null&&(O.pooledCacheLanes|=w),O=k),g.memoizedState={parent:C,cache:O},Ct(g),Pl(g,ga,O)):(p.lanes&w&&(Dt(p,g),ft(g,null,null,w),Me()),O=p.memoizedState,k=g.memoizedState,O.parent!==C?(O={parent:C,cache:C},g.memoizedState=O,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=O),Pl(g,ga,C)):(C=k.cache,Pl(g,ga,C),C!==O.cache&&Bc(g,[ga],w,!0))),Er(p,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function Pl(p,g,w){ri?(R(cl,g._currentValue),g._currentValue=w):(R(cl,g._currentValue2),g._currentValue2=w)}function Wo(p){var g=cl.current;ri?p._currentValue=g:p._currentValue2=g,_(cl)}function xf(p,g,w){for(;p!==null;){var C=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),p===w)break;p=p.return}}function Bc(p,g,w,C){var O=p.child;for(O!==null&&(O.return=p);O!==null;){var k=O.dependencies;if(k!==null){var te=O.child;k=k.firstContext;e:for(;k!==null;){var he=k;k=O;for(var we=0;we<g.length;we++)if(he.context===g[we]){k.lanes|=w,he=k.alternate,he!==null&&(he.lanes|=w),xf(k.return,w,p),C||(te=null);break e}k=he.next}}else if(O.tag===18){if(te=O.return,te===null)throw Error(r(341));te.lanes|=w,k=te.alternate,k!==null&&(k.lanes|=w),xf(te,w,p),te=null}else te=O.child;if(te!==null)te.return=O;else for(te=O;te!==null;){if(te===p){te=null;break}if(O=te.sibling,O!==null){O.return=te.return,te=O;break}te=te.return}O=te}}function Af(p,g,w,C){p=null;for(var O=g,k=!1;O!==null;){if(!k){if(O.flags&524288)k=!0;else if(O.flags&262144)break}if(O.tag===10){var te=O.alternate;if(te===null)throw Error(r(387));if(te=te.memoizedProps,te!==null){var he=O.type;bi(O.pendingProps.value,te.value)||(p!==null?p.push(he):p=[he])}}else if(O===Yc.current){if(te=O.alternate,te===null)throw Error(r(387));te.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(p!==null?p.push(ks):p=[ks])}O=O.return}p!==null&&Bc(g,p,w,C),g.flags|=262144}function _f(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!bi(ri?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function Ol(p){Ws=p,Ji=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function wr(p){return Y0(Ws,p)}function bf(p,g){return Ws===null&&Ol(p),Y0(p,g)}function Y0(p,g){var w=ri?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:w,next:null},Ji===null){if(p===null)throw Error(r(308));Ji=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else Ji=Ji.next=g;return w}function Ul(){return{controller:new vd,data:new Map,refCount:0}}function Sf(p){p.refCount--,p.refCount===0&&jy(zy,function(){p.controller.abort()})}function q0(){var p=bo.current;return p!==null?p:$n.pooledCache}function mp(p,g){g===null?R(bo,bo.current):R(bo,g.pool)}function X0(){var p=q0();return p===null?null:{parent:ri?ga._currentValue:ga._currentValue2,pool:p}}function mi(p){p.flags|=4}function Wu(p,g){if(p!==null&&p.child===g.child)return!1;if(g.flags&16)return!0;for(p=g.child;p!==null;){if(p.flags&13878||p.subtreeFlags&13878)return!0;p=p.sibling}return!1}function Fc(p,g,w,C){if(rr)for(w=g.child;w!==null;){if(w.tag===5||w.tag===6)zf(p,w.stateNode);else if(!(w.tag===4||la&&w.tag===27)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else if(ms)for(var O=g.child;O!==null;){if(O.tag===5){var k=O.stateNode;w&&C&&(k=Rg(k,O.type,O.memoizedProps)),zf(p,k)}else if(O.tag===6)k=O.stateNode,w&&C&&(k=Mg(k,O.memoizedProps)),zf(p,k);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)k=O.child,k!==null&&(k.return=O),Fc(p,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===g)break;for(;O.sibling===null;){if(O.return===null||O.return===g)return;O=O.return}O.sibling.return=O.return,O=O.sibling}}function K1(p,g,w,C){if(ms)for(var O=g.child;O!==null;){if(O.tag===5){var k=O.stateNode;w&&C&&(k=Rg(k,O.type,O.memoizedProps)),wg(p,k)}else if(O.tag===6)k=O.stateNode,w&&C&&(k=Mg(k,O.memoizedProps)),wg(p,k);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)k=O.child,k!==null&&(k.return=O),K1(p,O,!(O.memoizedProps!==null&&O.memoizedProps.mode==="manual"),!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===g)break;for(;O.sibling===null;){if(O.return===null||O.return===g)return;O=O.return}O.sibling.return=O.return,O=O.sibling}}function Ef(p,g){if(ms&&Wu(p,g)){p=g.stateNode;var w=p.containerInfo,C=Gf();K1(C,g,!1,!1),p.pendingChildren=C,mi(g),Fp(w,C)}}function gp(p,g,w,C){if(rr)p.memoizedProps!==C&&mi(g);else if(ms){var O=p.stateNode,k=p.memoizedProps;if((p=Wu(p,g))||k!==C){var te=ir.current;k=ld(O,w,k,C,!p,null),k===O?g.stateNode=O:(nl(k,w,C,te)&&mi(g),g.stateNode=k,p?Fc(k,g,!1,!1):mi(g))}else g.stateNode=O}}function vp(p,g,w){if(vg(g,w)){if(p.flags|=16777216,!Up(g,w))if(zl())p.flags|=8192;else throw ec=Qf,Zf}else p.flags&=-16777217}function yp(p,g){if(Ly(g)){if(p.flags|=16777216,!zc(g))if(zl())p.flags|=8192;else throw ec=Qf,Zf}else p.flags&=-16777217}function Ku(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?L():536870912,p.lanes|=g,wo|=g)}function Yu(p,g){if(!jn)switch(p.tailMode){case"hidden":g=p.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function wa(p){var g=p.alternate!==null&&p.alternate.child===p.child,w=0,C=0;if(g)for(var O=p.child;O!==null;)w|=O.lanes|O.childLanes,C|=O.subtreeFlags&31457280,C|=O.flags&31457280,O.return=p,O=O.sibling;else for(O=p.child;O!==null;)w|=O.lanes|O.childLanes,C|=O.subtreeFlags,C|=O.flags,O.return=p,O=O.sibling;return p.subtreeFlags|=C,p.childLanes=w,g}function Y1(p,g,w){var C=g.pendingProps;switch(ce(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(g),null;case 1:return wa(g),null;case 3:return w=g.stateNode,C=null,p!==null&&(C=p.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),Wo(ga),fe(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(p===null||p.child===null)&&(dt(g)?mi(g):p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,vs!==null&&(If(vs),vs=null))),Ef(p,g),wa(g),null;case 26:if(Vi){w=g.type;var O=g.memoizedState;return p===null?(mi(g),O!==null?(wa(g),yp(g,O)):(wa(g),vp(g,w,C))):O?O!==p.memoizedState?(mi(g),wa(g),yp(g,O)):(wa(g),g.flags&=-16777217):(rr?p.memoizedProps!==C&&mi(g):gp(p,g,w,C),wa(g),vp(g,w,C)),null}case 27:if(la){if(Ie(g),w=yo.current,O=g.type,p!==null&&g.stateNode!=null)rr?p.memoizedProps!==C&&mi(g):gp(p,g,O,C);else{if(!C){if(g.stateNode===null)throw Error(r(166));return wa(g),null}p=ir.current,dt(g)?Ue(g,p):(p=Hs(O,C,w,p,!0),g.stateNode=p,mi(g))}return wa(g),null}case 5:if(Ie(g),w=g.type,p!==null&&g.stateNode!=null)gp(p,g,w,C);else{if(!C){if(g.stateNode===null)throw Error(r(166));return wa(g),null}p=ir.current,dt(g)?Ue(g,p):(O=gg(w,C,yo.current,p,g),Fc(O,g,!1,!1),g.stateNode=O,nl(O,w,C,p)&&mi(g))}return wa(g),vp(g,g.type,g.pendingProps),null;case 6:if(p&&g.stateNode!=null)w=p.memoizedProps,rr?w!==C&&mi(g):ms&&(w!==C?(g.stateNode=na(C,yo.current,ir.current,g),mi(g)):g.stateNode=p.stateNode);else{if(typeof C!="string"&&g.stateNode===null)throw Error(r(166));if(p=yo.current,w=ir.current,dt(g)){if(!Nr)throw Error(r(176));if(p=g.stateNode,w=g.memoizedProps,C=null,O=Cr,O!==null)switch(O.tag){case 27:case 5:C=O.memoizedProps}Ig(p,w,g,C)||Ge(g)}else g.stateNode=na(C,p,w,g)}return wa(g),null;case 13:if(C=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(O=dt(g),C!==null&&C.dehydrated!==null){if(p===null){if(!O)throw Error(r(318));if(!Nr)throw Error(r(344));if(O=g.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));My(O,g)}else ct(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;wa(g),O=!1}else vs!==null&&(If(vs),vs=null),O=!0;if(!O)return g.flags&256?(ki(g),g):(ki(g),null)}if(ki(g),g.flags&128)return g.lanes=w,g;if(w=C!==null,p=p!==null&&p.memoizedState!==null,w){C=g.child,O=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(O=C.alternate.memoizedState.cachePool.pool);var k=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(k=C.memoizedState.cachePool.pool),k!==O&&(C.flags|=2048)}return w!==p&&w&&(g.child.flags|=8192),Ku(g,g.updateQueue),wa(g),null;case 4:return fe(),Ef(p,g),p===null&&Fa(g.stateNode.containerInfo),wa(g),null;case 10:return Wo(g.type),wa(g),null;case 19:if(_(sr),O=g.memoizedState,O===null)return wa(g),null;if(C=(g.flags&128)!==0,k=O.rendering,k===null)if(C)Yu(O,!1);else{if(da!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(k=Hi(p),k!==null){for(g.flags|=128,Yu(O,!1),p=k.updateQueue,g.updateQueue=p,Ku(g,p),g.subtreeFlags=0,p=w,w=g.child;w!==null;)Pf(w,p),w=w.sibling;return R(sr,sr.current&1|2),g.child}p=p.sibling}O.tail!==null&&gs()>Ad&&(g.flags|=128,C=!0,Yu(O,!1),g.lanes=4194304)}else{if(!C)if(p=Hi(k),p!==null){if(g.flags|=128,C=!0,p=p.updateQueue,g.updateQueue=p,Ku(g,p),Yu(O,!0),O.tail===null&&O.tailMode==="hidden"&&!k.alternate&&!jn)return wa(g),null}else 2*gs()-O.renderingStartTime>Ad&&w!==536870912&&(g.flags|=128,C=!0,Yu(O,!1),g.lanes=4194304);O.isBackwards?(k.sibling=g.child,g.child=k):(p=O.last,p!==null?p.sibling=k:g.child=k,O.last=k)}return O.tail!==null?(g=O.tail,O.rendering=g,O.tail=g.sibling,O.renderingStartTime=gs(),g.sibling=null,p=sr.current,R(sr,C?p&1|2:p&1),g):(wa(g),null);case 22:case 23:return ki(g),ls(),C=g.memoizedState!==null,p!==null?p.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?w&536870912&&!(g.flags&128)&&(wa(g),g.subtreeFlags&6&&(g.flags|=8192)):wa(g),w=g.updateQueue,w!==null&&Ku(g,w.retryQueue),w=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==w&&(g.flags|=2048),p!==null&&_(bo),null;case 24:return w=null,p!==null&&(w=p.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),Wo(ga),wa(g),null;case 25:return null}throw Error(r(156,g.tag))}function rb(p,g){switch(ce(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Wo(ga),fe(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return Ie(g),null;case 13:if(ki(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(r(340));ct()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return _(sr),null;case 4:return fe(),null;case 10:return Wo(g.type),null;case 22:case 23:return ki(g),ls(),p!==null&&_(bo),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Wo(ga),null;case 25:return null;default:return null}}function q1(p,g){switch(ce(g),g.tag){case 3:Wo(ga),fe();break;case 26:case 27:case 5:Ie(g);break;case 4:fe();break;case 13:ki(g);break;case 19:_(sr);break;case 10:Wo(g.type);break;case 22:case 23:ki(g),ls(),p!==null&&_(bo);break;case 24:Wo(ga)}}function wf(p,g){try{var w=g.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var O=C.next;w=O;do{if((w.tag&p)===p){C=void 0;var k=w.create,te=w.inst;C=k(),te.destroy=C}w=w.next}while(w!==O)}}catch(he){Zn(g,g.return,he)}}function Bl(p,g,w){try{var C=g.updateQueue,O=C!==null?C.lastEffect:null;if(O!==null){var k=O.next;C=k;do{if((C.tag&p)===p){var te=C.inst,he=te.destroy;if(he!==void 0){te.destroy=void 0,O=g;var we=w;try{he()}catch(Xe){Zn(O,we,Xe)}}}C=C.next}while(C!==k)}}catch(Xe){Zn(g,g.return,Xe)}}function X1(p){var g=p.updateQueue;if(g!==null){var w=p.stateNode;try{nt(g,w)}catch(C){Zn(p,p.return,C)}}}function gi(p,g,w){w.props=Go(p.type,p.memoizedProps),w.state=p.memoizedState;try{w.componentWillUnmount()}catch(C){Zn(p,g,C)}}function Us(p,g){try{var w=p.ref;if(w!==null){var C=p.stateNode;switch(p.tag){case 26:case 27:case 5:var O=id(C);break;default:O=C}typeof w=="function"?p.refCleanup=w(O):w.current=O}}catch(k){Zn(p,g,k)}}function vi(p,g){var w=p.ref,C=p.refCleanup;if(w!==null)if(typeof C=="function")try{C()}catch(O){Zn(p,g,O)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(O){Zn(p,g,O)}else w.current=null}function J0(p){var g=p.type,w=p.memoizedProps,C=p.stateNode;try{lb(C,g,w,p)}catch(O){Zn(p,p.return,O)}}function Z0(p,g,w){try{fy(p.stateNode,p.type,w,g,p)}catch(C){Zn(p,p.return,C)}}function Q0(p){return p.tag===5||p.tag===3||(Vi?p.tag===26:!1)||(la?p.tag===27:!1)||p.tag===4}function Rf(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Q0(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!la||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function $0(p,g,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,g?py(w,p,g):bg(w,p);else if(!(C===4||la&&C===27)&&(p=p.child,p!==null))for($0(p,g,w),p=p.sibling;p!==null;)$0(p,g,w),p=p.sibling}function Ko(p,g,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,g?hy(w,p,g):uy(w,p);else if(!(C===4||la&&C===27)&&(p=p.child,p!==null))for(Ko(p,g,w),p=p.sibling;p!==null;)Ko(p,g,w),p=p.sibling}function xp(p,g,w){p=p.containerInfo;try{cd(p,w)}catch(C){Zn(g,g.return,C)}}function Mf(p,g){for(Pp(p.containerInfo),fn=g;fn!==null;)if(p=fn,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,fn=g;else for(;fn!==null;){p=fn;var w=p.alternate;switch(g=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if(g&1024&&w!==null){g=void 0;var C=p,O=w.memoizedProps;w=w.memoizedState;var k=C.stateNode;try{var te=Go(C.type,O,C.elementType===C.type);g=k.getSnapshotBeforeUpdate(te,w),k.__reactInternalSnapshotBeforeUpdate=g}catch(he){Zn(C,C.return,he)}}break;case 3:g&1024&&rr&&xy(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(g&1024)throw Error(r(163))}if(g=p.sibling,g!==null){g.return=p.return,fn=g;break}fn=p.return}return te=Dn,Dn=!1,te}function Ap(p,g,w){var C=w.flags;switch(w.tag){case 0:case 11:case 15:qo(p,w),C&4&&wf(5,w);break;case 1:if(qo(p,w),C&4)if(p=w.stateNode,g===null)try{p.componentDidMount()}catch(he){Zn(w,w.return,he)}else{var O=Go(w.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(O,g,p.__reactInternalSnapshotBeforeUpdate)}catch(he){Zn(w,w.return,he)}}C&64&&X1(w),C&512&&Us(w,w.return);break;case 3:if(qo(p,w),C&64&&(C=w.updateQueue,C!==null)){if(p=null,w.child!==null)switch(w.child.tag){case 27:case 5:p=id(w.child.stateNode);break;case 1:p=w.child.stateNode}try{nt(C,p)}catch(he){Zn(w,w.return,he)}}break;case 26:if(Vi){qo(p,w),C&512&&Us(w,w.return);break}case 27:case 5:qo(p,w),g===null&&C&4&&J0(w),C&512&&Us(w,w.return);break;case 12:qo(p,w);break;case 13:qo(p,w),C&4&&_p(p,w);break;case 22:if(O=w.memoizedState!==null||So,!O){g=g!==null&&g.memoizedState!==null||La;var k=So,te=La;So=O,(La=g)&&!te?Xo(p,w,(w.subtreeFlags&8772)!==0):qo(p,w),So=k,La=te}C&512&&(w.memoizedProps.mode==="manual"?Us(w,w.return):vi(w,w.return));break;default:qo(p,w)}}function eg(p){var g=p.alternate;g!==null&&(p.alternate=null,eg(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&ob(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Rr(p,g,w){for(w=w.child;w!==null;)Fl(p,g,w),w=w.sibling}function Fl(p,g,w){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Ha,w)}catch{}switch(w.tag){case 26:if(Vi){La||vi(w,g),Rr(p,g,w),w.memoizedState?jc(w.memoizedState):w.stateNode&&ud(w.stateNode);break}case 27:if(la){La||vi(w,g);var C=Zt,O=_n;Zt=w.stateNode,Rr(p,g,w),Zl(w.stateNode),Zt=C,_n=O;break}case 5:La||vi(w,g);case 6:if(rr){if(C=Zt,O=_n,Zt=null,Rr(p,g,w),Zt=C,_n=O,Zt!==null)if(_n)try{my(Zt,w.stateNode)}catch(k){Zn(w,g,k)}else try{Sg(Zt,w.stateNode)}catch(k){Zn(w,g,k)}}else Rr(p,g,w);break;case 18:rr&&Zt!==null&&(_n?Vf(Zt,w.stateNode):Ny(Zt,w.stateNode));break;case 4:rr?(C=Zt,O=_n,Zt=w.stateNode.containerInfo,_n=!0,Rr(p,g,w),Zt=C,_n=O):(ms&&xp(w.stateNode,w,Gf()),Rr(p,g,w));break;case 0:case 11:case 14:case 15:La||Bl(2,w,g),La||Bl(4,w,g),Rr(p,g,w);break;case 1:La||(vi(w,g),C=w.stateNode,typeof C.componentWillUnmount=="function"&&gi(w,g,C)),Rr(p,g,w);break;case 21:Rr(p,g,w);break;case 22:La||vi(w,g),La=(C=La)||w.memoizedState!==null,Rr(p,g,w),La=C;break;default:Rr(p,g,w)}}function _p(p,g){if(Nr&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{fb(p)}catch(w){Zn(g,g.return,w)}}function J1(p){switch(p.tag){case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new Qn),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new Qn),g;default:throw Error(r(435,p.tag))}}function Yo(p,g){var w=J1(p);g.forEach(function(C){var O=Wl.bind(null,p,C);w.has(C)||(w.add(C),C.then(O,O))})}function ni(p,g){var w=g.deletions;if(w!==null)for(var C=0;C<w.length;C++){var O=w[C],k=p,te=g;if(rr){var he=te;e:for(;he!==null;){switch(he.tag){case 27:case 5:Zt=he.stateNode,_n=!1;break e;case 3:Zt=he.stateNode.containerInfo,_n=!0;break e;case 4:Zt=he.stateNode.containerInfo,_n=!0;break e}he=he.return}if(Zt===null)throw Error(r(160));Fl(k,te,O),Zt=null,_n=!1}else Fl(k,te,O);k=O.alternate,k!==null&&(k.return=null),O.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)tg(g,p),g=g.sibling}function tg(p,g){var w=p.alternate,C=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:ni(g,p),yi(p),C&4&&(Bl(3,p,p.return),wf(3,p),Bl(5,p,p.return));break;case 1:ni(g,p),yi(p),C&512&&(La||w===null||vi(w,w.return)),C&64&&So&&(p=p.updateQueue,p!==null&&(C=p.callbacks,C!==null&&(w=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=w===null?C:w.concat(C))));break;case 26:if(Vi){var O=Na;ni(g,p),yi(p),C&512&&(La||w===null||vi(w,w.return)),C&4&&(C=w!==null?w.memoizedState:null,g=p.memoizedState,w===null?g===null?p.stateNode===null?p.stateNode=Kf(O,p.type,p.memoizedProps,p):Yf(O,p.type,p.stateNode):p.stateNode=Iy(O,g,p.memoizedProps):C!==g?(C===null?w.stateNode!==null&&ud(w.stateNode):jc(C),g===null?Yf(O,p.type,p.stateNode):Iy(O,g,p.memoizedProps)):g===null&&p.stateNode!==null&&Z0(p,p.memoizedProps,w.memoizedProps));break}case 27:if(la&&C&4&&p.alternate===null){O=p.stateNode;var k=p.memoizedProps;try{Jl(O),Oy(p.type,k,O,p)}catch(vt){Zn(p,p.return,vt)}}case 5:if(ni(g,p),yi(p),C&512&&(La||w===null||vi(w,w.return)),rr){if(p.flags&32){g=p.stateNode;try{Eg(g)}catch(vt){Zn(p,p.return,vt)}}C&4&&p.stateNode!=null&&(g=p.memoizedProps,Z0(p,g,w!==null?w.memoizedProps:g)),C&1024&&(Ug=!0)}break;case 6:if(ni(g,p),yi(p),C&4&&rr){if(p.stateNode===null)throw Error(r(162));C=p.memoizedProps,w=w!==null?w.memoizedProps:C,g=p.stateNode;try{dy(g,w,C)}catch(vt){Zn(p,p.return,vt)}}break;case 3:if(Vi?(Dy(),O=Na,Na=Vp(g.containerInfo),ni(g,p),Na=O):ni(g,p),yi(p),C&4){if(rr&&Nr&&w!==null&&w.memoizedState.isDehydrated)try{db(g.containerInfo)}catch(vt){Zn(p,p.return,vt)}if(ms){C=g.containerInfo,w=g.pendingChildren;try{cd(C,w)}catch(vt){Zn(p,p.return,vt)}}}Ug&&(Ug=!1,Z1(p));break;case 4:Vi?(w=Na,Na=Vp(p.stateNode.containerInfo),ni(g,p),yi(p),Na=w):(ni(g,p),yi(p)),C&4&&ms&&xp(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:ni(g,p),yi(p);break;case 13:ni(g,p),yi(p),p.child.flags&8192&&p.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(li=gs()),C&4&&(C=p.updateQueue,C!==null&&(p.updateQueue=null,Yo(p,C)));break;case 22:C&512&&(La||w===null||vi(w,w.return)),O=p.memoizedState!==null;var te=w!==null&&w.memoizedState!==null,he=So,we=La;if(So=he||O,La=we||te,ni(g,p),La=we,So=he,yi(p),g=p.stateNode,g._current=p,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,C&8192&&(g._visibility=O?g._visibility&-2:g._visibility|1,O&&(g=So||La,w===null||te||g||qu(p)),rr&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(w=null,rr)for(g=p;;){if(g.tag===5||Vi&&g.tag===26||la&&g.tag===27){if(w===null){te=w=g;try{k=te.stateNode,O?gy(k):yy(te.stateNode,te.memoizedProps)}catch(vt){Zn(te,te.return,vt)}}}else if(g.tag===6){if(w===null){te=g;try{var Xe=te.stateNode;O?vy(Xe):cb(Xe,te.memoizedProps)}catch(vt){Zn(te,te.return,vt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}}C&4&&(C=p.updateQueue,C!==null&&(w=C.retryQueue,w!==null&&(C.retryQueue=null,Yo(p,w))));break;case 19:ni(g,p),yi(p),C&4&&(C=p.updateQueue,C!==null&&(p.updateQueue=null,Yo(p,C)));break;case 21:break;default:ni(g,p),yi(p)}}function yi(p){var g=p.flags;if(g&2){try{if(rr&&(!la||p.tag!==27)){e:{for(var w=p.return;w!==null;){if(Q0(w)){var C=w;break e}w=w.return}throw Error(r(160))}switch(C.tag){case 27:if(la){var O=C.stateNode,k=Rf(p);Ko(p,k,O);break}case 5:var te=C.stateNode;C.flags&32&&(Eg(te),C.flags&=-33);var he=Rf(p);Ko(p,he,te);break;case 3:case 4:var we=C.stateNode.containerInfo,Xe=Rf(p);$0(p,Xe,we);break;default:throw Error(r(161))}}}catch(vt){Zn(p,p.return,vt)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function Z1(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;Z1(g),g.tag===5&&g.flags&1024&&Bp(g.stateNode),p=p.sibling}}function qo(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Ap(p,g.alternate,g),g=g.sibling}function qu(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:Bl(4,g,g.return),qu(g);break;case 1:vi(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&gi(g,g.return,w),qu(g);break;case 26:case 27:case 5:vi(g,g.return),qu(g);break;case 22:vi(g,g.return),g.memoizedState===null&&qu(g);break;default:qu(g)}p=p.sibling}}function Xo(p,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,O=p,k=g,te=k.flags;switch(k.tag){case 0:case 11:case 15:Xo(O,k,w),wf(4,k);break;case 1:if(Xo(O,k,w),C=k,O=C.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Xe){Zn(C,C.return,Xe)}if(C=k,O=C.updateQueue,O!==null){var he=C.stateNode;try{var we=O.shared.hiddenCallbacks;if(we!==null)for(O.shared.hiddenCallbacks=null,O=0;O<we.length;O++)pe(we[O],he)}catch(Xe){Zn(C,C.return,Xe)}}w&&te&64&&X1(k),Us(k,k.return);break;case 26:case 27:case 5:Xo(O,k,w),w&&C===null&&te&4&&J0(k),Us(k,k.return);break;case 12:Xo(O,k,w);break;case 13:Xo(O,k,w),w&&te&4&&_p(O,k);break;case 22:k.memoizedState===null&&Xo(O,k,w),Us(k,k.return);break;default:Xo(O,k,w)}g=g.sibling}}function bp(p,g){var w=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==w&&(p!=null&&p.refCount++,w!=null&&Sf(w))}function Tf(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Sf(p))}function hr(p,g,w,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)ng(p,g,w,C),g=g.sibling}function ng(p,g,w,C){var O=g.flags;switch(g.tag){case 0:case 11:case 15:hr(p,g,w,C),O&2048&&wf(9,g);break;case 3:hr(p,g,w,C),O&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Sf(p)));break;case 12:if(O&2048){hr(p,g,w,C),p=g.stateNode;try{var k=g.memoizedProps,te=k.id,he=k.onPostCommit;typeof he=="function"&&he(te,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(we){Zn(g,g.return,we)}}else hr(p,g,w,C);break;case 23:break;case 22:k=g.stateNode,g.memoizedState!==null?k._visibility&4?hr(p,g,w,C):Vr(p,g):k._visibility&4?hr(p,g,w,C):(k._visibility|=4,Mr(p,g,w,C,(g.subtreeFlags&10256)!==0)),O&2048&&bp(g.alternate,g);break;case 24:hr(p,g,w,C),O&2048&&Tf(g.alternate,g);break;default:hr(p,g,w,C)}}function Mr(p,g,w,C,O){for(O=O&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var k=p,te=g,he=w,we=C,Xe=te.flags;switch(te.tag){case 0:case 11:case 15:Mr(k,te,he,we,O),wf(8,te);break;case 23:break;case 22:var vt=te.stateNode;te.memoizedState!==null?vt._visibility&4?Mr(k,te,he,we,O):Vr(k,te):(vt._visibility|=4,Mr(k,te,he,we,O)),O&&Xe&2048&&bp(te.alternate,te);break;case 24:Mr(k,te,he,we,O),O&&Xe&2048&&Tf(te.alternate,te);break;default:Mr(k,te,he,we,O)}g=g.sibling}}function Vr(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=p,C=g,O=C.flags;switch(C.tag){case 22:Vr(w,C),O&2048&&bp(C.alternate,C);break;case 24:Vr(w,C),O&2048&&Tf(C.alternate,C);break;default:Vr(w,C)}g=g.sibling}}function us(p){if(p.subtreeFlags&Zi)for(p=p.child;p!==null;)Sp(p),p=p.sibling}function Sp(p){switch(p.tag){case 26:us(p),p.flags&Zi&&(p.memoizedState!==null?Py(Na,p.memoizedState,p.memoizedProps):ii(p.type,p.memoizedProps));break;case 5:us(p),p.flags&Zi&&ii(p.type,p.memoizedProps);break;case 3:case 4:if(Vi){var g=Na;Na=Vp(p.stateNode.containerInfo),us(p),Na=g}else us(p);break;case 22:p.memoizedState===null&&(g=p.alternate,g!==null&&g.memoizedState!==null?(g=Zi,Zi=16777216,us(p),Zi=g):us(p));break;default:us(p)}}function Nf(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function kl(p){var g=p.deletions;if(p.flags&16){if(g!==null)for(var w=0;w<g.length;w++){var C=g[w];fn=C,ag(C,p)}Nf(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Ep(p),p=p.sibling}function Ep(p){switch(p.tag){case 0:case 11:case 15:kl(p),p.flags&2048&&Bl(9,p,p.return);break;case 3:kl(p);break;case 12:kl(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&4&&(p.return===null||p.return.tag!==13)?(g._visibility&=-5,Jo(p)):kl(p);break;default:kl(p)}}function Jo(p){var g=p.deletions;if(p.flags&16){if(g!==null)for(var w=0;w<g.length;w++){var C=g[w];fn=C,ag(C,p)}Nf(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:Bl(8,g,g.return),Jo(g);break;case 22:w=g.stateNode,w._visibility&4&&(w._visibility&=-5,Jo(g));break;default:Jo(g)}p=p.sibling}}function ag(p,g){for(;fn!==null;){var w=fn;switch(w.tag){case 0:case 11:case 15:Bl(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var C=w.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Sf(w.memoizedState.cache)}if(C=w.child,C!==null)C.return=w,fn=C;else e:for(w=p;fn!==null;){C=fn;var O=C.sibling,k=C.return;if(eg(C),C===w){fn=null;break e}if(O!==null){O.return=k,fn=O;break e}fn=k}}}function Xu(p){var g=ay(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(p=Ag(p),p===null)throw Error(r(362));return p.stateNode.current}function Hl(p,g){var w=p.tag;switch(g.$$typeof){case xd:if(p.type===g.value)return!0;break;case As:e:{for(g=g.value,p=[p,0],w=0;w<p.length;){var C=p[w++],O=C.tag,k=p[w++],te=g[k];if(O!==5&&O!==26&&O!==27||!od(C)){for(;te!=null&&Hl(C,te);)k++,te=g[k];if(k===g.length){g=!0;break e}else for(C=C.child;C!==null;)p.push(C,k),C=C.sibling}}g=!1}return g;case ba:if((w===5||w===26||w===27)&&oy(p.stateNode,g.value))return!0;break;case Eo:if((w===5||w===6||w===26||w===27)&&(p=sy(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case Ks:if((w===5||w===26||w===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function rg(p){switch(p.$$typeof){case xd:return"<"+(s(p.value)||"Unknown")+">";case As:return":has("+(rg(p)||"")+")";case ba:return'[role="'+p.value+'"]';case Eo:return'"'+p.value+'"';case Ks:return'[data-testname="'+p.value+'"]';default:throw Error(r(365))}}function xi(p,g){var w=[];p=[p,0];for(var C=0;C<p.length;){var O=p[C++],k=O.tag,te=p[C++],he=g[te];if(k!==5&&k!==26&&k!==27||!od(O)){for(;he!=null&&Hl(O,he);)te++,he=g[te];if(te===g.length)w.push(O);else for(O=O.child;O!==null;)p.push(O,te),O=O.sibling}}return w}function Cf(p,g){if(!Xl)throw Error(r(363));p=Xu(p),p=xi(p,g),g=[],p=Array.from(p);for(var w=0;w<p.length;){var C=p[w++],O=C.tag;if(O===5||O===26||O===27)od(C)||g.push(C.stateNode);else for(C=C.child;C!==null;)p.push(C),C=C.sibling}return g}function Ba(){if(Vn&2&&Pn!==0)return Pn&-Pn;if(sn.T!==null){var p=Yi;return p!==0?p:Ye()}return ry()}function ig(){es===0&&(es=!(Pn&536870912)||jn?F():536870912);var p=qi.current;return p!==null&&(p.flags|=32),es}function pr(p,g,w){(p===$n&&sa===2||p.cancelPendingCommit!==null)&&(Tr(p,0),Ai(p,Pn,es,!1)),j(p,w),(!(Vn&2)||p!==$n)&&(p===$n&&(!(Vn&2)&&(ul|=w),da===4&&Ai(p,Pn,es,!1)),st(p))}function jl(p,g,w){if(Vn&6)throw Error(r(327));var C=!w&&(g&60)===0&&(g&p.expiredLanes)===0||P(p,g),O=C?og(p,g):Rp(p,g,!0),k=C;do{if(O===0){Qi&&!C&&Ai(p,g,0,!1);break}else if(O===6)Ai(p,g,0,!bs);else{if(w=p.current.alternate,k&&!Ju(w)){O=Rp(p,g,!1),k=!1;continue}if(O===2){if(k=g,p.errorRecoveryDisabledLanes&k)var te=0;else te=p.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){g=te;e:{var he=p;O=nu;var we=Nr&&he.current.memoizedState.isDehydrated;if(we&&(Tr(he,te).flags|=256),te=Rp(he,te,!1),te!==2){if(or&&!we){he.errorRecoveryDisabledLanes|=k,ul|=k,O=4;break e}k=Pa,Pa=O,k!==null&&If(k)}O=te}if(k=!1,O!==2)continue}}if(O===1){Tr(p,0),Ai(p,g,0,!0);break}e:{switch(C=p,O){case 0:case 1:throw Error(r(345));case 4:if((g&4194176)===g){Ai(C,g,es,!bs);break e}break;case 2:Pa=null;break;case 3:case 5:break;default:throw Error(r(329))}if(C.finishedWork=w,C.finishedLanes=g,(g&62914560)===g&&(k=li+300-gs(),10<k)){if(Ai(C,g,es,!bs),I(C,0)!==0)break e;C.timeoutHandle=Ja(wp.bind(null,C,w,Pa,eh,tm,g,es,ul,wo,bs,2,-0,0),k);break e}wp(C,w,Pa,eh,tm,g,es,ul,wo,bs,0,-0,0)}}break}while(!0);st(p)}function If(p){Pa===null?Pa=p:Pa.push.apply(Pa,p)}function wp(p,g,w,C,O,k,te,he,we,Xe,vt,Rt,Nt){var hn=g.subtreeFlags;if((hn&8192||(hn&16785408)===16785408)&&(yg(),Sp(g),g=Za(),g!==null)){p.cancelPendingCommit=g(Gl.bind(null,p,w,C,O,te,he,we,1,Rt,Nt)),Ai(p,k,te,!Xe);return}Gl(p,w,C,O,te,he,we,vt,Rt,Nt)}function Ju(p){for(var g=p;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var C=0;C<w.length;C++){var O=w[C],k=O.getSnapshot;O=O.value;try{if(!bi(k(),O))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ai(p,g,w,C){g&=~$f,g&=~ul,p.suspendedLanes|=g,p.pingedLanes&=~g,C&&(p.warmLanes|=g),C=p.expirationTimes;for(var O=g;0<O;){var k=31-si(O),te=1<<k;C[k]=-1,O&=~te}w!==0&&Q(p,w,g)}function Df(){return Vn&6?!0:(Ot(0),!1)}function Zu(){if(en!==null){if(sa===0)var p=en.return;else p=en,Ji=Ws=null,ee(p),tc=null,nc=0,p=en;for(;p!==null;)q1(p.alternate,p),p=p.return;en=null}}function Tr(p,g){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;w!==Yl&&(p.timeoutHandle=Yl,Op(w)),w=p.cancelPendingCommit,w!==null&&(p.cancelPendingCommit=null,w()),Zu(),$n=p,en=w=fs(p.current,null),Pn=g,sa=0,Kr=null,bs=!1,Qi=P(p,g),or=!1,wo=es=$f=ul=$i=da=0,Pa=nu=null,tm=!1,g&8&&(g|=g&32);var C=p.entangledLanes;if(C!==0)for(p=p.entanglements,C&=g;0<C;){var O=31-si(C),k=1<<O;g|=p[O],C&=~k}return Yr=g,Be(),w}function ji(p,g){wn=null,sn.H=Da,g===md?(g=wt(),sa=3):g===Zf?(g=wt(),sa=4):sa=g===$p?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Kr=g,en===null&&(da=1,zu(p,X(g,p.current)))}function zl(){var p=qi.current;return p===null?!0:(Pn&4194176)===Pn?ca===null:(Pn&62914560)===Pn||Pn&536870912?p===ca:!1}function fo(){var p=sn.H;return sn.H=Da,p===null?Da:p}function ho(){var p=sn.A;return sn.A=yd,p}function Zo(){da=4,bs||(Pn&4194176)!==Pn&&qi.current!==null||(Qi=!0),!($i&134217727)&&!(ul&134217727)||$n===null||Ai($n,Pn,es,!1)}function Rp(p,g,w){var C=Vn;Vn|=2;var O=fo(),k=ho();($n!==p||Pn!==g)&&(eh=null,Tr(p,g)),g=!1;var te=da;e:do try{if(sa!==0&&en!==null){var he=en,we=Kr;switch(sa){case 8:Zu(),te=6;break e;case 3:case 2:case 6:qi.current===null&&(g=!0);var Xe=sa;if(sa=0,Kr=null,ds(p,he,we,Xe),w&&Qi){te=0;break e}break;default:Xe=sa,sa=0,Kr=null,ds(p,he,we,Xe)}}sg(),te=da;break}catch(vt){ji(p,vt)}while(!0);return g&&p.shellSuspendCounter++,Ji=Ws=null,Vn=C,sn.H=O,sn.A=k,en===null&&($n=null,Pn=0,Be()),te}function sg(){for(;en!==null;)Ta(en)}function og(p,g){var w=Vn;Vn|=2;var C=fo(),O=ho();$n!==p||Pn!==g?(eh=null,Ad=gs()+500,Tr(p,g)):Qi=P(p,g);e:do try{if(sa!==0&&en!==null){g=en;var k=Kr;t:switch(sa){case 1:sa=0,Kr=null,ds(p,g,k,1);break;case 2:if(bt(k)){sa=0,Kr=null,Kn(g);break}g=function(){sa===2&&$n===p&&(sa=7),st(p)},k.then(g,g);break e;case 3:sa=7;break e;case 4:sa=5;break e;case 7:bt(k)?(sa=0,Kr=null,Kn(g)):(sa=0,Kr=null,ds(p,g,k,7));break;case 5:var te=null;switch(en.tag){case 26:te=en.memoizedState;case 5:case 27:var he=en,we=he.type,Xe=he.pendingProps;if(te?zc(te):Up(we,Xe)){sa=0,Kr=null;var vt=he.sibling;if(vt!==null)en=vt;else{var Rt=he.return;Rt!==null?(en=Rt,zi(Rt)):en=null}break t}}sa=0,Kr=null,ds(p,g,k,5);break;case 6:sa=0,Kr=null,ds(p,g,k,6);break;case 8:Zu(),da=6;break e;default:throw Error(r(462))}}ai();break}catch(Nt){ji(p,Nt)}while(!0);return Ji=Ws=null,sn.H=C,sn.A=O,Vn=w,en!==null?0:($n=null,Pn=0,Be(),da)}function ai(){for(;en!==null&&!Fy();)Ta(en)}function Ta(p){var g=W1(p.alternate,p,Yr);p.memoizedProps=p.pendingProps,g===null?zi(p):en=g}function Kn(p){var g=p,w=g.alternate;switch(g.tag){case 15:case 0:g=k1(w,g,g.pendingProps,g.type,void 0,Pn);break;case 11:g=k1(w,g,g.pendingProps,g.type.render,g.ref,Pn);break;case 5:ee(g);default:q1(w,g),g=en=Pf(g,Yr),g=W1(w,g,Yr)}p.memoizedProps=p.pendingProps,g===null?zi(p):en=g}function ds(p,g,w,C){Ji=Ws=null,ee(g),tc=null,nc=0;var O=g.return;try{if(nb(p,O,g,w,Pn)){da=1,zu(p,X(w,p.current)),en=null;return}}catch(k){if(O!==null)throw en=O,k;da=1,zu(p,X(w,p.current)),en=null;return}g.flags&32768?(jn||C===1?p=!0:Qi||Pn&536870912?p=!1:(bs=p=!0,(C===2||C===3||C===6)&&(C=qi.current,C!==null&&C.tag===13&&(C.flags|=16384))),Mp(g,p)):zi(g)}function zi(p){var g=p;do{if(g.flags&32768){Mp(g,bs);return}p=g.return;var w=Y1(g.alternate,g,Yr);if(w!==null){en=w;return}if(g=g.sibling,g!==null){en=g;return}en=g=p}while(g!==null);da===0&&(da=5)}function Mp(p,g){do{var w=rb(p.alternate,p);if(w!==null){w.flags&=32767,en=w;return}if(w=p.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(p=p.sibling,p!==null)){en=p;return}en=p=w}while(p!==null);da=6,en=null}function Gl(p,g,w,C,O,k,te,he,we,Xe){var vt=sn.T,Rt=al();try{Wr(2),sn.T=null,Q1(p,g,w,C,Rt,O,k,te,he,we,Xe)}finally{sn.T=vt,Wr(Rt)}}function Q1(p,g,w,C,O,k,te,he){do Bs();while(Ro!==null);if(Vn&6)throw Error(r(327));var we=p.finishedWork;if(C=p.finishedLanes,we===null)return null;if(p.finishedWork=null,p.finishedLanes=0,we===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var Xe=we.lanes|we.childLanes;if(Xe|=Gs,W(p,C,Xe,k,te,he),p===$n&&(en=$n=null,Pn=0),!(we.subtreeFlags&10256)&&!(we.flags&10256)||Ys||(Ys=!0,oc=Xe,nm=w,$o(Xp,function(){return Bs(),null})),w=(we.flags&15990)!==0,we.subtreeFlags&15990||w?(w=sn.T,sn.T=null,k=al(),Wr(2),te=Vn,Vn|=4,Mf(p,we),tg(we,p),ny(p.containerInfo),p.current=we,Ap(p,we.alternate,we),Yp(),Vn=te,Wr(k),sn.T=w):p.current=we,Ys?(Ys=!1,Ro=p,au=C):lg(p,Xe),Xe=p.pendingLanes,Xe===0&&(sc=null),G(we.stateNode),st(p),g!==null)for(O=p.onRecoverableError,we=0;we<g.length;we++)Xe=g[we],O(Xe.value,{componentStack:Xe.stack});return au&3&&Bs(),Xe=p.pendingLanes,C&4194218&&Xe&42?p===am?_d++:(_d=0,am=p):_d=0,Ot(0),null}function lg(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,Sf(g)))}function Bs(){if(Ro!==null){var p=Ro,g=oc;oc=0;var w=re(au),C=32>w?32:w;w=sn.T;var O=al();try{if(Wr(C),sn.T=null,Ro===null)var k=!1;else{C=nm,nm=null;var te=Ro,he=au;if(Ro=null,au=0,Vn&6)throw Error(r(331));var we=Vn;if(Vn|=4,Ep(te.current),ng(te,te.current,he,C),Vn=we,Ot(0,!1),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Ha,te)}catch{}k=!0}return k}finally{Wr(O),sn.T=w,lg(p,g)}}return!1}function Qu(p,g,w){g=X(w,g),g=Vu(p.stateNode,g,2),p=gt(p,g,2),p!==null&&(j(p,2),st(p))}function Zn(p,g,w){if(p.tag===3)Qu(p,p,w);else for(;g!==null;){if(g.tag===3){Qu(g,p,w);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(sc===null||!sc.has(C))){p=X(w,p),w=j0(2),C=gt(g,w,2),C!==null&&(P1(w,C,g,p),j(C,2),st(C));break}}g=g.return}}function kc(p,g,w){var C=p.pingCache;if(C===null){C=p.pingCache=new _s;var O=new Set;C.set(g,O)}else O=C.get(g),O===void 0&&(O=new Set,C.set(g,O));O.has(w)||(or=!0,O.add(w),p=cg.bind(null,p,g,w),g.then(p,p))}function cg(p,g,w){var C=p.pingCache;C!==null&&C.delete(g),p.pingedLanes|=p.suspendedLanes&w,p.warmLanes&=~w,$n===p&&(Pn&w)===w&&(da===4||da===3&&(Pn&62914560)===Pn&&300>gs()-li?!(Vn&2)&&Tr(p,0):$f|=w,wo===Pn&&(wo=0)),st(p)}function Vl(p,g){g===0&&(g=L()),p=ze(p,g),p!==null&&(j(p,g),st(p))}function Qo(p){var g=p.memoizedState,w=0;g!==null&&(w=g.retryLane),Vl(p,w)}function Wl(p,g){var w=0;switch(p.tag){case 13:var C=p.stateNode,O=p.memoizedState;O!==null&&(w=O.retryLane);break;case 19:C=p.stateNode;break;case 22:C=p.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(g),Vl(p,w)}function $o(p,g){return qf(p,g)}function ug(p,g,w,C){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lf(p){return p=p.prototype,!(!p||!p.isReactComponent)}function fs(p,g){var w=p.alternate;return w===null?(w=t(p.tag,g,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=g,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&31457280,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,g=p.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w.refCleanup=p.refCleanup,w}function Pf(p,g){p.flags&=31457282;var w=p.alternate;return w===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,g=w.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function po(p,g,w,C,O,k){var te=0;if(C=p,typeof p=="function")Lf(p)&&(te=1);else if(typeof p=="string")te=Vi&&la?Wf(p,w,ir.current)?26:go(p)?27:5:Vi?Wf(p,w,ir.current)?26:5:la&&go(p)?27:5;else e:switch(p){case Kl:return Ia(w.children,O,k,g);case Ff:te=8,O|=24;break;case Ip:return p=t(12,w,g,O|2),p.elementType=Ip,p.lanes=k,p;case Dp:return p=t(13,w,g,O),p.elementType=Dp,p.lanes=k,p;case nd:return p=t(19,w,g,O),p.elementType=nd,p.lanes=k,p;case hg:return Of(w,O,k,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case kf:case Fs:te=10;break e;case fg:te=9;break e;case Hf:te=11;break e;case Lp:te=14;break e;case ps:te=16,C=null;break e}te=29,w=Error(r(130,p===null?"null":typeof p,"")),C=null}return g=t(te,w,g,O),g.elementType=p,g.type=C,g.lanes=k,g}function Ia(p,g,w,C){return p=t(7,p,C,g),p.lanes=w,p}function Of(p,g,w,C){p=t(22,p,C,g),p.elementType=hg,p.lanes=w;var O={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=O._current;if(k===null)throw Error(r(456));if(!(O._pendingVisibility&2)){var te=ze(k,2);te!==null&&(O._pendingVisibility|=2,pr(te,k,2))}},attach:function(){var k=O._current;if(k===null)throw Error(r(456));if(O._pendingVisibility&2){var te=ze(k,2);te!==null&&(O._pendingVisibility&=-3,pr(te,k,2))}}};return p.stateNode=O,p}function Tp(p,g,w){return p=t(6,p,null,g),p.lanes=w,p}function dg(p,g,w){return g=t(4,p.children!==null?p.children:[],p.key,g),g.lanes=w,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function ib(p,g,w,C,O,k,te,he){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Yl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=C,this.onUncaughtError=O,this.onCaughtError=k,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function $1(p,g,w,C,O,k,te,he,we,Xe,vt,Rt){return p=new ib(p,g,w,te,he,we,Xe,Rt),g=1,k===!0&&(g|=24),k=t(3,null,null,g),p.current=k,k.stateNode=p,g=Ul(),g.refCount++,p.pooledCache=g,g.refCount++,k.memoizedState={element:C,isDehydrated:w,cache:g},Ct(k),p}function Xa(p){return p?(p=Ql,p):Ql}function Np(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=v(g),p=p!==null?A(p):null,p===null?null:id(p.stateNode)}function $u(p,g,w,C,O,k){O=Xa(O),C.context===null?C.context=O:C.pendingContext=O,C=rt(g),C.payload={element:w},k=k===void 0?null:k,k!==null&&(C.callback=k),w=gt(p,C,g),w!==null&&(pr(w,p,g),Lt(w,p,g))}function ed(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<g?w:g}}function Uf(p,g){ed(p,g),(p=p.alternate)&&ed(p,g)}var vn={},td=b0(),Gi=Kse(),Cp=Object.assign,sb=Symbol.for("react.element"),Bf=Symbol.for("react.transitional.element"),hs=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),Ff=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),kf=Symbol.for("react.provider"),fg=Symbol.for("react.consumer"),Fs=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),nd=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),hg=Symbol.for("react.offscreen"),ey=Symbol.for("react.memo_cache_sentinel"),el=Symbol.iterator,pg=Symbol.for("react.client.reference"),sn=td.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mo,tl,Hc=!1,ad=Array.isArray,mg=e.rendererVersion,jf=e.rendererPackageName,rd=e.extraDevToolsConfig,id=e.getPublicInstance,ty=e.getRootHostContext,sd=e.getChildHostContext,Pp=e.prepareForCommit,ny=e.resetAfterCommit,gg=e.createInstance,zf=e.appendInitialChild,nl=e.finalizeInitialChildren,yn=e.shouldSetTextContent,na=e.createTextInstance,Ja=e.scheduleTimeout,Op=e.cancelTimeout,Yl=e.noTimeout,ri=e.isPrimaryRenderer;e.warnsIfNotActing;var rr=e.supportsMutation,ms=e.supportsPersistence,Nr=e.supportsHydration,ay=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Fa=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Wr=e.setCurrentUpdatePriority,al=e.getCurrentUpdatePriority,ry=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var iy=e.shouldAttemptEagerTransition,ob=e.detachDeletedInstance;e.requestPostPaintCallback;var vg=e.maySuspendCommit,Up=e.preloadInstance,yg=e.startSuspendingCommit,ii=e.suspendInstance,Za=e.waitForCommitToBeReady,ql=e.NotPendingTransition,ks=e.HostTransitionContext,Bp=e.resetFormInstance;e.bindToConsole;var xg=e.supportsMicrotasks,rl=e.scheduleMicrotask,Xl=e.supportsTestSelectors,Ag=e.findFiberRoot,_g=e.getBoundingRect,sy=e.getTextContent,od=e.isHiddenSubtree,oy=e.matchAccessibilityRole,ly=e.setFocusIfFocusable,cy=e.setupIntersectionObserver,uy=e.appendChild,bg=e.appendChildToContainer,dy=e.commitTextUpdate,lb=e.commitMount,fy=e.commitUpdate,hy=e.insertBefore,py=e.insertInContainerBefore,Sg=e.removeChild,my=e.removeChildFromContainer,Eg=e.resetTextContent,gy=e.hideInstance,vy=e.hideTextInstance,yy=e.unhideInstance,cb=e.unhideTextInstance,xy=e.clearContainer,ld=e.cloneInstance,Gf=e.createContainerChildSet,wg=e.appendChildToContainerChildSet,Fp=e.finalizeContainerChildren,cd=e.replaceContainerChildren,Rg=e.cloneHiddenInstance,Mg=e.cloneHiddenTextInstance,kp=e.isSuspenseInstancePending,Hp=e.isSuspenseInstanceFallback,Ay=e.getSuspenseInstanceFallbackErrorDetails,_y=e.registerSuspenseInstanceRetry,Tg=e.canHydrateFormStateMarker,by=e.isFormStateMarkerMatching,Ng=e.getNextHydratableSibling,jp=e.getFirstHydratableChild,Sy=e.getFirstHydratableChildWithinContainer,Ey=e.getFirstHydratableChildWithinSuspenseInstance,ub=e.canHydrateInstance,Cg=e.canHydrateTextInstance,wy=e.canHydrateSuspenseInstance,Ry=e.hydrateInstance,Ig=e.hydrateTextInstance,My=e.hydrateSuspenseInstance,Ty=e.getNextHydratableInstanceAfterSuspenseInstance,db=e.commitHydratedContainer,fb=e.commitHydratedSuspenseInstance,Ny=e.clearSuspenseBoundary,Vf=e.clearSuspenseBoundaryFromContainer,zp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Gp=e.validateHydratableInstance,Cy=e.validateHydratableTextInstance,Vi=e.supportsResources,Wf=e.isHostHoistableType,Vp=e.getHoistableRoot,Dg=e.getResource,Iy=e.acquireResource,jc=e.releaseResource,Kf=e.hydrateHoistable,Yf=e.mountHoistable,ud=e.unmountHoistable,Wp=e.createHoistableInstance,Dy=e.prepareToCommitHoistables,Ly=e.mayResourceSuspendCommit,zc=e.preloadResource,Py=e.suspendResource,la=e.supportsSingletons,Hs=e.resolveSingletonInstance,Jl=e.clearSingleton,Oy=e.acquireSingletonInstance,Zl=e.releaseSingletonInstance,go=e.isHostSingletonType,ka=[],il=-1,Ql={},si=Math.clz32?Math.clz32:T,Uy=Math.log,By=Math.LN2,vo=128,Gc=4194304,qf=Gi.unstable_scheduleCallback,Kp=Gi.unstable_cancelCallback,Fy=Gi.unstable_shouldYield,Yp=Gi.unstable_requestPaint,gs=Gi.unstable_now,qp=Gi.unstable_ImmediatePriority,ky=Gi.unstable_UserBlockingPriority,Xp=Gi.unstable_NormalPriority,hb=Gi.unstable_IdlePriority,Hy=Gi.log,mr=Gi.unstable_setDisableYieldValue,Ha=null,_i=null,bi=typeof Object.is=="function"?Object.is:K,Lg=new WeakMap,Vc=[],Wc=0,Kc=null,dd=0,Wi=[],Ki=0,$l=null,js=1,zs="",ir=b(null),fd=b(null),yo=b(null),Yc=b(null),Cr=null,Ir=null,jn=!1,vs=null,gr=!1,Xf=Error(r(519)),ys=[],qc=0,Gs=0,Jf=null,sl=null,Xc=!1,pa=!1,Pg=!1,hd=0,pd=null,Jc=0,Yi=0,Zc=null,ol=!1,Qc=!1,xo=Object.prototype.hasOwnProperty,md=Error(r(460)),Zf=Error(r(474)),Qf={then:function(){}},ec=null,tc=null,nc=0,ac=xa(!0),Ao=xa(!1),ma=b(null),gd=b(0),qi=b(null),ca=null,sr=b(0),ll=0,wn=null,$t=null,Gn=null,xs=!1,$c=!1,rc=!1,Jp=0,eu=0,vr=null,Vs=0,Zp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Da={readContext:wr,use:Se,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useLayoutEffect:ha,useInsertionEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useSyncExternalStore:ha,useId:ha};Da.useCacheRefresh=ha,Da.useMemoCache=ha,Da.useHostTransitionStatus=ha,Da.useFormState=ha,Da.useActionState=ha,Da.useOptimistic=ha;var ic={readContext:wr,use:Se,useCallback:function(p,g){return ye().memoizedState=[p,g===void 0?null:g],p},useContext:wr,useEffect:lp,useImperativeHandle:function(p,g,w){w=w!=null?w.concat([p]):null,df(4194308,4,cp.bind(null,g,p),w)},useLayoutEffect:function(p,g){return df(4194308,4,p,g)},useInsertionEffect:function(p,g){df(4,2,p,g)},useMemo:function(p,g){var w=ye();g=g===void 0?null:g;var C=p();if(rc){Y(!0);try{p()}finally{Y(!1)}}return w.memoizedState=[C,g],C},useReducer:function(p,g,w){var C=ye();if(w!==void 0){var O=w(g);if(rc){Y(!0);try{w(g)}finally{Y(!1)}}}else O=g;return C.memoizedState=C.baseState=O,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:O},C.queue=p,p=p.dispatch=dp.bind(null,wn,p),[C.memoizedState,p]},useRef:function(p){var g=ye();return p={current:p},g.memoizedState=p},useState:function(p){p=gn(p);var g=p.queue,w=H0.bind(null,wn,g);return g.dispatch=w,[p.memoizedState,w]},useDebugValue:Il,useDeferredValue:function(p,g){var w=ye();return pf(w,p,g)},useTransition:function(){var p=gn(!1);return p=Bu.bind(null,wn,p.queue,!0,!1),ye().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,w){var C=wn,O=ye();if(jn){if(w===void 0)throw Error(r(407));w=w()}else{if(w=g(),$n===null)throw Error(r(349));Pn&60||Ht(C,g,w)}O.memoizedState=w;var k={value:w,getSnapshot:g};return O.queue=k,lp(zn.bind(null,C,k,p),[p]),C.flags|=2048,ar(9,An.bind(null,C,k,w,g),{destroy:void 0},null),w},useId:function(){var p=ye(),g=$n.identifierPrefix;if(jn){var w=zs,C=js;w=(C&~(1<<32-si(C)-1)).toString(32)+w,g=":"+g+"R"+w,w=Jp++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=Vs++,g=":"+g+"r"+w.toString(32)+":";return p.memoizedState=g},useCacheRefresh:function(){return ye().memoizedState=k0.bind(null,wn)}};ic.useMemoCache=ht,ic.useHostTransitionStatus=mf,ic.useFormState=Gr,ic.useActionState=Gr,ic.useOptimistic=function(p){var g=ye();g.memoizedState=g.baseState=p;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=ku.bind(null,wn,!0,w),w.dispatch=g,[p,g]};var oi={readContext:wr,use:Se,useCallback:Uc,useContext:wr,useEffect:U0,useImperativeHandle:up,useInsertionEffect:D1,useLayoutEffect:hf,useMemo:B0,useReducer:It,useRef:I1,useState:function(){return It(yt)},useDebugValue:Il,useDeferredValue:function(p,g){var w=Re();return F0(w,$t.memoizedState,p,g)},useTransition:function(){var p=It(yt)[0],g=Re().memoizedState;return[typeof p=="boolean"?p:Oe(p),g]},useSyncExternalStore:Qt,useId:Fu};oi.useCacheRefresh=zo,oi.useMemoCache=ht,oi.useHostTransitionStatus=mf,oi.useFormState=br,oi.useActionState=br,oi.useOptimistic=function(p,g){var w=Re();return Xt(w,$t,p,g)};var Xi={readContext:wr,use:Se,useCallback:Uc,useContext:wr,useEffect:U0,useImperativeHandle:up,useInsertionEffect:D1,useLayoutEffect:hf,useMemo:B0,useReducer:qt,useRef:I1,useState:function(){return qt(yt)},useDebugValue:Il,useDeferredValue:function(p,g){var w=Re();return $t===null?pf(w,p,g):F0(w,$t.memoizedState,p,g)},useTransition:function(){var p=qt(yt)[0],g=Re().memoizedState;return[typeof p=="boolean"?p:Oe(p),g]},useSyncExternalStore:Qt,useId:Fu};Xi.useCacheRefresh=zo,Xi.useMemoCache=ht,Xi.useHostTransitionStatus=mf,Xi.useFormState=Oc,Xi.useActionState=Oc,Xi.useOptimistic=function(p,g){var w=Re();return $t!==null?Xt(w,$t,p,g):(w.baseState=p,[p,w.queue.dispatch])};var _o={isMounted:function(p){return(p=p._reactInternals)?h(p)===p:!1},enqueueSetState:function(p,g,w){p=p._reactInternals;var C=Ba(),O=rt(C);O.payload=g,w!=null&&(O.callback=w),g=gt(p,O,C),g!==null&&(pr(g,p,C),Lt(g,p,C))},enqueueReplaceState:function(p,g,w){p=p._reactInternals;var C=Ba(),O=rt(C);O.tag=1,O.payload=g,w!=null&&(O.callback=w),g=gt(p,O,C),g!==null&&(pr(g,p,C),Lt(g,p,C))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var w=Ba(),C=rt(w);C.tag=2,g!=null&&(C.callback=g),g=gt(p,C,w),g!==null&&(pr(g,p,w),Lt(g,p,w))}},Qp=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},$p=Error(r(461)),ua=!1,em={dehydrated:null,treeContext:null,retryLane:0},cl=b(null),Ws=null,Ji=null,vd=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(w,C){p.push(C)}};this.abort=function(){g.aborted=!0,p.forEach(function(w){return w()})}},jy=Gi.unstable_scheduleCallback,zy=Gi.unstable_NormalPriority,ga={$$typeof:Fs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Og=sn.S;sn.S=function(p,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&Pe(p,g),Og!==null&&Og(p,g)};var bo=b(null),So=!1,La=!1,Ug=!1,Qn=typeof WeakSet=="function"?WeakSet:Set,fn=null,Dn=!1,Zt=null,_n=!1,Na=null,Zi=8192,yd={getCacheForType:function(p){var g=wr(ga),w=g.data.get(p);return w===void 0&&(w=p(),g.data.set(p,w)),w}},xd=0,As=1,ba=2,Ks=3,Eo=4;if(typeof Symbol=="function"&&Symbol.for){var tu=Symbol.for;xd=tu("selector.component"),As=tu("selector.has_pseudo_class"),ba=tu("selector.role"),Ks=tu("selector.test_id"),Eo=tu("selector.text")}var _s=typeof WeakMap=="function"?WeakMap:Map,Vn=0,$n=null,en=null,Pn=0,sa=0,Kr=null,bs=!1,Qi=!1,or=!1,Yr=0,da=0,$i=0,ul=0,$f=0,es=0,wo=0,nu=null,Pa=null,tm=!1,li=0,Ad=1/0,eh=null,sc=null,Ys=!1,Ro=null,au=0,oc=0,nm=null,_d=0,am=null;return vn.attemptContinuousHydration=function(p){if(p.tag===13){var g=ze(p,67108864);g!==null&&pr(g,p,67108864),Uf(p,67108864)}},vn.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=Ba(),w=ze(p,g);w!==null&&pr(w,p,g),Uf(p,g)}},vn.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=M(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var w=1<<31-si(g);p.entanglements[1]|=w,g&=~w}st(p),!(Vn&6)&&(Ad=gs()+500,Ot(0))}}break;case 13:g=ze(p,2),g!==null&&pr(g,p,2),Df(),Uf(p,2)}},vn.batchedUpdates=function(p,g){return p(g)},vn.createComponentSelector=function(p){return{$$typeof:xd,value:p}},vn.createContainer=function(p,g,w,C,O,k,te,he,we,Xe){return $1(p,g,!1,null,w,C,k,te,he,we,Xe,null)},vn.createHasPseudoClassSelector=function(p){return{$$typeof:As,value:p}},vn.createHydrationContainer=function(p,g,w,C,O,k,te,he,we,Xe,vt,Rt,Nt){return p=$1(w,C,!0,p,O,k,he,we,Xe,vt,Rt,Nt),p.context=Xa(null),w=p.current,C=Ba(),O=rt(C),O.callback=g??null,gt(w,O,C),p.current.lanes=C,j(p,C),st(p),p},vn.createPortal=function(p,g,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:C==null?null:""+C,children:p,containerInfo:g,implementation:w}},vn.createRoleSelector=function(p){return{$$typeof:ba,value:p}},vn.createTestNameSelector=function(p){return{$$typeof:Ks,value:p}},vn.createTextSelector=function(p){return{$$typeof:Eo,value:p}},vn.defaultOnCaughtError=function(p){console.error(p)},vn.defaultOnRecoverableError=function(p){Qp(p)},vn.defaultOnUncaughtError=function(p){Qp(p)},vn.deferredUpdates=function(p){var g=sn.T,w=al();try{return Wr(32),sn.T=null,p()}finally{Wr(w),sn.T=g}},vn.discreteUpdates=function(p,g,w,C,O){var k=sn.T,te=al();try{return Wr(2),sn.T=null,p(g,w,C,O)}finally{Wr(te),sn.T=k,Vn===0&&(Ad=gs()+500)}},vn.findAllNodes=Cf,vn.findBoundingRects=function(p,g){if(!Xl)throw Error(r(363));g=Cf(p,g),p=[];for(var w=0;w<g.length;w++)p.push(_g(g[w]));for(g=p.length-1;0<g;g--){w=p[g];for(var C=w.x,O=C+w.width,k=w.y,te=k+w.height,he=g-1;0<=he;he--)if(g!==he){var we=p[he],Xe=we.x,vt=Xe+we.width,Rt=we.y,Nt=Rt+we.height;if(C>=Xe&&k>=Rt&&O<=vt&&te<=Nt){p.splice(g,1);break}else if(C!==Xe||w.width!==we.width||Nt<k||Rt>te){if(!(k!==Rt||w.height!==we.height||vt<C||Xe>O)){Xe>C&&(we.width+=Xe-C,we.x=C),vt<O&&(we.width=O-Xe),p.splice(g,1);break}}else{Rt>k&&(we.height+=Rt-k,we.y=k),Nt<te&&(we.height=te-Rt),p.splice(g,1);break}}}return p},vn.findHostInstance=Np,vn.findHostInstanceWithNoPortals=function(p){return p=v(p),p=p!==null?E(p):null,p===null?null:id(p.stateNode)},vn.findHostInstanceWithWarning=function(p){return Np(p)},vn.flushPassiveEffects=Bs,vn.flushSyncFromReconciler=function(p){var g=Vn;Vn|=1;var w=sn.T,C=al();try{if(Wr(2),sn.T=null,p)return p()}finally{Wr(C),sn.T=w,Vn=g,!(Vn&6)&&Ot(0)}},vn.flushSyncWork=Df,vn.focusWithin=function(p,g){if(!Xl)throw Error(r(363));for(p=Xu(p),g=xi(p,g),g=Array.from(g),p=0;p<g.length;){var w=g[p++],C=w.tag;if(!od(w)){if((C===5||C===26||C===27)&&ly(w.stateNode))return!0;for(w=w.child;w!==null;)g.push(w),w=w.sibling}}return!1},vn.getFindAllNodesFailureDescription=function(p,g){if(!Xl)throw Error(r(363));var w=0,C=[];p=[Xu(p),0];for(var O=0;O<p.length;){var k=p[O++],te=k.tag,he=p[O++],we=g[he];if((te!==5&&te!==26&&te!==27||!od(k))&&(Hl(k,we)&&(C.push(rg(we)),he++,he>w&&(w=he)),he<g.length))for(k=k.child;k!==null;)p.push(k,he),k=k.sibling}if(w<g.length){for(p=[];w<g.length;w++)p.push(rg(g[w]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},vn.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return id(p.child.stateNode);default:return p.child.stateNode}},vn.injectIntoDevTools=function(){var p={bundleType:0,version:mg,rendererPackageName:jf,currentDispatcherRef:sn,findFiberByHostInstance:ay,reconcilerVersion:"19.0.0"};if(rd!==null&&(p.rendererConfig=rd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{Ha=g.inject(p),_i=g}catch{}p=!!g.checkDCE}}return p},vn.isAlreadyRendering=function(){return!1},vn.observeVisibleRects=function(p,g,w,C){if(!Xl)throw Error(r(363));p=Cf(p,g);var O=cy(p,w,C).disconnect;return{disconnect:function(){O()}}},vn.shouldError=function(){return null},vn.shouldSuspend=function(){return!1},vn.startHostTransition=function(p,g,w,C){if(p.tag!==5)throw Error(r(476));var O=uo(p).queue;Bu(p,O,g,ql,w===null?n:function(){var k=uo(p).next.queue;return Dl(p,k,{},Ba()),w(C)})},vn.updateContainer=function(p,g,w,C){var O=g.current,k=Ba();return $u(O,k,p,g,w,C),k},vn.updateContainerSync=function(p,g,w,C){return g.tag===0&&Bs(),$u(g.current,2,p,g,w,C),2},vn},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(WE)),WE.exports}var uI;function qse(){return uI||(uI=1,VE.exports=Yse()),VE.exports}var Xse=qse();const Jse=r1(Xse);var qE={exports:{}},XE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function Zse(){return dI||(dI=1,function(a){function e(G,Y){var K=G.length;G.push(Y);e:for(;0<K;){var X=K-1>>>1,z=G[X];if(0<r(z,Y))G[X]=Y,G[K]=z,K=X;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Y=G[0],K=G.pop();if(K!==Y){G[0]=K;e:for(var X=0,z=G.length,J=z>>>1;X<J;){var le=2*(X+1)-1,ce=G[le],xe=le+1,fe=G[xe];if(0>r(ce,K))xe<z&&0>r(fe,ce)?(G[X]=fe,G[xe]=K,X=xe):(G[X]=ce,G[le]=K,X=le);else if(xe<z&&0>r(fe,K))G[X]=fe,G[xe]=K,X=xe;else break e}}return Y}function r(G,Y){var K=G.sortIndex-Y.sortIndex;return K!==0?K:G.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();a.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,A=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function T(G){for(var Y=t(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=G)n(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function M(G){if(E=!1,T(G),!A)if(t(l)!==null)A=!0,$();else{var Y=t(c);Y!==null&&re(M,Y.startTime-G)}}var I=!1,P=-1,B=5,F=-1;function L(){return!(a.unstable_now()-F<B)}function U(){if(I){var G=a.unstable_now();F=G;var Y=!0;try{e:{A=!1,E&&(E=!1,_(P),P=-1),v=!0;var K=m;try{t:{for(T(G),h=t(l);h!==null&&!(h.expirationTime>G&&L());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var z=X(h.expirationTime<=G);if(G=a.unstable_now(),typeof z=="function"){h.callback=z,T(G),Y=!0;break t}h===t(l)&&n(l),T(G)}else n(l);h=t(l)}if(h!==null)Y=!0;else{var J=t(c);J!==null&&re(M,J.startTime-G),Y=!1}}break e}finally{h=null,m=K,v=!1}Y=void 0}}finally{Y?j():I=!1}}}var j;if(typeof R=="function")j=function(){R(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=U,j=function(){Q.postMessage(null)}}else j=function(){b(U,0)};function $(){I||(I=!0,j())}function re(G,Y){P=b(function(){G(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_continueExecution=function(){A||v||(A=!0,$())},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return m},a.unstable_getFirstCallbackNode=function(){return t(l)},a.unstable_next=function(G){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var K=m;m=Y;try{return G()}finally{m=K}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var K=m;m=G;try{return Y()}finally{m=K}},a.unstable_scheduleCallback=function(G,Y,K){var X=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,G){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,G={id:d++,callback:Y,priorityLevel:G,startTime:K,expirationTime:z,sortIndex:-1},K>X?(G.sortIndex=K,e(c,G),t(l)===null&&G===t(c)&&(E?(_(P),P=-1):E=!0,re(M,K-X))):(G.sortIndex=z,e(l,G),A||v||(A=!0,$())),G},a.unstable_shouldYield=L,a.unstable_wrapCallback=function(G){var Y=m;return function(){var K=m;m=Y;try{return G.apply(this,arguments)}finally{m=K}}}}(XE)),XE}var fI;function Qse(){return fI||(fI=1,qE.exports=Zse()),qE.exports}var hI=Qse();function xM(a,e,t){if(!a)return;if(t(a)===!0)return a;let n=e?a.return:a.child;for(;n;){const r=xM(n,e,t);if(r)return r;n=e?null:n.sibling}}function b6(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const AM=b6(H.createContext(null));class S6 extends H.Component{render(){return H.createElement(AM.Provider,{value:this._reactInternals},this.props.children)}}function E6(){const a=H.useContext(AM);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const t of[a,a==null?void 0:a.alternate]){if(!t)continue;const n=xM(t,!1,r=>{let i=r.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(n)return n}},[a,e])}const $se=Symbol.for("react.context"),eoe=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===$se;function toe(){const a=E6(),[e]=H.useState(()=>new Map);e.clear();let t=a;for(;t;){const n=t.type;eoe(n)&&n!==AM&&!e.has(n)&&e.set(n,H.use(b6(n))),t=t.return}return e}function noe(){const a=toe();return H.useMemo(()=>Array.from(a.keys()).reduce((e,t)=>n=>H.createElement(e,null,H.createElement(t.Provider,{...n,value:a.get(t)})),e=>H.createElement(S6,{...e})),[a])}function w6(a){let e=a.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const R6=a=>a&&a.isOrthographicCamera,aoe=a=>a&&a.hasOwnProperty("current"),roe=a=>a!=null&&(typeof a=="string"||typeof a=="number"||a.isColor),C1=((a,e)=>typeof window<"u"&&(((a=window.document)==null?void 0:a.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?H.useLayoutEffect:H.useEffect;function M6(a){const e=H.useRef(a);return C1(()=>void(e.current=a),[a]),e}function ioe(){const a=E6(),e=noe();return H.useMemo(()=>({children:t})=>{const r=!!xM(a,!0,i=>i.type===H.StrictMode)?H.StrictMode:H.Fragment;return x.jsx(r,{children:x.jsx(e,{children:t})})},[a,e])}function soe({set:a}){return C1(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}const ooe=(a=>(a=class extends H.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},a.getDerivedStateFromError=()=>({error:!0}),a))();function T6(a){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],t),a[1]):a}function Bm(a){var e;return(e=a.__r3f)==null?void 0:e.root.getState()}const Oa={obj:a=>a===Object(a)&&!Oa.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,nul:a=>a===null,arr:a=>Array.isArray(a),equ(a,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof a!=typeof e||!!a!=!!e)return!1;if(Oa.str(a)||Oa.num(a)||Oa.boo(a))return a===e;const i=Oa.obj(a);if(i&&n==="reference")return a===e;const s=Oa.arr(a);if(s&&t==="reference")return a===e;if((s||i)&&a===e)return!0;let o;for(o in a)if(!(o in e))return!1;if(i&&t==="shallow"&&n==="shallow"){for(o in r?e:a)if(!Oa.equ(a[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:a)if(a[o]!==e[o])return!1;if(Oa.und(o)){if(s&&a.length===0&&e.length===0||i&&Object.keys(a).length===0&&Object.keys(e).length===0)return!0;if(a!==e)return!1}return!0}};function loe(a){const e={nodes:{},materials:{},meshes:{}};return a&&a.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function coe(a){a.type!=="Scene"&&(a.dispose==null||a.dispose());for(const e in a){const t=a[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const N6=["children","key","ref"];function uoe(a){const e={};for(const t in a)N6.includes(t)||(e[t]=a[t]);return e}function GA(a,e,t,n){const r=a;let i=r==null?void 0:r.__r3f;return i||(i={root:e,type:t,parent:null,children:[],props:uoe(n),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=i)),i}function a1(a,e){let t=a[e];if(!e.includes("-"))return{root:a,key:e,target:t};t=a;for(const r of e.split("-")){var n;e=r,a=t,t=(n=t)==null?void 0:n[e]}return{root:a,key:e,target:t}}const pI=/-\d+$/;function VA(a,e){if(Oa.str(e.props.attach)){if(pI.test(e.props.attach)){const r=e.props.attach.replace(pI,""),{root:i,key:s}=a1(a.object,r);Array.isArray(i[s])||(i[s]=[])}const{root:t,key:n}=a1(a.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Oa.fun(e.props.attach)&&(e.previousAttach=e.props.attach(a.object,e.object))}function WA(a,e){if(Oa.str(e.props.attach)){const{root:t,key:n}=a1(a.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[n]:t[n]=r}else e.previousAttach==null||e.previousAttach(a.object,e.object);delete e.previousAttach}const aw=[...N6,"args","dispose","attach","object","onUpdate","dispose"],mI=new Map;function doe(a){let e=mI.get(a.constructor);try{e||(e=new a.constructor,mI.set(a.constructor,e))}catch{}return e}function foe(a,e){const t={};for(const n in e)if(!aw.includes(n)&&!Oa.equ(e[n],a.props[n])){t[n]=e[n];for(const r in e)r.startsWith(`${n}-`)&&(t[r]=e[r])}for(const n in a.props){if(aw.includes(n)||e.hasOwnProperty(n))continue;const{root:r,key:i}=a1(a.object,n);if(r.constructor&&r.constructor.length===0){const s=doe(r);Oa.und(s)||(t[i]=s[i])}else t[i]=0}return t}const hoe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],poe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function zd(a,e){var t;const n=a.__r3f,r=n&&w6(n).getState(),i=n==null?void 0:n.eventCount;for(const o in e){let l=e[o];if(aw.includes(o))continue;if(n&&poe.test(o)){typeof l=="function"?n.handlers[o]=l:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(l===void 0)continue;let{root:c,key:d,target:h}=a1(a,o);if(h instanceof v0&&l instanceof v0)h.mask=l.mask;else if(h instanceof Et&&roe(l))h.set(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof h.copy=="function"&&l!=null&&l.constructor&&h.constructor===l.constructor)h.copy(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&Array.isArray(l))typeof h.fromArray=="function"?h.fromArray(l):h.set(...l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof l=="number")typeof h.setScalar=="function"?h.setScalar(l):h.set(l);else{var s;c[d]=l,r&&!r.linear&&hoe.includes(d)&&(s=c[d])!=null&&s.isTexture&&c[d].format===Pi&&c[d].type===Bo&&(c[d].colorSpace=cr)}}if(n!=null&&n.parent&&r!=null&&r.internal&&(t=n.object)!=null&&t.isObject3D&&i!==n.eventCount){const o=n.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),n.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&O0(n),a}function O0(a){var e;if(!a.parent)return;a.props.onUpdate==null||a.props.onUpdate(a.object);const t=(e=a.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function moe(a,e){a.manual||(R6(a)?(a.left=e.width/-2,a.right=e.width/2,a.top=e.height/2,a.bottom=e.height/-2):a.aspect=e.width/e.height,a.updateProjectionMatrix())}const rs=a=>a==null?void 0:a.isObject3D;function mx(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function C6(a,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(a.delete(n),r.target.releasePointerCapture(n)))}function goe(a,e){const{internal:t}=a.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{C6(t.capturedMap,e,n,r)})}function voe(a){function e(l){const{internal:c}=a.getState(),d=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function n(l,c){const d=a.getState(),h=new Set,m=[],v=c?c(d.internal.interaction):d.internal.interaction;for(let _=0;_<v.length;_++){const R=Bm(v[_]);R&&(R.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function A(_){const R=Bm(_);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var T;R.events.compute==null||R.events.compute(l,R,(T=R.previousRoot)==null?void 0:T.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(_,!0):[]}let E=v.flatMap(A).sort((_,R)=>{const T=Bm(_.object),M=Bm(R.object);return!T||!M?_.distance-R.distance:M.events.priority-T.events.priority||_.distance-R.distance}).filter(_=>{const R=mx(_);return h.has(R)?!1:(h.add(R),!0)});d.events.filter&&(E=d.events.filter(E,d));for(const _ of E){let R=_.object;for(;R;){var b;(b=R.__r3f)!=null&&b.eventCount&&m.push({..._,eventObject:R}),R=R.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let _ of d.internal.capturedMap.get(l.pointerId).values())h.has(mx(_.intersection))||m.push(_.intersection);return m}function r(l,c,d,h){if(l.length){const m={stopped:!1};for(const v of l){let A=Bm(v.object);if(A||v.object.traverseAncestors(E=>{const b=Bm(E);if(b)return A=b,!1}),A){const{raycaster:E,pointer:b,camera:_,internal:R}=A,T=new ae(b.x,b.y,0).unproject(_),M=L=>{var U,j;return(U=(j=R.capturedMap.get(L))==null?void 0:j.has(v.eventObject))!=null?U:!1},I=L=>{const U={intersection:v,target:c.target};R.capturedMap.has(L)?R.capturedMap.get(L).set(v.eventObject,U):R.capturedMap.set(L,new Map([[v.eventObject,U]])),c.target.setPointerCapture(L)},P=L=>{const U=R.capturedMap.get(L);U&&C6(R.capturedMap,v.eventObject,U,L)};let B={};for(let L in c){let U=c[L];typeof U!="function"&&(B[L]=U)}let F={...v,...B,pointer:b,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:T,ray:E.ray,camera:_,stopPropagation(){const L="pointerId"in c&&R.capturedMap.get(c.pointerId);if((!L||L.has(v.eventObject))&&(F.stopped=m.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(U=>U.eventObject===v.eventObject))){const U=l.slice(0,l.indexOf(v));i([...U,v])}},target:{hasPointerCapture:M,setPointerCapture:I,releasePointerCapture:P},currentTarget:{hasPointerCapture:M,setPointerCapture:I,releasePointerCapture:P},nativeEvent:c};if(h(F),m.stopped===!0)break}}}return l}function i(l){const{internal:c}=a.getState();for(const d of c.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const m=d.eventObject.__r3f;if(c.hovered.delete(mx(d)),m!=null&&m.eventCount){const v=m.handlers,A={...d,intersections:l};v.onPointerOut==null||v.onPointerOut(A),v.onPointerLeave==null||v.onPointerLeave(A)}}}function s(l,c){for(let d=0;d<c.length;d++){const h=c[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return c=>{const{internal:d}=a.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),i([]))})}}return function(d){const{onPointerMissed:h,internal:m}=a.getState();m.lastEvent.current=d;const v=l==="onPointerMove",A=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=n(d,v?t:void 0),_=A?e(d):0;l==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=b.map(T=>T.eventObject)),A&&!b.length&&_<=2&&(s(d,m.interaction),h&&h(d)),v&&i(b);function R(T){const M=T.eventObject,I=M.__r3f;if(!(I!=null&&I.eventCount))return;const P=I.handlers;if(v){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const B=mx(T),F=m.hovered.get(B);F?F.stopped&&T.stopPropagation():(m.hovered.set(B,T),P.onPointerOver==null||P.onPointerOver(T),P.onPointerEnter==null||P.onPointerEnter(T))}P.onPointerMove==null||P.onPointerMove(T)}else{const B=P[l];B?(!A||m.initialHits.includes(M))&&(s(d,m.interaction.filter(F=>!m.initialHits.includes(F))),B(T)):A&&m.initialHits.includes(M)&&s(d,m.interaction.filter(F=>!m.initialHits.includes(F)))}}r(b,d,_,R)}}return{handlePointer:o}}const gI=a=>!!(a!=null&&a.render),I6=H.createContext(null),yoe=(a,e)=>{const t=Hse((o,l)=>{const c=new ae,d=new ae,h=new ae;function m(_=l().camera,R=d,T=l().size){const{width:M,height:I,top:P,left:B}=T,F=M/I;R.isVector3?h.copy(R):h.set(...R);const L=_.getWorldPosition(c).distanceTo(h);if(R6(_))return{width:M/_.zoom,height:I/_.zoom,top:P,left:B,factor:1,distance:L,aspect:F};{const U=_.fov*Math.PI/180,j=2*Math.tan(U/2)*L,W=j*(M/I);return{width:W,height:j,top:P,left:B,factor:M/W,distance:L,aspect:F}}}let v;const A=_=>o(R=>({performance:{...R.performance,current:_}})),E=new Ze;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(_=1)=>a(l(),_),advance:(_,R)=>e(_,R,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new hM,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();v&&clearTimeout(v),_.performance.current!==_.performance.min&&A(_.performance.min),v=setTimeout(()=>A(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>o(R=>({...R,events:{...R.events,..._}})),setSize:(_,R,T=0,M=0)=>{const I=l().camera,P={width:_,height:R,top:T,left:M};o(B=>({size:P,viewport:{...B.viewport,...m(I,d,P)}}))},setDpr:_=>o(R=>{const T=T6(_);return{viewport:{...R.viewport,dpr:T,initialDpr:R.viewport.initialDpr||T}}}),setFrameloop:(_="always")=>{const R=l().clock;R.stop(),R.elapsedTime=0,_!=="never"&&(R.start(),R.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:H.createRef(),active:!1,frames:0,priority:0,subscribe:(_,R,T)=>{const M=l().internal;return M.priority=M.priority+(R>0?1:0),M.subscribers.push({ref:_,priority:R,store:T}),M.subscribers=M.subscribers.sort((I,P)=>I.priority-P.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(R>0?1:0),I.subscribers=I.subscribers.filter(P=>P.ref!==_))}}}}}),n=t.getState();let r=n.size,i=n.viewport.dpr,s=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:d,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==i){r=l,i=c.dpr,moe(o,l),c.dpr>0&&d.setPixelRatio(c.dpr);const m=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}o!==s&&(s=o,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>a(o)),t};function D6(){const a=H.useContext(I6);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function kd(a=t=>t,e){return D6()(a,e)}function xoe(a,e=0){const t=D6(),n=t.getState().internal.subscribe,r=M6(a);return C1(()=>n(r,e,t),[e,n,t]),null}const vI=new WeakMap,Aoe=a=>{var e;return typeof a=="function"&&(a==null||(e=a.prototype)==null?void 0:e.constructor)===a};function L6(a,e){return function(t,...n){let r;return Aoe(t)?(r=vI.get(t),r||(r=new t,vI.set(t,r))):r=t,a&&a(r),Promise.all(n.map(i=>new Promise((s,o)=>r.load(i,l=>{rs(l==null?void 0:l.scene)&&Object.assign(l,loe(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${i}: ${l==null?void 0:l.message}`))))))}}function _M(a,e,t,n){const r=Array.isArray(e)?e:[e],i=zse(L6(t,n),[a,...r],{equal:Oa.equ});return Array.isArray(e)?i:i[0]}_M.preload=function(a,e,t){const n=Array.isArray(e)?e:[e];return Gse(L6(t),[a,...n])};_M.clear=function(a,e){const t=Array.isArray(e)?e:[e];return Vse([a,...t])};function _oe(a){const e=Jse(a);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:H.version}),e}const P6=0,_0={},boe=/^three(?=[A-Z])/,tb=a=>`${a[0].toUpperCase()}${a.slice(1)}`;let Soe=0;const Eoe=a=>typeof a=="function";function woe(a){if(Eoe(a)){const e=`${Soe++}`;return _0[e]=a,e}else Object.assign(_0,a)}function O6(a,e){const t=tb(a),n=_0[t];if(a!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(a==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Roe(a,e,t){var n;return a=tb(a)in _0?a:a.replace(boe,""),O6(a,e),a==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,GA(e.object,t,a,e)}function Moe(a){if(!a.isHidden){var e;a.props.attach&&(e=a.parent)!=null&&e.object?WA(a.parent,a):rs(a.object)&&(a.object.visible=!1),a.isHidden=!0,O0(a)}}function U6(a){if(a.isHidden){var e;a.props.attach&&(e=a.parent)!=null&&e.object?VA(a.parent,a):rs(a.object)&&a.props.visible!==!1&&(a.object.visible=!0),a.isHidden=!1,O0(a)}}function bM(a,e,t){const n=e.root.getState();if(!(!a.parent&&a.object!==n.scene)){if(!e.object){var r,i;const s=_0[tb(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(i=e.props.args)!=null?i:[]),e.object.__r3f=e}if(zd(e.object,e.props),e.props.attach)VA(a,e);else if(rs(e.object)&&rs(a.object)){const s=a.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=a.object.children.indexOf(e.object);if(o!==-1){a.object.children.splice(o,1);const l=o<s?s-1:s;a.object.children.splice(l,0,e.object)}else e.object.parent=a.object,a.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),a.object.dispatchEvent({type:"childadded",child:e.object})}else a.object.add(e.object)}for(const s of e.children)bM(e,s);O0(e)}}function JE(a,e){e&&(e.parent=a,a.children.push(e),bM(a,e))}function yI(a,e,t){if(!e||!t)return;e.parent=a;const n=a.children.indexOf(t);n!==-1?a.children.splice(n,0,e):a.children.push(e),bM(a,e,t)}function B6(a){if(typeof a.dispose=="function"){const e=()=>{try{a.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():hI.unstable_scheduleCallback(hI.unstable_IdlePriority,e)}}function rw(a,e,t){if(!e)return;e.parent=null;const n=a.children.indexOf(e);n!==-1&&a.children.splice(n,1),e.props.attach?WA(a,e):rs(e.object)&&rs(a.object)&&(a.object.remove(e.object),goe(w6(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let i=e.children.length-1;i>=0;i--){const s=e.children[i];rw(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&B6(e.object),t===void 0&&O0(e)}function Toe(a,e){for(const t of[a,a.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Tx=[];function Noe(){for(const[t]of Tx){const n=t.parent;if(n){t.props.attach?WA(n,t):rs(t.object)&&rs(n.object)&&n.object.remove(t.object);for(const r of t.children)r.props.attach?WA(t,r):rs(r.object)&&rs(t.object)&&t.object.remove(r.object)}t.isHidden&&U6(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&B6(t.object)}for(const[t,n,r]of Tx){t.props=n;const i=t.parent;if(i){var a,e;const s=_0[tb(t.type)];t.object=(a=t.props.object)!=null?a:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Toe(r,t.object),zd(t.object,t.props),t.props.attach?VA(i,t):rs(t.object)&&rs(i.object)&&i.object.add(t.object);for(const o of t.children)o.props.attach?VA(t,o):rs(o.object)&&rs(t.object)&&t.object.add(o.object);O0(t)}}Tx.length=0}const ZE=()=>{},xI={};let gx=P6;const Coe=0,Ioe=4,iw=_oe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Roe,removeChild:rw,appendChild:JE,appendInitialChild:JE,insertBefore:yI,appendChildToContainer(a,e){const t=a.getState().scene.__r3f;!e||!t||JE(t,e)},removeChildFromContainer(a,e){const t=a.getState().scene.__r3f;!e||!t||rw(t,e)},insertInContainerBefore(a,e,t){const n=a.getState().scene.__r3f;!e||!t||!n||yI(n,e,t)},getRootHostContext:()=>xI,getChildHostContext:()=>xI,commitUpdate(a,e,t,n,r){var i,s,o;O6(e,n);let l=!1;if((a.type==="primitive"&&t.object!==n.object||((i=n.args)==null?void 0:i.length)!==((s=t.args)==null?void 0:s.length)||(o=n.args)!=null&&o.some((d,h)=>{var m;return d!==((m=t.args)==null?void 0:m[h])}))&&(l=!0),l)Tx.push([a,{...n},r]);else{const d=foe(a,n);Object.keys(d).length&&(Object.assign(a.props,d),zd(a.object,d))}(r.sibling===null||(r.flags&Ioe)===Coe)&&Noe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:a=>a==null?void 0:a.object,prepareForCommit:()=>null,preparePortalMount:a=>GA(a.getState().scene,a,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Moe,unhideInstance:U6,createTextInstance:ZE,hideTextInstance:ZE,unhideTextInstance:ZE,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:H.createContext(null),setCurrentUpdatePriority(a){gx=a},getCurrentUpdatePriority(){return gx},resolveUpdatePriority(){var a;if(gx!==P6)return gx;switch(typeof window<"u"&&((a=window.event)==null?void 0:a.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Mx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Mx.ContinuousEventPriority;default:return Mx.DefaultEventPriority}},resetFormInstance(){}}),Jh=new Map,Fm={objects:"shallow",strict:!1};function Doe(a,e){if(!e&&typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:t,height:n,top:r,left:i}=a.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}else if(!e&&typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Loe(a){const e=Jh.get(a),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,i=n||yoe(lw,_I),s=t||iw.createContainer(i,Mx.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Jh.set(a,{fiber:s,store:i});let o,l,c=!1,d=null;return{async configure(h={}){let m;d=new Promise(J=>m=J);let{gl:v,size:A,scene:E,events:b,onCreated:_,shadows:R=!1,linear:T=!1,flat:M=!1,legacy:I=!1,orthographic:P=!1,frameloop:B="always",dpr:F=[1,2],performance:L,raycaster:U,camera:j,onPointerMissed:W}=h,Q=i.getState(),$=Q.gl;if(!Q.gl){const J={canvas:a,powerPreference:"high-performance",antialias:!0,alpha:!0},le=typeof v=="function"?await v(J):v;gI(le)?$=le:$=new x6({...J,...v}),Q.set({gl:$})}let re=Q.raycaster;re||Q.set({raycaster:re=new u6});const{params:G,...Y}=U||{};if(Oa.equ(Y,re,Fm)||zd(re,{...Y}),Oa.equ(G,re.params,Fm)||zd(re,{params:{...re.params,...G}}),!Q.camera||Q.camera===l&&!Oa.equ(l,j,Fm)){l=j;const J=j==null?void 0:j.isCamera,le=J?j:P?new Su(0,0,0,0,.1,1e3):new er(75,0,.1,1e3);J||(le.position.z=5,j&&(zd(le,j),le.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(le.manual=!0,le.updateProjectionMatrix())),!Q.camera&&!(j!=null&&j.rotation)&&le.lookAt(0,0,0)),Q.set({camera:le}),re.camera=le}if(!Q.scene){let J;E!=null&&E.isScene?(J=E,GA(J,i,"",{})):(J=new GR,GA(J,i,"",{}),E&&zd(J,E)),Q.set({scene:J})}b&&!Q.events.handlers&&Q.set({events:b(i)});const K=Doe(a,A);if(Oa.equ(K,Q.size,Fm)||Q.setSize(K.width,K.height,K.top,K.left),F&&Q.viewport.dpr!==T6(F)&&Q.setDpr(F),Q.frameloop!==B&&Q.setFrameloop(B),Q.onPointerMissed||Q.set({onPointerMissed:W}),L&&!Oa.equ(L,Q.performance,Fm)&&Q.set(J=>({performance:{...J.performance,...L}})),!Q.xr){var X;const J=(xe,fe)=>{const _e=i.getState();_e.frameloop!=="never"&&_I(xe,!0,_e,fe)},le=()=>{const xe=i.getState();xe.gl.xr.enabled=xe.gl.xr.isPresenting,xe.gl.xr.setAnimationLoop(xe.gl.xr.isPresenting?J:null),xe.gl.xr.isPresenting||lw(xe)},ce={connect(){const xe=i.getState().gl;xe.xr.addEventListener("sessionstart",le),xe.xr.addEventListener("sessionend",le)},disconnect(){const xe=i.getState().gl;xe.xr.removeEventListener("sessionstart",le),xe.xr.removeEventListener("sessionend",le)}};typeof((X=$.xr)==null?void 0:X.addEventListener)=="function"&&ce.connect(),Q.set({xr:ce})}if($.shadowMap){const J=$.shadowMap.enabled,le=$.shadowMap.type;if($.shadowMap.enabled=!!R,Oa.boo(R))$.shadowMap.type=Rv;else if(Oa.str(R)){var z;const ce={basic:EP,percentage:__,soft:Rv,variance:ml};$.shadowMap.type=(z=ce[R])!=null?z:Rv}else Oa.obj(R)&&Object.assign($.shadowMap,R);(J!==$.shadowMap.enabled||le!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return Fn.enabled=!I,c||($.outputColorSpace=T?pi:cr,$.toneMapping=M?Ec:TR),Q.legacy!==I&&Q.set(()=>({legacy:I})),Q.linear!==T&&Q.set(()=>({linear:T})),Q.flat!==M&&Q.set(()=>({flat:M})),v&&!Oa.fun(v)&&!gI(v)&&!Oa.equ(v,$,Fm)&&zd($,v),o=_,c=!0,m(),this},render(h){return!c&&!d&&this.configure(),d.then(()=>{iw.updateContainer(x.jsx(Poe,{store:i,children:h,onCreated:o,rootElement:a}),s,null,()=>{})}),i},unmount(){F6(a)}}}function Poe({store:a,children:e,onCreated:t,rootElement:n}){return C1(()=>{const r=a.getState();r.set(i=>({internal:{...i.internal,active:!0}})),t&&t(r),a.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),x.jsx(I6.Provider,{value:a,children:e})}function F6(a,e){const t=Jh.get(a),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),iw.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var i,s,o,l;r.events.disconnect==null||r.events.disconnect(),(i=r.gl)==null||(s=i.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),coe(r.scene),Jh.delete(a)}catch{}},500)})}}const Ooe=new Set,Uoe=new Set,Boe=new Set;function QE(a,e){if(a.size)for(const{callback:t}of a.values())t(e)}function Ov(a,e){switch(a){case"before":return QE(Ooe,e);case"after":return QE(Uoe,e);case"tail":return QE(Boe,e)}}let $E,e3;function sw(a,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof a=="number"&&(n=a-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=a),$E=e.internal.subscribers;for(let r=0;r<$E.length;r++)e3=$E[r],e3.ref.current(e3.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let KA=!1,ow=!1,t3,AI,km;function k6(a){AI=requestAnimationFrame(k6),KA=!0,t3=0,Ov("before",a),ow=!0;for(const t of Jh.values()){var e;km=t.store.getState(),km.internal.active&&(km.frameloop==="always"||km.internal.frames>0)&&!((e=km.gl.xr)!=null&&e.isPresenting)&&(t3+=sw(a,km))}if(ow=!1,Ov("after",a),t3===0)return Ov("tail",a),KA=!1,cancelAnimationFrame(AI)}function lw(a,e=1){var t;if(!a)return Jh.forEach(n=>lw(n.store.getState(),e));(t=a.gl.xr)!=null&&t.isPresenting||!a.internal.active||a.frameloop==="never"||(e>1?a.internal.frames=Math.min(60,a.internal.frames+e):ow?a.internal.frames=2:a.internal.frames=1,KA||(KA=!0,requestAnimationFrame(k6)))}function _I(a,e=!0,t,n){if(e&&Ov("before",a),t)sw(a,t,n);else for(const r of Jh.values())sw(a,r.store.getState());e&&Ov("after",a)}const n3={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Foe(a){const{handlePointer:e}=voe(a);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(n3).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=a.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=a.getState();if(r.disconnect==null||r.disconnect(),n(i=>({events:{...i.events,connected:t}})),r.handlers)for(const i in r.handlers){const s=r.handlers[i],[o,l]=n3[i];t.addEventListener(o,s,{passive:l})}},disconnect:()=>{const{set:t,events:n}=a.getState();if(n.connected){if(n.handlers)for(const r in n.handlers){const i=n.handlers[r],[s]=n3[r];n.connected.removeEventListener(s,i)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function bI(a,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>a(...n),e)}}function koe({debounce:a,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,s]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),l=a?typeof a=="number"?a:a.scroll:null,c=a?typeof a=="number"?a:a.resize:null,d=H.useRef(!1);H.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,m,v]=H.useMemo(()=>{const _=()=>{if(!o.current.element)return;const{left:R,top:T,width:M,height:I,bottom:P,right:B,x:F,y:L}=o.current.element.getBoundingClientRect(),U={left:R,top:T,width:M,height:I,bottom:P,right:B,x:F,y:L};o.current.element instanceof HTMLElement&&n&&(U.height=o.current.element.offsetHeight,U.width=o.current.element.offsetWidth),Object.freeze(U),d.current&&!Goe(o.current.lastBounds,U)&&s(o.current.lastBounds=U)};return[_,c?bI(_,c):_,l?bI(_,l):_]},[s,n,l,c]);function A(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function E(){o.current.element&&(o.current.resizeObserver=new r(v),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=_=>{!_||_===o.current.element||(A(),o.current.element=_,o.current.scrollContainers=H6(_),E())};return joe(v,!!e),Hoe(m),H.useEffect(()=>{A(),E()},[e,v,m]),H.useEffect(()=>A,[]),[b,i,h]}function Hoe(a){H.useEffect(()=>{const e=a;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[a])}function joe(a,e){H.useEffect(()=>{if(e){const t=a;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[a,e])}function H6(a){const e=[];if(!a||a===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(a);return[t,n,r].some(i=>i==="auto"||i==="scroll")&&e.push(a),[...e,...H6(a.parentElement)]}const zoe=["x","y","top","bottom","left","right","width","height"],Goe=(a,e)=>zoe.every(t=>a[t]===e[t]);function Voe({ref:a,children:e,fallback:t,resize:n,style:r,gl:i,events:s=Foe,eventSource:o,eventPrefix:l,shadows:c,linear:d,flat:h,legacy:m,orthographic:v,frameloop:A,dpr:E,performance:b,raycaster:_,camera:R,scene:T,onPointerMissed:M,onCreated:I,...P}){H.useMemo(()=>woe(Mse),[]);const B=ioe(),[F,L]=koe({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=H.useRef(null),j=H.useRef(null);H.useImperativeHandle(a,()=>U.current);const W=M6(M),[Q,$]=H.useState(!1),[re,G]=H.useState(!1);if(Q)throw Q;if(re)throw re;const Y=H.useRef(null);C1(()=>{const X=U.current;if(L.width>0&&L.height>0&&X){Y.current||(Y.current=Loe(X));async function z(){await Y.current.configure({gl:i,scene:T,events:s,shadows:c,linear:d,flat:h,legacy:m,orthographic:v,frameloop:A,dpr:E,performance:b,raycaster:_,camera:R,size:L,onPointerMissed:(...J)=>W.current==null?void 0:W.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(o?aoe(o)?o.current:o:j.current),l&&J.setEvents({compute:(le,ce)=>{const xe=le[l+"X"],fe=le[l+"Y"];ce.pointer.set(xe/ce.size.width*2-1,-(fe/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),I==null||I(J)}}),Y.current.render(x.jsx(B,{children:x.jsx(ooe,{set:G,children:x.jsx(H.Suspense,{fallback:x.jsx(soe,{set:$}),children:e??null})})}))}z()}}),H.useEffect(()=>{const X=U.current;if(X)return()=>F6(X)},[]);const K=o?"none":"auto";return x.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...r},...P,children:x.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:x.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function Woe(a){return x.jsx(S6,{children:x.jsx(Voe,{...a})})}var Koe=Object.defineProperty,Yoe=(a,e,t)=>e in a?Koe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,qoe=(a,e,t)=>(Yoe(a,e+"",t),t);class Xoe{constructor(){qoe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,e);e.target=null}}}var Joe=Object.defineProperty,Zoe=(a,e,t)=>e in a?Joe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,tn=(a,e,t)=>(Zoe(a,typeof e!="symbol"?e+"":e,t),t);const vx=new rp,SI=new mu,Qoe=Math.cos(70*(Math.PI/180)),EI=(a,e)=>(a%e+e)%e;let $oe=class extends Xoe{constructor(e,t){super(),tn(this,"object"),tn(this,"domElement"),tn(this,"enabled",!0),tn(this,"target",new ae),tn(this,"minDistance",0),tn(this,"maxDistance",1/0),tn(this,"minZoom",0),tn(this,"maxZoom",1/0),tn(this,"minPolarAngle",0),tn(this,"maxPolarAngle",Math.PI),tn(this,"minAzimuthAngle",-1/0),tn(this,"maxAzimuthAngle",1/0),tn(this,"enableDamping",!1),tn(this,"dampingFactor",.05),tn(this,"enableZoom",!0),tn(this,"zoomSpeed",1),tn(this,"enableRotate",!0),tn(this,"rotateSpeed",1),tn(this,"enablePan",!0),tn(this,"panSpeed",1),tn(this,"screenSpacePanning",!0),tn(this,"keyPanSpeed",7),tn(this,"zoomToCursor",!1),tn(this,"autoRotate",!1),tn(this,"autoRotateSpeed",2),tn(this,"reverseOrbit",!1),tn(this,"reverseHorizontalOrbit",!1),tn(this,"reverseVerticalOrbit",!1),tn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),tn(this,"mouseButtons",{LEFT:_h.ROTATE,MIDDLE:_h.DOLLY,RIGHT:_h.PAN}),tn(this,"touches",{ONE:bh.ROTATE,TWO:bh.DOLLY_PAN}),tn(this,"target0"),tn(this,"position0"),tn(this,"zoom0"),tn(this,"_domElementKeyEvents",null),tn(this,"getPolarAngle"),tn(this,"getAzimuthalAngle"),tn(this,"setPolarAngle"),tn(this,"setAzimuthalAngle"),tn(this,"getDistance"),tn(this,"getZoomScale"),tn(this,"listenToKeyEvents"),tn(this,"stopListenToKeyEvents"),tn(this,"saveState"),tn(this,"reset"),tn(this,"update"),tn(this,"connect"),tn(this,"dispose"),tn(this,"dollyIn"),tn(this,"dollyOut"),tn(this,"getScale"),tn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ue=>{let Me=EI(ue,2*Math.PI),ft=d.phi;ft<0&&(ft+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let pe=Math.abs(Me-ft);2*Math.PI-pe<pe&&(Me<ft?Me+=2*Math.PI:ft+=2*Math.PI),h.phi=Me-ft,n.update()},this.setAzimuthalAngle=ue=>{let Me=EI(ue,2*Math.PI),ft=d.theta;ft<0&&(ft+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let pe=Math.abs(Me-ft);2*Math.PI-pe<pe&&(Me<ft?Me+=2*Math.PI:ft+=2*Math.PI),h.theta=Me-ft,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",Pe),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=o.NONE},this.update=(()=>{const ue=new ae,Me=new ae(0,1,0),ft=new Qr().setFromUnitVectors(e.up,Me),pe=ft.clone().invert(),nt=new ae,ut=new Qr,bt=2*Math.PI;return function(){const et=n.object.position;ft.setFromUnitVectors(e.up,Me),pe.copy(ft).invert(),ue.copy(et).sub(n.target),ue.applyQuaternion(ft),d.setFromVector3(ue),n.autoRotate&&l===o.NONE&&$(W()),n.enableDamping?(d.theta+=h.theta*n.dampingFactor,d.phi+=h.phi*n.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let wt=n.minAzimuthAngle,jt=n.maxAzimuthAngle;isFinite(wt)&&isFinite(jt)&&(wt<-Math.PI?wt+=bt:wt>Math.PI&&(wt-=bt),jt<-Math.PI?jt+=bt:jt>Math.PI&&(jt-=bt),wt<=jt?d.theta=Math.max(wt,Math.min(jt,d.theta)):d.theta=d.theta>(wt+jt)/2?Math.max(wt,d.theta):Math.min(jt,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(v,n.dampingFactor):n.target.add(v),n.zoomToCursor&&L||n.object.isOrthographicCamera?d.radius=ce(d.radius):d.radius=ce(d.radius*m),ue.setFromSpherical(d),ue.applyQuaternion(pe),et.copy(n.target).add(ue),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,v.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),v.set(0,0,0));let En=!1;if(n.zoomToCursor&&L){let mn=null;if(n.object instanceof er&&n.object.isPerspectiveCamera){const fr=ue.length();mn=ce(fr*m);const xa=fr-mn;n.object.position.addScaledVector(B,xa),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const fr=new ae(F.x,F.y,0);fr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),En=!0;const xa=new ae(F.x,F.y,0);xa.unproject(n.object),n.object.position.sub(xa).add(fr),n.object.updateMatrixWorld(),mn=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;mn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(mn).add(n.object.position):(vx.origin.copy(n.object.position),vx.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(vx.direction))<Qoe?e.lookAt(n.target):(SI.setFromNormalAndCoplanarPoint(n.object.up,n.target),vx.intersectPlane(SI,n.target))))}else n.object instanceof Su&&n.object.isOrthographicCamera&&(En=m!==1,En&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix()));return m=1,L=!1,En||nt.distanceToSquared(n.object.position)>c||8*(1-ut.dot(n.object.quaternion))>c?(n.dispatchEvent(r),nt.copy(n.object.position),ut.copy(n.object.quaternion),En=!1,!0):!1}})(),this.connect=ue=>{n.domElement=ue,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ct),n.domElement.addEventListener("pointerdown",zt),n.domElement.addEventListener("pointercancel",q),n.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var ue,Me,ft,pe,nt,ut;n.domElement&&(n.domElement.style.touchAction="auto"),(ue=n.domElement)==null||ue.removeEventListener("contextmenu",Ct),(Me=n.domElement)==null||Me.removeEventListener("pointerdown",zt),(ft=n.domElement)==null||ft.removeEventListener("pointercancel",q),(pe=n.domElement)==null||pe.removeEventListener("wheel",Ye),(nt=n.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",ie),(ut=n.domElement)==null||ut.ownerDocument.removeEventListener("pointerup",q),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Pe)};const n=this,r={type:"change"},i={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const c=1e-6,d=new $3,h=new $3;let m=1;const v=new ae,A=new Ze,E=new Ze,b=new Ze,_=new Ze,R=new Ze,T=new Ze,M=new Ze,I=new Ze,P=new Ze,B=new ae,F=new Ze;let L=!1;const U=[],j={};function W(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Q(){return Math.pow(.95,n.zoomSpeed)}function $(ue){n.reverseOrbit||n.reverseHorizontalOrbit?h.theta+=ue:h.theta-=ue}function re(ue){n.reverseOrbit||n.reverseVerticalOrbit?h.phi+=ue:h.phi-=ue}const G=(()=>{const ue=new ae;return function(ft,pe){ue.setFromMatrixColumn(pe,0),ue.multiplyScalar(-ft),v.add(ue)}})(),Y=(()=>{const ue=new ae;return function(ft,pe){n.screenSpacePanning===!0?ue.setFromMatrixColumn(pe,1):(ue.setFromMatrixColumn(pe,0),ue.crossVectors(n.object.up,ue)),ue.multiplyScalar(ft),v.add(ue)}})(),K=(()=>{const ue=new ae;return function(ft,pe){const nt=n.domElement;if(nt&&n.object instanceof er&&n.object.isPerspectiveCamera){const ut=n.object.position;ue.copy(ut).sub(n.target);let bt=ue.length();bt*=Math.tan(n.object.fov/2*Math.PI/180),G(2*ft*bt/nt.clientHeight,n.object.matrix),Y(2*pe*bt/nt.clientHeight,n.object.matrix)}else nt&&n.object instanceof Su&&n.object.isOrthographicCamera?(G(ft*(n.object.right-n.object.left)/n.object.zoom/nt.clientWidth,n.object.matrix),Y(pe*(n.object.top-n.object.bottom)/n.object.zoom/nt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function X(ue){n.object instanceof er&&n.object.isPerspectiveCamera||n.object instanceof Su&&n.object.isOrthographicCamera?m=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(ue){X(m/ue)}function J(ue){X(m*ue)}function le(ue){if(!n.zoomToCursor||!n.domElement)return;L=!0;const Me=n.domElement.getBoundingClientRect(),ft=ue.clientX-Me.left,pe=ue.clientY-Me.top,nt=Me.width,ut=Me.height;F.x=ft/nt*2-1,F.y=-(pe/ut)*2+1,B.set(F.x,F.y,1).unproject(n.object).sub(n.object.position).normalize()}function ce(ue){return Math.max(n.minDistance,Math.min(n.maxDistance,ue))}function xe(ue){A.set(ue.clientX,ue.clientY)}function fe(ue){le(ue),M.set(ue.clientX,ue.clientY)}function _e(ue){_.set(ue.clientX,ue.clientY)}function Ie(ue){E.set(ue.clientX,ue.clientY),b.subVectors(E,A).multiplyScalar(n.rotateSpeed);const Me=n.domElement;Me&&($(2*Math.PI*b.x/Me.clientHeight),re(2*Math.PI*b.y/Me.clientHeight)),A.copy(E),n.update()}function Ge(ue){I.set(ue.clientX,ue.clientY),P.subVectors(I,M),P.y>0?z(Q()):P.y<0&&J(Q()),M.copy(I),n.update()}function Ue(ue){R.set(ue.clientX,ue.clientY),T.subVectors(R,_).multiplyScalar(n.panSpeed),K(T.x,T.y),_.copy(R),n.update()}function $e(ue){le(ue),ue.deltaY<0?J(Q()):ue.deltaY>0&&z(Q()),n.update()}function dt(ue){let Me=!1;switch(ue.code){case n.keys.UP:K(0,n.keyPanSpeed),Me=!0;break;case n.keys.BOTTOM:K(0,-n.keyPanSpeed),Me=!0;break;case n.keys.LEFT:K(n.keyPanSpeed,0),Me=!0;break;case n.keys.RIGHT:K(-n.keyPanSpeed,0),Me=!0;break}Me&&(ue.preventDefault(),n.update())}function ct(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const ue=.5*(U[0].pageX+U[1].pageX),Me=.5*(U[0].pageY+U[1].pageY);A.set(ue,Me)}}function se(){if(U.length==1)_.set(U[0].pageX,U[0].pageY);else{const ue=.5*(U[0].pageX+U[1].pageX),Me=.5*(U[0].pageY+U[1].pageY);_.set(ue,Me)}}function Be(){const ue=U[0].pageX-U[1].pageX,Me=U[0].pageY-U[1].pageY,ft=Math.sqrt(ue*ue+Me*Me);M.set(0,ft)}function Le(){n.enableZoom&&Be(),n.enablePan&&se()}function Ke(){n.enableZoom&&Be(),n.enableRotate&&ct()}function ze(ue){if(U.length==1)E.set(ue.pageX,ue.pageY);else{const ft=Lt(ue),pe=.5*(ue.pageX+ft.x),nt=.5*(ue.pageY+ft.y);E.set(pe,nt)}b.subVectors(E,A).multiplyScalar(n.rotateSpeed);const Me=n.domElement;Me&&($(2*Math.PI*b.x/Me.clientHeight),re(2*Math.PI*b.y/Me.clientHeight)),A.copy(E)}function ot(ue){if(U.length==1)R.set(ue.pageX,ue.pageY);else{const Me=Lt(ue),ft=.5*(ue.pageX+Me.x),pe=.5*(ue.pageY+Me.y);R.set(ft,pe)}T.subVectors(R,_).multiplyScalar(n.panSpeed),K(T.x,T.y),_.copy(R)}function Qe(ue){const Me=Lt(ue),ft=ue.pageX-Me.x,pe=ue.pageY-Me.y,nt=Math.sqrt(ft*ft+pe*pe);I.set(0,nt),P.set(0,Math.pow(I.y/M.y,n.zoomSpeed)),z(P.y),M.copy(I)}function st(ue){n.enableZoom&&Qe(ue),n.enablePan&&ot(ue)}function Ot(ue){n.enableZoom&&Qe(ue),n.enableRotate&&ze(ue)}function zt(ue){var Me,ft;n.enabled!==!1&&(U.length===0&&((Me=n.domElement)==null||Me.ownerDocument.addEventListener("pointermove",ie),(ft=n.domElement)==null||ft.ownerDocument.addEventListener("pointerup",q)),Dt(ue),ue.pointerType==="touch"?_t(ue):be(ue))}function ie(ue){n.enabled!==!1&&(ue.pointerType==="touch"?mt(ue):je(ue))}function q(ue){var Me,ft,pe;rt(ue),U.length===0&&((Me=n.domElement)==null||Me.releasePointerCapture(ue.pointerId),(ft=n.domElement)==null||ft.ownerDocument.removeEventListener("pointermove",ie),(pe=n.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",q)),n.dispatchEvent(s),l=o.NONE}function be(ue){let Me;switch(ue.button){case 0:Me=n.mouseButtons.LEFT;break;case 1:Me=n.mouseButtons.MIDDLE;break;case 2:Me=n.mouseButtons.RIGHT;break;default:Me=-1}switch(Me){case _h.DOLLY:if(n.enableZoom===!1)return;fe(ue),l=o.DOLLY;break;case _h.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(n.enablePan===!1)return;_e(ue),l=o.PAN}else{if(n.enableRotate===!1)return;xe(ue),l=o.ROTATE}break;case _h.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(n.enableRotate===!1)return;xe(ue),l=o.ROTATE}else{if(n.enablePan===!1)return;_e(ue),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(i)}function je(ue){if(n.enabled!==!1)switch(l){case o.ROTATE:if(n.enableRotate===!1)return;Ie(ue);break;case o.DOLLY:if(n.enableZoom===!1)return;Ge(ue);break;case o.PAN:if(n.enablePan===!1)return;Ue(ue);break}}function Ye(ue){n.enabled===!1||n.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(ue.preventDefault(),n.dispatchEvent(i),$e(ue),n.dispatchEvent(s))}function Pe(ue){n.enabled===!1||n.enablePan===!1||dt(ue)}function _t(ue){switch(gt(ue),U.length){case 1:switch(n.touches.ONE){case bh.ROTATE:if(n.enableRotate===!1)return;ct(),l=o.TOUCH_ROTATE;break;case bh.PAN:if(n.enablePan===!1)return;se(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case bh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Le(),l=o.TOUCH_DOLLY_PAN;break;case bh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ke(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(i)}function mt(ue){switch(gt(ue),l){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;ze(ue),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;ot(ue),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;st(ue),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ot(ue),n.update();break;default:l=o.NONE}}function Ct(ue){n.enabled!==!1&&ue.preventDefault()}function Dt(ue){U.push(ue)}function rt(ue){delete j[ue.pointerId];for(let Me=0;Me<U.length;Me++)if(U[Me].pointerId==ue.pointerId){U.splice(Me,1);return}}function gt(ue){let Me=j[ue.pointerId];Me===void 0&&(Me=new Ze,j[ue.pointerId]=Me),Me.set(ue.pageX,ue.pageY)}function Lt(ue){const Me=ue.pointerId===U[0].pointerId?U[1]:U[0];return j[Me.pointerId]}this.dollyIn=(ue=Q())=>{J(ue),n.update()},this.dollyOut=(ue=Q())=>{z(ue),n.update()},this.getScale=()=>m,this.setScale=ue=>{X(ue),n.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};const ele=H.forwardRef(({makeDefault:a,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:i=!1,onChange:s,onStart:o,onEnd:l,...c},d)=>{const h=kd(P=>P.invalidate),m=kd(P=>P.camera),v=kd(P=>P.gl),A=kd(P=>P.events),E=kd(P=>P.setEvents),b=kd(P=>P.set),_=kd(P=>P.get),R=kd(P=>P.performance),T=e||m,M=n||A.connected||v.domElement,I=H.useMemo(()=>new $oe(T),[T]);return xoe(()=>{I.enabled&&I.update()},-1),H.useEffect(()=>(i&&I.connect(i===!0?M:i),I.connect(M),()=>void I.dispose()),[i,M,t,I,h]),H.useEffect(()=>{const P=L=>{h(),t&&R.regress(),s&&s(L)},B=L=>{o&&o(L)},F=L=>{l&&l(L)};return I.addEventListener("change",P),I.addEventListener("start",B),I.addEventListener("end",F),()=>{I.removeEventListener("start",B),I.removeEventListener("end",F),I.removeEventListener("change",P)}},[s,o,l,I,h,E]),H.useEffect(()=>{if(a){const P=_().controls;return b({controls:I}),()=>b({controls:P})}},[a,I]),H.createElement("primitive",H3({ref:d,object:I,enableDamping:r},c))});function wI(a,e){if(e===tO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(e===FA||e===BR){let t=a.getIndex();if(t===null){const s=[],o=a.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)s.push(l);a.setIndex(s),t=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const n=t.count-2,r=[];if(e===FA)for(let s=1;s<=n;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=a.clone();return i.setIndex(r),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),a}class tle extends os{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sle(t)}),this.register(function(t){return new ole(t)}),this.register(function(t){return new gle(t)}),this.register(function(t){return new vle(t)}),this.register(function(t){return new yle(t)}),this.register(function(t){return new cle(t)}),this.register(function(t){return new ule(t)}),this.register(function(t){return new dle(t)}),this.register(function(t){return new fle(t)}),this.register(function(t){return new ile(t)}),this.register(function(t){return new hle(t)}),this.register(function(t){return new lle(t)}),this.register(function(t){return new mle(t)}),this.register(function(t){return new ple(t)}),this.register(function(t){return new ale(t)}),this.register(function(t){return new xle(t)}),this.register(function(t){return new Ale(t)})}load(e,t,n,r){const i=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const c=Zd.extractUrlBase(e);s=Zd.resolveURL(c,this.path)}else s=Zd.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),i.manager.itemError(e),i.manager.itemEnd(e)},l=new El(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{i.parse(c,s,function(d){t(d),i.manager.itemEnd(e)},o)}catch(d){o(d)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},o={},l=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===j6){try{s[kn.KHR_BINARY_GLTF]=new _le(e)}catch(h){r&&r(h);return}i=JSON.parse(s[kn.KHR_BINARY_GLTF].content)}else i=JSON.parse(l.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Ple(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const h=this.pluginCallbacks[d](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[h.name]=h,s[h.name]=!0}if(i.extensionsUsed)for(let d=0;d<i.extensionsUsed.length;++d){const h=i.extensionsUsed[d],m=i.extensionsRequired||[];switch(h){case kn.KHR_MATERIALS_UNLIT:s[h]=new rle;break;case kn.KHR_DRACO_MESH_COMPRESSION:s[h]=new ble(i,this.dracoLoader);break;case kn.KHR_TEXTURE_TRANSFORM:s[h]=new Sle;break;case kn.KHR_MESH_QUANTIZATION:s[h]=new Ele;break;default:m.indexOf(h)>=0&&o[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(s),c.setPlugins(o),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function nle(){let a={};return{get:function(e){return a[e]},add:function(e,t){a[e]=t},remove:function(e){delete a[e]},removeAll:function(){a={}}}}const kn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ale{constructor(e){this.parser=e,this.name=kn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,l=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let c;const d=new Et(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],pi);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new dM(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new uM(d),c.distance=h;break;case"spot":c=new cM(d),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),pu(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],o=(i.extensions&&i.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class rle{constructor(){this.name=kn.KHR_MATERIALS_UNLIT}getMaterialType(){return ro}extendParams(e,t,n){const r=[];e.color=new Et(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],pi),e.opacity=s[3]}i.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",i.baseColorTexture,cr))}return Promise.all(r)}}class ile{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class sle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const o=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ze(o,o)}return Promise.all(i)}}class ole{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class lle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class cle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Et(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const o=s.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],pi)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,cr)),s.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class ule{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class dle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=new Et().setRGB(o[0],o[1],o[2],pi),Promise.all(i)}}class fle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class hle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=new Et().setRGB(o[0],o[1],o[2],pi),s.specularColorTexture!==void 0&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,cr)),Promise.all(i)}}class ple{constructor(e){this.parser=e,this.name=kn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&i.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(i)}}class mle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ko}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&i.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}}class gle{constructor(e){this.parser=e,this.name=kn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class vle{constructor(e){this.parser=e,this.name=kn.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return n.loadTextureImage(e,s.source,l)}}class yle{constructor(e){this.parser=e,this.name=kn.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return n.loadTextureImage(e,s.source,l)}}class xle{constructor(e){this.name=kn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,d=r.count,h=r.byteStride,m=new Uint8Array(o,l,c);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,h,m,r.mode,r.filter).then(function(v){return v.buffer}):s.ready.then(function(){const v=new ArrayBuffer(d*h);return s.decodeGltfBuffer(new Uint8Array(v),d,h,m,r.mode,r.filter),v})})}else return null}}class Ale{constructor(e){this.name=kn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Do.TRIANGLES&&c.mode!==Do.TRIANGLE_STRIP&&c.mode!==Do.TRIANGLE_FAN&&c.mode!==void 0)return null;const s=n.extensions[this.name].attributes,o=[],l={};for(const c in s)o.push(this.parser.getDependency("accessor",s[c]).then(d=>(l[c]=d,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const d=c.pop(),h=d.isGroup?d.children:[d],m=c[0].count,v=[];for(const A of h){const E=new nn,b=new ae,_=new Qr,R=new ae(1,1,1),T=new KR(A.geometry,A.material,m);for(let M=0;M<m;M++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,M),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,M),l.SCALE&&R.fromBufferAttribute(l.SCALE,M),T.setMatrixAt(M,E.compose(b,_,R));for(const M in l)if(M==="_COLOR_0"){const I=l[M];T.instanceColor=new Wh(I.array,I.itemSize,I.normalized)}else M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&A.geometry.setAttribute(M,l[M]);Wn.prototype.copy.call(T,A),this.parser.assignFinalMaterial(T),v.push(T)}return d.isGroup?(d.clear(),d.add(...v),d):v[0]}))}}const j6="glTF",xv=12,RI={JSON:1313821514,BIN:5130562};class _le{constructor(e){this.name=kn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,xv),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==j6)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-xv,i=new DataView(e,xv);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const l=i.getUint32(s,!0);if(s+=4,l===RI.JSON){const c=new Uint8Array(e,xv+s,o);this.content=n.decode(c)}else if(l===RI.BIN){const c=xv+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ble{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},l={},c={};for(const d in s){const h=cw[d]||d.toLowerCase();o[h]=s[d]}for(const d in e.attributes){const h=cw[d]||d.toLowerCase();if(s[d]!==void 0){const m=n.accessors[e.attributes[d]],v=a0[m.componentType];c[h]=v.name,l[h]=m.normalized===!0}}return t.getDependency("bufferView",i).then(function(d){return new Promise(function(h,m){r.decodeDracoFile(d,function(v){for(const A in v.attributes){const E=v.attributes[A],b=l[A];b!==void 0&&(E.normalized=b)}h(v)},o,c,pi,m)})})}}class Sle{constructor(){this.name=kn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Ele{constructor(){this.name=kn.KHR_MESH_QUANTIZATION}}class z6 extends L0{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,d=r-t,h=(n-t)/d,m=h*h,v=m*h,A=e*c,E=A-c,b=-2*v+3*m,_=v-m,R=1-b,T=_-m+h;for(let M=0;M!==o;M++){const I=s[E+M+o],P=s[E+M+l]*d,B=s[A+M+o],F=s[A+M]*d;i[M]=R*I+T*P+b*B+_*F}return i}}const wle=new Qr;class Rle extends z6{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return wle.fromArray(i).normalize().toArray(i),i}}const Do={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},a0={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},MI={9728:Ur,9729:tr,9984:S_,9985:e0,9986:Ih,9987:Uo},TI={33071:no,33648:l0,10497:tf},a3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},cw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Hd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Mle={CUBICSPLINE:void 0,LINEAR:p0,STEP:h0},r3={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Tle(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new N1({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Tc})),a.DefaultMaterial}function vh(a,e,t){for(const n in t.extensions)a[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function pu(a,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(a.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Nle(a,e,t){let n=!1,r=!1,i=!1;for(let c=0,d=e.length;c<d;c++){const h=e[c];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(i=!0),n&&r&&i)break}if(!n&&!r&&!i)return Promise.resolve(a);const s=[],o=[],l=[];for(let c=0,d=e.length;c<d;c++){const h=e[c];if(n){const m=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):a.attributes.position;s.push(m)}if(r){const m=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):a.attributes.normal;o.push(m)}if(i){const m=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):a.attributes.color;l.push(m)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(c){const d=c[0],h=c[1],m=c[2];return n&&(a.morphAttributes.position=d),r&&(a.morphAttributes.normal=h),i&&(a.morphAttributes.color=m),a.morphTargetsRelative=!0,a})}function Cle(a,e){if(a.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)a.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(a.morphTargetInfluences.length===t.length){a.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)a.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ile(a){let e;const t=a.extensions&&a.extensions[kn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+i3(t.attributes):e=a.indices+":"+i3(a.attributes)+":"+a.mode,a.targets!==void 0)for(let n=0,r=a.targets.length;n<r;n++)e+=":"+i3(a.targets[n]);return e}function i3(a){let e="";const t=Object.keys(a).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+a[t[n]]+";";return e}function uw(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Dle(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":a.search(/\.ktx2($|\?)/i)>0||a.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const Lle=new nn;class Ple{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new nle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,i=!1,s=-1;if(typeof navigator<"u"){const o=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);r=n&&l?parseInt(l[1],10):-1,i=o.indexOf("Firefox")>-1,s=i?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||i&&s<98?this.textureLoader=new ZO(this.options.manager):this.textureLoader=new i6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new El(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){const o={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};return vh(i,o,r),pu(o,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r].joints;for(let o=0,l=s.length;o<l;o++)e[s[o]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(s,o)=>{const l=this.associations.get(s);l!=null&&this.associations.set(o,l);for(const[c,d]of s.children.entries())i(d,o.children[c])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":r=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(i,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(i,s){n.load(Zd.resolveURL(t.uri,r.path),i,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=a3[r.type],o=a0[r.componentType],l=r.normalized===!0,c=new o(r.count*s);return Promise.resolve(new ra(c,s,l))}const i=[];return r.bufferView!==void 0?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),r.sparse!==void 0&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(s){const o=s[0],l=a3[r.type],c=a0[r.componentType],d=c.BYTES_PER_ELEMENT,h=d*l,m=r.byteOffset||0,v=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0;let E,b;if(v&&v!==h){const _=Math.floor(m/v),R="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let T=t.cache.get(R);T||(E=new c(o,_*v,r.count*v/d),T=new S1(E,v/d),t.cache.add(R,T)),b=new nf(T,l,m%v/d,A)}else o===null?E=new c(r.count*l):E=new c(o,m,r.count*l),b=new ra(E,l,A);if(r.sparse!==void 0){const _=a3.SCALAR,R=a0[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,I=new R(s[1],T,r.sparse.count*_),P=new c(s[2],M,r.sparse.count*l);o!==null&&(b=new ra(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let B=0,F=I.length;B<F;B++){const L=I[B];if(b.setX(L,P[B*l]),l>=2&&b.setY(L,P[B*l+1]),l>=3&&b.setZ(L,P[B*l+2]),l>=4&&b.setW(L,P[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}b.normalized=A}return b})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,s=t.images[i];let o=this.textureLoader;if(s.uri){const l=n.manager.getHandler(s.uri);l!==null&&(o=l)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],o=i.images[t],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=s.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const m=(i.samplers||{})[s.sampler]||{};return d.magFilter=MI[m.magFilter]||tr,d.minFilter=MI[m.minFilter]||Uo,d.wrapS=TI[m.wrapS]||tf,d.wrapT=TI[m.wrapT]||tf,d.generateMipmaps=!d.isCompressedTexture&&d.minFilter!==Ur&&d.minFilter!==tr,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const s=r.images[e],o=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(s.bufferView!==void 0)l=n.getDependency("bufferView",s.bufferView).then(function(h){c=!0;const m=new Blob([h],{type:s.mimeType});return l=o.createObjectURL(m),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(m,v){let A=m;t.isImageBitmapLoader===!0&&(A=function(E){const b=new Ua(E);b.needsUpdate=!0,m(b)}),t.load(Zd.resolveURL(h,i.path),A,void 0,v)})}).then(function(h){return c===!0&&o.revokeObjectURL(l),pu(h,s),h.userData.mimeType=s.mimeType||Dle(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=d,d}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(s=s.clone(),s.channel=n.texCoord),i.extensions[kn.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[kn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=i.associations.get(s);s=i.extensions[kn.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),i.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new F_,Br.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new Ui,Br.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(r||i||s){let o="ClonedMaterial:"+n.uuid+":";r&&(o+="derivative-tangents:"),i&&(o+="vertex-colors:"),s&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),i&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return N1}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const o={},l=i.extensions||{},c=[];if(l[kn.KHR_MATERIALS_UNLIT]){const h=r[kn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),c.push(h.extendParams(o,i,t))}else{const h=i.pbrMetallicRoughness||{};if(o.color=new Et(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const m=h.baseColorFactor;o.color.setRGB(m[0],m[1],m[2],pi),o.opacity=m[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",h.baseColorTexture,cr)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,o)})))}i.doubleSided===!0&&(o.side=yl);const d=i.alphaMode||r3.OPAQUE;if(d===r3.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===r3.MASK&&(o.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&s!==ro&&(c.push(t.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new Ze(1,1),i.normalTexture.scale!==void 0)){const h=i.normalTexture.scale;o.normalScale.set(h,h)}if(i.occlusionTexture!==void 0&&s!==ro&&(c.push(t.assignTexture(o,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&s!==ro){const h=i.emissiveFactor;o.emissive=new Et().setRGB(h[0],h[1],h[2],pi)}return i.emissiveTexture!==void 0&&s!==ro&&c.push(t.assignTexture(o,"emissiveMap",i.emissiveTexture,cr)),Promise.all(c).then(function(){const h=new s(o);return i.name&&(h.name=i.name),pu(h,i),t.associations.set(h,{materials:e}),i.extensions&&vh(r,h,i),h})}createUniqueName(e){const t=qn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(o){return n[kn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return NI(l,o,t)})}const s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],d=Ile(c),h=r[d];if(h)s.push(h.promise);else{let m;c.extensions&&c.extensions[kn.KHR_DRACO_MESH_COMPRESSION]?m=i(c):m=NI(new Sn,c,t),r[d]={primitive:c,promise:m},s.push(m)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],s=i.primitives,o=[];for(let l=0,c=s.length;l<c;l++){const d=s[l].material===void 0?Tle(this.cache):this.getDependency("material",s[l].material);o.push(d)}return o.push(t.loadGeometries(s)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let v=0,A=d.length;v<A;v++){const E=d[v],b=s[v];let _;const R=c[v];if(b.mode===Do.TRIANGLES||b.mode===Do.TRIANGLE_STRIP||b.mode===Do.TRIANGLE_FAN||b.mode===void 0)_=i.isSkinnedMesh===!0?new WR(E,R):new ur(E,R),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),b.mode===Do.TRIANGLE_STRIP?_.geometry=wI(_.geometry,BR):b.mode===Do.TRIANGLE_FAN&&(_.geometry=wI(_.geometry,FA));else if(b.mode===Do.LINES)_=new Tl(E,R);else if(b.mode===Do.LINE_STRIP)_=new Mu(E,R);else if(b.mode===Do.LINE_LOOP)_=new YR(E,R);else if(b.mode===Do.POINTS)_=new qR(E,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(_.geometry.morphAttributes).length>0&&Cle(_,i),_.name=t.createUniqueName(i.name||"mesh_"+e),pu(_,i),b.extensions&&vh(r,_,b),t.assignFinalMaterial(_),h.push(_)}for(let v=0,A=h.length;v<A;v++)t.associations.set(h[v],{meshes:e,primitives:v});if(h.length===1)return i.extensions&&vh(r,h[0],i),h[0];const m=new xu;i.extensions&&vh(r,m,i),t.associations.set(m,{meshes:e});for(let v=0,A=h.length;v<A;v++)m.add(h[v]);return m})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new er(fO.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Su(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),pu(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const i=r.pop(),s=r,o=[],l=[];for(let c=0,d=s.length;c<d;c++){const h=s[c];if(h){o.push(h);const m=new nn;i!==null&&m.fromArray(i.array,c*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new E1(o,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],l=[],c=[],d=[];for(let h=0,m=r.channels.length;h<m;h++){const v=r.channels[h],A=r.samplers[v.sampler],E=v.target,b=E.node,_=r.parameters!==void 0?r.parameters[A.input]:A.input,R=r.parameters!==void 0?r.parameters[A.output]:A.output;E.node!==void 0&&(s.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",R)),c.push(A),d.push(E))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(h){const m=h[0],v=h[1],A=h[2],E=h[3],b=h[4],_=[];for(let R=0,T=m.length;R<T;R++){const M=m[R],I=v[R],P=A[R],B=E[R],F=b[R];if(M===void 0)continue;M.updateMatrix&&M.updateMatrix();const L=n._createAnimationTracks(M,I,P,B,F);if(L)for(let U=0;U<L.length;U++)_.push(L[U])}return new A0(i,void 0,_)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(i){const s=n._getNodeRef(n.meshCache,r.mesh,i);return r.weights!==void 0&&s.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],i=n._loadNodeShallow(e),s=[],o=r.children||[];for(let c=0,d=o.length;c<d;c++)s.push(n.getDependency("node",o[c]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([i,Promise.all(s),l]).then(function(c){const d=c[0],h=c[1],m=c[2];m!==null&&d.traverse(function(v){v.isSkinnedMesh&&v.bind(m,Lle)});for(let v=0,A=h.length;v<A;v++)d.add(h[v]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"",o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),i.camera!==void 0&&o.push(r.getDependency("camera",i.camera).then(function(c){return r._getNodeRef(r.cameraCache,i.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let d;if(i.isBone===!0?d=new U_:c.length>1?d=new xu:c.length===1?d=c[0]:d=new Wn,d!==c[0])for(let h=0,m=c.length;h<m;h++)d.add(c[h]);if(i.name&&(d.userData.name=i.name,d.name=s),pu(d,i),i.extensions&&vh(n,d,i),i.matrix!==void 0){const h=new nn;h.fromArray(i.matrix),d.applyMatrix4(h)}else i.translation!==void 0&&d.position.fromArray(i.translation),i.rotation!==void 0&&d.quaternion.fromArray(i.rotation),i.scale!==void 0&&d.scale.fromArray(i.scale);if(!r.associations.has(d))r.associations.set(d,{});else if(i.mesh!==void 0&&r.meshCache.refs[i.mesh]>1){const h=r.associations.get(d);r.associations.set(d,{...h})}return r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new xu;n.name&&(i.name=r.createUniqueName(n.name)),pu(i,n),n.extensions&&vh(t,i,n);const s=n.nodes||[],o=[];for(let l=0,c=s.length;l<c;l++)o.push(r.getDependency("node",s[l]));return Promise.all(o).then(function(l){for(let d=0,h=l.length;d<h;d++)i.add(l[d]);const c=d=>{const h=new Map;for(const[m,v]of r.associations)(m instanceof Br||m instanceof Ua)&&h.set(m,v);return d.traverse(m=>{const v=r.associations.get(m);v!=null&&h.set(m,v)}),h};return r.associations=c(i),i})}_createAnimationTracks(e,t,n,r,i){const s=[],o=e.name?e.name:e.uuid,l=[];Hd[i.path]===Hd.weights?e.traverse(function(m){m.morphTargetInfluences&&l.push(m.name?m.name:m.uuid)}):l.push(o);let c;switch(Hd[i.path]){case Hd.weights:c=Yh;break;case Hd.rotation:c=qh;break;case Hd.translation:case Hd.scale:c=Xh;break;default:switch(n.itemSize){case 1:c=Yh;break;case 2:case 3:default:c=Xh;break}break}const d=r.interpolation!==void 0?Mle[r.interpolation]:p0,h=this._getArrayFromAccessor(n);for(let m=0,v=l.length;m<v;m++){const A=new c(l[m]+"."+Hd[i.path],t.array,h,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),s.push(A)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=uw(t.constructor),r=new Float32Array(t.length);for(let i=0,s=t.length;i<s;i++)r[i]=t[i]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof qh?Rle:z6;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ole(a,e,t){const n=e.attributes,r=new hi;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new ae(l[0],l[1],l[2]),new ae(c[0],c[1],c[2])),o.normalized){const d=uw(a0[o.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const o=new ae,l=new ae;for(let c=0,d=i.length;c<d;c++){const h=i[c];if(h.POSITION!==void 0){const m=t.json.accessors[h.POSITION],v=m.min,A=m.max;if(v!==void 0&&A!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(A[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(A[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(A[2]))),m.normalized){const E=uw(a0[m.componentType]);l.multiplyScalar(E)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}a.boundingBox=r;const s=new $r;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,a.boundingSphere=s}function NI(a,e,t){const n=e.attributes,r=[];function i(s,o){return t.getDependency("accessor",s).then(function(l){a.setAttribute(o,l)})}for(const s in n){const o=cw[s]||s.toLowerCase();o in a.attributes||r.push(i(n[s],o))}if(e.indices!==void 0&&!a.index){const s=t.getDependency("accessor",e.indices).then(function(o){a.setIndex(o)});r.push(s)}return Fn.workingColorSpace!==pi&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Fn.workingColorSpace}" not supported.`),pu(a,e),Ole(a,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Nle(a,e.targets,t):a})}function Ule(){const a=_M(tle,"./models/object.glb");return x.jsx("primitive",{object:a.scene})}function Ble(){return x.jsx("div",{className:"threeD-container",children:x.jsx(Woe,{className:"three-canvas",camera:{position:[-1,1.5,3]},shadows:!0,children:x.jsxs(H.Suspense,{children:[x.jsx("directionalLight",{position:[-1.3,6,4.4],castShadow:!0,intensity:Math.PI*1}),x.jsx("ambientLight",{intensity:.5}),x.jsx(Ule,{}),x.jsx(ele,{target:[0,1,0]})]})})})}function Fle(){return x.jsx(e8,{children:x.jsxs(CB,{children:[x.jsx(xt,{path:"/",element:x.jsx(d8,{})}),x.jsx(xt,{path:"ASG-2024-12-17-1",element:x.jsx(u8,{})}),x.jsx(xt,{path:"ASG-2024-12-18-1",element:x.jsx(f8,{})}),x.jsx(xt,{path:"ASG-2024-12-18-2",element:x.jsx(h8,{})}),x.jsx(xt,{path:"ASG-2024-12-19-1",element:x.jsx(p8,{})}),x.jsx(xt,{path:"ASG-2024-12-19-2",element:x.jsx(m8,{})}),x.jsx(xt,{path:"ASG-2024-12-20-1",element:x.jsx(g8,{})}),x.jsx(xt,{path:"ASG-2024-12-23-1",element:x.jsx(KF,{})}),x.jsx(xt,{path:"ASG-2024-12-23-2",element:x.jsx(YF,{})}),x.jsx(xt,{path:"ASG-2024-12-24-1",element:x.jsx(qF,{})}),x.jsx(xt,{path:"ASG-2024-12-30-1",element:x.jsx(XF,{})}),x.jsx(xt,{path:"ASG-2024-12-31-1",element:x.jsx(JF,{})}),x.jsx(xt,{path:"ASG-2025-01-01-1",element:x.jsx(ZF,{})}),x.jsx(xt,{path:"ASG-2025-01-02-1",element:x.jsx(ek,{})}),x.jsx(xt,{path:"ASG-2025-01-06-1",element:x.jsx(ak,{})}),x.jsx(xt,{path:"ASG-2025-01-07-1",element:x.jsx(sk,{})}),x.jsx(xt,{path:"ASG-2025-01-08-1",element:x.jsx(ck,{})}),x.jsx(xt,{path:"ASG-2025-01-09-1",element:x.jsx(uk,{})}),x.jsx(xt,{path:"ASG-2025-01-10-1",element:x.jsx(dk,{})}),x.jsx(xt,{path:"ASG-2025-01-15-1",element:x.jsx(fk,{})}),x.jsx(xt,{path:"ASG-2025-01-16-1",element:x.jsx(hk,{})}),x.jsx(xt,{path:"ASG-2025-01-16-2",element:x.jsx(pk,{})}),x.jsx(xt,{path:"ASG-2025-01-21-1",element:x.jsx(mk,{})}),x.jsx(xt,{path:"ASG-2025-01-22-1",element:x.jsx(gk,{})}),x.jsx(xt,{path:"ASG-2025-02-13-1",element:x.jsx(vk,{})}),x.jsx(xt,{path:"ASG-2025-02-14-1",element:x.jsx(yk,{})}),x.jsx(xt,{path:"ASG-2025-02-17-1",element:x.jsx(Ak,{})}),x.jsx(xt,{path:"ASG-2025-02-18-1",element:x.jsx(_k,{})}),x.jsx(xt,{path:"ASG-2025-02-18-2",element:x.jsx(bk,{})}),x.jsx(xt,{path:"ASG-2025-02-27-1",element:x.jsx(Sk,{})}),x.jsx(xt,{path:"ASG-2025-02-28-1",element:x.jsx(Ek,{})}),x.jsx(xt,{path:"ASG-2025-03-03-1",element:x.jsx(wk,{})}),x.jsx(xt,{path:"ASG-2025-03-04-1",element:x.jsx(x7,{})}),x.jsx(xt,{path:"ASG-2025-03-05-1",element:x.jsx(A7,{})}),x.jsx(xt,{path:"ASG-2025-03-05-2",element:x.jsx(_7,{})}),x.jsx(xt,{path:"ASG-2025-03-05-3",element:x.jsx(b7,{})}),x.jsx(xt,{path:"ASG-2025-03-06-1",element:x.jsx(S7,{})}),x.jsx(xt,{path:"ASG-2025-03-19-1",element:x.jsx(I7,{})}),x.jsx(xt,{path:"ASG-2025-03-20-1",element:x.jsx(F7,{})}),x.jsx(xt,{path:"ASG-2025-03-21-1",element:x.jsx(X7,{})}),x.jsx(xt,{path:"ASG-2025-03-25-1",element:x.jsx(J7,{})}),x.jsx(xt,{path:"ASG-2025-03-25-2",element:x.jsx(mH,{})}),x.jsx(xt,{path:"ASG-2025-04-22-1",element:x.jsx(i9,{})}),x.jsx(xt,{path:"ASG-2025-04-22-2",element:x.jsx(l9,{})}),x.jsx(xt,{path:"ASG-2025-04-23-1",element:x.jsx(c9,{})}),x.jsx(xt,{path:"ASG-2025-04-25-1",element:x.jsx(u9,{})}),x.jsx(xt,{path:"ASG-2025-04-30-1",element:x.jsx(d9,{})}),x.jsx(xt,{path:"ASG-2025-04-30-2",element:x.jsx(f9,{})}),x.jsx(xt,{path:"ASG-2025-04-30-3",element:x.jsx(h9,{})}),x.jsx(xt,{path:"ASG-2025-05-14-1",element:x.jsx(p9,{})}),x.jsx(xt,{path:"ASG-2025-05-15-1",element:x.jsx(m9,{})}),x.jsx(xt,{path:"ASG-2025-05-16-1",element:x.jsx(nG,{})}),x.jsx(xt,{path:"ASG-2025-05-19-1",element:x.jsx(bZ,{})}),x.jsx(xt,{path:"ASG-2025-07-08-1",element:x.jsx(SZ,{})}),x.jsx(xt,{path:"ASG-2025-07-09-1",element:x.jsx(EZ,{})}),x.jsx(xt,{path:"ASG-2025-07-14-1",element:x.jsx(DZ,{})}),x.jsx(xt,{path:"ASG-2025-07-16-1",element:x.jsx(LZ,{})}),x.jsx(xt,{path:"ASG-2025-07-17-1",element:x.jsx(PZ,{})}),x.jsx(xt,{path:"ASG-2025-07-21-1",element:x.jsx(OZ,{})}),x.jsx(xt,{path:"ASG-2025-07-22-1",element:x.jsx(UZ,{})}),x.jsx(xt,{path:"ASG-2025-07-23-1",element:x.jsx(BZ,{})}),x.jsx(xt,{path:"ASG-2025-07-25-1",element:x.jsx(FZ,{})}),x.jsx(xt,{path:"ASG-2025-07-28-1",element:x.jsx(kZ,{})}),x.jsx(xt,{path:"ASG-2025-07-29-1",element:x.jsx(HZ,{})}),x.jsx(xt,{path:"ASG-2025-07-30-1",element:x.jsx(jZ,{})}),x.jsx(xt,{path:"ASG-2025-07-31-1",element:x.jsx(zZ,{})}),x.jsx(xt,{path:"ASG-2025-08-01-1",element:x.jsx(GZ,{})}),x.jsx(xt,{path:"ASG-2025-08-04-1",element:x.jsx(VZ,{})}),x.jsx(xt,{path:"ASG-2025-08-05-1",element:x.jsx(WZ,{})}),x.jsx(xt,{path:"ASG-2025-08-07-1",element:x.jsx(KZ,{})}),x.jsx(xt,{path:"ASG-2025-08-11-1",element:x.jsx(qZ,{})}),x.jsx(xt,{path:"ASG-2025-08-12-1",element:x.jsx(XZ,{})}),x.jsx(xt,{path:"ASG-2025-08-13-1",element:x.jsx(JZ,{})}),x.jsx(xt,{path:"ASG-2025-08-14-1",element:x.jsx($Z,{})}),x.jsx(xt,{path:"ASG-2025-08-15-1",element:x.jsx(nQ,{})}),x.jsx(xt,{path:"ASG-2025-08-18-1",element:x.jsx(aQ,{})}),x.jsx(xt,{path:"ASG-2025-08-19-1",element:x.jsx(oQ,{})}),x.jsx(xt,{path:"ASG-2025-08-21-1",element:x.jsx(uQ,{})}),x.jsx(xt,{path:"ASG-2025-08-22-1",element:x.jsx(fQ,{})}),x.jsx(xt,{path:"ASG-2025-08-26-1",element:x.jsx(hQ,{})}),x.jsx(xt,{path:"ASG-2025-08-27-1",element:x.jsx(pQ,{})}),x.jsx(xt,{path:"ASG-2025-09-01-1",element:x.jsx(mQ,{})}),x.jsx(xt,{path:"ASG-2025-09-02-1",element:x.jsx(Ble,{})})]})})}const kle=kU.createRoot(document.getElementById("root"));kle.render(x.jsx(Fle,{}));
